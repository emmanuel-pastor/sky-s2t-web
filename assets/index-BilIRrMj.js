var IP=Object.defineProperty;var TP=(t,e,r)=>e in t?IP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ir=(t,e,r)=>(TP(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();var F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _P(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function AP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),r}var Bg={exports:{}},ec={},Fg={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ks=Symbol.for("react.element"),kP=Symbol.for("react.portal"),bP=Symbol.for("react.fragment"),MP=Symbol.for("react.strict_mode"),OP=Symbol.for("react.profiler"),DP=Symbol.for("react.provider"),zP=Symbol.for("react.context"),NP=Symbol.for("react.forward_ref"),jP=Symbol.for("react.suspense"),LP=Symbol.for("react.memo"),xP=Symbol.for("react.lazy"),Yd=Symbol.iterator;function BP(t){return t===null||typeof t!="object"?null:(t=Yd&&t[Yd]||t["@@iterator"],typeof t=="function"?t:null)}var qg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ug=Object.assign,$g={};function $n(t,e,r){this.props=t,this.context=e,this.refs=$g,this.updater=r||qg}$n.prototype.isReactComponent={};$n.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$n.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wg(){}Wg.prototype=$n.prototype;function _p(t,e,r){this.props=t,this.context=e,this.refs=$g,this.updater=r||qg}var Ap=_p.prototype=new Wg;Ap.constructor=_p;Ug(Ap,$n.prototype);Ap.isPureReactComponent=!0;var Zd=Array.isArray,Vg=Object.prototype.hasOwnProperty,kp={current:null},Hg={key:!0,ref:!0,__self:!0,__source:!0};function Kg(t,e,r){var n,o={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Vg.call(e,n)&&!Hg.hasOwnProperty(n)&&(o[n]=e[n]);var i=arguments.length-2;if(i===1)o.children=r;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(n in i=t.defaultProps,i)o[n]===void 0&&(o[n]=i[n]);return{$$typeof:ks,type:t,key:s,ref:a,props:o,_owner:kp.current}}function FP(t,e){return{$$typeof:ks,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ks}function qP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var eh=/\/+/g;function Mu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qP(""+t.key):e.toString(36)}function ha(t,e,r,n,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ks:case kP:a=!0}}if(a)return a=t,o=o(a),t=n===""?"."+Mu(a,0):n,Zd(o)?(r="",t!=null&&(r=t.replace(eh,"$&/")+"/"),ha(o,e,r,"",function(u){return u})):o!=null&&(bp(o)&&(o=FP(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(eh,"$&/")+"/")+t)),e.push(o)),1;if(a=0,n=n===""?".":n+":",Zd(t))for(var i=0;i<t.length;i++){s=t[i];var c=n+Mu(s,i);a+=ha(s,e,r,c,o)}else if(c=BP(t),typeof c=="function")for(t=c.call(t),i=0;!(s=t.next()).done;)s=s.value,c=n+Mu(s,i++),a+=ha(s,e,r,c,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Hs(t,e,r){if(t==null)return t;var n=[],o=0;return ha(t,n,"","",function(s){return e.call(r,s,o++)}),n}function UP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Be={current:null},va={transition:null},$P={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:va,ReactCurrentOwner:kp};$.Children={map:Hs,forEach:function(t,e,r){Hs(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Hs(t,function(){e++}),e},toArray:function(t){return Hs(t,function(e){return e})||[]},only:function(t){if(!bp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$.Component=$n;$.Fragment=bP;$.Profiler=OP;$.PureComponent=_p;$.StrictMode=MP;$.Suspense=jP;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$P;$.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Ug({},t.props),o=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=kp.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var i=t.type.defaultProps;for(c in e)Vg.call(e,c)&&!Hg.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&i!==void 0?i[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];n.children=i}return{$$typeof:ks,type:t.type,key:o,ref:s,props:n,_owner:a}};$.createContext=function(t){return t={$$typeof:zP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DP,_context:t},t.Consumer=t};$.createElement=Kg;$.createFactory=function(t){var e=Kg.bind(null,t);return e.type=t,e};$.createRef=function(){return{current:null}};$.forwardRef=function(t){return{$$typeof:NP,render:t}};$.isValidElement=bp;$.lazy=function(t){return{$$typeof:xP,_payload:{_status:-1,_result:t},_init:UP}};$.memo=function(t,e){return{$$typeof:LP,type:t,compare:e===void 0?null:e}};$.startTransition=function(t){var e=va.transition;va.transition={};try{t()}finally{va.transition=e}};$.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};$.useCallback=function(t,e){return Be.current.useCallback(t,e)};$.useContext=function(t){return Be.current.useContext(t)};$.useDebugValue=function(){};$.useDeferredValue=function(t){return Be.current.useDeferredValue(t)};$.useEffect=function(t,e){return Be.current.useEffect(t,e)};$.useId=function(){return Be.current.useId()};$.useImperativeHandle=function(t,e,r){return Be.current.useImperativeHandle(t,e,r)};$.useInsertionEffect=function(t,e){return Be.current.useInsertionEffect(t,e)};$.useLayoutEffect=function(t,e){return Be.current.useLayoutEffect(t,e)};$.useMemo=function(t,e){return Be.current.useMemo(t,e)};$.useReducer=function(t,e,r){return Be.current.useReducer(t,e,r)};$.useRef=function(t){return Be.current.useRef(t)};$.useState=function(t){return Be.current.useState(t)};$.useSyncExternalStore=function(t,e,r){return Be.current.useSyncExternalStore(t,e,r)};$.useTransition=function(){return Be.current.useTransition()};$.version="18.2.0";Fg.exports=$;var H=Fg.exports;const WP=_P(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP=H,HP=Symbol.for("react.element"),KP=Symbol.for("react.fragment"),JP=Object.prototype.hasOwnProperty,GP=VP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QP={key:!0,ref:!0,__self:!0,__source:!0};function Jg(t,e,r){var n,o={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)JP.call(e,n)&&!QP.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)o[n]===void 0&&(o[n]=e[n]);return{$$typeof:HP,type:t,key:s,ref:a,props:o,_owner:GP.current}}ec.Fragment=KP;ec.jsx=Jg;ec.jsxs=Jg;Bg.exports=ec;var pt=Bg.exports,wl={},Gg={exports:{}},Ye={},Qg={exports:{}},Xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_,M){var N=_.length;_.push(M);e:for(;0<N;){var K=N-1>>>1,Q=_[K];if(0<o(Q,M))_[K]=M,_[N]=Q,N=K;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var M=_[0],N=_.pop();if(N!==M){_[0]=N;e:for(var K=0,Q=_.length,un=Q>>>1;K<un;){var At=2*(K+1)-1,Xn=_[At],kt=At+1,ln=_[kt];if(0>o(Xn,N))kt<Q&&0>o(ln,Xn)?(_[K]=ln,_[kt]=N,K=kt):(_[K]=Xn,_[At]=N,K=At);else if(kt<Q&&0>o(ln,N))_[K]=ln,_[kt]=N,K=kt;else break e}}return M}function o(_,M){var N=_.sortIndex-M.sortIndex;return N!==0?N:_.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,i=a.now();t.unstable_now=function(){return a.now()-i}}var c=[],u=[],l=1,p=null,d=3,h=!1,v=!1,m=!1,S=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(_){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=_)n(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=r(u)}}function C(_){if(m=!1,y(_),!v)if(r(c)!==null)v=!0,Pt(P);else{var M=r(u);M!==null&&Kt(C,M.startTime-_)}}function P(_,M){v=!1,m&&(m=!1,f(w),w=-1),h=!0;var N=d;try{for(y(M),p=r(c);p!==null&&(!(p.expirationTime>M)||_&&!ue());){var K=p.callback;if(typeof K=="function"){p.callback=null,d=p.priorityLevel;var Q=K(p.expirationTime<=M);M=t.unstable_now(),typeof Q=="function"?p.callback=Q:p===r(c)&&n(c),y(M)}else n(c);p=r(c)}if(p!==null)var un=!0;else{var At=r(u);At!==null&&Kt(C,At.startTime-M),un=!1}return un}finally{p=null,d=N,h=!1}}var R=!1,T=null,w=-1,B=5,D=-1;function ue(){return!(t.unstable_now()-D<B)}function W(){if(T!==null){var _=t.unstable_now();D=_;var M=!0;try{M=T(!0,_)}finally{M?ie():(R=!1,T=null)}}else R=!1}var ie;if(typeof g=="function")ie=function(){g(W)};else if(typeof MessageChannel<"u"){var Ct=new MessageChannel,cn=Ct.port2;Ct.port1.onmessage=W,ie=function(){cn.postMessage(null)}}else ie=function(){S(W,0)};function Pt(_){T=_,R||(R=!0,ie())}function Kt(_,M){w=S(function(){_(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,Pt(P))},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(_){switch(d){case 1:case 2:case 3:var M=3;break;default:M=d}var N=d;d=M;try{return _()}finally{d=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_,M){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var N=d;d=_;try{return M()}finally{d=N}},t.unstable_scheduleCallback=function(_,M,N){var K=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?K+N:K):N=K,_){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=N+Q,_={id:l++,callback:M,priorityLevel:_,startTime:N,expirationTime:Q,sortIndex:-1},N>K?(_.sortIndex=N,e(u,_),r(c)===null&&_===r(u)&&(m?(f(w),w=-1):m=!0,Kt(C,N-K))):(_.sortIndex=Q,e(c,_),v||h||(v=!0,Pt(P))),_},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(_){var M=d;return function(){var N=d;d=M;try{return _.apply(this,arguments)}finally{d=N}}}})(Xg);Qg.exports=Xg;var XP=Qg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg=H,Xe=XP;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zg=new Set,us={};function nn(t,e){On(t,e),On(t+"Capture",e)}function On(t,e){for(us[t]=e,t=0;t<e.length;t++)Zg.add(e[t])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Il=Object.prototype.hasOwnProperty,YP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,th={},rh={};function ZP(t){return Il.call(rh,t)?!0:Il.call(th,t)?!1:YP.test(t)?rh[t]=!0:(th[t]=!0,!1)}function eR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tR(t,e,r,n){if(e===null||typeof e>"u"||eR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fe(t,e,r,n,o,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ee[t]=new Fe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ee[e]=new Fe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ee[t]=new Fe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ee[t]=new Fe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ee[t]=new Fe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ee[t]=new Fe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ee[t]=new Fe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ee[t]=new Fe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ee[t]=new Fe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mp=/[\-:]([a-z])/g;function Op(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mp,Op);Ee[e]=new Fe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mp,Op);Ee[e]=new Fe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mp,Op);Ee[e]=new Fe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ee[t]=new Fe(t,1,!1,t.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new Fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ee[t]=new Fe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dp(t,e,r,n){var o=Ee.hasOwnProperty(e)?Ee[e]:null;(o!==null?o.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tR(e,r,o,n)&&(r=null),n||o===null?ZP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,n=o.attributeNamespace,r===null?t.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Vt=Yg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ks=Symbol.for("react.element"),vn=Symbol.for("react.portal"),fn=Symbol.for("react.fragment"),zp=Symbol.for("react.strict_mode"),Tl=Symbol.for("react.profiler"),em=Symbol.for("react.provider"),tm=Symbol.for("react.context"),Np=Symbol.for("react.forward_ref"),_l=Symbol.for("react.suspense"),Al=Symbol.for("react.suspense_list"),jp=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),rm=Symbol.for("react.offscreen"),nh=Symbol.iterator;function Yn(t){return t===null||typeof t!="object"?null:(t=nh&&t[nh]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,Ou;function Ko(t){if(Ou===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ou=e&&e[1]||""}return`
`+Ou+t}var Du=!1;function zu(t,e){if(!t||Du)return"";Du=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=n.stack.split(`
`),a=o.length-1,i=s.length-1;1<=a&&0<=i&&o[a]!==s[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==s[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==s[i]){var c=`
`+o[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=i);break}}}finally{Du=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ko(t):""}function rR(t){switch(t.tag){case 5:return Ko(t.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return t=zu(t.type,!1),t;case 11:return t=zu(t.type.render,!1),t;case 1:return t=zu(t.type,!0),t;default:return""}}function kl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fn:return"Fragment";case vn:return"Portal";case Tl:return"Profiler";case zp:return"StrictMode";case _l:return"Suspense";case Al:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tm:return(t.displayName||"Context")+".Consumer";case em:return(t._context.displayName||"Context")+".Provider";case Np:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jp:return e=t.displayName||null,e!==null?e:kl(t.type)||"Memo";case Xt:e=t._payload,t=t._init;try{return kl(t(e))}catch{}}return null}function nR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kl(e);case 8:return e===zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iR(t){var e=nm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Js(t){t._valueTracker||(t._valueTracker=iR(t))}function im(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=nm(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function _a(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bl(t,e){var r=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ih(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=fr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function om(t,e){e=e.checked,e!=null&&Dp(t,"checked",e,!1)}function Ml(t,e){om(t,e);var r=fr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ol(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ol(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oh(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ol(t,e,r){(e!=="number"||_a(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Jo=Array.isArray;function Tn(t,e,r,n){if(t=t.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=e.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&n&&(t[r].defaultSelected=!0)}else{for(r=""+fr(r),e=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,n&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Dl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sh(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(I(92));if(Jo(r)){if(1<r.length)throw Error(I(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fr(r)}}function sm(t,e){var r=fr(e.value),n=fr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function ah(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function am(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?am(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gs,cm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,o){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ls(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oR=["Webkit","ms","Moz","O"];Object.keys(Zo).forEach(function(t){oR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zo[e]=Zo[t]})});function um(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Zo.hasOwnProperty(t)&&Zo[t]?(""+e).trim():e+"px"}function lm(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=um(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,o):t[r]=o}}var sR=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nl(t,e){if(e){if(sR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function jl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ll=null;function Lp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xl=null,_n=null,An=null;function ch(t){if(t=Os(t)){if(typeof xl!="function")throw Error(I(280));var e=t.stateNode;e&&(e=oc(e),xl(t.stateNode,t.type,e))}}function pm(t){_n?An?An.push(t):An=[t]:_n=t}function dm(){if(_n){var t=_n,e=An;if(An=_n=null,ch(t),e)for(t=0;t<e.length;t++)ch(e[t])}}function hm(t,e){return t(e)}function vm(){}var Nu=!1;function fm(t,e,r){if(Nu)return t(e,r);Nu=!0;try{return hm(t,e,r)}finally{Nu=!1,(_n!==null||An!==null)&&(vm(),dm())}}function ps(t,e){var r=t.stateNode;if(r===null)return null;var n=oc(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(I(231,e,typeof r));return r}var Bl=!1;if(qt)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){Bl=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{Bl=!1}function aR(t,e,r,n,o,s,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(l){this.onError(l)}}var es=!1,Aa=null,ka=!1,Fl=null,cR={onError:function(t){es=!0,Aa=t}};function uR(t,e,r,n,o,s,a,i,c){es=!1,Aa=null,aR.apply(cR,arguments)}function lR(t,e,r,n,o,s,a,i,c){if(uR.apply(this,arguments),es){if(es){var u=Aa;es=!1,Aa=null}else throw Error(I(198));ka||(ka=!0,Fl=u)}}function on(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function gm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uh(t){if(on(t)!==t)throw Error(I(188))}function pR(t){var e=t.alternate;if(!e){if(e=on(t),e===null)throw Error(I(188));return e!==t?null:t}for(var r=t,n=e;;){var o=r.return;if(o===null)break;var s=o.alternate;if(s===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return uh(o),t;if(s===n)return uh(o),e;s=s.sibling}throw Error(I(188))}if(r.return!==n.return)r=o,n=s;else{for(var a=!1,i=o.child;i;){if(i===r){a=!0,r=o,n=s;break}if(i===n){a=!0,n=o,r=s;break}i=i.sibling}if(!a){for(i=s.child;i;){if(i===r){a=!0,r=s,n=o;break}if(i===n){a=!0,n=s,r=o;break}i=i.sibling}if(!a)throw Error(I(189))}}if(r.alternate!==n)throw Error(I(190))}if(r.tag!==3)throw Error(I(188));return r.stateNode.current===r?t:e}function mm(t){return t=pR(t),t!==null?ym(t):null}function ym(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ym(t);if(e!==null)return e;t=t.sibling}return null}var Sm=Xe.unstable_scheduleCallback,lh=Xe.unstable_cancelCallback,dR=Xe.unstable_shouldYield,hR=Xe.unstable_requestPaint,ce=Xe.unstable_now,vR=Xe.unstable_getCurrentPriorityLevel,xp=Xe.unstable_ImmediatePriority,Cm=Xe.unstable_UserBlockingPriority,ba=Xe.unstable_NormalPriority,fR=Xe.unstable_LowPriority,Pm=Xe.unstable_IdlePriority,tc=null,Tt=null;function gR(t){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(tc,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:SR,mR=Math.log,yR=Math.LN2;function SR(t){return t>>>=0,t===0?32:31-(mR(t)/yR|0)|0}var Qs=64,Xs=4194304;function Go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ma(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,o=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var i=a&~o;i!==0?n=Go(i):(s&=a,s!==0&&(n=Go(s)))}else a=r&~o,a!==0?n=Go(a):s!==0&&(n=Go(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&o)&&(o=n&-n,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-vt(e),o=1<<r,n|=t[r],e&=~o;return n}function CR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-vt(s),i=1<<a,c=o[a];c===-1?(!(i&r)||i&n)&&(o[a]=CR(i,e)):c<=e&&(t.expiredLanes|=i),s&=~i}}function ql(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rm(){var t=Qs;return Qs<<=1,!(Qs&4194240)&&(Qs=64),t}function ju(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function bs(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=r}function RR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-vt(r),s=1<<o;e[o]=0,n[o]=-1,t[o]=-1,r&=~s}}function Bp(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-vt(r),o=1<<n;o&e|t[n]&e&&(t[n]|=e),r&=~o}}var J=0;function Em(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wm,Fp,Im,Tm,_m,Ul=!1,Ys=[],sr=null,ar=null,cr=null,ds=new Map,hs=new Map,tr=[],ER="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ph(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":ds.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(e.pointerId)}}function ei(t,e,r,n,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Os(e),e!==null&&Fp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function wR(t,e,r,n,o){switch(e){case"focusin":return sr=ei(sr,t,e,r,n,o),!0;case"dragenter":return ar=ei(ar,t,e,r,n,o),!0;case"mouseover":return cr=ei(cr,t,e,r,n,o),!0;case"pointerover":var s=o.pointerId;return ds.set(s,ei(ds.get(s)||null,t,e,r,n,o)),!0;case"gotpointercapture":return s=o.pointerId,hs.set(s,ei(hs.get(s)||null,t,e,r,n,o)),!0}return!1}function Am(t){var e=Wr(t.target);if(e!==null){var r=on(e);if(r!==null){if(e=r.tag,e===13){if(e=gm(r),e!==null){t.blockedOn=e,_m(t.priority,function(){Im(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=$l(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ll=n,r.target.dispatchEvent(n),Ll=null}else return e=Os(r),e!==null&&Fp(e),t.blockedOn=r,!1;e.shift()}return!0}function dh(t,e,r){fa(t)&&r.delete(e)}function IR(){Ul=!1,sr!==null&&fa(sr)&&(sr=null),ar!==null&&fa(ar)&&(ar=null),cr!==null&&fa(cr)&&(cr=null),ds.forEach(dh),hs.forEach(dh)}function ti(t,e){t.blockedOn===e&&(t.blockedOn=null,Ul||(Ul=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,IR)))}function vs(t){function e(o){return ti(o,t)}if(0<Ys.length){ti(Ys[0],t);for(var r=1;r<Ys.length;r++){var n=Ys[r];n.blockedOn===t&&(n.blockedOn=null)}}for(sr!==null&&ti(sr,t),ar!==null&&ti(ar,t),cr!==null&&ti(cr,t),ds.forEach(e),hs.forEach(e),r=0;r<tr.length;r++)n=tr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<tr.length&&(r=tr[0],r.blockedOn===null);)Am(r),r.blockedOn===null&&tr.shift()}var kn=Vt.ReactCurrentBatchConfig,Oa=!0;function TR(t,e,r,n){var o=J,s=kn.transition;kn.transition=null;try{J=1,qp(t,e,r,n)}finally{J=o,kn.transition=s}}function _R(t,e,r,n){var o=J,s=kn.transition;kn.transition=null;try{J=4,qp(t,e,r,n)}finally{J=o,kn.transition=s}}function qp(t,e,r,n){if(Oa){var o=$l(t,e,r,n);if(o===null)Hu(t,e,n,Da,r),ph(t,n);else if(wR(o,t,e,r,n))n.stopPropagation();else if(ph(t,n),e&4&&-1<ER.indexOf(t)){for(;o!==null;){var s=Os(o);if(s!==null&&wm(s),s=$l(t,e,r,n),s===null&&Hu(t,e,n,Da,r),s===o)break;o=s}o!==null&&n.stopPropagation()}else Hu(t,e,n,null,r)}}var Da=null;function $l(t,e,r,n){if(Da=null,t=Lp(n),t=Wr(t),t!==null)if(e=on(t),e===null)t=null;else if(r=e.tag,r===13){if(t=gm(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Da=t,null}function km(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vR()){case xp:return 1;case Cm:return 4;case ba:case fR:return 16;case Pm:return 536870912;default:return 16}default:return 16}}var nr=null,Up=null,ga=null;function bm(){if(ga)return ga;var t,e=Up,r=e.length,n,o="value"in nr?nr.value:nr.textContent,s=o.length;for(t=0;t<r&&e[t]===o[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===o[s-n];n++);return ga=o.slice(t,1<n?1-n:void 0)}function ma(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zs(){return!0}function hh(){return!1}function Ze(t){function e(r,n,o,s,a){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var i in t)t.hasOwnProperty(i)&&(r=t[i],this[i]=r?r(s):s[i]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zs:hh,this.isPropagationStopped=hh,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),e}var Wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$p=Ze(Wn),Ms=ne({},Wn,{view:0,detail:0}),AR=Ze(Ms),Lu,xu,ri,rc=ne({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(Lu=t.screenX-ri.screenX,xu=t.screenY-ri.screenY):xu=Lu=0,ri=t),Lu)},movementY:function(t){return"movementY"in t?t.movementY:xu}}),vh=Ze(rc),kR=ne({},rc,{dataTransfer:0}),bR=Ze(kR),MR=ne({},Ms,{relatedTarget:0}),Bu=Ze(MR),OR=ne({},Wn,{animationName:0,elapsedTime:0,pseudoElement:0}),DR=Ze(OR),zR=ne({},Wn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NR=Ze(zR),jR=ne({},Wn,{data:0}),fh=Ze(jR),LR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BR[t])?!!e[t]:!1}function Wp(){return FR}var qR=ne({},Ms,{key:function(t){if(t.key){var e=LR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ma(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wp,charCode:function(t){return t.type==="keypress"?ma(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ma(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UR=Ze(qR),$R=ne({},rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gh=Ze($R),WR=ne({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wp}),VR=Ze(WR),HR=ne({},Wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),KR=Ze(HR),JR=ne({},rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GR=Ze(JR),QR=[9,13,27,32],Vp=qt&&"CompositionEvent"in window,ts=null;qt&&"documentMode"in document&&(ts=document.documentMode);var XR=qt&&"TextEvent"in window&&!ts,Mm=qt&&(!Vp||ts&&8<ts&&11>=ts),mh=" ",yh=!1;function Om(t,e){switch(t){case"keyup":return QR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gn=!1;function YR(t,e){switch(t){case"compositionend":return Dm(e);case"keypress":return e.which!==32?null:(yh=!0,mh);case"textInput":return t=e.data,t===mh&&yh?null:t;default:return null}}function ZR(t,e){if(gn)return t==="compositionend"||!Vp&&Om(t,e)?(t=bm(),ga=Up=nr=null,gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mm&&e.locale!=="ko"?null:e.data;default:return null}}var eE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eE[t.type]:e==="textarea"}function zm(t,e,r,n){pm(n),e=za(e,"onChange"),0<e.length&&(r=new $p("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var rs=null,fs=null;function tE(t){Vm(t,0)}function nc(t){var e=Sn(t);if(im(e))return t}function rE(t,e){if(t==="change")return e}var Nm=!1;if(qt){var Fu;if(qt){var qu="oninput"in document;if(!qu){var Ch=document.createElement("div");Ch.setAttribute("oninput","return;"),qu=typeof Ch.oninput=="function"}Fu=qu}else Fu=!1;Nm=Fu&&(!document.documentMode||9<document.documentMode)}function Ph(){rs&&(rs.detachEvent("onpropertychange",jm),fs=rs=null)}function jm(t){if(t.propertyName==="value"&&nc(fs)){var e=[];zm(e,fs,t,Lp(t)),fm(tE,e)}}function nE(t,e,r){t==="focusin"?(Ph(),rs=e,fs=r,rs.attachEvent("onpropertychange",jm)):t==="focusout"&&Ph()}function iE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nc(fs)}function oE(t,e){if(t==="click")return nc(e)}function sE(t,e){if(t==="input"||t==="change")return nc(e)}function aE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gt=typeof Object.is=="function"?Object.is:aE;function gs(t,e){if(gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!Il.call(e,o)||!gt(t[o],e[o]))return!1}return!0}function Rh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Eh(t,e){var r=Rh(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rh(r)}}function Lm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Lm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xm(){for(var t=window,e=_a();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=_a(t.document)}return e}function Hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cE(t){var e=xm(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Lm(r.ownerDocument.documentElement,r)){if(n!==null&&Hp(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,s=Math.min(n.start,o);n=n.end===void 0?s:Math.min(n.end,o),!t.extend&&s>n&&(o=n,n=s,s=o),o=Eh(r,s);var a=Eh(r,n);o&&a&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uE=qt&&"documentMode"in document&&11>=document.documentMode,mn=null,Wl=null,ns=null,Vl=!1;function wh(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Vl||mn==null||mn!==_a(n)||(n=mn,"selectionStart"in n&&Hp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ns&&gs(ns,n)||(ns=n,n=za(Wl,"onSelect"),0<n.length&&(e=new $p("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=mn)))}function ea(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var yn={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},Uu={},Bm={};qt&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);function ic(t){if(Uu[t])return Uu[t];if(!yn[t])return t;var e=yn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Bm)return Uu[t]=e[r];return t}var Fm=ic("animationend"),qm=ic("animationiteration"),Um=ic("animationstart"),$m=ic("transitionend"),Wm=new Map,Ih="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(t,e){Wm.set(t,e),nn(e,[t])}for(var $u=0;$u<Ih.length;$u++){var Wu=Ih[$u],lE=Wu.toLowerCase(),pE=Wu[0].toUpperCase()+Wu.slice(1);yr(lE,"on"+pE)}yr(Fm,"onAnimationEnd");yr(qm,"onAnimationIteration");yr(Um,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr($m,"onTransitionEnd");On("onMouseEnter",["mouseout","mouseover"]);On("onMouseLeave",["mouseout","mouseover"]);On("onPointerEnter",["pointerout","pointerover"]);On("onPointerLeave",["pointerout","pointerover"]);nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nn("onBeforeInput",["compositionend","keypress","textInput","paste"]);nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function Th(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,lR(n,e,void 0,t),t.currentTarget=null}function Vm(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],o=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var i=n[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==s&&o.isPropagationStopped())break e;Th(o,i,u),s=c}else for(a=0;a<n.length;a++){if(i=n[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==s&&o.isPropagationStopped())break e;Th(o,i,u),s=c}}}if(ka)throw t=Fl,ka=!1,Fl=null,t}function Y(t,e){var r=e[Ql];r===void 0&&(r=e[Ql]=new Set);var n=t+"__bubble";r.has(n)||(Hm(e,t,2,!1),r.add(n))}function Vu(t,e,r){var n=0;e&&(n|=4),Hm(r,t,n,e)}var ta="_reactListening"+Math.random().toString(36).slice(2);function ms(t){if(!t[ta]){t[ta]=!0,Zg.forEach(function(r){r!=="selectionchange"&&(dE.has(r)||Vu(r,!1,t),Vu(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ta]||(e[ta]=!0,Vu("selectionchange",!1,e))}}function Hm(t,e,r,n){switch(km(e)){case 1:var o=TR;break;case 4:o=_R;break;default:o=qp}r=o.bind(null,e,r,t),o=void 0,!Bl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),n?o!==void 0?t.addEventListener(e,r,{capture:!0,passive:o}):t.addEventListener(e,r,!0):o!==void 0?t.addEventListener(e,r,{passive:o}):t.addEventListener(e,r,!1)}function Hu(t,e,r,n,o){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var i=n.stateNode.containerInfo;if(i===o||i.nodeType===8&&i.parentNode===o)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;a=a.return}for(;i!==null;){if(a=Wr(i),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}i=i.parentNode}}n=n.return}fm(function(){var u=s,l=Lp(r),p=[];e:{var d=Wm.get(t);if(d!==void 0){var h=$p,v=t;switch(t){case"keypress":if(ma(r)===0)break e;case"keydown":case"keyup":h=UR;break;case"focusin":v="focus",h=Bu;break;case"focusout":v="blur",h=Bu;break;case"beforeblur":case"afterblur":h=Bu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=vh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=bR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=VR;break;case Fm:case qm:case Um:h=DR;break;case $m:h=KR;break;case"scroll":h=AR;break;case"wheel":h=GR;break;case"copy":case"cut":case"paste":h=NR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=gh}var m=(e&4)!==0,S=!m&&t==="scroll",f=m?d!==null?d+"Capture":null:d;m=[];for(var g=u,y;g!==null;){y=g;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,f!==null&&(C=ps(g,f),C!=null&&m.push(ys(g,C,y)))),S)break;g=g.return}0<m.length&&(d=new h(d,v,null,r,l),p.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&r!==Ll&&(v=r.relatedTarget||r.fromElement)&&(Wr(v)||v[Ut]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(v=r.relatedTarget||r.toElement,h=u,v=v?Wr(v):null,v!==null&&(S=on(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=u),h!==v)){if(m=vh,C="onMouseLeave",f="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(m=gh,C="onPointerLeave",f="onPointerEnter",g="pointer"),S=h==null?d:Sn(h),y=v==null?d:Sn(v),d=new m(C,g+"leave",h,r,l),d.target=S,d.relatedTarget=y,C=null,Wr(l)===u&&(m=new m(f,g+"enter",v,r,l),m.target=y,m.relatedTarget=S,C=m),S=C,h&&v)t:{for(m=h,f=v,g=0,y=m;y;y=pn(y))g++;for(y=0,C=f;C;C=pn(C))y++;for(;0<g-y;)m=pn(m),g--;for(;0<y-g;)f=pn(f),y--;for(;g--;){if(m===f||f!==null&&m===f.alternate)break t;m=pn(m),f=pn(f)}m=null}else m=null;h!==null&&_h(p,d,h,m,!1),v!==null&&S!==null&&_h(p,S,v,m,!0)}}e:{if(d=u?Sn(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var P=rE;else if(Sh(d))if(Nm)P=sE;else{P=iE;var R=nE}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=oE);if(P&&(P=P(t,u))){zm(p,P,r,l);break e}R&&R(t,d,u),t==="focusout"&&(R=d._wrapperState)&&R.controlled&&d.type==="number"&&Ol(d,"number",d.value)}switch(R=u?Sn(u):window,t){case"focusin":(Sh(R)||R.contentEditable==="true")&&(mn=R,Wl=u,ns=null);break;case"focusout":ns=Wl=mn=null;break;case"mousedown":Vl=!0;break;case"contextmenu":case"mouseup":case"dragend":Vl=!1,wh(p,r,l);break;case"selectionchange":if(uE)break;case"keydown":case"keyup":wh(p,r,l)}var T;if(Vp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else gn?Om(t,r)&&(w="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(Mm&&r.locale!=="ko"&&(gn||w!=="onCompositionStart"?w==="onCompositionEnd"&&gn&&(T=bm()):(nr=l,Up="value"in nr?nr.value:nr.textContent,gn=!0)),R=za(u,w),0<R.length&&(w=new fh(w,t,null,r,l),p.push({event:w,listeners:R}),T?w.data=T:(T=Dm(r),T!==null&&(w.data=T)))),(T=XR?YR(t,r):ZR(t,r))&&(u=za(u,"onBeforeInput"),0<u.length&&(l=new fh("onBeforeInput","beforeinput",null,r,l),p.push({event:l,listeners:u}),l.data=T))}Vm(p,e)})}function ys(t,e,r){return{instance:t,listener:e,currentTarget:r}}function za(t,e){for(var r=e+"Capture",n=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=ps(t,r),s!=null&&n.unshift(ys(t,s,o)),s=ps(t,e),s!=null&&n.push(ys(t,s,o))),t=t.return}return n}function pn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _h(t,e,r,n,o){for(var s=e._reactName,a=[];r!==null&&r!==n;){var i=r,c=i.alternate,u=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&u!==null&&(i=u,o?(c=ps(r,s),c!=null&&a.unshift(ys(r,c,i))):o||(c=ps(r,s),c!=null&&a.push(ys(r,c,i)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var hE=/\r\n?/g,vE=/\u0000|\uFFFD/g;function Ah(t){return(typeof t=="string"?t:""+t).replace(hE,`
`).replace(vE,"")}function ra(t,e,r){if(e=Ah(e),Ah(t)!==e&&r)throw Error(I(425))}function Na(){}var Hl=null,Kl=null;function Jl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gl=typeof setTimeout=="function"?setTimeout:void 0,fE=typeof clearTimeout=="function"?clearTimeout:void 0,kh=typeof Promise=="function"?Promise:void 0,gE=typeof queueMicrotask=="function"?queueMicrotask:typeof kh<"u"?function(t){return kh.resolve(null).then(t).catch(mE)}:Gl;function mE(t){setTimeout(function(){throw t})}function Ku(t,e){var r=e,n=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){t.removeChild(o),vs(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);vs(e)}function ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Vn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Vn,Ss="__reactProps$"+Vn,Ut="__reactContainer$"+Vn,Ql="__reactEvents$"+Vn,yE="__reactListeners$"+Vn,SE="__reactHandles$"+Vn;function Wr(t){var e=t[wt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ut]||r[wt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=bh(t);t!==null;){if(r=t[wt])return r;t=bh(t)}return e}t=r,r=t.parentNode}return null}function Os(t){return t=t[wt]||t[Ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function oc(t){return t[Ss]||null}var Xl=[],Cn=-1;function Sr(t){return{current:t}}function Z(t){0>Cn||(t.current=Xl[Cn],Xl[Cn]=null,Cn--)}function G(t,e){Cn++,Xl[Cn]=t.current,t.current=e}var gr={},Ne=Sr(gr),We=Sr(!1),Qr=gr;function Dn(t,e){var r=t.type.contextTypes;if(!r)return gr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in r)o[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ve(t){return t=t.childContextTypes,t!=null}function ja(){Z(We),Z(Ne)}function Mh(t,e,r){if(Ne.current!==gr)throw Error(I(168));G(Ne,e),G(We,r)}function Km(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(I(108,nR(t)||"Unknown",o));return ne({},r,n)}function La(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gr,Qr=Ne.current,G(Ne,t),G(We,We.current),!0}function Oh(t,e,r){var n=t.stateNode;if(!n)throw Error(I(169));r?(t=Km(t,e,Qr),n.__reactInternalMemoizedMergedChildContext=t,Z(We),Z(Ne),G(Ne,t)):Z(We),G(We,r)}var jt=null,sc=!1,Ju=!1;function Jm(t){jt===null?jt=[t]:jt.push(t)}function CE(t){sc=!0,Jm(t)}function Cr(){if(!Ju&&jt!==null){Ju=!0;var t=0,e=J;try{var r=jt;for(J=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}jt=null,sc=!1}catch(o){throw jt!==null&&(jt=jt.slice(t+1)),Sm(xp,Cr),o}finally{J=e,Ju=!1}}return null}var Pn=[],Rn=0,xa=null,Ba=0,rt=[],nt=0,Xr=null,Lt=1,xt="";function qr(t,e){Pn[Rn++]=Ba,Pn[Rn++]=xa,xa=t,Ba=e}function Gm(t,e,r){rt[nt++]=Lt,rt[nt++]=xt,rt[nt++]=Xr,Xr=t;var n=Lt;t=xt;var o=32-vt(n)-1;n&=~(1<<o),r+=1;var s=32-vt(e)+o;if(30<s){var a=o-o%5;s=(n&(1<<a)-1).toString(32),n>>=a,o-=a,Lt=1<<32-vt(e)+o|r<<o|n,xt=s+t}else Lt=1<<s|r<<o|n,xt=t}function Kp(t){t.return!==null&&(qr(t,1),Gm(t,1,0))}function Jp(t){for(;t===xa;)xa=Pn[--Rn],Pn[Rn]=null,Ba=Pn[--Rn],Pn[Rn]=null;for(;t===Xr;)Xr=rt[--nt],rt[nt]=null,xt=rt[--nt],rt[nt]=null,Lt=rt[--nt],rt[nt]=null}var Qe=null,Ge=null,ee=!1,ht=null;function Qm(t,e){var r=it(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Dh(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qe=t,Ge=ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qe=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Xr!==null?{id:Lt,overflow:xt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=it(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Qe=t,Ge=null,!0):!1;default:return!1}}function Yl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zl(t){if(ee){var e=Ge;if(e){var r=e;if(!Dh(t,e)){if(Yl(t))throw Error(I(418));e=ur(r.nextSibling);var n=Qe;e&&Dh(t,e)?Qm(n,r):(t.flags=t.flags&-4097|2,ee=!1,Qe=t)}}else{if(Yl(t))throw Error(I(418));t.flags=t.flags&-4097|2,ee=!1,Qe=t}}}function zh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qe=t}function na(t){if(t!==Qe)return!1;if(!ee)return zh(t),ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jl(t.type,t.memoizedProps)),e&&(e=Ge)){if(Yl(t))throw Xm(),Error(I(418));for(;e;)Qm(t,e),e=ur(e.nextSibling)}if(zh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ge=ur(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Qe?ur(t.stateNode.nextSibling):null;return!0}function Xm(){for(var t=Ge;t;)t=ur(t.nextSibling)}function zn(){Ge=Qe=null,ee=!1}function Gp(t){ht===null?ht=[t]:ht.push(t)}var PE=Vt.ReactCurrentBatchConfig;function lt(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Fa=Sr(null),qa=null,En=null,Qp=null;function Xp(){Qp=En=qa=null}function Yp(t){var e=Fa.current;Z(Fa),t._currentValue=e}function ep(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function bn(t,e){qa=t,Qp=En=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($e=!0),t.firstContext=null)}function st(t){var e=t._currentValue;if(Qp!==t)if(t={context:t,memoizedValue:e,next:null},En===null){if(qa===null)throw Error(I(308));En=t,qa.dependencies={lanes:0,firstContext:t}}else En=En.next=t;return e}var Vr=null;function Zp(t){Vr===null?Vr=[t]:Vr.push(t)}function Ym(t,e,r,n){var o=e.interleaved;return o===null?(r.next=r,Zp(e)):(r.next=o.next,o.next=r),e.interleaved=r,$t(t,n)}function $t(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Yt=!1;function ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,V&2){var o=n.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),n.pending=e,$t(t,r)}return o=n.interleaved,o===null?(e.next=e,Zp(n)):(e.next=o.next,o.next=e),n.interleaved=e,$t(t,r)}function ya(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bp(t,r)}}function Nh(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?o=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?o=s=e:s=s.next=e}else o=s=e;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ua(t,e,r,n){var o=t.updateQueue;Yt=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,i=o.shared.pending;if(i!==null){o.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var l=t.alternate;l!==null&&(l=l.updateQueue,i=l.lastBaseUpdate,i!==a&&(i===null?l.firstBaseUpdate=u:i.next=u,l.lastBaseUpdate=c))}if(s!==null){var p=o.baseState;a=0,l=u=c=null,i=s;do{var d=i.lane,h=i.eventTime;if((n&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var v=t,m=i;switch(d=e,h=r,m.tag){case 1:if(v=m.payload,typeof v=="function"){p=v.call(h,p,d);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,d=typeof v=="function"?v.call(h,p,d):v,d==null)break e;p=ne({},p,d);break e;case 2:Yt=!0}}i.callback!==null&&i.lane!==0&&(t.flags|=64,d=o.effects,d===null?o.effects=[i]:d.push(i))}else h={eventTime:h,lane:d,tag:i.tag,payload:i.payload,callback:i.callback,next:null},l===null?(u=l=h,c=p):l=l.next=h,a|=d;if(i=i.next,i===null){if(i=o.shared.pending,i===null)break;d=i,i=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(l===null&&(c=p),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=l,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);Zr|=a,t.lanes=a,t.memoizedState=p}}function jh(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(I(191,o));o.call(n)}}}var ey=new Yg.Component().refs;function tp(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ne({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ac={isMounted:function(t){return(t=t._reactInternals)?on(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=xe(),o=dr(t),s=Bt(n,o);s.payload=e,r!=null&&(s.callback=r),e=lr(t,s,o),e!==null&&(ft(e,t,o,n),ya(e,t,o))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=xe(),o=dr(t),s=Bt(n,o);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=lr(t,s,o),e!==null&&(ft(e,t,o,n),ya(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=xe(),n=dr(t),o=Bt(r,n);o.tag=2,e!=null&&(o.callback=e),e=lr(t,o,n),e!==null&&(ft(e,t,n,r),ya(e,t,n))}};function Lh(t,e,r,n,o,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!gs(r,n)||!gs(o,s):!0}function ty(t,e,r){var n=!1,o=gr,s=e.contextType;return typeof s=="object"&&s!==null?s=st(s):(o=Ve(e)?Qr:Ne.current,n=e.contextTypes,s=(n=n!=null)?Dn(t,o):gr),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ac,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function xh(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ac.enqueueReplaceState(e,e.state,null)}function rp(t,e,r,n){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs=ey,ed(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=st(s):(s=Ve(e)?Qr:Ne.current,o.context=Dn(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(tp(t,e,s,r),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&ac.enqueueReplaceState(o,o.state,null),Ua(t,r,o,n),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function ni(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(I(309));var n=r.stateNode}if(!n)throw Error(I(147,t));var o=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var i=o.refs;i===ey&&(i=o.refs={}),a===null?delete i[s]:i[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(I(284));if(!r._owner)throw Error(I(290,t))}return t}function ia(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bh(t){var e=t._init;return e(t._payload)}function ry(t){function e(f,g){if(t){var y=f.deletions;y===null?(f.deletions=[g],f.flags|=16):y.push(g)}}function r(f,g){if(!t)return null;for(;g!==null;)e(f,g),g=g.sibling;return null}function n(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function o(f,g){return f=hr(f,g),f.index=0,f.sibling=null,f}function s(f,g,y){return f.index=y,t?(y=f.alternate,y!==null?(y=y.index,y<g?(f.flags|=2,g):y):(f.flags|=2,g)):(f.flags|=1048576,g)}function a(f){return t&&f.alternate===null&&(f.flags|=2),f}function i(f,g,y,C){return g===null||g.tag!==6?(g=tl(y,f.mode,C),g.return=f,g):(g=o(g,y),g.return=f,g)}function c(f,g,y,C){var P=y.type;return P===fn?l(f,g,y.props.children,C,y.key):g!==null&&(g.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Xt&&Bh(P)===g.type)?(C=o(g,y.props),C.ref=ni(f,g,y),C.return=f,C):(C=wa(y.type,y.key,y.props,null,f.mode,C),C.ref=ni(f,g,y),C.return=f,C)}function u(f,g,y,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=rl(y,f.mode,C),g.return=f,g):(g=o(g,y.children||[]),g.return=f,g)}function l(f,g,y,C,P){return g===null||g.tag!==7?(g=Gr(y,f.mode,C,P),g.return=f,g):(g=o(g,y),g.return=f,g)}function p(f,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=tl(""+g,f.mode,y),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ks:return y=wa(g.type,g.key,g.props,null,f.mode,y),y.ref=ni(f,null,g),y.return=f,y;case vn:return g=rl(g,f.mode,y),g.return=f,g;case Xt:var C=g._init;return p(f,C(g._payload),y)}if(Jo(g)||Yn(g))return g=Gr(g,f.mode,y,null),g.return=f,g;ia(f,g)}return null}function d(f,g,y,C){var P=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:i(f,g,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ks:return y.key===P?c(f,g,y,C):null;case vn:return y.key===P?u(f,g,y,C):null;case Xt:return P=y._init,d(f,g,P(y._payload),C)}if(Jo(y)||Yn(y))return P!==null?null:l(f,g,y,C,null);ia(f,y)}return null}function h(f,g,y,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return f=f.get(y)||null,i(g,f,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ks:return f=f.get(C.key===null?y:C.key)||null,c(g,f,C,P);case vn:return f=f.get(C.key===null?y:C.key)||null,u(g,f,C,P);case Xt:var R=C._init;return h(f,g,y,R(C._payload),P)}if(Jo(C)||Yn(C))return f=f.get(y)||null,l(g,f,C,P,null);ia(g,C)}return null}function v(f,g,y,C){for(var P=null,R=null,T=g,w=g=0,B=null;T!==null&&w<y.length;w++){T.index>w?(B=T,T=null):B=T.sibling;var D=d(f,T,y[w],C);if(D===null){T===null&&(T=B);break}t&&T&&D.alternate===null&&e(f,T),g=s(D,g,w),R===null?P=D:R.sibling=D,R=D,T=B}if(w===y.length)return r(f,T),ee&&qr(f,w),P;if(T===null){for(;w<y.length;w++)T=p(f,y[w],C),T!==null&&(g=s(T,g,w),R===null?P=T:R.sibling=T,R=T);return ee&&qr(f,w),P}for(T=n(f,T);w<y.length;w++)B=h(T,f,w,y[w],C),B!==null&&(t&&B.alternate!==null&&T.delete(B.key===null?w:B.key),g=s(B,g,w),R===null?P=B:R.sibling=B,R=B);return t&&T.forEach(function(ue){return e(f,ue)}),ee&&qr(f,w),P}function m(f,g,y,C){var P=Yn(y);if(typeof P!="function")throw Error(I(150));if(y=P.call(y),y==null)throw Error(I(151));for(var R=P=null,T=g,w=g=0,B=null,D=y.next();T!==null&&!D.done;w++,D=y.next()){T.index>w?(B=T,T=null):B=T.sibling;var ue=d(f,T,D.value,C);if(ue===null){T===null&&(T=B);break}t&&T&&ue.alternate===null&&e(f,T),g=s(ue,g,w),R===null?P=ue:R.sibling=ue,R=ue,T=B}if(D.done)return r(f,T),ee&&qr(f,w),P;if(T===null){for(;!D.done;w++,D=y.next())D=p(f,D.value,C),D!==null&&(g=s(D,g,w),R===null?P=D:R.sibling=D,R=D);return ee&&qr(f,w),P}for(T=n(f,T);!D.done;w++,D=y.next())D=h(T,f,w,D.value,C),D!==null&&(t&&D.alternate!==null&&T.delete(D.key===null?w:D.key),g=s(D,g,w),R===null?P=D:R.sibling=D,R=D);return t&&T.forEach(function(W){return e(f,W)}),ee&&qr(f,w),P}function S(f,g,y,C){if(typeof y=="object"&&y!==null&&y.type===fn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ks:e:{for(var P=y.key,R=g;R!==null;){if(R.key===P){if(P=y.type,P===fn){if(R.tag===7){r(f,R.sibling),g=o(R,y.props.children),g.return=f,f=g;break e}}else if(R.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Xt&&Bh(P)===R.type){r(f,R.sibling),g=o(R,y.props),g.ref=ni(f,R,y),g.return=f,f=g;break e}r(f,R);break}else e(f,R);R=R.sibling}y.type===fn?(g=Gr(y.props.children,f.mode,C,y.key),g.return=f,f=g):(C=wa(y.type,y.key,y.props,null,f.mode,C),C.ref=ni(f,g,y),C.return=f,f=C)}return a(f);case vn:e:{for(R=y.key;g!==null;){if(g.key===R)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){r(f,g.sibling),g=o(g,y.children||[]),g.return=f,f=g;break e}else{r(f,g);break}else e(f,g);g=g.sibling}g=rl(y,f.mode,C),g.return=f,f=g}return a(f);case Xt:return R=y._init,S(f,g,R(y._payload),C)}if(Jo(y))return v(f,g,y,C);if(Yn(y))return m(f,g,y,C);ia(f,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(r(f,g.sibling),g=o(g,y),g.return=f,f=g):(r(f,g),g=tl(y,f.mode,C),g.return=f,f=g),a(f)):r(f,g)}return S}var Nn=ry(!0),ny=ry(!1),Ds={},_t=Sr(Ds),Cs=Sr(Ds),Ps=Sr(Ds);function Hr(t){if(t===Ds)throw Error(I(174));return t}function td(t,e){switch(G(Ps,e),G(Cs,t),G(_t,Ds),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zl(e,t)}Z(_t),G(_t,e)}function jn(){Z(_t),Z(Cs),Z(Ps)}function iy(t){Hr(Ps.current);var e=Hr(_t.current),r=zl(e,t.type);e!==r&&(G(Cs,t),G(_t,r))}function rd(t){Cs.current===t&&(Z(_t),Z(Cs))}var te=Sr(0);function $a(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gu=[];function nd(){for(var t=0;t<Gu.length;t++)Gu[t]._workInProgressVersionPrimary=null;Gu.length=0}var Sa=Vt.ReactCurrentDispatcher,Qu=Vt.ReactCurrentBatchConfig,Yr=0,re=null,de=null,ve=null,Wa=!1,is=!1,Rs=0,RE=0;function Te(){throw Error(I(321))}function id(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!gt(t[r],e[r]))return!1;return!0}function od(t,e,r,n,o,s){if(Yr=s,re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sa.current=t===null||t.memoizedState===null?TE:_E,t=r(n,o),is){s=0;do{if(is=!1,Rs=0,25<=s)throw Error(I(301));s+=1,ve=de=null,e.updateQueue=null,Sa.current=AE,t=r(n,o)}while(is)}if(Sa.current=Va,e=de!==null&&de.next!==null,Yr=0,ve=de=re=null,Wa=!1,e)throw Error(I(300));return t}function sd(){var t=Rs!==0;return Rs=0,t}function Et(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?re.memoizedState=ve=t:ve=ve.next=t,ve}function at(){if(de===null){var t=re.alternate;t=t!==null?t.memoizedState:null}else t=de.next;var e=ve===null?re.memoizedState:ve.next;if(e!==null)ve=e,de=t;else{if(t===null)throw Error(I(310));de=t,t={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},ve===null?re.memoizedState=ve=t:ve=ve.next=t}return ve}function Es(t,e){return typeof e=="function"?e(t):e}function Xu(t){var e=at(),r=e.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=t;var n=de,o=n.baseQueue,s=r.pending;if(s!==null){if(o!==null){var a=o.next;o.next=s.next,s.next=a}n.baseQueue=o=s,r.pending=null}if(o!==null){s=o.next,n=n.baseState;var i=a=null,c=null,u=s;do{var l=u.lane;if((Yr&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var p={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=p,a=n):c=c.next=p,re.lanes|=l,Zr|=l}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=i,gt(n,e.memoizedState)||($e=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){o=t;do s=o.lane,re.lanes|=s,Zr|=s,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Yu(t){var e=at(),r=e.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=t;var n=r.dispatch,o=r.pending,s=e.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do s=t(s,a.action),a=a.next;while(a!==o);gt(s,e.memoizedState)||($e=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function oy(){}function sy(t,e){var r=re,n=at(),o=e(),s=!gt(n.memoizedState,o);if(s&&(n.memoizedState=o,$e=!0),n=n.queue,ad(uy.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||ve!==null&&ve.memoizedState.tag&1){if(r.flags|=2048,ws(9,cy.bind(null,r,n,o,e),void 0,null),fe===null)throw Error(I(349));Yr&30||ay(r,e,o)}return o}function ay(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function cy(t,e,r,n){e.value=r,e.getSnapshot=n,ly(e)&&py(t)}function uy(t,e,r){return r(function(){ly(e)&&py(t)})}function ly(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!gt(t,r)}catch{return!0}}function py(t){var e=$t(t,1);e!==null&&ft(e,t,1,-1)}function Fh(t){var e=Et();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:t},e.queue=t,t=t.dispatch=IE.bind(null,re,t),[e.memoizedState,t]}function ws(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function dy(){return at().memoizedState}function Ca(t,e,r,n){var o=Et();re.flags|=t,o.memoizedState=ws(1|e,r,void 0,n===void 0?null:n)}function cc(t,e,r,n){var o=at();n=n===void 0?null:n;var s=void 0;if(de!==null){var a=de.memoizedState;if(s=a.destroy,n!==null&&id(n,a.deps)){o.memoizedState=ws(e,r,s,n);return}}re.flags|=t,o.memoizedState=ws(1|e,r,s,n)}function qh(t,e){return Ca(8390656,8,t,e)}function ad(t,e){return cc(2048,8,t,e)}function hy(t,e){return cc(4,2,t,e)}function vy(t,e){return cc(4,4,t,e)}function fy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gy(t,e,r){return r=r!=null?r.concat([t]):null,cc(4,4,fy.bind(null,e,t),r)}function cd(){}function my(t,e){var r=at();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&id(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function yy(t,e){var r=at();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&id(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Sy(t,e,r){return Yr&21?(gt(r,e)||(r=Rm(),re.lanes|=r,Zr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$e=!0),t.memoizedState=r)}function EE(t,e){var r=J;J=r!==0&&4>r?r:4,t(!0);var n=Qu.transition;Qu.transition={};try{t(!1),e()}finally{J=r,Qu.transition=n}}function Cy(){return at().memoizedState}function wE(t,e,r){var n=dr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Py(t))Ry(e,r);else if(r=Ym(t,e,r,n),r!==null){var o=xe();ft(r,t,n,o),Ey(r,e,n)}}function IE(t,e,r){var n=dr(t),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Py(t))Ry(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,i=s(a,r);if(o.hasEagerState=!0,o.eagerState=i,gt(i,a)){var c=e.interleaved;c===null?(o.next=o,Zp(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}r=Ym(t,e,o,n),r!==null&&(o=xe(),ft(r,t,n,o),Ey(r,e,n))}}function Py(t){var e=t.alternate;return t===re||e!==null&&e===re}function Ry(t,e){is=Wa=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Ey(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bp(t,r)}}var Va={readContext:st,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},TE={readContext:st,useCallback:function(t,e){return Et().memoizedState=[t,e===void 0?null:e],t},useContext:st,useEffect:qh,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ca(4194308,4,fy.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ca(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ca(4,2,t,e)},useMemo:function(t,e){var r=Et();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Et();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=wE.bind(null,re,t),[n.memoizedState,t]},useRef:function(t){var e=Et();return t={current:t},e.memoizedState=t},useState:Fh,useDebugValue:cd,useDeferredValue:function(t){return Et().memoizedState=t},useTransition:function(){var t=Fh(!1),e=t[0];return t=EE.bind(null,t[1]),Et().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=re,o=Et();if(ee){if(r===void 0)throw Error(I(407));r=r()}else{if(r=e(),fe===null)throw Error(I(349));Yr&30||ay(n,e,r)}o.memoizedState=r;var s={value:r,getSnapshot:e};return o.queue=s,qh(uy.bind(null,n,s,t),[t]),n.flags|=2048,ws(9,cy.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Et(),e=fe.identifierPrefix;if(ee){var r=xt,n=Lt;r=(n&~(1<<32-vt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Rs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=RE++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_E={readContext:st,useCallback:my,useContext:st,useEffect:ad,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:vy,useMemo:yy,useReducer:Xu,useRef:dy,useState:function(){return Xu(Es)},useDebugValue:cd,useDeferredValue:function(t){var e=at();return Sy(e,de.memoizedState,t)},useTransition:function(){var t=Xu(Es)[0],e=at().memoizedState;return[t,e]},useMutableSource:oy,useSyncExternalStore:sy,useId:Cy,unstable_isNewReconciler:!1},AE={readContext:st,useCallback:my,useContext:st,useEffect:ad,useImperativeHandle:gy,useInsertionEffect:hy,useLayoutEffect:vy,useMemo:yy,useReducer:Yu,useRef:dy,useState:function(){return Yu(Es)},useDebugValue:cd,useDeferredValue:function(t){var e=at();return de===null?e.memoizedState=t:Sy(e,de.memoizedState,t)},useTransition:function(){var t=Yu(Es)[0],e=at().memoizedState;return[t,e]},useMutableSource:oy,useSyncExternalStore:sy,useId:Cy,unstable_isNewReconciler:!1};function Ln(t,e){try{var r="",n=e;do r+=rR(n),n=n.return;while(n);var o=r}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function Zu(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function np(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var kE=typeof WeakMap=="function"?WeakMap:Map;function wy(t,e,r){r=Bt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ka||(Ka=!0,hp=n),np(t,e)},r}function Iy(t,e,r){r=Bt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var o=e.value;r.payload=function(){return n(o)},r.callback=function(){np(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){np(t,e),typeof n!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Uh(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new kE;var o=new Set;n.set(e,o)}else o=n.get(e),o===void 0&&(o=new Set,n.set(e,o));o.has(r)||(o.add(r),t=$E.bind(null,t,e,r),e.then(t,t))}function $h(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wh(t,e,r,n,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Bt(-1,1),e.tag=2,lr(r,e,1))),r.lanes|=1),t)}var bE=Vt.ReactCurrentOwner,$e=!1;function Le(t,e,r,n){e.child=t===null?ny(e,null,r,n):Nn(e,t.child,r,n)}function Vh(t,e,r,n,o){r=r.render;var s=e.ref;return bn(e,o),n=od(t,e,r,n,s,o),r=sd(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Wt(t,e,o)):(ee&&r&&Kp(e),e.flags|=1,Le(t,e,n,o),e.child)}function Hh(t,e,r,n,o){if(t===null){var s=r.type;return typeof s=="function"&&!gd(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Ty(t,e,s,n,o)):(t=wa(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:gs,r(a,n)&&t.ref===e.ref)return Wt(t,e,o)}return e.flags|=1,t=hr(s,n),t.ref=e.ref,t.return=e,e.child=t}function Ty(t,e,r,n,o){if(t!==null){var s=t.memoizedProps;if(gs(s,n)&&t.ref===e.ref)if($e=!1,e.pendingProps=n=s,(t.lanes&o)!==0)t.flags&131072&&($e=!0);else return e.lanes=t.lanes,Wt(t,e,o)}return ip(t,e,r,n,o)}function _y(t,e,r){var n=e.pendingProps,o=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(In,Je),Je|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(In,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,G(In,Je),Je|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,G(In,Je),Je|=n;return Le(t,e,o,r),e.child}function Ay(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ip(t,e,r,n,o){var s=Ve(r)?Qr:Ne.current;return s=Dn(e,s),bn(e,o),r=od(t,e,r,n,s,o),n=sd(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Wt(t,e,o)):(ee&&n&&Kp(e),e.flags|=1,Le(t,e,r,o),e.child)}function Kh(t,e,r,n,o){if(Ve(r)){var s=!0;La(e)}else s=!1;if(bn(e,o),e.stateNode===null)Pa(t,e),ty(e,r,n),rp(e,r,n,o),n=!0;else if(t===null){var a=e.stateNode,i=e.memoizedProps;a.props=i;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=st(u):(u=Ve(r)?Qr:Ne.current,u=Dn(e,u));var l=r.getDerivedStateFromProps,p=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==n||c!==u)&&xh(e,a,n,u),Yt=!1;var d=e.memoizedState;a.state=d,Ua(e,n,a,o),c=e.memoizedState,i!==n||d!==c||We.current||Yt?(typeof l=="function"&&(tp(e,r,l,n),c=e.memoizedState),(i=Yt||Lh(e,r,i,n,d,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=i):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,Zm(t,e),i=e.memoizedProps,u=e.type===e.elementType?i:lt(e.type,i),a.props=u,p=e.pendingProps,d=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=st(c):(c=Ve(r)?Qr:Ne.current,c=Dn(e,c));var h=r.getDerivedStateFromProps;(l=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==p||d!==c)&&xh(e,a,n,c),Yt=!1,d=e.memoizedState,a.state=d,Ua(e,n,a,o);var v=e.memoizedState;i!==p||d!==v||We.current||Yt?(typeof h=="function"&&(tp(e,r,h,n),v=e.memoizedState),(u=Yt||Lh(e,r,u,n,d,v,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return op(t,e,r,n,s,o)}function op(t,e,r,n,o,s){Ay(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return o&&Oh(e,r,!1),Wt(t,e,s);n=e.stateNode,bE.current=e;var i=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Nn(e,t.child,null,s),e.child=Nn(e,null,i,s)):Le(t,e,i,s),e.memoizedState=n.state,o&&Oh(e,r,!0),e.child}function ky(t){var e=t.stateNode;e.pendingContext?Mh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mh(t,e.context,!1),td(t,e.containerInfo)}function Jh(t,e,r,n,o){return zn(),Gp(o),e.flags|=256,Le(t,e,r,n),e.child}var sp={dehydrated:null,treeContext:null,retryLane:0};function ap(t){return{baseLanes:t,cachePool:null,transitions:null}}function by(t,e,r){var n=e.pendingProps,o=te.current,s=!1,a=(e.flags&128)!==0,i;if((i=a)||(i=t!==null&&t.memoizedState===null?!1:(o&2)!==0),i?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),G(te,o&1),t===null)return Zl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=pc(a,n,0,null),t=Gr(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ap(r),e.memoizedState=sp,t):ud(e,a));if(o=t.memoizedState,o!==null&&(i=o.dehydrated,i!==null))return ME(t,e,a,n,i,o,r);if(s){s=n.fallback,a=e.mode,o=t.child,i=o.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=hr(o,c),n.subtreeFlags=o.subtreeFlags&14680064),i!==null?s=hr(i,s):(s=Gr(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?ap(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=sp,n}return s=t.child,t=s.sibling,n=hr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function ud(t,e){return e=pc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oa(t,e,r,n){return n!==null&&Gp(n),Nn(e,t.child,null,r),t=ud(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ME(t,e,r,n,o,s,a){if(r)return e.flags&256?(e.flags&=-257,n=Zu(Error(I(422))),oa(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,o=e.mode,n=pc({mode:"visible",children:n.children},o,0,null),s=Gr(s,o,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Nn(e,t.child,null,a),e.child.memoizedState=ap(a),e.memoizedState=sp,s);if(!(e.mode&1))return oa(t,e,a,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var i=n.dgst;return n=i,s=Error(I(419)),n=Zu(s,n,void 0),oa(t,e,a,n)}if(i=(a&t.childLanes)!==0,$e||i){if(n=fe,n!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|a)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,$t(t,o),ft(n,t,o,-1))}return fd(),n=Zu(Error(I(421))),oa(t,e,a,n)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=WE.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,Ge=ur(o.nextSibling),Qe=e,ee=!0,ht=null,t!==null&&(rt[nt++]=Lt,rt[nt++]=xt,rt[nt++]=Xr,Lt=t.id,xt=t.overflow,Xr=e),e=ud(e,n.children),e.flags|=4096,e)}function Gh(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ep(t.return,e,r)}function el(t,e,r,n,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=o)}function My(t,e,r){var n=e.pendingProps,o=n.revealOrder,s=n.tail;if(Le(t,e,n.children,r),n=te.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gh(t,r,e);else if(t.tag===19)Gh(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(G(te,n),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)t=r.alternate,t!==null&&$a(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),el(e,!1,o,r,s);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&$a(t)===null){e.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}el(e,!0,r,null,s);break;case"together":el(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Zr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,r=hr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=hr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function OE(t,e,r){switch(e.tag){case 3:ky(e),zn();break;case 5:iy(e);break;case 1:Ve(e.type)&&La(e);break;case 4:td(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,o=e.memoizedProps.value;G(Fa,n._currentValue),n._currentValue=o;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(G(te,te.current&1),e.flags|=128,null):r&e.child.childLanes?by(t,e,r):(G(te,te.current&1),t=Wt(t,e,r),t!==null?t.sibling:null);G(te,te.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return My(t,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(te,te.current),n)break;return null;case 22:case 23:return e.lanes=0,_y(t,e,r)}return Wt(t,e,r)}var Oy,cp,Dy,zy;Oy=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cp=function(){};Dy=function(t,e,r,n){var o=t.memoizedProps;if(o!==n){t=e.stateNode,Hr(_t.current);var s=null;switch(r){case"input":o=bl(t,o),n=bl(t,n),s=[];break;case"select":o=ne({},o,{value:void 0}),n=ne({},n,{value:void 0}),s=[];break;case"textarea":o=Dl(t,o),n=Dl(t,n),s=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Na)}Nl(r,n);var a;r=null;for(u in o)if(!n.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var i=o[u];for(a in i)i.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(us.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(i=o!=null?o[u]:void 0,n.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(us.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Y("scroll",t),s||i===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};zy=function(t,e,r,n){r!==n&&(e.flags|=4)};function ii(t,e){if(!ee)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function _e(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function DE(t,e,r){var n=e.pendingProps;switch(Jp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(e),null;case 1:return Ve(e.type)&&ja(),_e(e),null;case 3:return n=e.stateNode,jn(),Z(We),Z(Ne),nd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(na(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ht!==null&&(gp(ht),ht=null))),cp(t,e),_e(e),null;case 5:rd(e);var o=Hr(Ps.current);if(r=e.type,t!==null&&e.stateNode!=null)Dy(t,e,r,n,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(I(166));return _e(e),null}if(t=Hr(_t.current),na(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[wt]=e,n[Ss]=s,t=(e.mode&1)!==0,r){case"dialog":Y("cancel",n),Y("close",n);break;case"iframe":case"object":case"embed":Y("load",n);break;case"video":case"audio":for(o=0;o<Qo.length;o++)Y(Qo[o],n);break;case"source":Y("error",n);break;case"img":case"image":case"link":Y("error",n),Y("load",n);break;case"details":Y("toggle",n);break;case"input":ih(n,s),Y("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Y("invalid",n);break;case"textarea":sh(n,s),Y("invalid",n)}Nl(r,s),o=null;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];a==="children"?typeof i=="string"?n.textContent!==i&&(s.suppressHydrationWarning!==!0&&ra(n.textContent,i,t),o=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(s.suppressHydrationWarning!==!0&&ra(n.textContent,i,t),o=["children",""+i]):us.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Y("scroll",n)}switch(r){case"input":Js(n),oh(n,s,!0);break;case"textarea":Js(n),ah(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Na)}n=o,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=am(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[wt]=e,t[Ss]=n,Oy(t,e,!1,!1),e.stateNode=t;e:{switch(a=jl(r,n),r){case"dialog":Y("cancel",t),Y("close",t),o=n;break;case"iframe":case"object":case"embed":Y("load",t),o=n;break;case"video":case"audio":for(o=0;o<Qo.length;o++)Y(Qo[o],t);o=n;break;case"source":Y("error",t),o=n;break;case"img":case"image":case"link":Y("error",t),Y("load",t),o=n;break;case"details":Y("toggle",t),o=n;break;case"input":ih(t,n),o=bl(t,n),Y("invalid",t);break;case"option":o=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},o=ne({},n,{value:void 0}),Y("invalid",t);break;case"textarea":sh(t,n),o=Dl(t,n),Y("invalid",t);break;default:o=n}Nl(r,o),i=o;for(s in i)if(i.hasOwnProperty(s)){var c=i[s];s==="style"?lm(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cm(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ls(t,c):typeof c=="number"&&ls(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(us.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Y("scroll",t):c!=null&&Dp(t,s,c,a))}switch(r){case"input":Js(t),oh(t,n,!1);break;case"textarea":Js(t),ah(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Tn(t,!!n.multiple,s,!1):n.defaultValue!=null&&Tn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Na)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _e(e),null;case 6:if(t&&e.stateNode!=null)zy(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(I(166));if(r=Hr(Ps.current),Hr(_t.current),na(e)){if(n=e.stateNode,r=e.memoizedProps,n[wt]=e,(s=n.nodeValue!==r)&&(t=Qe,t!==null))switch(t.tag){case 3:ra(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ra(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[wt]=e,e.stateNode=n}return _e(e),null;case 13:if(Z(te),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ee&&Ge!==null&&e.mode&1&&!(e.flags&128))Xm(),zn(),e.flags|=98560,s=!1;else if(s=na(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(I(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(I(317));s[wt]=e}else zn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_e(e),s=!1}else ht!==null&&(gp(ht),ht=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?he===0&&(he=3):fd())),e.updateQueue!==null&&(e.flags|=4),_e(e),null);case 4:return jn(),cp(t,e),t===null&&ms(e.stateNode.containerInfo),_e(e),null;case 10:return Yp(e.type._context),_e(e),null;case 17:return Ve(e.type)&&ja(),_e(e),null;case 19:if(Z(te),s=e.memoizedState,s===null)return _e(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)ii(s,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=$a(t),a!==null){for(e.flags|=128,ii(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return G(te,te.current&1|2),e.child}t=t.sibling}s.tail!==null&&ce()>xn&&(e.flags|=128,n=!0,ii(s,!1),e.lanes=4194304)}else{if(!n)if(t=$a(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ii(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ee)return _e(e),null}else 2*ce()-s.renderingStartTime>xn&&r!==1073741824&&(e.flags|=128,n=!0,ii(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ce(),e.sibling=null,r=te.current,G(te,n?r&1|2:r&1),e):(_e(e),null);case 22:case 23:return vd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Je&1073741824&&(_e(e),e.subtreeFlags&6&&(e.flags|=8192)):_e(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function zE(t,e){switch(Jp(e),e.tag){case 1:return Ve(e.type)&&ja(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jn(),Z(We),Z(Ne),nd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rd(e),null;case 13:if(Z(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));zn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(te),null;case 4:return jn(),null;case 10:return Yp(e.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var sa=!1,ze=!1,NE=typeof WeakSet=="function"?WeakSet:Set,A=null;function wn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){se(t,e,n)}else r.current=null}function up(t,e,r){try{r()}catch(n){se(t,e,n)}}var Qh=!1;function jE(t,e){if(Hl=Oa,t=xm(),Hp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,i=-1,c=-1,u=0,l=0,p=t,d=null;t:for(;;){for(var h;p!==r||o!==0&&p.nodeType!==3||(i=a+o),p!==s||n!==0&&p.nodeType!==3||(c=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===t)break t;if(d===r&&++u===o&&(i=a),d===s&&++l===n&&(c=a),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kl={focusedElem:t,selectionRange:r},Oa=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,S=v.memoizedState,f=e.stateNode,g=f.getSnapshotBeforeUpdate(e.elementType===e.type?m:lt(e.type,m),S);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(C){se(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return v=Qh,Qh=!1,v}function os(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&up(e,r,s)}o=o.next}while(o!==n)}}function uc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function lp(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Ny(t){var e=t.alternate;e!==null&&(t.alternate=null,Ny(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wt],delete e[Ss],delete e[Ql],delete e[yE],delete e[SE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jy(t){return t.tag===5||t.tag===3||t.tag===4}function Xh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Na));else if(n!==4&&(t=t.child,t!==null))for(pp(t,e,r),t=t.sibling;t!==null;)pp(t,e,r),t=t.sibling}function dp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(dp(t,e,r),t=t.sibling;t!==null;)dp(t,e,r),t=t.sibling}var Se=null,dt=!1;function Jt(t,e,r){for(r=r.child;r!==null;)Ly(t,e,r),r=r.sibling}function Ly(t,e,r){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(tc,r)}catch{}switch(r.tag){case 5:ze||wn(r,e);case 6:var n=Se,o=dt;Se=null,Jt(t,e,r),Se=n,dt=o,Se!==null&&(dt?(t=Se,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Se.removeChild(r.stateNode));break;case 18:Se!==null&&(dt?(t=Se,r=r.stateNode,t.nodeType===8?Ku(t.parentNode,r):t.nodeType===1&&Ku(t,r),vs(t)):Ku(Se,r.stateNode));break;case 4:n=Se,o=dt,Se=r.stateNode.containerInfo,dt=!0,Jt(t,e,r),Se=n,dt=o;break;case 0:case 11:case 14:case 15:if(!ze&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var s=o,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&up(r,e,a),o=o.next}while(o!==n)}Jt(t,e,r);break;case 1:if(!ze&&(wn(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){se(r,e,i)}Jt(t,e,r);break;case 21:Jt(t,e,r);break;case 22:r.mode&1?(ze=(n=ze)||r.memoizedState!==null,Jt(t,e,r),ze=n):Jt(t,e,r);break;default:Jt(t,e,r)}}function Yh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new NE),e.forEach(function(n){var o=VE.bind(null,t,n);r.has(n)||(r.add(n),n.then(o,o))})}}function ut(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var s=t,a=e,i=a;e:for(;i!==null;){switch(i.tag){case 5:Se=i.stateNode,dt=!1;break e;case 3:Se=i.stateNode.containerInfo,dt=!0;break e;case 4:Se=i.stateNode.containerInfo,dt=!0;break e}i=i.return}if(Se===null)throw Error(I(160));Ly(s,a,o),Se=null,dt=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){se(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xy(e,t),e=e.sibling}function xy(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ut(e,t),Rt(t),n&4){try{os(3,t,t.return),uc(3,t)}catch(m){se(t,t.return,m)}try{os(5,t,t.return)}catch(m){se(t,t.return,m)}}break;case 1:ut(e,t),Rt(t),n&512&&r!==null&&wn(r,r.return);break;case 5:if(ut(e,t),Rt(t),n&512&&r!==null&&wn(r,r.return),t.flags&32){var o=t.stateNode;try{ls(o,"")}catch(m){se(t,t.return,m)}}if(n&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,i=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{i==="input"&&s.type==="radio"&&s.name!=null&&om(o,s),jl(i,a);var u=jl(i,s);for(a=0;a<c.length;a+=2){var l=c[a],p=c[a+1];l==="style"?lm(o,p):l==="dangerouslySetInnerHTML"?cm(o,p):l==="children"?ls(o,p):Dp(o,l,p,u)}switch(i){case"input":Ml(o,s);break;case"textarea":sm(o,s);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Tn(o,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Tn(o,!!s.multiple,s.defaultValue,!0):Tn(o,!!s.multiple,s.multiple?[]:"",!1))}o[Ss]=s}catch(m){se(t,t.return,m)}}break;case 6:if(ut(e,t),Rt(t),n&4){if(t.stateNode===null)throw Error(I(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(m){se(t,t.return,m)}}break;case 3:if(ut(e,t),Rt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{vs(e.containerInfo)}catch(m){se(t,t.return,m)}break;case 4:ut(e,t),Rt(t);break;case 13:ut(e,t),Rt(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(dd=ce())),n&4&&Yh(t);break;case 22:if(l=r!==null&&r.memoizedState!==null,t.mode&1?(ze=(u=ze)||l,ut(e,t),ze=u):ut(e,t),Rt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!l&&t.mode&1)for(A=t,l=t.child;l!==null;){for(p=A=l;A!==null;){switch(d=A,h=d.child,d.tag){case 0:case 11:case 14:case 15:os(4,d,d.return);break;case 1:wn(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){se(n,r,m)}}break;case 5:wn(d,d.return);break;case 22:if(d.memoizedState!==null){ev(p);continue}}h!==null?(h.return=d,A=h):ev(p)}l=l.sibling}e:for(l=null,p=t;;){if(p.tag===5){if(l===null){l=p;try{o=p.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(i=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=um("display",a))}catch(m){se(t,t.return,m)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(m){se(t,t.return,m)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ut(e,t),Rt(t),n&4&&Yh(t);break;case 21:break;default:ut(e,t),Rt(t)}}function Rt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(jy(r)){var n=r;break e}r=r.return}throw Error(I(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(ls(o,""),n.flags&=-33);var s=Xh(t);dp(t,s,o);break;case 3:case 4:var a=n.stateNode.containerInfo,i=Xh(t);pp(t,i,a);break;default:throw Error(I(161))}}catch(c){se(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LE(t,e,r){A=t,By(t)}function By(t,e,r){for(var n=(t.mode&1)!==0;A!==null;){var o=A,s=o.child;if(o.tag===22&&n){var a=o.memoizedState!==null||sa;if(!a){var i=o.alternate,c=i!==null&&i.memoizedState!==null||ze;i=sa;var u=ze;if(sa=a,(ze=c)&&!u)for(A=o;A!==null;)a=A,c=a.child,a.tag===22&&a.memoizedState!==null?tv(o):c!==null?(c.return=a,A=c):tv(o);for(;s!==null;)A=s,By(s),s=s.sibling;A=o,sa=i,ze=u}Zh(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,A=s):Zh(t)}}function Zh(t){for(;A!==null;){var e=A;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ze||uc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ze)if(r===null)n.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:lt(e.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jh(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}jh(e,a,r)}break;case 5:var i=e.stateNode;if(r===null&&e.flags&4){r=i;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&vs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}ze||e.flags&512&&lp(e)}catch(d){se(e,e.return,d)}}if(e===t){A=null;break}if(r=e.sibling,r!==null){r.return=e.return,A=r;break}A=e.return}}function ev(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var r=e.sibling;if(r!==null){r.return=e.return,A=r;break}A=e.return}}function tv(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{uc(4,e)}catch(c){se(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var o=e.return;try{n.componentDidMount()}catch(c){se(e,o,c)}}var s=e.return;try{lp(e)}catch(c){se(e,s,c)}break;case 5:var a=e.return;try{lp(e)}catch(c){se(e,a,c)}}}catch(c){se(e,e.return,c)}if(e===t){A=null;break}var i=e.sibling;if(i!==null){i.return=e.return,A=i;break}A=e.return}}var xE=Math.ceil,Ha=Vt.ReactCurrentDispatcher,ld=Vt.ReactCurrentOwner,ot=Vt.ReactCurrentBatchConfig,V=0,fe=null,pe=null,Pe=0,Je=0,In=Sr(0),he=0,Is=null,Zr=0,lc=0,pd=0,ss=null,Ue=null,dd=0,xn=1/0,Nt=null,Ka=!1,hp=null,pr=null,aa=!1,ir=null,Ja=0,as=0,vp=null,Ra=-1,Ea=0;function xe(){return V&6?ce():Ra!==-1?Ra:Ra=ce()}function dr(t){return t.mode&1?V&2&&Pe!==0?Pe&-Pe:PE.transition!==null?(Ea===0&&(Ea=Rm()),Ea):(t=J,t!==0||(t=window.event,t=t===void 0?16:km(t.type)),t):1}function ft(t,e,r,n){if(50<as)throw as=0,vp=null,Error(I(185));bs(t,r,n),(!(V&2)||t!==fe)&&(t===fe&&(!(V&2)&&(lc|=r),he===4&&rr(t,Pe)),He(t,n),r===1&&V===0&&!(e.mode&1)&&(xn=ce()+500,sc&&Cr()))}function He(t,e){var r=t.callbackNode;PR(t,e);var n=Ma(t,t===fe?Pe:0);if(n===0)r!==null&&lh(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&lh(r),e===1)t.tag===0?CE(rv.bind(null,t)):Jm(rv.bind(null,t)),gE(function(){!(V&6)&&Cr()}),r=null;else{switch(Em(n)){case 1:r=xp;break;case 4:r=Cm;break;case 16:r=ba;break;case 536870912:r=Pm;break;default:r=ba}r=Ky(r,Fy.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Fy(t,e){if(Ra=-1,Ea=0,V&6)throw Error(I(327));var r=t.callbackNode;if(Mn()&&t.callbackNode!==r)return null;var n=Ma(t,t===fe?Pe:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ga(t,n);else{e=n;var o=V;V|=2;var s=Uy();(fe!==t||Pe!==e)&&(Nt=null,xn=ce()+500,Jr(t,e));do try{qE();break}catch(i){qy(t,i)}while(!0);Xp(),Ha.current=s,V=o,pe!==null?e=0:(fe=null,Pe=0,e=he)}if(e!==0){if(e===2&&(o=ql(t),o!==0&&(n=o,e=fp(t,o))),e===1)throw r=Is,Jr(t,0),rr(t,n),He(t,ce()),r;if(e===6)rr(t,n);else{if(o=t.current.alternate,!(n&30)&&!BE(o)&&(e=Ga(t,n),e===2&&(s=ql(t),s!==0&&(n=s,e=fp(t,s))),e===1))throw r=Is,Jr(t,0),rr(t,n),He(t,ce()),r;switch(t.finishedWork=o,t.finishedLanes=n,e){case 0:case 1:throw Error(I(345));case 2:Ur(t,Ue,Nt);break;case 3:if(rr(t,n),(n&130023424)===n&&(e=dd+500-ce(),10<e)){if(Ma(t,0)!==0)break;if(o=t.suspendedLanes,(o&n)!==n){xe(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Gl(Ur.bind(null,t,Ue,Nt),e);break}Ur(t,Ue,Nt);break;case 4:if(rr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,o=-1;0<n;){var a=31-vt(n);s=1<<a,a=e[a],a>o&&(o=a),n&=~s}if(n=o,n=ce()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xE(n/1960))-n,10<n){t.timeoutHandle=Gl(Ur.bind(null,t,Ue,Nt),n);break}Ur(t,Ue,Nt);break;case 5:Ur(t,Ue,Nt);break;default:throw Error(I(329))}}}return He(t,ce()),t.callbackNode===r?Fy.bind(null,t):null}function fp(t,e){var r=ss;return t.current.memoizedState.isDehydrated&&(Jr(t,e).flags|=256),t=Ga(t,e),t!==2&&(e=Ue,Ue=r,e!==null&&gp(e)),t}function gp(t){Ue===null?Ue=t:Ue.push.apply(Ue,t)}function BE(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],s=o.getSnapshot;o=o.value;try{if(!gt(s(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rr(t,e){for(e&=~pd,e&=~lc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-vt(e),n=1<<r;t[r]=-1,e&=~n}}function rv(t){if(V&6)throw Error(I(327));Mn();var e=Ma(t,0);if(!(e&1))return He(t,ce()),null;var r=Ga(t,e);if(t.tag!==0&&r===2){var n=ql(t);n!==0&&(e=n,r=fp(t,n))}if(r===1)throw r=Is,Jr(t,0),rr(t,e),He(t,ce()),r;if(r===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ur(t,Ue,Nt),He(t,ce()),null}function hd(t,e){var r=V;V|=1;try{return t(e)}finally{V=r,V===0&&(xn=ce()+500,sc&&Cr())}}function en(t){ir!==null&&ir.tag===0&&!(V&6)&&Mn();var e=V;V|=1;var r=ot.transition,n=J;try{if(ot.transition=null,J=1,t)return t()}finally{J=n,ot.transition=r,V=e,!(V&6)&&Cr()}}function vd(){Je=In.current,Z(In)}function Jr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,fE(r)),pe!==null)for(r=pe.return;r!==null;){var n=r;switch(Jp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ja();break;case 3:jn(),Z(We),Z(Ne),nd();break;case 5:rd(n);break;case 4:jn();break;case 13:Z(te);break;case 19:Z(te);break;case 10:Yp(n.type._context);break;case 22:case 23:vd()}r=r.return}if(fe=t,pe=t=hr(t.current,null),Pe=Je=e,he=0,Is=null,pd=lc=Zr=0,Ue=ss=null,Vr!==null){for(e=0;e<Vr.length;e++)if(r=Vr[e],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=o,n.next=a}r.pending=n}Vr=null}return t}function qy(t,e){do{var r=pe;try{if(Xp(),Sa.current=Va,Wa){for(var n=re.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Wa=!1}if(Yr=0,ve=de=re=null,is=!1,Rs=0,ld.current=null,r===null||r.return===null){he=1,Is=e,pe=null;break}e:{var s=t,a=r.return,i=r,c=e;if(e=Pe,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=i,p=l.tag;if(!(l.mode&1)&&(p===0||p===11||p===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=$h(a);if(h!==null){h.flags&=-257,Wh(h,a,i,s,e),h.mode&1&&Uh(s,u,e),e=h,c=u;var v=e.updateQueue;if(v===null){var m=new Set;m.add(c),e.updateQueue=m}else v.add(c);break e}else{if(!(e&1)){Uh(s,u,e),fd();break e}c=Error(I(426))}}else if(ee&&i.mode&1){var S=$h(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Wh(S,a,i,s,e),Gp(Ln(c,i));break e}}s=c=Ln(c,i),he!==4&&(he=2),ss===null?ss=[s]:ss.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var f=wy(s,c,e);Nh(s,f);break e;case 1:i=c;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(pr===null||!pr.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=Iy(s,i,e);Nh(s,C);break e}}s=s.return}while(s!==null)}Wy(r)}catch(P){e=P,pe===r&&r!==null&&(pe=r=r.return);continue}break}while(!0)}function Uy(){var t=Ha.current;return Ha.current=Va,t===null?Va:t}function fd(){(he===0||he===3||he===2)&&(he=4),fe===null||!(Zr&268435455)&&!(lc&268435455)||rr(fe,Pe)}function Ga(t,e){var r=V;V|=2;var n=Uy();(fe!==t||Pe!==e)&&(Nt=null,Jr(t,e));do try{FE();break}catch(o){qy(t,o)}while(!0);if(Xp(),V=r,Ha.current=n,pe!==null)throw Error(I(261));return fe=null,Pe=0,he}function FE(){for(;pe!==null;)$y(pe)}function qE(){for(;pe!==null&&!dR();)$y(pe)}function $y(t){var e=Hy(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?Wy(t):pe=e,ld.current=null}function Wy(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=zE(r,e),r!==null){r.flags&=32767,pe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,pe=null;return}}else if(r=DE(r,e,Je),r!==null){pe=r;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=t}while(e!==null);he===0&&(he=5)}function Ur(t,e,r){var n=J,o=ot.transition;try{ot.transition=null,J=1,UE(t,e,r,n)}finally{ot.transition=o,J=n}return null}function UE(t,e,r,n){do Mn();while(ir!==null);if(V&6)throw Error(I(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(RR(t,s),t===fe&&(pe=fe=null,Pe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||aa||(aa=!0,Ky(ba,function(){return Mn(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=ot.transition,ot.transition=null;var a=J;J=1;var i=V;V|=4,ld.current=null,jE(t,r),xy(r,t),cE(Kl),Oa=!!Hl,Kl=Hl=null,t.current=r,LE(r),hR(),V=i,J=a,ot.transition=s}else t.current=r;if(aa&&(aa=!1,ir=t,Ja=o),s=t.pendingLanes,s===0&&(pr=null),gR(r.stateNode),He(t,ce()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)o=e[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(Ka)throw Ka=!1,t=hp,hp=null,t;return Ja&1&&t.tag!==0&&Mn(),s=t.pendingLanes,s&1?t===vp?as++:(as=0,vp=t):as=0,Cr(),null}function Mn(){if(ir!==null){var t=Em(Ja),e=ot.transition,r=J;try{if(ot.transition=null,J=16>t?16:t,ir===null)var n=!1;else{if(t=ir,ir=null,Ja=0,V&6)throw Error(I(331));var o=V;for(V|=4,A=t.current;A!==null;){var s=A,a=s.child;if(A.flags&16){var i=s.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(A=u;A!==null;){var l=A;switch(l.tag){case 0:case 11:case 15:os(8,l,s)}var p=l.child;if(p!==null)p.return=l,A=p;else for(;A!==null;){l=A;var d=l.sibling,h=l.return;if(Ny(l),l===u){A=null;break}if(d!==null){d.return=h,A=d;break}A=h}}}var v=s.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var S=m.sibling;m.sibling=null,m=S}while(m!==null)}}A=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,A=a;else e:for(;A!==null;){if(s=A,s.flags&2048)switch(s.tag){case 0:case 11:case 15:os(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,A=f;break e}A=s.return}}var g=t.current;for(A=g;A!==null;){a=A;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,A=y;else e:for(a=g;A!==null;){if(i=A,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:uc(9,i)}}catch(P){se(i,i.return,P)}if(i===a){A=null;break e}var C=i.sibling;if(C!==null){C.return=i.return,A=C;break e}A=i.return}}if(V=o,Cr(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(tc,t)}catch{}n=!0}return n}finally{J=r,ot.transition=e}}return!1}function nv(t,e,r){e=Ln(r,e),e=wy(t,e,1),t=lr(t,e,1),e=xe(),t!==null&&(bs(t,1,e),He(t,e))}function se(t,e,r){if(t.tag===3)nv(t,t,r);else for(;e!==null;){if(e.tag===3){nv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(pr===null||!pr.has(n))){t=Ln(r,t),t=Iy(e,t,1),e=lr(e,t,1),t=xe(),e!==null&&(bs(e,1,t),He(e,t));break}}e=e.return}}function $E(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=xe(),t.pingedLanes|=t.suspendedLanes&r,fe===t&&(Pe&r)===r&&(he===4||he===3&&(Pe&130023424)===Pe&&500>ce()-dd?Jr(t,0):pd|=r),He(t,e)}function Vy(t,e){e===0&&(t.mode&1?(e=Xs,Xs<<=1,!(Xs&130023424)&&(Xs=4194304)):e=1);var r=xe();t=$t(t,e),t!==null&&(bs(t,e,r),He(t,r))}function WE(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Vy(t,r)}function VE(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(e),Vy(t,r)}var Hy;Hy=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||We.current)$e=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return $e=!1,OE(t,e,r);$e=!!(t.flags&131072)}else $e=!1,ee&&e.flags&1048576&&Gm(e,Ba,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Pa(t,e),t=e.pendingProps;var o=Dn(e,Ne.current);bn(e,r),o=od(null,e,n,t,o,r);var s=sd();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ve(n)?(s=!0,La(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,ed(e),o.updater=ac,e.stateNode=o,o._reactInternals=e,rp(e,n,t,r),e=op(null,e,n,!0,s,r)):(e.tag=0,ee&&s&&Kp(e),Le(null,e,o,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Pa(t,e),t=e.pendingProps,o=n._init,n=o(n._payload),e.type=n,o=e.tag=KE(n),t=lt(n,t),o){case 0:e=ip(null,e,n,t,r);break e;case 1:e=Kh(null,e,n,t,r);break e;case 11:e=Vh(null,e,n,t,r);break e;case 14:e=Hh(null,e,n,lt(n.type,t),r);break e}throw Error(I(306,n,""))}return e;case 0:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:lt(n,o),ip(t,e,n,o,r);case 1:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:lt(n,o),Kh(t,e,n,o,r);case 3:e:{if(ky(e),t===null)throw Error(I(387));n=e.pendingProps,s=e.memoizedState,o=s.element,Zm(t,e),Ua(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Ln(Error(I(423)),e),e=Jh(t,e,n,r,o);break e}else if(n!==o){o=Ln(Error(I(424)),e),e=Jh(t,e,n,r,o);break e}else for(Ge=ur(e.stateNode.containerInfo.firstChild),Qe=e,ee=!0,ht=null,r=ny(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(zn(),n===o){e=Wt(t,e,r);break e}Le(t,e,n,r)}e=e.child}return e;case 5:return iy(e),t===null&&Zl(e),n=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,a=o.children,Jl(n,o)?a=null:s!==null&&Jl(n,s)&&(e.flags|=32),Ay(t,e),Le(t,e,a,r),e.child;case 6:return t===null&&Zl(e),null;case 13:return by(t,e,r);case 4:return td(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Nn(e,null,n,r):Le(t,e,n,r),e.child;case 11:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:lt(n,o),Vh(t,e,n,o,r);case 7:return Le(t,e,e.pendingProps,r),e.child;case 8:return Le(t,e,e.pendingProps.children,r),e.child;case 12:return Le(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,o=e.pendingProps,s=e.memoizedProps,a=o.value,G(Fa,n._currentValue),n._currentValue=a,s!==null)if(gt(s.value,a)){if(s.children===o.children&&!We.current){e=Wt(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var i=s.dependencies;if(i!==null){a=s.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Bt(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),ep(s.return,r,e),i.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(I(341));a.lanes|=r,i=a.alternate,i!==null&&(i.lanes|=r),ep(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Le(t,e,o.children,r),e=e.child}return e;case 9:return o=e.type,n=e.pendingProps.children,bn(e,r),o=st(o),n=n(o),e.flags|=1,Le(t,e,n,r),e.child;case 14:return n=e.type,o=lt(n,e.pendingProps),o=lt(n.type,o),Hh(t,e,n,o,r);case 15:return Ty(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:lt(n,o),Pa(t,e),e.tag=1,Ve(n)?(t=!0,La(e)):t=!1,bn(e,r),ty(e,n,o),rp(e,n,o,r),op(null,e,n,!0,t,r);case 19:return My(t,e,r);case 22:return _y(t,e,r)}throw Error(I(156,e.tag))};function Ky(t,e){return Sm(t,e)}function HE(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(t,e,r,n){return new HE(t,e,r,n)}function gd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KE(t){if(typeof t=="function")return gd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Np)return 11;if(t===jp)return 14}return 2}function hr(t,e){var r=t.alternate;return r===null?(r=it(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function wa(t,e,r,n,o,s){var a=2;if(n=t,typeof t=="function")gd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case fn:return Gr(r.children,o,s,e);case zp:a=8,o|=8;break;case Tl:return t=it(12,r,e,o|2),t.elementType=Tl,t.lanes=s,t;case _l:return t=it(13,r,e,o),t.elementType=_l,t.lanes=s,t;case Al:return t=it(19,r,e,o),t.elementType=Al,t.lanes=s,t;case rm:return pc(r,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case em:a=10;break e;case tm:a=9;break e;case Np:a=11;break e;case jp:a=14;break e;case Xt:a=16,n=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=it(a,r,e,o),e.elementType=t,e.type=n,e.lanes=s,e}function Gr(t,e,r,n){return t=it(7,t,n,e),t.lanes=r,t}function pc(t,e,r,n){return t=it(22,t,n,e),t.elementType=rm,t.lanes=r,t.stateNode={isHidden:!1},t}function tl(t,e,r){return t=it(6,t,null,e),t.lanes=r,t}function rl(t,e,r){return e=it(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JE(t,e,r,n,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ju(0),this.expirationTimes=ju(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ju(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function md(t,e,r,n,o,s,a,i,c){return t=new JE(t,e,r,i,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=it(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ed(s),t}function GE(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Jy(t){if(!t)return gr;t=t._reactInternals;e:{if(on(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ve(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var r=t.type;if(Ve(r))return Km(t,r,e)}return e}function Gy(t,e,r,n,o,s,a,i,c){return t=md(r,n,!0,t,o,s,a,i,c),t.context=Jy(null),r=t.current,n=xe(),o=dr(r),s=Bt(n,o),s.callback=e??null,lr(r,s,o),t.current.lanes=o,bs(t,o,n),He(t,n),t}function dc(t,e,r,n){var o=e.current,s=xe(),a=dr(o);return r=Jy(r),e.context===null?e.context=r:e.pendingContext=r,e=Bt(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=lr(o,e,a),t!==null&&(ft(t,o,a,s),ya(t,o,a)),a}function Qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function yd(t,e){iv(t,e),(t=t.alternate)&&iv(t,e)}function QE(){return null}var Qy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sd(t){this._internalRoot=t}hc.prototype.render=Sd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));dc(t,e,null,null)};hc.prototype.unmount=Sd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;en(function(){dc(null,t,null,null)}),e[Ut]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tm();t={blockedOn:null,target:t,priority:e};for(var r=0;r<tr.length&&e!==0&&e<tr[r].priority;r++);tr.splice(r,0,t),r===0&&Am(t)}};function Cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ov(){}function XE(t,e,r,n,o){if(o){if(typeof n=="function"){var s=n;n=function(){var u=Qa(a);s.call(u)}}var a=Gy(e,n,t,0,null,!1,!1,"",ov);return t._reactRootContainer=a,t[Ut]=a.current,ms(t.nodeType===8?t.parentNode:t),en(),a}for(;o=t.lastChild;)t.removeChild(o);if(typeof n=="function"){var i=n;n=function(){var u=Qa(c);i.call(u)}}var c=md(t,0,!1,null,null,!1,!1,"",ov);return t._reactRootContainer=c,t[Ut]=c.current,ms(t.nodeType===8?t.parentNode:t),en(function(){dc(e,c,r,n)}),c}function fc(t,e,r,n,o){var s=r._reactRootContainer;if(s){var a=s;if(typeof o=="function"){var i=o;o=function(){var c=Qa(a);i.call(c)}}dc(e,a,t,o)}else a=XE(r,e,t,o,n);return Qa(a)}wm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Go(e.pendingLanes);r!==0&&(Bp(e,r|1),He(e,ce()),!(V&6)&&(xn=ce()+500,Cr()))}break;case 13:en(function(){var n=$t(t,1);if(n!==null){var o=xe();ft(n,t,1,o)}}),yd(t,1)}};Fp=function(t){if(t.tag===13){var e=$t(t,134217728);if(e!==null){var r=xe();ft(e,t,134217728,r)}yd(t,134217728)}};Im=function(t){if(t.tag===13){var e=dr(t),r=$t(t,e);if(r!==null){var n=xe();ft(r,t,e,n)}yd(t,e)}};Tm=function(){return J};_m=function(t,e){var r=J;try{return J=t,e()}finally{J=r}};xl=function(t,e,r){switch(e){case"input":if(Ml(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var o=oc(n);if(!o)throw Error(I(90));im(n),Ml(n,o)}}}break;case"textarea":sm(t,r);break;case"select":e=r.value,e!=null&&Tn(t,!!r.multiple,e,!1)}};hm=hd;vm=en;var YE={usingClientEntryPoint:!1,Events:[Os,Sn,oc,pm,dm,hd]},oi={findFiberByHostInstance:Wr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZE={bundleType:oi.bundleType,version:oi.version,rendererPackageName:oi.rendererPackageName,rendererConfig:oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mm(t),t===null?null:t.stateNode},findFiberByHostInstance:oi.findFiberByHostInstance||QE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{tc=ca.inject(ZE),Tt=ca}catch{}}Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YE;Ye.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cd(e))throw Error(I(200));return GE(t,e,null,r)};Ye.createRoot=function(t,e){if(!Cd(t))throw Error(I(299));var r=!1,n="",o=Qy;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=md(t,1,!1,null,null,r,!1,n,o),t[Ut]=e.current,ms(t.nodeType===8?t.parentNode:t),new Sd(e)};Ye.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=mm(e),t=t===null?null:t.stateNode,t};Ye.flushSync=function(t){return en(t)};Ye.hydrate=function(t,e,r){if(!vc(e))throw Error(I(200));return fc(null,t,e,!0,r)};Ye.hydrateRoot=function(t,e,r){if(!Cd(t))throw Error(I(405));var n=r!=null&&r.hydratedSources||null,o=!1,s="",a=Qy;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=Gy(e,null,t,1,r??null,o,!1,s,a),t[Ut]=e.current,ms(t),n)for(t=0;t<n.length;t++)r=n[t],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new hc(e)};Ye.render=function(t,e,r){if(!vc(e))throw Error(I(200));return fc(null,t,e,!1,r)};Ye.unmountComponentAtNode=function(t){if(!vc(t))throw Error(I(40));return t._reactRootContainer?(en(function(){fc(null,null,t,!1,function(){t._reactRootContainer=null,t[Ut]=null})}),!0):!1};Ye.unstable_batchedUpdates=hd;Ye.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!vc(r))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return fc(t,e,r,!1,n)};Ye.version="18.2.0-next-9e3b772b8-20220608";function Xy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xy)}catch(t){console.error(t)}}Xy(),Gg.exports=Ye;var ew=Gg.exports,sv=ew;wl.createRoot=sv.createRoot,wl.hydrateRoot=sv.hydrateRoot;const tw={theme:"system",setTheme:()=>null},rw=H.createContext(tw);function nw({children:t,defaultTheme:e="system",storageKey:r="vite-ui-theme",...n}){const[o,s]=H.useState(()=>localStorage.getItem(r)||e);H.useEffect(()=>{const i=window.document.documentElement;if(i.classList.remove("light","dark"),o==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";i.classList.add(c);return}i.classList.add(o)},[o]);const a={theme:o,setTheme:i=>{localStorage.setItem(r,i),s(i)}};return pt.jsx(rw.Provider,{...n,value:a,children:t})}function Xa(){return Xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xa.apply(this,arguments)}function iw(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function ow(...t){return e=>t.forEach(r=>iw(r,e))}const Yy=H.forwardRef((t,e)=>{const{children:r,...n}=t,o=H.Children.toArray(r),s=o.find(aw);if(s){const a=s.props.children,i=o.map(c=>c===s?H.Children.count(a)>1?H.Children.only(null):H.isValidElement(a)?a.props.children:null:c);return H.createElement(mp,Xa({},n,{ref:e}),H.isValidElement(a)?H.cloneElement(a,void 0,i):null)}return H.createElement(mp,Xa({},n,{ref:e}),r)});Yy.displayName="Slot";const mp=H.forwardRef((t,e)=>{const{children:r,...n}=t;return H.isValidElement(r)?H.cloneElement(r,{...cw(n,r.props),ref:e?ow(e,r.ref):r.ref}):H.Children.count(r)>1?H.Children.only(null):null});mp.displayName="SlotClone";const sw=({children:t})=>H.createElement(H.Fragment,null,t);function aw(t){return H.isValidElement(t)&&t.type===sw}function cw(t,e){const r={...e};for(const n in e){const o=t[n],s=e[n];/^on[A-Z]/.test(n)?o&&s?r[n]=(...i)=>{s(...i),o(...i)}:o&&(r[n]=o):n==="style"?r[n]={...o,...s}:n==="className"&&(r[n]=[o,s].filter(Boolean).join(" "))}return{...t,...r}}function Zy(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=Zy(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function uw(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=Zy(t))&&(n&&(n+=" "),n+=e);return n}const av=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,cv=uw,lw=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return cv(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:s}=e,a=Object.keys(o).map(u=>{const l=r==null?void 0:r[u],p=s==null?void 0:s[u];if(l===null)return null;const d=av(l)||av(p);return o[u][d]}),i=r&&Object.entries(r).reduce((u,l)=>{let[p,d]=l;return d===void 0||(u[p]=d),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,l)=>{let{class:p,className:d,...h}=l;return Object.entries(h).every(v=>{let[m,S]=v;return Array.isArray(S)?S.includes({...s,...i}[m]):{...s,...i}[m]===S})?[...u,p,d]:u},[]);return cv(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};function eS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=eS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function pw(){for(var t,e,r=0,n="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=eS(t))&&(n&&(n+=" "),n+=e);return n}const Pd="-";function dw(t){const e=vw(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;function o(a){const i=a.split(Pd);return i[0]===""&&i.length!==1&&i.shift(),tS(i,e)||hw(a)}function s(a,i){const c=r[a]||[];return i&&n[a]?[...c,...n[a]]:c}return{getClassGroupId:o,getConflictingClassGroupIds:s}}function tS(t,e){var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),o=n?tS(t.slice(1),n):void 0;if(o)return o;if(e.validators.length===0)return;const s=t.join(Pd);return(a=e.validators.find(({validator:i})=>i(s)))==null?void 0:a.classGroupId}const uv=/^\[(.+)\]$/;function hw(t){if(uv.test(t)){const e=uv.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function vw(t){const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return gw(Object.entries(t.classGroups),r).forEach(([s,a])=>{yp(a,n,s,e)}),n}function yp(t,e,r,n){t.forEach(o=>{if(typeof o=="string"){const s=o===""?e:lv(e,o);s.classGroupId=r;return}if(typeof o=="function"){if(fw(o)){yp(o(n),e,r,n);return}e.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([s,a])=>{yp(a,lv(e,s),r,n)})})}function lv(t,e){let r=t;return e.split(Pd).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function fw(t){return t.isThemeGetter}function gw(t,e){return e?t.map(([r,n])=>{const o=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,i])=>[e+a,i])):s);return[r,o]}):t}function mw(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;function o(s,a){r.set(s,a),e++,e>t&&(e=0,n=r,r=new Map)}return{get(s){let a=r.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return o(s,a),a},set(s,a){r.has(s)?r.set(s,a):o(s,a)}}}const rS="!";function yw(t){const e=t.separator,r=e.length===1,n=e[0],o=e.length;return function(a){const i=[];let c=0,u=0,l;for(let m=0;m<a.length;m++){let S=a[m];if(c===0){if(S===n&&(r||a.slice(m,m+o)===e)){i.push(a.slice(u,m)),u=m+o;continue}if(S==="/"){l=m;continue}}S==="["?c++:S==="]"&&c--}const p=i.length===0?a:a.substring(u),d=p.startsWith(rS),h=d?p.substring(1):p,v=l&&l>u?l-u:void 0;return{modifiers:i,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:v}}}function Sw(t){if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e}function Cw(t){return{cache:mw(t.cacheSize),splitModifiers:yw(t),...dw(t)}}const Pw=/\s+/;function Rw(t,e){const{splitModifiers:r,getClassGroupId:n,getConflictingClassGroupIds:o}=e,s=new Set;return t.trim().split(Pw).map(a=>{const{modifiers:i,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:l}=r(a);let p=n(l?u.substring(0,l):u),d=!!l;if(!p){if(!l)return{isTailwindClass:!1,originalClassName:a};if(p=n(u),!p)return{isTailwindClass:!1,originalClassName:a};d=!1}const h=Sw(i).join(":");return{isTailwindClass:!0,modifierId:c?h+rS:h,classGroupId:p,originalClassName:a,hasPostfixModifier:d}}).reverse().filter(a=>{if(!a.isTailwindClass)return!0;const{modifierId:i,classGroupId:c,hasPostfixModifier:u}=a,l=i+c;return s.has(l)?!1:(s.add(l),o(c,u).forEach(p=>s.add(i+p)),!0)}).reverse().map(a=>a.originalClassName).join(" ")}function Ew(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=nS(e))&&(n&&(n+=" "),n+=r);return n}function nS(t){if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=nS(t[n]))&&(r&&(r+=" "),r+=e);return r}function ww(t,...e){let r,n,o,s=a;function a(c){const u=e.reduce((l,p)=>p(l),t());return r=Cw(u),n=r.cache.get,o=r.cache.set,s=i,i(c)}function i(c){const u=n(c);if(u)return u;const l=Rw(c,r);return o(c,l),l}return function(){return s(Ew.apply(null,arguments))}}function X(t){const e=r=>r[t]||[];return e.isThemeGetter=!0,e}const iS=/^\[(?:([a-z-]+):)?(.+)\]$/i,Iw=/^\d+\/\d+$/,Tw=new Set(["px","full","screen"]),_w=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Aw=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kw=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bw=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Mw=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function bt(t){return Kr(t)||Tw.has(t)||Iw.test(t)}function Gt(t){return Hn(t,"length",Bw)}function Kr(t){return!!t&&!Number.isNaN(Number(t))}function ua(t){return Hn(t,"number",Kr)}function si(t){return!!t&&Number.isInteger(Number(t))}function Ow(t){return t.endsWith("%")&&Kr(t.slice(0,-1))}function L(t){return iS.test(t)}function Qt(t){return _w.test(t)}const Dw=new Set(["length","size","percentage"]);function zw(t){return Hn(t,Dw,oS)}function Nw(t){return Hn(t,"position",oS)}const jw=new Set(["image","url"]);function Lw(t){return Hn(t,jw,qw)}function xw(t){return Hn(t,"",Fw)}function ai(){return!0}function Hn(t,e,r){const n=iS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1}function Bw(t){return Aw.test(t)&&!kw.test(t)}function oS(){return!1}function Fw(t){return bw.test(t)}function qw(t){return Mw.test(t)}function Uw(){const t=X("colors"),e=X("spacing"),r=X("blur"),n=X("brightness"),o=X("borderColor"),s=X("borderRadius"),a=X("borderSpacing"),i=X("borderWidth"),c=X("contrast"),u=X("grayscale"),l=X("hueRotate"),p=X("invert"),d=X("gap"),h=X("gradientColorStops"),v=X("gradientColorStopPositions"),m=X("inset"),S=X("margin"),f=X("opacity"),g=X("padding"),y=X("saturate"),C=X("scale"),P=X("sepia"),R=X("skew"),T=X("space"),w=X("translate"),B=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],ue=()=>["auto",L,e],W=()=>[L,e],ie=()=>["",bt,Gt],Ct=()=>["auto",Kr,L],cn=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Pt=()=>["solid","dashed","dotted","double","none"],Kt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],_=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",L],N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[Kr,ua],Q=()=>[Kr,L];return{cacheSize:500,separator:":",theme:{colors:[ai],spacing:[bt,Gt],blur:["none","",Qt,L],brightness:K(),borderColor:[t],borderRadius:["none","","full",Qt,L],borderSpacing:W(),borderWidth:ie(),contrast:K(),grayscale:M(),hueRotate:Q(),invert:M(),gap:W(),gradientColorStops:[t],gradientColorStopPositions:[Ow,Gt],inset:ue(),margin:ue(),opacity:K(),padding:W(),saturate:K(),scale:K(),sepia:M(),skew:Q(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",L]}],container:["container"],columns:[{columns:[Qt]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...cn(),L]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",si,L]}],basis:[{basis:ue()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",L]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",si,L]}],"grid-cols":[{"grid-cols":[ai]}],"col-start-end":[{col:["auto",{span:["full",si,L]},L]}],"col-start":[{"col-start":Ct()}],"col-end":[{"col-end":Ct()}],"grid-rows":[{"grid-rows":[ai]}],"row-start-end":[{row:["auto",{span:[si,L]},L]}],"row-start":[{"row-start":Ct()}],"row-end":[{"row-end":Ct()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",L]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",L]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",..._()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",..._(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[..._(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",L,e]}],"min-w":[{"min-w":[L,e,"min","max","fit"]}],"max-w":[{"max-w":[L,e,"none","full","min","max","fit","prose",{screen:[Qt]},Qt]}],h:[{h:[L,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[L,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[L,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[L,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Qt,Gt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ua]}],"font-family":[{font:[ai]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",L]}],"line-clamp":[{"line-clamp":["none",Kr,ua]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bt,L]}],"list-image":[{"list-image":["none",L]}],"list-style-type":[{list:["none","disc","decimal",L]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[f]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Pt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bt,Gt]}],"underline-offset":[{"underline-offset":["auto",bt,L]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",L]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",L]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[f]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...cn(),Nw]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zw]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Lw]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[f]}],"border-style":[{border:[...Pt(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[f]}],"divide-style":[{divide:Pt()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...Pt()]}],"outline-offset":[{"outline-offset":[bt,L]}],"outline-w":[{outline:[bt,Gt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[f]}],"ring-offset-w":[{"ring-offset":[bt,Gt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Qt,xw]}],"shadow-color":[{shadow:[ai]}],opacity:[{opacity:[f]}],"mix-blend":[{"mix-blend":Kt()}],"bg-blend":[{"bg-blend":Kt()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Qt,L]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[l]}],invert:[{invert:[p]}],saturate:[{saturate:[y]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[l]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[f]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",L]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",L]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",L]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[si,L]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",L]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",L]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",L]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[bt,Gt,ua]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const $w=ww(Uw);function Ww(...t){return $w(pw(t))}const Vw=lw("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Sp=H.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...o},s)=>{const a=n?Yy:"button";return pt.jsx(a,{className:Ww(Vw({variant:e,size:r,className:t})),ref:s,...o})});Sp.displayName="Button";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),sS=(t,e)=>{const r=H.forwardRef(({color:n="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:c,...u},l)=>H.createElement("svg",{ref:l,...Hw,width:o,height:o,stroke:n,strokeWidth:a?Number(s)*24/Number(o):s,className:["lucide",`lucide-${Kw(t)}`,i].join(" "),...u},[...e.map(([p,d])=>H.createElement(p,d)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=sS("Speech",[["path",{d:"M8.8 20v-4.1l1.9.2a2.3 2.3 0 0 0 2.164-2.1V8.3A5.37 5.37 0 0 0 2 8.25c0 2.8.656 3.054 1 4.55a5.77 5.77 0 0 1 .029 2.758L2 20",key:"11atix"}],["path",{d:"M19.8 17.8a7.5 7.5 0 0 0 .003-10.603",key:"yol142"}],["path",{d:"M17 15a3.5 3.5 0 0 0-.025-4.975",key:"ssbmkc"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=sS("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);var Xo={},nl={},gc={},il={},oe={},Kn={},ct={},aS={},mc={},yc={};Object.defineProperty(yc,"__esModule",{value:!0});yc.default=Xw;let la;const Qw=new Uint8Array(16);function Xw(){if(!la&&(la=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!la))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return la(Qw)}var Pr={},sn={},Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});Sc.default=void 0;var Yw=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Sc.default=Yw;Object.defineProperty(sn,"__esModule",{value:!0});sn.default=void 0;var Zw=eI(Sc);function eI(t){return t&&t.__esModule?t:{default:t}}function tI(t){return typeof t=="string"&&Zw.default.test(t)}var rI=tI;sn.default=rI;Object.defineProperty(Pr,"__esModule",{value:!0});Pr.default=void 0;Pr.unsafeStringify=cS;var nI=iI(sn);function iI(t){return t&&t.__esModule?t:{default:t}}const ye=[];for(let t=0;t<256;++t)ye.push((t+256).toString(16).slice(1));function cS(t,e=0){return ye[t[e+0]]+ye[t[e+1]]+ye[t[e+2]]+ye[t[e+3]]+"-"+ye[t[e+4]]+ye[t[e+5]]+"-"+ye[t[e+6]]+ye[t[e+7]]+"-"+ye[t[e+8]]+ye[t[e+9]]+"-"+ye[t[e+10]]+ye[t[e+11]]+ye[t[e+12]]+ye[t[e+13]]+ye[t[e+14]]+ye[t[e+15]]}function oI(t,e=0){const r=cS(t,e);if(!(0,nI.default)(r))throw TypeError("Stringified UUID is invalid");return r}var sI=oI;Pr.default=sI;Object.defineProperty(mc,"__esModule",{value:!0});mc.default=void 0;var aI=uI(yc),cI=Pr;function uI(t){return t&&t.__esModule?t:{default:t}}let pv,ol,sl=0,al=0;function lI(t,e,r){let n=e&&r||0;const o=e||new Array(16);t=t||{};let s=t.node||pv,a=t.clockseq!==void 0?t.clockseq:ol;if(s==null||a==null){const d=t.random||(t.rng||aI.default)();s==null&&(s=pv=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=ol=(d[6]<<8|d[7])&16383)}let i=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:al+1;const u=i-sl+(c-al)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||i>sl)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");sl=i,al=c,ol=a,i+=122192928e5;const l=((i&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;const p=i/4294967296*1e4&268435455;o[n++]=p>>>8&255,o[n++]=p&255,o[n++]=p>>>24&15|16,o[n++]=p>>>16&255,o[n++]=a>>>8|128,o[n++]=a&255;for(let d=0;d<6;++d)o[n+d]=s[d];return e||(0,cI.unsafeStringify)(o)}var pI=lI;mc.default=pI;var Cc={},mr={},zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.default=void 0;var dI=hI(sn);function hI(t){return t&&t.__esModule?t:{default:t}}function vI(t){if(!(0,dI.default)(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var fI=vI;zs.default=fI;Object.defineProperty(mr,"__esModule",{value:!0});mr.URL=mr.DNS=void 0;mr.default=CI;var gI=Pr,mI=yI(zs);function yI(t){return t&&t.__esModule?t:{default:t}}function SI(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}const uS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";mr.DNS=uS;const lS="6ba7b811-9dad-11d1-80b4-00c04fd430c8";mr.URL=lS;function CI(t,e,r){function n(o,s,a,i){var c;if(typeof o=="string"&&(o=SI(o)),typeof s=="string"&&(s=(0,mI.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+o.length);if(u.set(s),u.set(o,s.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){i=i||0;for(let l=0;l<16;++l)a[i+l]=u[l];return a}return(0,gI.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=uS,n.URL=lS,n}var Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.default=void 0;function PI(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return RI(EI(wI(t),t.length*8))}function RI(t){const e=[],r=t.length*32,n="0123456789abcdef";for(let o=0;o<r;o+=8){const s=t[o>>5]>>>o%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(a)}return e}function pS(t){return(t+64>>>9<<4)+14+1}function EI(t,e){t[e>>5]|=128<<e%32,t[pS(e)-1]=e;let r=1732584193,n=-271733879,o=-1732584194,s=271733878;for(let a=0;a<t.length;a+=16){const i=r,c=n,u=o,l=s;r=Ae(r,n,o,s,t[a],7,-680876936),s=Ae(s,r,n,o,t[a+1],12,-389564586),o=Ae(o,s,r,n,t[a+2],17,606105819),n=Ae(n,o,s,r,t[a+3],22,-1044525330),r=Ae(r,n,o,s,t[a+4],7,-176418897),s=Ae(s,r,n,o,t[a+5],12,1200080426),o=Ae(o,s,r,n,t[a+6],17,-1473231341),n=Ae(n,o,s,r,t[a+7],22,-45705983),r=Ae(r,n,o,s,t[a+8],7,1770035416),s=Ae(s,r,n,o,t[a+9],12,-1958414417),o=Ae(o,s,r,n,t[a+10],17,-42063),n=Ae(n,o,s,r,t[a+11],22,-1990404162),r=Ae(r,n,o,s,t[a+12],7,1804603682),s=Ae(s,r,n,o,t[a+13],12,-40341101),o=Ae(o,s,r,n,t[a+14],17,-1502002290),n=Ae(n,o,s,r,t[a+15],22,1236535329),r=ke(r,n,o,s,t[a+1],5,-165796510),s=ke(s,r,n,o,t[a+6],9,-1069501632),o=ke(o,s,r,n,t[a+11],14,643717713),n=ke(n,o,s,r,t[a],20,-373897302),r=ke(r,n,o,s,t[a+5],5,-701558691),s=ke(s,r,n,o,t[a+10],9,38016083),o=ke(o,s,r,n,t[a+15],14,-660478335),n=ke(n,o,s,r,t[a+4],20,-405537848),r=ke(r,n,o,s,t[a+9],5,568446438),s=ke(s,r,n,o,t[a+14],9,-1019803690),o=ke(o,s,r,n,t[a+3],14,-187363961),n=ke(n,o,s,r,t[a+8],20,1163531501),r=ke(r,n,o,s,t[a+13],5,-1444681467),s=ke(s,r,n,o,t[a+2],9,-51403784),o=ke(o,s,r,n,t[a+7],14,1735328473),n=ke(n,o,s,r,t[a+12],20,-1926607734),r=be(r,n,o,s,t[a+5],4,-378558),s=be(s,r,n,o,t[a+8],11,-2022574463),o=be(o,s,r,n,t[a+11],16,1839030562),n=be(n,o,s,r,t[a+14],23,-35309556),r=be(r,n,o,s,t[a+1],4,-1530992060),s=be(s,r,n,o,t[a+4],11,1272893353),o=be(o,s,r,n,t[a+7],16,-155497632),n=be(n,o,s,r,t[a+10],23,-1094730640),r=be(r,n,o,s,t[a+13],4,681279174),s=be(s,r,n,o,t[a],11,-358537222),o=be(o,s,r,n,t[a+3],16,-722521979),n=be(n,o,s,r,t[a+6],23,76029189),r=be(r,n,o,s,t[a+9],4,-640364487),s=be(s,r,n,o,t[a+12],11,-421815835),o=be(o,s,r,n,t[a+15],16,530742520),n=be(n,o,s,r,t[a+2],23,-995338651),r=Me(r,n,o,s,t[a],6,-198630844),s=Me(s,r,n,o,t[a+7],10,1126891415),o=Me(o,s,r,n,t[a+14],15,-1416354905),n=Me(n,o,s,r,t[a+5],21,-57434055),r=Me(r,n,o,s,t[a+12],6,1700485571),s=Me(s,r,n,o,t[a+3],10,-1894986606),o=Me(o,s,r,n,t[a+10],15,-1051523),n=Me(n,o,s,r,t[a+1],21,-2054922799),r=Me(r,n,o,s,t[a+8],6,1873313359),s=Me(s,r,n,o,t[a+15],10,-30611744),o=Me(o,s,r,n,t[a+6],15,-1560198380),n=Me(n,o,s,r,t[a+13],21,1309151649),r=Me(r,n,o,s,t[a+4],6,-145523070),s=Me(s,r,n,o,t[a+11],10,-1120210379),o=Me(o,s,r,n,t[a+2],15,718787259),n=Me(n,o,s,r,t[a+9],21,-343485551),r=or(r,i),n=or(n,c),o=or(o,u),s=or(s,l)}return[r,n,o,s]}function wI(t){if(t.length===0)return[];const e=t.length*8,r=new Uint32Array(pS(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function or(t,e){const r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function II(t,e){return t<<e|t>>>32-e}function Rc(t,e,r,n,o,s){return or(II(or(or(e,t),or(n,s)),o),r)}function Ae(t,e,r,n,o,s,a){return Rc(e&r|~e&n,t,e,o,s,a)}function ke(t,e,r,n,o,s,a){return Rc(e&n|r&~n,t,e,o,s,a)}function be(t,e,r,n,o,s,a){return Rc(e^r^n,t,e,o,s,a)}function Me(t,e,r,n,o,s,a){return Rc(r^(e|~n),t,e,o,s,a)}var TI=PI;Pc.default=TI;Object.defineProperty(Cc,"__esModule",{value:!0});Cc.default=void 0;var _I=dS(mr),AI=dS(Pc);function dS(t){return t&&t.__esModule?t:{default:t}}const kI=(0,_I.default)("v3",48,AI.default);var bI=kI;Cc.default=bI;var Ec={},wc={};Object.defineProperty(wc,"__esModule",{value:!0});wc.default=void 0;const MI=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var OI={randomUUID:MI};wc.default=OI;Object.defineProperty(Ec,"__esModule",{value:!0});Ec.default=void 0;var dv=hS(wc),DI=hS(yc),zI=Pr;function hS(t){return t&&t.__esModule?t:{default:t}}function NI(t,e,r){if(dv.default.randomUUID&&!e&&!t)return dv.default.randomUUID();t=t||{};const n=t.random||(t.rng||DI.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return(0,zI.unsafeStringify)(n)}var jI=NI;Ec.default=jI;var Ic={},Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.default=void 0;function LI(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function cl(t,e){return t<<e|t>>>32-e}function xI(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const a=unescape(encodeURIComponent(t));t=[];for(let i=0;i<a.length;++i)t.push(a.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,o=Math.ceil(n/16),s=new Array(o);for(let a=0;a<o;++a){const i=new Uint32Array(16);for(let c=0;c<16;++c)i[c]=t[a*64+c*4]<<24|t[a*64+c*4+1]<<16|t[a*64+c*4+2]<<8|t[a*64+c*4+3];s[a]=i}s[o-1][14]=(t.length-1)*8/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=(t.length-1)*8&4294967295;for(let a=0;a<o;++a){const i=new Uint32Array(80);for(let h=0;h<16;++h)i[h]=s[a][h];for(let h=16;h<80;++h)i[h]=cl(i[h-3]^i[h-8]^i[h-14]^i[h-16],1);let c=r[0],u=r[1],l=r[2],p=r[3],d=r[4];for(let h=0;h<80;++h){const v=Math.floor(h/20),m=cl(c,5)+LI(v,u,l,p)+d+e[v]+i[h]>>>0;d=p,p=l,l=cl(u,30)>>>0,u=c,c=m}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+p>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var BI=xI;Tc.default=BI;Object.defineProperty(Ic,"__esModule",{value:!0});Ic.default=void 0;var FI=vS(mr),qI=vS(Tc);function vS(t){return t&&t.__esModule?t:{default:t}}const UI=(0,FI.default)("v5",80,qI.default);var $I=UI;Ic.default=$I;var _c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.default=void 0;var WI="00000000-0000-0000-0000-000000000000";_c.default=WI;var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.default=void 0;var VI=HI(sn);function HI(t){return t&&t.__esModule?t:{default:t}}function KI(t){if(!(0,VI.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var JI=KI;Ac.default=JI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.default}});var e=l(mc),r=l(Cc),n=l(Ec),o=l(Ic),s=l(_c),a=l(Ac),i=l(sn),c=l(Pr),u=l(zs);function l(p){return p&&p.__esModule?p:{default:p}}})(aS);Object.defineProperty(ct,"__esModule",{value:!0});ct.createNoDashGuid=ct.createGuid=void 0;const GI=aS,fS=()=>GI.v4();ct.createGuid=fS;const QI=()=>fS().replace(new RegExp("-","g"),"").toUpperCase();ct.createNoDashGuid=QI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const e=ct;(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None"})(t.EventType||(t.EventType={}));class r{constructor(o,s){this.privName=o,this.privEventId=e.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=s,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}t.PlatformEvent=r})(Kn);Object.defineProperty(oe,"__esModule",{value:!0});oe.AudioStreamNodeErrorEvent=oe.AudioStreamNodeDetachedEvent=oe.AudioStreamNodeAttachedEvent=oe.AudioStreamNodeAttachingEvent=oe.AudioStreamNodeEvent=oe.AudioSourceErrorEvent=oe.AudioSourceOffEvent=oe.AudioSourceReadyEvent=oe.AudioSourceInitializingEvent=oe.AudioSourceEvent=void 0;const Cp=Kn;class Jn extends Cp.PlatformEvent{constructor(e,r,n=Cp.EventType.Info){super(e,n),this.privAudioSourceId=r}get audioSourceId(){return this.privAudioSourceId}}oe.AudioSourceEvent=Jn;class XI extends Jn{constructor(e){super("AudioSourceInitializingEvent",e)}}oe.AudioSourceInitializingEvent=XI;class YI extends Jn{constructor(e){super("AudioSourceReadyEvent",e)}}oe.AudioSourceReadyEvent=YI;class ZI extends Jn{constructor(e){super("AudioSourceOffEvent",e)}}oe.AudioSourceOffEvent=ZI;class e1 extends Jn{constructor(e,r){super("AudioSourceErrorEvent",e,Cp.EventType.Error),this.privError=r}get error(){return this.privError}}oe.AudioSourceErrorEvent=e1;class Ns extends Jn{constructor(e,r,n){super(e,r),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}oe.AudioStreamNodeEvent=Ns;class t1 extends Ns{constructor(e,r){super("AudioStreamNodeAttachingEvent",e,r)}}oe.AudioStreamNodeAttachingEvent=t1;class r1 extends Ns{constructor(e,r){super("AudioStreamNodeAttachedEvent",e,r)}}oe.AudioStreamNodeAttachedEvent=r1;class n1 extends Ns{constructor(e,r){super("AudioStreamNodeDetachedEvent",e,r)}}oe.AudioStreamNodeDetachedEvent=n1;class i1 extends Ns{constructor(e,r,n){super("AudioStreamNodeErrorEvent",e,r),this.privError=n}get error(){return this.privError}}oe.AudioStreamNodeErrorEvent=i1;var le={};Object.defineProperty(le,"__esModule",{value:!0});le.ConnectionMessageSentEvent=le.ConnectionMessageReceivedEvent=le.ConnectionEstablishErrorEvent=le.ConnectionErrorEvent=le.ConnectionClosedEvent=le.ConnectionEstablishedEvent=le.ConnectionStartEvent=le.ConnectionEvent=le.ServiceEvent=void 0;const tn=Kn;class o1 extends tn.PlatformEvent{constructor(e,r,n=tn.EventType.Info){super(e,n),this.privJsonResult=r}get jsonString(){return this.privJsonResult}}le.ServiceEvent=o1;class Rr extends tn.PlatformEvent{constructor(e,r,n=tn.EventType.Info){super(e,n),this.privConnectionId=r}get connectionId(){return this.privConnectionId}}le.ConnectionEvent=Rr;class s1 extends Rr{constructor(e,r,n){super("ConnectionStartEvent",e),this.privUri=r,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}}le.ConnectionStartEvent=s1;class a1 extends Rr{constructor(e){super("ConnectionEstablishedEvent",e)}}le.ConnectionEstablishedEvent=a1;class c1 extends Rr{constructor(e,r,n){super("ConnectionClosedEvent",e,tn.EventType.Debug),this.privReason=n,this.privStatusCode=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}le.ConnectionClosedEvent=c1;class u1 extends Rr{constructor(e,r,n){super("ConnectionErrorEvent",e,tn.EventType.Debug),this.privMessage=r,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}}le.ConnectionErrorEvent=u1;class l1 extends Rr{constructor(e,r,n){super("ConnectionEstablishErrorEvent",e,tn.EventType.Error),this.privStatusCode=r,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}le.ConnectionEstablishErrorEvent=l1;class p1 extends Rr{constructor(e,r,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=r,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}le.ConnectionMessageReceivedEvent=p1;class d1 extends Rr{constructor(e,r,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=r,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}le.ConnectionMessageSentEvent=d1;var Rd={},Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.ObjectDisposedError=Re.InvalidOperationError=Re.ArgumentNullError=void 0;class h1 extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}Re.ArgumentNullError=h1;class v1 extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}Re.InvalidOperationError=v1;class f1 extends Error{constructor(e,r){super(r),this.name=e+"ObjectDisposed",this.message=r}}Re.ObjectDisposedError=f1;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const e=Re,r=ct;var n;(function(s){s[s.Text=0]="Text",s[s.Binary=1]="Binary"})(n=t.MessageType||(t.MessageType={}));class o{constructor(a,i,c,u){if(this.privBody=null,a===n.Text&&i&&typeof i!="string")throw new e.InvalidOperationError("Payload must be a string");if(a===n.Binary&&i&&!(i instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=i,this.privHeaders=c||{},this.privId=u||r.createNoDashGuid(),this.messageType){case n.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}t.ConnectionMessage=o})(Rd);var kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.ConnectionOpenResponse=void 0;class g1{constructor(e,r){this.privStatusCode=e,this.privReason=r}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}kc.ConnectionOpenResponse=g1;var bc={};Object.defineProperty(bc,"__esModule",{value:!0});bc.DeferralMap=void 0;class m1{constructor(){this.privMap={}}add(e,r){this.privMap[e]=r}getId(e){return this.privMap[e]}complete(e,r){try{this.privMap[e].resolve(r)}catch(n){this.privMap[e].reject(n)}finally{this.privMap[e]=void 0}}}bc.DeferralMap=m1;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.SendingAgentContextMessageEvent=rn.DialogEvent=void 0;const hv=Kn;class gS extends hv.PlatformEvent{constructor(e,r=hv.EventType.Info){super(e,r)}}rn.DialogEvent=gS;class y1 extends gS{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}rn.SendingAgentContextMessageEvent=y1;var Mc={},js={};Object.defineProperty(js,"__esModule",{value:!0});js.EventSource=void 0;const S1=Re,C1=ct;class P1{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new S1.ObjectDisposedError("EventSource");if(this.metadata)for(const r in this.metadata)r&&e.metadata&&(e.metadata[r]||(e.metadata[r]=this.metadata[r]));for(const r in this.privEventListeners)r&&this.privEventListeners[r]&&this.privEventListeners[r](e)}attach(e){const r=C1.createNoDashGuid();return this.privEventListeners[r]=e,{detach:()=>(delete this.privEventListeners[r],Promise.resolve())}}attachListener(e){return this.attach(r=>e.onEvent(r))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(r=>e.onEvent(r)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}js.EventSource=P1;Object.defineProperty(Mc,"__esModule",{value:!0});Mc.Events=void 0;const R1=Re,E1=js;class Ts{static setEventSource(e){if(!e)throw new R1.ArgumentNullError("eventSource");Ts.privInstance=e}static get instance(){return Ts.privInstance}}Mc.Events=Ts;Ts.privInstance=new E1.EventSource;var mS={};Object.defineProperty(mS,"__esModule",{value:!0});var yS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(t.ConnectionState||(t.ConnectionState={}))})(yS);var SS={};Object.defineProperty(SS,"__esModule",{value:!0});var CS={};Object.defineProperty(CS,"__esModule",{value:!0});var PS={};Object.defineProperty(PS,"__esModule",{value:!0});var RS={};Object.defineProperty(RS,"__esModule",{value:!0});var ES={};Object.defineProperty(ES,"__esModule",{value:!0});var wS={};Object.defineProperty(wS,"__esModule",{value:!0});var IS={};Object.defineProperty(IS,"__esModule",{value:!0});var TS={};Object.defineProperty(TS,"__esModule",{value:!0});var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.List=void 0;const w1=Re;class Zt{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const r of e)this.privList.push(r)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,r){this.throwIfDisposed(),e===0?this.privList.unshift(r):e===this.privList.length?this.privList.push(r):this.privList.splice(e,0,r),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,r){this.throwIfDisposed();const n=this.privList.splice(e,r);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[r]=e,{detach:()=>(delete this.privAddSubscriptions[r],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[r]=e,{detach:()=>(delete this.privRemoveSubscriptions[r],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[r]=e,{detach:()=>(delete this.privDisposedSubscriptions[r],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(r=>{e.push(r)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let r=0;r<this.length();r++)e(this.privList[r],r)}select(e){this.throwIfDisposed();const r=[];for(let n=0;n<this.privList.length;n++)r.push(e(this.privList[n],n));return new Zt(r)}where(e){this.throwIfDisposed();const r=new Zt;for(let n=0;n<this.privList.length;n++)e(this.privList[n],n)&&r.add(this.privList[n]);return r}orderBy(e){this.throwIfDisposed();const n=this.toArray().sort(e);return new Zt(n)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((r,n)=>e(n,r))}clone(){return this.throwIfDisposed(),new Zt(this.toArray())}concat(e){return this.throwIfDisposed(),new Zt(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new Zt(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new w1.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const r in e)r&&e[r]()}}Ls.List=Zt;var Ed={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0;var e;(function(i){i[i.None=0]="None",i[i.Resolved=1]="Resolved",i[i.Rejected=2]="Rejected"})(e=t.PromiseState||(t.PromiseState={}));class r{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=r;class n{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,u)=>{this.privOnSetResult=c,this.privOnSetError=u}}}t.PromiseResultEventSource=n;class o{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,u)=>{this.privResolve=c,this.privReject=u})}get promise(){return this.privPromise}}t.Deferred=o;class s{constructor(){this.privState=e.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new n,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==e.None)throw new Error("'Cannot resolve a completed promise'");this.privState=e.Resolved,this.privPromiseResultEvents.setResult(c);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(c,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(c){if(this.privState!==e.None)throw new Error("'Cannot reject a completed promise'");this.privState=e.Rejected,this.privPromiseResultEvents.setError(c);for(const u of this.privErrorHandlers)this.executeErrorCallback(c,u);this.detachHandlers()}on(c,u){c==null&&(c=()=>{}),this.privState===e.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(u)):(this.privState===e.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,u):this.privState===e.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(c,u,l){try{u(c)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,l)}}executeErrorCallback(c,u){if(u)try{u(c)}catch(l){throw new Error(`'Unhandled callback error: ${l}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}t.Sink=s;function a(i,c,u){i.then(l=>{try{c&&c(l)}catch(p){if(u)try{if(p instanceof Error){const d=p;u(d.name+": "+d.message)}else u(p)}catch{}}},l=>{if(u)try{if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}catch{}})}t.marshalPromiseToCallbacks=a})(Ed);var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.Queue=void 0;const ul=Re,ll=Ls,vv=Ed;var cs;(function(t){t[t.Dequeue=0]="Dequeue",t[t.Peek=1]="Peek"})(cs||(cs={}));class I1{constructor(e){this.privPromiseStore=new ll.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new ll.List,this.privDetachables=[],this.privSubscribers=new ll.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(r=>r(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(r=>{this.privList.add(r)},()=>{})}dequeue(){this.throwIfDispose();const e=new vv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:cs.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new vv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:cs.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(e,r){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=r,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}for(const o of this.privDetachables)await o.detach();if(this.privPromiseStore.length()>0&&e){const o=[];return this.privPromiseStore.toArray().forEach(s=>{o.push(s)}),Promise.all(o).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{e(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(e){await this.drainAndDispose(null,e)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,r=this.privList;if(e&&r){for(;r.length()>0&&e.length()>0&&!this.privIsDisposing;){const n=e.removeFirst();if(n.type===cs.Peek)n.deferral.resolve(r.first());else{const o=r.removeFirst();n.deferral.resolve(o)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===r&&(this.privList=r)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new ul.InvalidOperationError(this.privDisposeReason):new ul.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new ul.InvalidOperationError("Queue disposing")}}xs.Queue=I1;var Oc={};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.RawWebsocketMessage=void 0;const pa=Rd,ci=Re,T1=ct;class _1{constructor(e,r,n){if(this.privPayload=null,!r)throw new ci.ArgumentNullError("payload");if(e===pa.MessageType.Binary&&Object.getPrototypeOf(r).constructor.name!=="ArrayBuffer")throw new ci.InvalidOperationError("Payload must be ArrayBuffer");if(e===pa.MessageType.Text&&typeof r!="string")throw new ci.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=r,this.privId=n||T1.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===pa.MessageType.Binary)throw new ci.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===pa.MessageType.Text)throw new ci.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Oc.RawWebsocketMessage=_1;var Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.RiffPcmEncoder=void 0;class A1{constructor(e,r){this.privActualSampleRate=e,this.privDesiredSampleRate=r}encode(e){const r=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!r)return null;const n=r.length*2,o=new ArrayBuffer(n),s=new DataView(o);return this.floatTo16BitPCM(s,0,r),o}setString(e,r,n){for(let o=0;o<n.length;o++)e.setUint8(r+o,n.charCodeAt(o))}floatTo16BitPCM(e,r,n){for(let o=0;o<n.length;o++,r+=2){const s=Math.max(-1,Math.min(1,n[o]));e.setInt16(r,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(e,r,n){if(!e)return null;if(n===r||n>r)return e;const o=r/n,s=Math.round(e.length/o),a=new Float32Array(s);let i=0,c=0;for(;c<s;){const u=Math.round((c+1)*o);let l=0,p=0;for(;i<u&&i<e.length;)l+=e[i++],p++;a[c++]=l/p}return a}}Dc.RiffPcmEncoder=A1;var zc={};Object.defineProperty(zc,"__esModule",{value:!0});zc.Stream=void 0;const fv=Re,k1=ct,gv=xs;class b1{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||k1.createNoDashGuid(),this.privReaderQueue=new gv.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new fv.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async e=>((e===void 0||e.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),e))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new gv.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new fv.InvalidOperationError("Stream closed")}}zc.Stream=b1;var Nc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(t.TranslationStatus||(t.TranslationStatus={}))})(Nc);var ui={},mv;function M1(){if(mv)return ui;mv=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.ChunkedArrayBufferStream=void 0;const t=b();let e=class extends t.Stream{constructor(n,o){super(o),this.privTargetChunkSize=n,this.privNextBufferReadyBytes=0}writeStreamChunk(n){if(n.isEnd||this.privNextBufferReadyBytes===0&&n.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(n);return}let o=0;for(;o<n.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=n.timeReceived);const s=Math.min(n.buffer.byteLength-o,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(n.buffer.slice(o,s+o));a.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=s,o+=s,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return ui.ChunkedArrayBufferStream=e,ui}var _S={};Object.defineProperty(_S,"__esModule",{value:!0});var jc={};Object.defineProperty(jc,"__esModule",{value:!0});jc.Timeout=void 0;class Oe{static load(){const e=new Map([[0,()=>{}]]),r=new Map,o="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(o);return s.addEventListener("message",({data:c})=>{if(Oe.isCallNotification(c)){const{params:{timerId:u}}=c,l=e.get(u);if(typeof l=="number"){const p=r.get(l);if(p===void 0||p!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(Oe.isClearResponse(c)){const{id:u}=c,l=r.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");r.delete(u),e.delete(l)}else{const{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{const u=Math.random();r.set(u,c),e.set(c,u),s.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{const l=Math.random();return e.set(l,c),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(Oe.workerTimers!==null||(Oe.workerTimers=Oe.load()),Oe.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}}jc.Timeout=Oe;Oe.workerTimers=null;Oe.clearTimeout=t=>Oe.timers().clearTimeout(t);Oe.setTimeout=(t,e)=>Oe.timers().setTimeout(t,e);Oe.timers=Oe.loadWorkerTimers();var U={};Object.defineProperty(U,"__esModule",{value:!0});U.OCSPCacheUpdateErrorEvent=U.OCSPResponseRetrievedEvent=U.OCSPCacheFetchErrorEvent=U.OCSPVerificationFailedEvent=U.OCSPCacheHitEvent=U.OCSPCacheEntryNeedsRefreshEvent=U.OCSPCacheEntryExpiredEvent=U.OCSPWSUpgradeStartedEvent=U.OCSPStapleReceivedEvent=U.OCSPCacheUpdateCompleteEvent=U.OCSPDiskCacheStoreEvent=U.OCSPMemoryCacheStoreEvent=U.OCSPCacheUpdateNeededEvent=U.OCSPDiskCacheHitEvent=U.OCSPCacheMissEvent=U.OCSPMemoryCacheHitEvent=U.OCSPEvent=void 0;const we=Kn;class Ie extends we.PlatformEvent{constructor(e,r,n){super(e,r),this.privSignature=n}}U.OCSPEvent=Ie;class O1 extends Ie{constructor(e){super("OCSPMemoryCacheHitEvent",we.EventType.Debug,e)}}U.OCSPMemoryCacheHitEvent=O1;class D1 extends Ie{constructor(e){super("OCSPCacheMissEvent",we.EventType.Debug,e)}}U.OCSPCacheMissEvent=D1;class z1 extends Ie{constructor(e){super("OCSPDiskCacheHitEvent",we.EventType.Debug,e)}}U.OCSPDiskCacheHitEvent=z1;class N1 extends Ie{constructor(e){super("OCSPCacheUpdateNeededEvent",we.EventType.Debug,e)}}U.OCSPCacheUpdateNeededEvent=N1;class j1 extends Ie{constructor(e){super("OCSPMemoryCacheStoreEvent",we.EventType.Debug,e)}}U.OCSPMemoryCacheStoreEvent=j1;class L1 extends Ie{constructor(e){super("OCSPDiskCacheStoreEvent",we.EventType.Debug,e)}}U.OCSPDiskCacheStoreEvent=L1;class x1 extends Ie{constructor(e){super("OCSPCacheUpdateCompleteEvent",we.EventType.Debug,e)}}U.OCSPCacheUpdateCompleteEvent=x1;class B1 extends Ie{constructor(){super("OCSPStapleReceivedEvent",we.EventType.Debug,"")}}U.OCSPStapleReceivedEvent=B1;class F1 extends Ie{constructor(e){super("OCSPWSUpgradeStartedEvent",we.EventType.Debug,e)}}U.OCSPWSUpgradeStartedEvent=F1;class q1 extends Ie{constructor(e,r){super("OCSPCacheEntryExpiredEvent",we.EventType.Debug,e),this.privExpireTime=r}}U.OCSPCacheEntryExpiredEvent=q1;class U1 extends Ie{constructor(e,r,n){super("OCSPCacheEntryNeedsRefreshEvent",we.EventType.Debug,e),this.privExpireTime=n,this.privStartTime=r}}U.OCSPCacheEntryNeedsRefreshEvent=U1;class $1 extends Ie{constructor(e,r,n){super("OCSPCacheHitEvent",we.EventType.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=r,this.privStartTimeString=new Date(r).toLocaleTimeString()}}U.OCSPCacheHitEvent=$1;class W1 extends Ie{constructor(e,r){super("OCSPVerificationFailedEvent",we.EventType.Debug,e),this.privError=r}}U.OCSPVerificationFailedEvent=W1;class V1 extends Ie{constructor(e,r){super("OCSPCacheFetchErrorEvent",we.EventType.Debug,e),this.privError=r}}U.OCSPCacheFetchErrorEvent=V1;class H1 extends Ie{constructor(e){super("OCSPResponseRetrievedEvent",we.EventType.Debug,e)}}U.OCSPResponseRetrievedEvent=H1;class K1 extends Ie{constructor(e,r){super("OCSPCacheUpdateErrorEvent",we.EventType.Debug,e),this.privError=r}}U.OCSPCacheUpdateErrorEvent=K1;var li={},yv;function J1(){if(yv)return li;yv=1,Object.defineProperty(li,"__esModule",{value:!0}),li.BackgroundEvent=void 0;const t=b();class e extends t.PlatformEvent{constructor(n){super("BackgroundEvent",t.EventType.Error),this.privError=n}get error(){return this.privError}}return li.BackgroundEvent=e,li}var Sv;function b(){return Sv||(Sv=1,function(t){var e=F&&F.__createBinding||(Object.create?function(o,s,a,i){i===void 0&&(i=a),Object.defineProperty(o,i,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,i){i===void 0&&(i=a),o[i]=s[a]}),r=F&&F.__exportStar||function(o,s){for(var a in o)a!=="default"&&!s.hasOwnProperty(a)&&e(s,o,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(oe,t),r(le,t),r(Rd,t),r(kc,t),r(bc,t),r(rn,t),r(Re,t),r(Mc,t),r(js,t),r(ct,t),r(mS,t),r(yS,t),r(SS,t),r(CS,t),r(PS,t),r(RS,t),r(ES,t),r(wS,t),r(IS,t),r(TS,t),r(Ls,t),r(Kn,t),r(Ed,t),r(xs,t),r(Oc,t),r(Dc,t),r(zc,t);var n=Nc;Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(M1(),t),r(_S,t),r(jc,t),r(U,t),r(J1(),t)}(il)),il}var ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.HeaderNames=void 0;class mt{}ge.HeaderNames=mt;mt.AuthKey="Ocp-Apim-Subscription-Key";mt.Authorization="Authorization";mt.SpIDAuthKey="Apim-Subscription-Id";mt.ConnectionId="X-ConnectionId";mt.ContentType="Content-Type";mt.CustomCommandsAppId="X-CommandsAppId";mt.Path="Path";mt.RequestId="X-RequestId";mt.RequestStreamId="X-StreamId";mt.RequestTimestamp="X-Timestamp";var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.AuthInfo=void 0;class G1{constructor(e,r){this.privHeaderName=e,this.privToken=r}get headerName(){return this.privHeaderName}get token(){return this.privToken}}Gn.AuthInfo=G1;Object.defineProperty(gc,"__esModule",{value:!0});gc.CognitiveSubscriptionKeyAuthentication=void 0;const Q1=b(),X1=ge,Y1=Gn;class Z1{constructor(e){if(!e)throw new Q1.ArgumentNullError("subscriptionKey");this.privAuthInfo=new Y1.AuthInfo(X1.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}gc.CognitiveSubscriptionKeyAuthentication=Z1;var Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.CognitiveTokenAuthentication=void 0;const Cv=b(),Pv=Gn,Rv=ge;class _s{constructor(e,r){if(!e)throw new Cv.ArgumentNullError("fetchCallback");if(!r)throw new Cv.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=r}fetch(e){return this.privFetchCallback(e).then(r=>new Pv.AuthInfo(Rv.HeaderNames.Authorization,r===void 0?void 0:_s.privTokenPrefix+r))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(r=>new Pv.AuthInfo(Rv.HeaderNames.Authorization,r===void 0?void 0:_s.privTokenPrefix+r))}}Lc.CognitiveTokenAuthentication=_s;_s.privTokenPrefix="Bearer ";var AS={};Object.defineProperty(AS,"__esModule",{value:!0});var kS={};Object.defineProperty(kS,"__esModule",{value:!0});var pi={},pl={},xc={};const eT={},tT=Object.freeze(Object.defineProperty({__proto__:null,default:eT},Symbol.toStringTag,{value:"Module"})),an=AP(tT);var wd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const e=b();Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return e.EventType}})})(wd);var O={};Object.defineProperty(O,"__esModule",{value:!0});O.Contracts=void 0;class er{static throwIfNullOrUndefined(e,r){if(e==null)throw new Error("throwIfNullOrUndefined:"+r)}static throwIfNull(e,r){if(e===null)throw new Error("throwIfNull:"+r)}static throwIfNullOrWhitespace(e,r){if(er.throwIfNullOrUndefined(e,r),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+r)}static throwIfNullOrTooLong(e,r,n){if(er.throwIfNullOrUndefined(e,r),(""+e).length>n)throw new Error("throwIfNullOrTooLong:"+r+" (more than "+n.toString()+" characters)")}static throwIfNullOrTooShort(e,r,n){if(er.throwIfNullOrUndefined(e,r),(""+e).length<n)throw new Error("throwIfNullOrTooShort:"+r+" (less than "+n.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,r){if(er.throwIfNullOrUndefined(e,r),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+r);for(const n of e)er.throwIfNullOrWhitespace(n,r)}static throwIfFileDoesNotExist(e,r){er.throwIfNullOrWhitespace(e,r)}static throwIfNotUndefined(e,r){if(e!==void 0)throw new Error("throwIfNotUndefined:"+r)}}O.Contracts=er;var rT=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nT=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),iT=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&rT(e,t,r);return nT(e,t),e};Object.defineProperty(xc,"__esModule",{value:!0});xc.ConsoleLoggingListener=void 0;const Ev=iT(an),di=wd,oT=O;class sT{constructor(e=di.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){oT.Contracts.throwIfNullOrUndefined(Ev.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const r=this.toString(e);if(this.privLogPath&&Ev.writeFileSync(this.privLogPath,r+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case di.LogLevel.Debug:console.debug(r);break;case di.LogLevel.Info:console.info(r);break;case di.LogLevel.Warning:console.warn(r);break;case di.LogLevel.Error:console.error(r);break;default:console.log(r);break}}}toString(e){const r=[`${e.eventTime}`,`${e.name}`],n=e;for(const o in n)if(o&&e.hasOwnProperty(o)&&o!=="eventTime"&&o!=="eventType"&&o!=="eventId"&&o!=="name"&&o!=="constructor"){const s=n[o];let a="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?a=s.toString():a=JSON.stringify(s)),r.push(`${o}: ${a}`)}return r.join(" | ")}}xc.ConsoleLoggingListener=sT;var bS={};Object.defineProperty(bS,"__esModule",{value:!0});var dl={},Er={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0;var e;(function(o){o[o.PCM=1]="PCM",o[o.MuLaw=2]="MuLaw",o[o.Siren=3]="Siren",o[o.MP3=4]="MP3",o[o.SILKSkype=5]="SILKSkype",o[o.OGG_OPUS=6]="OGG_OPUS",o[o.WEBM_OPUS=7]="WEBM_OPUS",o[o.ALaw=8]="ALaw",o[o.FLAC=9]="FLAC",o[o.OPUS=10]="OPUS"})(e=t.AudioFormatTag||(t.AudioFormatTag={}));class r{static getDefaultInputFormat(){return n.getDefaultInputFormat()}static getWaveFormat(s,a,i,c){return new n(s,a,i,c)}static getWaveFormatPCM(s,a,i){return new n(s,a,i)}}t.AudioStreamFormat=r;class n extends r{constructor(s=16e3,a=16,i=1,c=e.PCM){super();let u=!0;switch(c){case e.PCM:this.formatTag=1;break;case e.ALaw:this.formatTag=6;break;case e.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=a,this.samplesPerSec=s,this.channels=i,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const l=new DataView(this.privHeader);this.setString(l,0,"RIFF"),l.setUint32(4,0,!0),this.setString(l,8,"WAVEfmt "),l.setUint32(16,16,!0),l.setUint16(20,this.formatTag,!0),l.setUint16(22,this.channels,!0),l.setUint32(24,this.samplesPerSec,!0),l.setUint32(28,this.avgBytesPerSec,!0),l.setUint16(32,this.channels*(this.bitsPerSample/8),!0),l.setUint16(34,this.bitsPerSample,!0),this.setString(l,36,"data"),l.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new n}static getAudioContext(s){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return s!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:s}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(s,a,i){for(let c=0;c<i.length;c++)s.setUint8(a+c,i.charCodeAt(c))}}t.AudioStreamFormatImpl=n})(Er);var wv;function aT(){return wv||(wv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const e=k(),r=b(),n=Er;t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class o{constructor(a,i,c,u){this.privRecorder=a,this.deviceId=i,this.privStreams={},this.privOutputChunkSize=o.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||r.createNoDashGuid(),this.privEvents=new r.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(o.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const u=c;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let i=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(i=(c,u,l)=>{a.mediaDevices.getUserMedia(c).then(u).catch(l)}),i){const c=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):i({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const l=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(l),this.onEvent(new r.AudioSourceErrorEvent(this.privId,l))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new r.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(i=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(i.readEnded(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>i.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const i=this.privStreams[a];i&&i.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:o.AUDIOFORMAT.bitsPerSample,channelcount:o.AUDIOFORMAT.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:o.AUDIOFORMAT.samplesPerSec,type:e.type.Microphones}))}setProperty(a,i){if(a===t.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(i);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const i=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(i===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const l of u)if(l.deviceId===i){this.privMicrophoneLabel=l.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const i=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=i;try{this.privRecorder.record(this.privContext,this.privMediaStream,i)}catch(u){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return i}onEvent(a){this.privEvents.onEvent(a),r.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(o.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}t.MicAudioSource=o,o.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()}(dl)),dl}var hi={},Iv;function cT(){if(Iv)return hi;Iv=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.FileAudioSource=void 0;const t=k(),e=b(),r=Er;let n=class{constructor(s,a,i){this.privStreams={},this.privHeaderEnd=44,this.privId=i||e.createNoDashGuid(),this.privEvents=new e.EventSource,this.privSource=s,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=s.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const s=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new e.AudioSourceErrorEvent(s,"")),Promise.reject(s)}this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(s){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,s));const a=await this.upload(s);return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,s)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)),await this.turnOff()},id:()=>s,read:()=>a.read()})}detach(s){s&&this.privStreams[s]&&(this.privStreams[s].close(),delete this.privStreams[s],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,s)))}turnOff(){for(const s in this.privStreams)if(s){const a=this.privStreams[s];a&&!a.isClosed&&a.close()}return this.onEvent(new e.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(s=>Promise.resolve({bitspersample:s.bitsPerSample,channelcount:s.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:s.samplesPerSec,type:t.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),i=new e.Deferred,c=u=>{const l=new DataView(u),p=f=>String.fromCharCode(l.getUint8(f),l.getUint8(f+1),l.getUint8(f+2),l.getUint8(f+3));if(p(0)!=="RIFF"){i.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){i.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=l.getInt32(16,!0),h=l.getUint16(22,!0),v=l.getUint32(24,!0),m=l.getUint16(34,!0);let S=36+Math.max(d-16,0);for(;p(S)!=="data";S+=2)if(S>4288){i.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=S+8,i.resolve(r.AudioStreamFormat.getWaveFormatPCM(v,m,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=l=>{const p=l.target.result;c(p)},u.readAsArrayBuffer(a)}else{const u=a;c(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return i.promise}async upload(s){const a=i=>{const c=`Error occurred while processing '${this.privFilename}'. ${i}`;throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,s,c)),new Error(c)};try{await this.turnOn();const i=await this.privAudioFormatPromise,c=new e.ChunkedArrayBufferStream(i.avgBytesPerSec/10,s);this.privStreams[s]=c;const u=this.privSource.slice(this.privHeaderEnd),l=p=>{c.isClosed||(c.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const p=new FileReader;p.onerror=d=>a(d.toString()),p.onload=d=>{const h=d.target.result;l(h)},p.readAsArrayBuffer(u)}else{const p=u;l(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return c}catch(i){a(i)}}onEvent(s){this.privEvents.onEvent(s),e.Events.instance.onEvent(s)}};return hi.FileAudioSource=n,hi}var Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.PcmRecorder=void 0;const uT=b();class lT{constructor(e){this.privStopInputOnRelease=e}record(e,r,n){const s=new uT.RiffPcmEncoder(e.sampleRate,16e3),a=e.createMediaStreamSource(r),i=()=>{const u=(()=>{let l=0;try{return e.createScriptProcessor(l,1,1)}catch{l=2048;let d=e.sampleRate;for(;l<16384&&d>=32e3;)l<<=1,d>>=1;return e.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{const p=l.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=l=>{const p=l.data;if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}}).catch(()=>{i()})}else try{i()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(r=>r.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}Bc.PcmRecorder=lT;var Fc={},Bs={},pT=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dT=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MS=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&pT(e,t,r);return dT(e,t),e},Id=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.WebsocketMessageAdapter=void 0;const hT=MS(an),vT=MS(an),fT=Id(an),gT=Id(an),mT=Id(an),yT=ge,j=b();class As{constructor(e,r,n,o,s,a){if(!e)throw new j.ArgumentNullError("uri");if(!n)throw new j.ArgumentNullError("messageFormatter");this.proxyInfo=o,this.privConnectionEvents=new j.EventSource,this.privConnectionId=r,this.privMessageFormatter=n,this.privConnectionState=j.ConnectionState.None,this.privUri=e,this.privHeaders=s,this.privEnableCompression=a,this.privHeaders[yT.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===j.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new j.Deferred,this.privCertificateValidatedDeferral=new j.Deferred,this.privConnectionState=j.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!As.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let n=new URL(this.privUri).protocol;(n==null?void 0:n.toLocaleLowerCase())==="wss:"?n="https:":(n==null?void 0:n.toLocaleLowerCase())==="ws:"&&(n="http:"),e.agent.protocol=n,this.privWebsocketClient=new mT.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new j.Queue,this.privDisconnectDeferral=new j.Deferred,this.privSendMessageQueue=new j.Queue,this.processSendQueue().catch(e=>{j.Events.instance.onEvent(new j.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new j.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new j.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=j.ConnectionState.Connected,this.onEvent(new j.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new j.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new j.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===j.ConnectionState.Connecting?(this.privConnectionState=j.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new j.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=j.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new j.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(r=>{j.Events.instance.onEvent(new j.BackgroundEvent(r))})},this.privWebsocketClient.onmessage=e=>{const r=new Date().toISOString();if(this.privConnectionState===j.ConnectionState.Connected){const n=new j.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){const o=new j.RawWebsocketMessage(j.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(o).then(s=>{this.onEvent(new j.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid binary message format. Error: ${s}`)})}else{const o=new j.RawWebsocketMessage(j.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(o).then(s=>{this.onEvent(new j.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==j.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${j.ConnectionState[this.privConnectionState]} state`);const r=new j.Deferred,n=new j.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then(o=>{n.resolve({Message:e,RawWebsocketMessage:o,sendStatusDeferral:r})},o=>{n.reject(`Error formatting the message. ${o}`)}),r.promise}read(){return this.privConnectionState!==j.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==j.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new j.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(r){return Promise.reject(`websocket send error: ${r}`)}}async onClose(e,r){const n=`Connection closed. ${e}: ${r}`;this.privConnectionState=j.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},n),await this.privSendMessageQueue.drainAndDispose(o=>{o.sendStatusDeferral.reject(n)},n)}async processSendQueue(){for(;;){const r=await this.privSendMessageQueue.dequeue();if(!r)return;try{await this.sendRawMessage(r),r.sendStatusDeferral.resolve()}catch(n){r.sendStatusDeferral.reject(n)}}}onEvent(e){this.privConnectionEvents.onEvent(e),j.Events.instance.onEvent(e)}getAgent(){const e=new fT.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const r={host:e.HostName,port:e.Port};return e.UserName?r.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:r.headers={},r.headers.requestOCSP="true",new gT.default(r)}createConnection(e,r){let n;if(r={...r,requestOCSP:!0,servername:r.host},this.proxyInfo){const s=As.GetProxyAgent(this.proxyInfo);n=new Promise((a,i)=>{s.callback(e,r,(c,u)=>{c?i(c):a(u)})})}else r.secureEndpoint?n=Promise.resolve(vT.connect(r)):n=Promise.resolve(hT.connect(r));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}Bs.WebsocketMessageAdapter=As;As.forceNpmWebSocket=!1;Object.defineProperty(Fc,"__esModule",{value:!0});Fc.WebsocketConnection=void 0;const hl=b(),ST=Bs;class CT{constructor(e,r,n,o,s,a=!1,i){if(this.privIsDisposed=!1,!e)throw new hl.ArgumentNullError("uri");if(!o)throw new hl.ArgumentNullError("messageFormatter");this.privMessageFormatter=o;let c="",u=0;if(r){for(const l in r)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(l);c+=p;let d=r[l];d&&(d=encodeURIComponent(d),c+=`=${d}`),u++}}if(n){for(const l in n)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(n[l]);c+=`${l}=${p}`,u++}}this.privUri=e+c,this.privId=i||hl.createNoDashGuid(),this.privConnectionMessageAdapter=new ST.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,n,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}Fc.WebsocketConnection=CT;var qc={};Object.defineProperty(qc,"__esModule",{value:!0});qc.ReplayableAudioNode=void 0;class PT{constructor(e,r){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=r}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const e=this.privReplayOffset-this.privBufferStartOffset;let r=Math.round(e*this.privBytesPerSecond*1e-7);r%2!==0&&r++;let n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){const o=this.privBuffers[n].chunk.buffer.slice(r);return this.privReplayOffset+=o.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:o,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new RT(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;const r=e-this.privBufferStartOffset;let n=Math.round(r*this.privBytesPerSecond*1e-7),o=0;for(;o<this.privBuffers.length&&n>=this.privBuffers[o].chunk.buffer.byteLength;)n-=this.privBuffers[o++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(o)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const r of this.privBuffers){const n=r.byteOffset/this.privBytesPerSecond*1e7,o=n+r.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=o)return r.chunk.timeReceived}return 0}}qc.ReplayableAudioNode=PT;class RT{constructor(e,r,n){this.chunk=e,this.serial=r,this.byteOffset=n}}var vi={},vl={},Mt={},Fs={},ET=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wT=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),IT=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&ET(e,t,r);return wT(e,t),e};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.AudioFileWriter=void 0;const fi=IT(an),fl=O;class TT{constructor(e){fl.Contracts.throwIfNullOrUndefined(fi.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=fi.openSync(e,"w")}set format(e){fl.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let r=0;this.privAudioFormat.hasHeader&&(r=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=fi.createWriteStream("",{fd:this.privFd,start:r,autoClose:!1}))}write(e){fl.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),fi.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),fi.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}Fs.AudioFileWriter=TT;var Ke={},Tv;function OS(){if(Tv)return Ke;Tv=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.PullAudioInputStreamImpl=Ke.PullAudioInputStream=Ke.PushAudioInputStreamImpl=Ke.PushAudioInputStream=Ke.AudioInputStream=void 0;const t=k(),e=b(),r=ct,n=E(),o=Er;let s=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,d){return c.create(p,d)}};Ke.AudioInputStream=s;class a extends s{static create(p){return new i(p)}}Ke.PushAudioInputStream=a;class i extends a{constructor(p){super(),p===void 0?this.privFormat=o.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new e.EventSource,this.privId=r.createNoDashGuid(),this.privStream=new e.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let v=0;v<d.length;++v)d[v]=h[v];return d}}Ke.PushAudioInputStreamImpl=i;class c extends s{constructor(){super()}static create(p,d){return new u(p,d)}}Ke.PullAudioInputStream=c;class u extends c{constructor(p,d){super(),d===void 0?this.privFormat=n.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new e.EventSource,this.privId=r.createNoDashGuid(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const v=new ArrayBuffer(this.privBufferSize-d),m=this.privCallback.read(v);if(h===void 0?h=v:new Int8Array(h).set(new Int8Array(v),d),m===0)break;d+=m}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}}return Ke.PullAudioInputStreamImpl=u,Ke}var Ce={},wr={},Td={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))})(Td);Object.defineProperty(wr,"__esModule",{value:!0});wr.AudioOutputFormatImpl=void 0;const q=Td,x=Er;class z extends x.AudioStreamFormatImpl{constructor(e,r,n,o,s,a,i,c,u){super(n,a,r,e),this.formatTag=e,this.avgBytesPerSec=o,this.blockAlign=s,this.priAudioFormatString=i,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?z.getDefaultOutputFormat():z.fromSpeechSynthesisOutputFormatString(z.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new z(x.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new z(x.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new z(x.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new z(x.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new z(x.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new z(x.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new z(x.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new z(x.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new z(x.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new z(x.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new z(x.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new z(x.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new z(x.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new z(x.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new z(x.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new z(x.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new z(x.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new z(x.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new z(x.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new z(x.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new z(x.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new z(x.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new z(x.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new z(x.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new z(x.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new z(x.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new z(x.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new z(x.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"riff-16khz-16bit-mono-pcm":default:return new z(x.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return z.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const r=new DataView(this.privHeader);r.setUint32(4,e+this.privHeader.byteLength-8,!0),r.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const r=new Uint8Array(e.byteLength+this.header.byteLength);return r.set(new Uint8Array(this.header),0),r.set(new Uint8Array(e),this.header.byteLength),r.buffer}}wr.AudioOutputFormatImpl=z;z.SpeechSynthesisOutputFormatToString={[q.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[q.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[q.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[q.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[q.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[q.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[q.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[q.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[q.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[q.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[q.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[q.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[q.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[q.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[q.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[q.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.PushAudioOutputStreamImpl=Ce.PushAudioOutputStream=Ce.PullAudioOutputStreamImpl=Ce.PullAudioOutputStream=Ce.AudioOutputStream=void 0;const Pp=b(),_T=O,AT=wr;class _d{constructor(){}static createPullStream(){return Ad.create()}}Ce.AudioOutputStream=_d;class Ad extends _d{static create(){return new DS}}Ce.PullAudioOutputStream=Ad;class DS extends Ad{constructor(){super(),this.privId=Pp.createNoDashGuid(),this.privStream=new Pp.Stream}set format(e){e==null&&(this.privFormat=AT.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(e){const r=new Int8Array(e);let n=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return r.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);r.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){const o=await this.privStream.read();if(o!==void 0&&!o.isEnd){let s;o.buffer.byteLength>e.byteLength-n?(s=o.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(o.buffer.slice(e.byteLength-n))):s=o.buffer,r.set(new Int8Array(s),n),n+=s.byteLength}else this.privStream.readEnded()}return n}write(e){_T.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}Ce.PullAudioOutputStreamImpl=DS;class zS extends _d{constructor(){super()}static create(e){return new NS(e)}}Ce.PushAudioOutputStream=zS;class NS extends zS{constructor(e){super(),this.privId=Pp.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}Ce.PushAudioOutputStreamImpl=NS;var _v;function LS(){if(_v)return Mt;_v=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.AudioOutputConfigImpl=Mt.AudioConfigImpl=Mt.AudioConfig=void 0;const t=me(),e=O,r=E(),n=Fs,o=OS(),s=Ce;let a=class jS{static fromDefaultMicrophoneInput(){const l=new t.PcmRecorder(!0);return new i(new t.MicAudioSource(l))}static fromMicrophoneInput(l){const p=new t.PcmRecorder(!0);return new i(new t.MicAudioSource(p,l))}static fromWavFileInput(l,p="unnamedBuffer.wav"){return new i(new t.FileAudioSource(l,p))}static fromStreamInput(l){if(l instanceof r.PullAudioInputStreamCallback)return new i(new o.PullAudioInputStreamImpl(l));if(l instanceof r.AudioInputStream)return new i(l);if(typeof MediaStream<"u"&&l instanceof MediaStream){const p=new t.PcmRecorder(!1);return new i(new t.MicAudioSource(p,null,null,l))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new r.SpeakerAudioDestination)}static fromSpeakerOutput(l){if(l===void 0)return jS.fromDefaultSpeakerOutput();if(l instanceof r.SpeakerAudioDestination)return new c(l);throw new Error("Not Supported Type")}static fromAudioFileOutput(l){return new c(new n.AudioFileWriter(l))}static fromStreamOutput(l){if(l instanceof r.PushAudioOutputStreamCallback)return new c(new s.PushAudioOutputStreamImpl(l));if(l instanceof r.PushAudioOutputStream)return new c(l);if(l instanceof r.PullAudioOutputStream)return new c(l);throw new Error("Not Supported Type")}};Mt.AudioConfig=a;class i extends a{constructor(l){super(),this.privSource=l}get format(){return this.privSource.format}close(l,p){this.privSource.turnOff().then(()=>{l&&l()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(l){return this.privSource.attach(l)}detach(l){return this.privSource.detach(l)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(l,p){if(e.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(l,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(l,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(l,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Mt.AudioConfigImpl=i;class c extends a{constructor(l){super(),this.privDestination=l}set format(l){this.privDestination.format=l}write(l){this.privDestination.write(l)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Mt.AudioOutputConfigImpl=c,Mt}var xS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(t.CancellationReason||(t.CancellationReason={}))})(xS);var Uc={};Object.defineProperty(Uc,"__esModule",{value:!0});Uc.PullAudioInputStreamCallback=void 0;class kT{}Uc.PullAudioInputStreamCallback=kT;var $c={};Object.defineProperty($c,"__esModule",{value:!0});$c.PushAudioOutputStreamCallback=void 0;class bT{}$c.PushAudioOutputStreamCallback=bT;var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.KeywordRecognitionModel=void 0;const Av=O;class MT{constructor(){this.privDisposed=!1}static fromFile(e){throw Av.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw Av.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}Wc.KeywordRecognitionModel=MT;var Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.SessionEventArgs=void 0;class OT{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}Vc.SessionEventArgs=OT;var gi={},kv;function DT(){if(kv)return gi;kv=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.RecognitionEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o){super(o),this.privOffset=n}get offset(){return this.privOffset}};return gi.RecognitionEventArgs=e,gi}var BS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.OutputFormat||(t.OutputFormat={}))})(BS);var mi={},bv;function zT(){if(bv)return mi;bv=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.IntentRecognitionEventArgs=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(n,o,s){super(o,s),this.privResult=n}get result(){return this.privResult}};return mi.IntentRecognitionEventArgs=e,mi}var Hc={};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.RecognitionResult=void 0;class NT{constructor(e,r,n,o,s,a,i,c,u,l){this.privResultId=e,this.privReason=r,this.privText=n,this.privDuration=o,this.privOffset=s,this.privLanguage=a,this.privLanguageDetectionConfidence=i,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}Hc.RecognitionResult=NT;var yi={},Mv;function jT(){if(Mv)return yi;Mv=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.SpeechRecognitionResult=void 0;const t=E();let e=class extends t.RecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(n,o,s,a,i,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return yi.SpeechRecognitionResult=e,yi}var Si={},Ov;function LT(){if(Ov)return Si;Ov=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.IntentRecognitionResult=void 0;const t=E();let e=class extends t.SpeechRecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(o,s,a,i,c,u,l,void 0,p,d,h),this.privIntentId=n}get intentId(){return this.privIntentId}};return Si.IntentRecognitionResult=e,Si}var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.LanguageUnderstandingModelImpl=Bn.LanguageUnderstandingModel=void 0;const dn=O;class FS{constructor(){}static fromEndpoint(e){dn.Contracts.throwIfNull(e,"uri"),dn.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const r=new Ia,n=e.host.indexOf(".");if(n===-1)throw new Error("Could not determine region from endpoint");r.region=e.host.substr(0,n);const o=e.pathname.lastIndexOf("/")+1;if(o===-1)throw new Error("Could not determine appId from endpoint");if(r.appId=e.pathname.substr(o),r.subscriptionKey=e.searchParams.get("subscription-key"),r.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return r}static fromAppId(e){dn.Contracts.throwIfNullOrWhitespace(e,"appId");const r=new Ia;return r.appId=e,r}static fromSubscription(e,r,n){dn.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),dn.Contracts.throwIfNullOrWhitespace(r,"appId"),dn.Contracts.throwIfNullOrWhitespace(n,"region");const o=new Ia;return o.appId=r,o.region=n,o.subscriptionKey=e,o}}Bn.LanguageUnderstandingModel=FS;class Ia extends FS{}Bn.LanguageUnderstandingModelImpl=Ia;var Ot={},Dv;function xT(){if(Dv)return Ot;Dv=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.MeetingTranscriptionEventArgs=Ot.ConversationTranscriptionEventArgs=Ot.SpeechRecognitionEventArgs=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(s,a,i){super(a,i),this.privResult=s}get result(){return this.privResult}};Ot.SpeechRecognitionEventArgs=e;class r extends t.RecognitionEventArgs{constructor(s,a,i){super(a,i),this.privResult=s}get result(){return this.privResult}}Ot.ConversationTranscriptionEventArgs=r;class n extends e{}return Ot.MeetingTranscriptionEventArgs=n,Ot}var Ci={},Pi={},zv;function qs(){if(zv)return Pi;zv=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.CancellationEventArgsBase=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(n,o,s,a,i){super(a,i),this.privReason=n,this.privErrorDetails=o,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Pi.CancellationEventArgsBase=e,Pi}var Nv;function BT(){if(Nv)return Ci;Nv=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.SpeechRecognitionCanceledEventArgs=void 0;const t=qs();let e=class extends t.CancellationEventArgsBase{};return Ci.SpeechRecognitionCanceledEventArgs=e,Ci}var Ri={},jv;function FT(){if(jv)return Ri;jv=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.TranslationRecognitionEventArgs=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(n,o,s){super(o,s),this.privResult=n}get result(){return this.privResult}};return Ri.TranslationRecognitionEventArgs=e,Ri}var Ei={},Lv;function qT(){if(Lv)return Ei;Lv=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.TranslationSynthesisEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o){super(o),this.privResult=n}get result(){return this.privResult}};return Ei.TranslationSynthesisEventArgs=e,Ei}var wi={},xv;function US(){if(xv)return wi;xv=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.TranslationRecognitionResult=void 0;const t=E();let e=class qS extends t.SpeechRecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(o,s,a,i,c,u,l,void 0,p,d,h),this.privTranslations=n}static fromSpeechRecognitionResult(n){return new qS(void 0,n.resultId,n.reason,n.text,n.duration,n.offset,n.language,n.languageDetectionConfidence,n.errorDetails,n.json,n.properties)}get translations(){return this.privTranslations}};return wi.TranslationRecognitionResult=e,wi}var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.TranslationSynthesisResult=void 0;class UT{constructor(e,r){this.privReason=e,this.privAudio=r}get audio(){return this.privAudio}get reason(){return this.privReason}}Kc.TranslationSynthesisResult=UT;var $S={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(t.ResultReason||(t.ResultReason={}))})($S);var Tr={},Bv;function $T(){if(Bv)return Tr;Bv=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.SpeechConfigImpl=Tr.SpeechConfig=void 0;const t=k(),e=O,r=E();let n=class{constructor(){}static fromSubscription(a,i){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(i,"region");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,i),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,i){e.Contracts.throwIfNull(a,"endpoint");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),i!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),c}static fromHost(a,i){e.Contracts.throwIfNull(a,"hostName");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),i!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),c}static fromAuthorizationToken(a,i){e.Contracts.throwIfNull(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(i,"region");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,i),c.authorizationToken=a,c}close(){}};Tr.SpeechConfig=n;class o extends n{constructor(){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}setProperty(a,i){e.Contracts.throwIfNull(i,"value"),this.privProperties.setProperty(a,i)}getProperty(a,i){return this.privProperties.getProperty(a,i)}setProxy(a,i,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],i),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(a,i){const c=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=i,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(t.ForceDictationPropertyName,"true")}clone(){const a=new o;return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Tr.SpeechConfigImpl=o,Tr}var _r={},Fv;function WT(){if(Fv)return _r;Fv=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.SpeechTranslationConfigImpl=_r.SpeechTranslationConfig=void 0;const t=k(),e=O,r=E();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(a,i){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(i,"region");const c=new o;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c}static fromAuthorizationToken(a,i){e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(i,"region");const c=new o;return c.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c}static fromHost(a,i){e.Contracts.throwIfNull(a,"hostName");const c=new o;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),i!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),c}static fromEndpoint(a,i){e.Contracts.throwIfNull(a,"endpoint"),e.Contracts.throwIfNull(i,"subscriptionKey");const c=new o;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,i),c}};_r.SpeechTranslationConfig=n;class o extends n{constructor(){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value");const i=this.targetLanguages;i.includes(a)||(i.push(a),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,i.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}setProxy(a,i,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],i),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(a,i){return this.privSpeechProperties.getProperty(a,i)}setProperty(a,i){this.privSpeechProperties.setProperty(a,i)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,i){const c=JSON.parse(this.privSpeechProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=i,this.privSpeechProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(t.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return _r.SpeechTranslationConfigImpl=o,_r}var Ii={},qv;function VS(){if(qv)return Ii;qv=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.PropertyCollection=void 0;const t=E();let e=class WS{constructor(){this.privKeys=[],this.privValues=[]}getProperty(n,o){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s)return this.privValues[a];if(o!==void 0)return String(o)}setProperty(n,o){let s;typeof n=="string"?s=n:s=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s){this.privValues[a]=o;return}this.privKeys.push(s),this.privValues.push(o)}clone(){const n=new WS;for(let o=0;o<this.privKeys.length;o++)n.privKeys.push(this.privKeys[o]),n.privValues.push(this.privValues[o]);return n}mergeTo(n){this.privKeys.forEach(o=>{if(n.getProperty(o,void 0)===void 0){const s=this.getProperty(o);n.setProperty(o,s)}})}get keys(){return this.privKeys}};return Ii.PropertyCollection=e,Ii}var Jc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=67]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(t.PropertyId||(t.PropertyId={}))})(Jc);var Ti={},Uv;function VT(){if(Uv)return Ti;Uv=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Recognizer=void 0;const t=k(),e=b(),r=O,n=E();let o=class HS{constructor(a,i,c){this.audioConfig=a!==void 0?a:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=i.clone(),this.privConnectionFactory=c,this.implCommonRecognizerSetup()}close(a,i){r.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),a,i)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return t.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){t.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",i="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,i=navigator.userAgent,c=navigator.appVersion);const u=this.createRecognizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(a,i,c))));this.privReco=this.createServiceRecognizer(HS.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed);const i=new e.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,i.resolve,i.reject);const c=await i.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(a){const i=a.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return i&&i!==""?new t.CognitiveSubscriptionKeyAuthentication(i):new t.CognitiveTokenAuthentication(()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return Ti.Recognizer=o,Ti}var _i={},$v;function HT(){if($v)return _i;$v=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.SpeechRecognizer=void 0;const t=k(),e=b(),r=O,n=E();let o=class KS extends n.Recognizer{constructor(a,i){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(i,c.properties,new t.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(a,i,c){const u=a;return i.properties.mergeTo(u.properties),new KS(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,i){e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,i)}startContinuousRecognitionAsync(a,i){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,i)}stopContinuousRecognitionAsync(a,i){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,i)}startKeywordRecognitionAsync(a,i,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,i){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,i)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,i,c,u){const l=c;return new t.SpeechServiceRecognizer(a,i,l,u,this)}};return _i.SpeechRecognizer=o,_i}var Ai={},Wv;function KT(){if(Wv)return Ai;Wv=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.IntentRecognizer=void 0;const t=k(),e=b(),r=O,n=E();let o=class extends n.Recognizer{constructor(a,i){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const c=a;r.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(i,c.properties,new t.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,i){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,i)}startContinuousRecognitionAsync(a,i){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,i)}stopContinuousRecognitionAsync(a,i){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,i)}startKeywordRecognitionAsync(a,i,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,i){if(a)try{a()}catch(c){i&&i(c)}}addIntent(a,i){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(i,"intentId"),r.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([i,a])}addIntentWithLanguageModel(a,i,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(a,"intentId"),r.Contracts.throwIfNull(i,"model");const u=i;r.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[a]=new t.AddedLmIntent(u,c)}addAllIntents(a,i){r.Contracts.throwIfNull(a,"model");const c=a;r.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new t.AddedLmIntent(c,i)}close(a,i){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,i)}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,i,c,u){const l=c;return new t.IntentServiceRecognizer(a,i,l,u,this)}async dispose(a){this.privDisposedIntentRecognizer||a&&(this.privDisposedIntentRecognizer=!0,await super.dispose(a))}buildSpeechContext(){let a,i,c;const u=[];this.privUmbrellaIntent!==void 0&&(a=this.privUmbrellaIntent.modelImpl.appId,i=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const l of Object.keys(this.privAddedLmIntents)){const p=this.privAddedLmIntents[l];if(a===void 0)a=p.modelImpl.appId;else if(a!==p.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(i===void 0)i=p.modelImpl.region;else if(i!==p.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(c===void 0)c=p.modelImpl.subscriptionKey;else if(c!==p.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+a+"-PRODUCTION#"+l;u.push(d)}return{Intent:{id:a,key:c===void 0?this.privProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+a+"-PRODUCTION"]}}};return Ai.IntentRecognizer=o,Ai}var JS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(t.VoiceProfileType||(t.VoiceProfileType={}))})(JS);var ki={},bi={},Ar={},Vv;function GS(){if(Vv)return Ar;Vv=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.ConnectionMessageImpl=Ar.ConnectionMessage=void 0;const t=ge,e=b(),r=VS(),n=Jc;let o=class{};Ar.ConnectionMessage=o;class s{constructor(i){this.privConnectionMessage=i,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(i=>i.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Ar.ConnectionMessageImpl=s,Ar}var Hv;function QS(){if(Hv)return bi;Hv=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Connection=void 0;const t=k(),e=b(),r=GS(),n=O,o=E();let s=class Rp{static fromRecognizer(i){const c=i.internalData,u=new Rp;return u.privInternalData=c,u.setupEvents(),u}static fromSynthesizer(i){const c=i.internalData,u=new Rp;return u.privInternalData=c,u.setupEvents(),u}openConnection(i,c){e.marshalPromiseToCallbacks(this.privInternalData.connect(),i,c)}closeConnection(i,c){if(this.privInternalData instanceof t.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");e.marshalPromiseToCallbacks(this.privInternalData.disconnect(),i,c)}setMessageProperty(i,c,u){if(n.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof t.ServiceRecognizerBase){if(i.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(c,u)}else if(this.privInternalData instanceof t.SynthesisAdapterBase){if(i.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,u)}}sendMessageAsync(i,c,u,l){e.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(i,c),u,l)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(i=>{i.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new o.ConnectionEventArgs(i.connectionId)):i.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new o.ConnectionEventArgs(i.connectionId)):i.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new o.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(i.message))):i.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new o.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(i.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(i=>{this.receivedServiceMessage&&this.receivedServiceMessage(new o.ServiceEventArgs(i.jsonString,i.name))})}};return bi.Connection=s,bi}var Kv;function JT(){if(Kv)return ki;Kv=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.TranslationRecognizer=void 0;const t=k(),e=b(),r=QS(),n=O,o=E();let s=class XS extends o.Recognizer{constructor(i,c,u){const l=i;n.Contracts.throwIfNull(l,"speechConfig"),super(c,l.properties,u||new t.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationVoice]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationToLanguages]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(i,c,u){const l=i;return c.properties.mergeTo(l.properties),new XS(i,u)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,i)}recognizeOnceAsync(i,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),i,c)}startContinuousRecognitionAsync(i,c){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),i,c)}stopContinuousRecognitionAsync(i,c){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),i,c)}removeTargetLanguage(i){if(n.Contracts.throwIfNullOrUndefined(i,"language to be removed"),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const c=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=c.indexOf(i);u>-1&&(c.splice(u,1),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")),this.updateLanguages(c))}}addTargetLanguage(i){n.Contracts.throwIfNullOrUndefined(i,"language to be added");let c=[];this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(c=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c.includes(i)||(c.push(i),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))):(this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,i),c=[i]),this.updateLanguages(c)}close(i,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),i,c)}onConnection(){}async dispose(i){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,i&&(await this.implRecognizerStop(),await super.dispose(i)))}createRecognizerConfig(i){return new t.RecognizerConfig(i,this.privProperties)}createServiceRecognizer(i,c,u,l){const p=u;return new t.TranslationServiceRecognizer(i,c,p,l,this)}updateLanguages(i){const c=r.Connection.fromRecognizer(this);c&&(c.setMessageProperty("speech.context","translationcontext",{to:i}),c.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:i})))}};return ki.TranslationRecognizer=s,ki}var Mi={},Jv;function GT(){if(Jv)return Mi;Jv=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Translations=void 0;const t=E();let e=class{constructor(){this.privMap=new t.PropertyCollection}get languages(){return this.privMap.keys}get(n,o){return this.privMap.getProperty(n,o)}set(n,o){this.privMap.setProperty(n,o)}};return Mi.Translations=e,Mi}var YS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(t.NoMatchReason||(t.NoMatchReason={}))})(YS);var Oi={},Gv;function QT(){if(Gv)return Oi;Gv=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.NoMatchDetails=void 0;const t=k(),e=E();let r=class ZS{constructor(o){this.privReason=o}static fromResult(o){const s=t.SimpleSpeechPhrase.fromJSON(o.json);let a=e.NoMatchReason.NotRecognized;switch(s.RecognitionStatus){case t.RecognitionStatus.BabbleTimeout:a=e.NoMatchReason.InitialBabbleTimeout;break;case t.RecognitionStatus.InitialSilenceTimeout:a=e.NoMatchReason.InitialSilenceTimeout;break;default:a=e.NoMatchReason.NotRecognized;break}return new ZS(a)}get reason(){return this.privReason}};return Oi.NoMatchDetails=r,Oi}var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.TranslationRecognitionCanceledEventArgs=void 0;class XT{constructor(e,r,n,o,s){this.privCancelReason=r,this.privErrorDetails=n,this.privResult=s,this.privSessionId=e,this.privErrorCode=o}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}Gc.TranslationRecognitionCanceledEventArgs=XT;var Di={},Qv;function YT(){if(Qv)return Di;Qv=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.IntentRecognitionCanceledEventArgs=void 0;const t=E();let e=class extends t.IntentRecognitionEventArgs{constructor(n,o,s,a,i,c){super(a,i,c),this.privReason=n,this.privErrorDetails=o,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Di.IntentRecognitionCanceledEventArgs=e,Di}var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.CancellationDetailsBase=void 0;class ZT{constructor(e,r,n){this.privReason=e,this.privErrorDetails=r,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}Us.CancellationDetailsBase=ZT;var zi={},Xv;function e0(){if(Xv)return zi;Xv=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.CancellationDetails=void 0;const t=k(),e=Us,r=E();let n=class eC extends e.CancellationDetailsBase{constructor(s,a,i){super(s,a,i)}static fromResult(s){let a=r.CancellationReason.Error,i=r.CancellationErrorCode.NoError;if(s instanceof r.RecognitionResult&&s.json){const c=t.SimpleSpeechPhrase.fromJSON(s.json);a=t.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return s.properties&&(i=r.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new eC(a,s.errorDetails||t.EnumTranslation.implTranslateErrorDetails(i),i)}};return zi.CancellationDetails=n,zi}var tC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(t.CancellationErrorCode||(t.CancellationErrorCode={}))})(tC);var Ni={},Yv;function t0(){if(Yv)return Ni;Yv=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.ConnectionEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{};return Ni.ConnectionEventArgs=e,Ni}var ji={},Zv;function r0(){if(Zv)return ji;Zv=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.ServiceEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o,s){super(s),this.privJsonResult=n,this.privEventName=o}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return ji.ServiceEventArgs=e,ji}var Qc={};Object.defineProperty(Qc,"__esModule",{value:!0});Qc.PhraseListGrammar=void 0;class kd{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const r=e.internalData;return new kd(r)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}Qc.PhraseListGrammar=kd;var kr={},ef;function bd(){if(ef)return kr;ef=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.DialogServiceConfigImpl=kr.DialogServiceConfig=void 0;const t=O,e=E();let r=class{constructor(){}set applicationId(s){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};kr.DialogServiceConfig=r;class n extends r{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechConfig.speechRecognitionLanguage=s}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(s){this.privSpeechConfig.outputFormat=s}setProperty(s,a){this.privSpeechConfig.setProperty(s,a)}getProperty(s,a){return this.privSpeechConfig.getProperty(s)}setProxy(s,a,i,c){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,s),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),i&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,i),c&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(s,a,i){this.privSpeechConfig.setServiceProperty(s,a)}close(){}}return kr.DialogServiceConfigImpl=n,kr}var Li={},tf;function n0(){if(tf)return Li;tf=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.BotFrameworkConfig=void 0;const t=O,e=bd(),r=E();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,i){t.Contracts.throwIfNullOrWhitespace(s,"subscription"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),i&&c.setProperty(r.PropertyId.Conversation_ApplicationId,i),c}static fromAuthorizationToken(s,a,i){t.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),i&&c.setProperty(r.PropertyId.Conversation_ApplicationId,i),c}static fromHost(s,a,i){t.Contracts.throwIfNullOrUndefined(s,"host");const c=s instanceof URL?s:new URL(`wss://${s}.convai.speech.azure.us`);t.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(s,a){t.Contracts.throwIfNull(s,"endpoint");const i=new e.DialogServiceConfigImpl;return i.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,s.toString()),a!==void 0&&i.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),i}};return Li.BotFrameworkConfig=n,Li}var xi={},rf;function i0(){if(rf)return xi;rf=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.CustomCommandsConfig=void 0;const t=O,e=bd(),r=E();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,i){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"subscription"),t.Contracts.throwIfNullOrWhitespace(i,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c}static fromAuthorizationToken(s,a,i){t.Contracts.throwIfNullOrWhitespace(s,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(i,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,i),c}set applicationId(s){t.Contracts.throwIfNullOrWhitespace(s,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,s)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return xi.CustomCommandsConfig=n,xi}var Bi={},Fi={},qi={},yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.QueryParameterNames=void 0;class ae{}yt.QueryParameterNames=ae;ae.BotId="botid";ae.CustomSpeechDeploymentId="cid";ae.CustomVoiceDeploymentId="deploymentId";ae.EnableAudioLogging="storeAudio";ae.EnableLanguageId="lidEnabled";ae.EnableWordLevelTimestamps="wordLevelTimestamps";ae.EndSilenceTimeoutMs="endSilenceTimeoutMs";ae.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";ae.Format="format";ae.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";ae.Language="language";ae.Profanity="profanity";ae.RequestBotStatusMessages="enableBotMessageStatus";ae.StableIntermediateThreshold="stableIntermediateThreshold";ae.StableTranslation="stableTranslation";ae.TestHooks="testhooks";ae.Postprocessing="postprocessing";ae.CtsMeetingId="meetingId";ae.CtsDeviceId="deviceId";ae.CtsIsParticipant="isParticipant";ae.EnableAvatar="enableTalkingAvatar";var nf;function St(){if(nf)return qi;nf=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.ConnectionFactoryBase=void 0;const t=k(),e=E(),r=yt;let n=class{static getHostSuffix(s){if(s){if(s.toLowerCase().startsWith("china"))return".azure.cn";if(s.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(s,a,i){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,r.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,r.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,r.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,r.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,r.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,r.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,r.QueryParameterNames.EnableWordLevelTimestamps],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,r.QueryParameterNames.StableIntermediateThreshold]]).forEach((l,p)=>{this.setUrlParameter(p,l,s,a,i)});const u=JSON.parse(s.parameters.getProperty(t.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(l=>{a[l]=u[l]})}setUrlParameter(s,a,i,c,u){const l=i.parameters.getProperty(s,void 0);l&&(!u||u.search(a)===-1)&&(c[a]=l.toLocaleLowerCase())}};return qi.ConnectionFactoryBase=n,qi}var of;function o0(){if(of)return Fi;of=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.DialogConnectionFactory=void 0;const t=me(),e=k(),r=E(),n=St(),o=k(),s=ge,a=yt;class i extends n.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),h=u.parameters.getProperty(r.PropertyId.Conversation_DialogType),v=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),m=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),S=u.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),f={};f[s.HeaderNames.ConnectionId]=p,f[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),f[a.QueryParameterNames.Language]=m,f[a.QueryParameterNames.RequestBotStatusMessages]=S,d&&(f[a.QueryParameterNames.BotId]=d,h===r.DialogServiceConfig.DialogTypes.CustomCommands&&(f[s.HeaderNames.CustomCommandsAppId]=d));const g=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",y=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",C={};l.token!=null&&l.token!==""&&(C[l.headerName]=l.token);let P=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!P){const T=n.ConnectionFactoryBase.getHostSuffix(v),w=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${v}.${i.BaseUrl}${T}`);P=`${w.endsWith("/")?w:w+"/"}${g}${i.ApiKey}/${y}`}this.setCommonUrlParams(u,f,P);const R=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(P,f,C,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),R,p)}}return Fi.DialogConnectionFactory=i,i.ApiKey="api",i.BaseUrl="convai.speech",Fi}var sf;function s0(){if(sf)return Bi;sf=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.DialogServiceConnector=void 0;const t=o0(),e=k(),r=b(),n=O,o=E(),s=Jc;let a=class extends o.Recognizer{constructor(c,u){const l=c;n.Contracts.throwIfNull(c,"dialogConfig"),super(u,l.properties,new t.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=l.properties.clone();const p=this.buildAgentConfig();this.privReco.agentConfig.set(p)}connect(c,u){r.marshalPromiseToCallbacks(this.privReco.connect(),c,u)}disconnect(c,u){r.marshalPromiseToCallbacks(this.privReco.disconnect(),c,u)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(s.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(c){this.properties.setProperty(s.PropertyId.Conversation_Speech_Activity_Template,c)}listenOnceAsync(c,u){if(this.isTurnComplete){n.Contracts.throwIfDisposed(this.privIsDisposed);const p=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new r.Deferred;await this.privReco.recognize(e.RecognitionMode.Conversation,d.resolve,d.reject);const h=await d.promise;return await this.implRecognizerStop(),h})();p.catch(()=>{this.dispose(!0).catch(()=>{})}),r.marshalPromiseToCallbacks(p.finally(()=>{this.isTurnComplete=!0}),c,u)}}sendActivityAsync(c,u,l){r.marshalPromiseToCallbacks(this.privReco.sendMessage(c),u,l)}close(c,u){n.Contracts.throwIfDisposed(this.privIsDisposed),r.marshalPromiseToCallbacks(this.dispose(!0),c,u)}async dispose(c){this.privIsDisposed||c&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(c))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,l,p){const d=l;return new e.DialogServiceAdapter(c,u,d,p,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(s.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(s.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(s.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return Bi.DialogServiceConnector=a,Bi}var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.ActivityReceivedEventArgs=void 0;class a0{constructor(e,r){this.privActivity=e,this.privAudioStream=r}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}Xc.ActivityReceivedEventArgs=a0;var Yc={},Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});Zc.TurnStatusResponsePayload=void 0;class Md{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new Md(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}Zc.TurnStatusResponsePayload=Md;Object.defineProperty(Yc,"__esModule",{value:!0});Yc.TurnStatusReceivedEventArgs=void 0;const c0=Zc;class u0{constructor(e){this.privTurnStatus=c0.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}Yc.TurnStatusReceivedEventArgs=u0;var rC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))})(rC);var nC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(t.ProfanityOption||(t.ProfanityOption={}))})(nC);var Ui={},af;function l0(){if(af)return Ui;af=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.BaseAudioPlayer=void 0;const t=Re,e=E(),r=Er;let n=class{constructor(s){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,s===void 0&&(s=e.AudioStreamFormat.getDefaultInputFormat()),this.init(s)}playAudioSample(s,a,i){try{this.ensureInitializedContext();const c=this.formatAudioData(s),u=new Float32Array(this.samples.length+c.length);u.set(this.samples,0),u.set(c,this.samples.length),this.samples=u,a&&a()}catch(c){i&&i(c)}}stopAudio(s,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{s&&s()},i=>{a&&a(i)}),this.audioContext=null)}init(s){this.audioFormat=s,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const s=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},s)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(s){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(s),128);case 16:return this.formatArrayBuffer(new Int16Array(s),32768);case 32:return this.formatArrayBuffer(new Int32Array(s),2147483648);default:throw new t.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(s,a){const i=new Float32Array(s.length);for(let c=0;c<s.length;c++)i[c]=s[c]/a;return i}updateAudioBuffer(){if(this.samples.length===0)return;const s=this.audioFormat.channels,a=this.audioContext.createBufferSource(),i=this.samples.length/s,c=this.audioContext.createBuffer(s,i,this.audioFormat.samplesPerSec);for(let u=0;u<s;u++){let l=u;const p=c.getChannelData(u);for(let d=0;d<this.samples.length;d++,l+=s)p[d]=this.samples[l]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(s){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),i=this.audioContext.destination;await this.audioContext.decodeAudioData(s,c=>{a.buffer=c,a.connect(i),a.start(0)})}};return Ui.BaseAudioPlayer=n,Ui}var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.ConnectionMessageEventArgs=void 0;class p0{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}eu.ConnectionMessageEventArgs=p0;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.VoiceProfile=void 0;class d0{constructor(e,r){this.privId=e,this.privProfileType=r}get profileId(){return this.privId}get profileType(){return this.privProfileType}}tu.VoiceProfile=d0;var br={},cf;function h0(){if(cf)return br;cf=1,Object.defineProperty(br,"__esModule",{value:!0}),br.VoiceProfileEnrollmentCancellationDetails=br.VoiceProfileEnrollmentResult=void 0;const t=k(),e=E();let r=class Ep{constructor(s,a,i){this.privReason=s,this.privProperties=new e.PropertyCollection,this.privReason!==e.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=e.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=i,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(s){const a=[];for(const i of s.value){const c=i.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:i.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Ep(c,null,null);u.privDetails=this.getIdentificationDetails(i),a.push(u)}return a}static FromVerificationProfileList(s){const a=[];for(const i of s.value){const c=i.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:i.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new Ep(c,null,null);u.privDetails=this.getVerificationDetails(i),a.push(u)}return a}static getIdentificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount||0,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.identificationProfileId,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.verificationProfileId,remainingEnrollmentsCount:s.remainingEnrollments||s.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}};br.VoiceProfileEnrollmentResult=r;class n extends e.CancellationDetailsBase{constructor(s,a,i){super(s,a,i)}static fromResult(s){const a=e.CancellationReason.Error;let i=e.CancellationErrorCode.NoError;return s.properties&&(i=e.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.NoError])]),new n(a,s.errorDetails,i)}}return br.VoiceProfileEnrollmentCancellationDetails=n,br}var Mr={},uf;function v0(){if(uf)return Mr;uf=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.VoiceProfileCancellationDetails=Mr.VoiceProfileResult=void 0;const t=k(),e=O,r=E();let n=class{constructor(a,i){this.privReason=a,this.privProperties=new r.PropertyCollection,a===r.ResultReason.Canceled&&(e.Contracts.throwIfNullOrUndefined(i,"statusText"),this.privErrorDetails=i,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};Mr.VoiceProfileResult=n;class o extends r.CancellationDetailsBase{constructor(a,i,c){super(a,i,c)}static fromResult(a){const i=r.CancellationReason.Error;let c=r.CancellationErrorCode.NoError;return a.properties&&(c=r.CancellationErrorCode[a.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new o(i,a.errorDetails,c)}}return Mr.VoiceProfileCancellationDetails=o,Mr}var $i={},lf;function f0(){if(lf)return $i;lf=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.VoiceProfilePhraseResult=void 0;const t=O,e=E();let r=class extends e.VoiceProfileResult{constructor(o,s,a,i){super(o,s),this.privPhrases=[],t.Contracts.throwIfNullOrUndefined(i,"phrase array"),this.privType=a,i&&i[0]&&(this.privPhrases=i)}get phrases(){return this.privPhrases}get type(){return this.privType}};return $i.VoiceProfilePhraseResult=r,$i}var Wi={},pf;function g0(){if(pf)return Wi;pf=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.VoiceProfileClient=void 0;const t=k(),e=LS(),r=O,n=E();let o=class extends n.Recognizer{constructor(a){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const i=a;r.Contracts.throwIfNull(i,"speechConfig"),super(e.AudioConfig.fromStreamInput(n.AudioInputStream.createPushStream()),i.properties,new t.VoiceProfileConnectionFactory),this.privProperties=i.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,i){const c=await this.privVoiceAdapter.createProfile(a,i);return new n.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,i){return this.privVoiceAdapter.getActivationPhrases(a,i)}async enrollProfileAsync(a,i){const c=i;return r.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=i,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,i,c,u){const l=c;return new t.VoiceServiceRecognizer(a,i,l,u,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.properties)}getResult(a,i){return new n.VoiceProfileResult(a.ok?i:n.ResultReason.Canceled,a.statusText)}};return Wi.VoiceProfileClient=o,Wi}var Vi={},df;function m0(){if(df)return Vi;df=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.SpeakerRecognizer=void 0;const t=k(),e=O,r=E();let n=class extends r.Recognizer{constructor(s,a){e.Contracts.throwIfNullOrUndefined(s,"speechConfig");const i=s;e.Contracts.throwIfNullOrUndefined(i,"speechConfig"),super(a,i.properties,new t.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,e.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=i.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){e.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}async recognizeOnceAsync(s){return e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(s)}async close(){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(s){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(s);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(s){return new t.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,i,c){const u=i;return new t.SpeakerServiceRecognizer(s,a,u,c,this)}async dispose(s){this.privDisposedSpeakerRecognizer||s&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(s))}};return Vi.SpeakerRecognizer=n,Vi}var Hi={},hf;function y0(){if(hf)return Hi;hf=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.SpeakerIdentificationModel=void 0;const t=O,e=E();let r=class iC{constructor(o){if(this.privVoiceProfiles=[],this.privProfileIds=[],t.Contracts.throwIfNullOrUndefined(o,"VoiceProfiles"),o.length===0)throw new Error("Empty Voice Profiles array");for(const s of o){if(s.profileType!==e.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+s.profileId);this.privVoiceProfiles.push(s),this.privProfileIds.push(s.profileId)}}static fromProfiles(o){return new iC(o)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return Hi.SpeakerIdentificationModel=r,Hi}var Ki={},vf;function S0(){if(vf)return Ki;vf=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.SpeakerVerificationModel=void 0;const t=O,e=E();let r=class oC{constructor(o){if(t.Contracts.throwIfNullOrUndefined(o,"VoiceProfile"),o.profileType===e.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=o}static fromProfile(o){return new oC(o)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===e.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return Ki.SpeakerVerificationModel=r,Ki}var Ji={},Od={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(t.LanguageIdMode||(t.LanguageIdMode={}))})(Od);var ff;function C0(){if(ff)return Ji;ff=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.AutoDetectSourceLanguageConfig=void 0;const t=k(),e=O,r=E(),n=Od;let o=class Ta{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const a=new Ta;return a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.AutoDetectSourceLanguagesOpenRangeOptionName),a}static fromLanguages(a){e.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const i=new Ta;return i.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),i}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const i=new Ta,c=[];return a.forEach(u=>{if(c.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const l=u.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();i.properties.setProperty(l,u.endpointId)}}),i.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),i}get properties(){return this.privProperties}set mode(a){a===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return Ji.AutoDetectSourceLanguageConfig=o,Ji}var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.AutoDetectSourceLanguageResult=void 0;const gf=O;class Ya{constructor(e,r){gf.Contracts.throwIfNullOrUndefined(e,"language"),gf.Contracts.throwIfNullOrUndefined(r,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=r}static fromResult(e){return new Ya(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new Ya(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}ru.AutoDetectSourceLanguageResult=Ya;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.SourceLanguageConfig=void 0;const P0=O;class Dd{constructor(e,r){P0.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=r}static fromLanguage(e,r){return new Dd(e,r)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}nu.SourceLanguageConfig=Dd;var gl={},mf;function R0(){return mf||(mf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;const e=k(),r=E();var n;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(n=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));class o{constructor(i,c=r.ResultReason.RecognizedSpeaker,u=r.CancellationErrorCode.NoError,l=""){this.privProperties=new r.PropertyCollection;const p=i.scenario==="TextIndependentIdentification"?n.Identify:n.Verify;this.privReason=c,this.privReason!==r.ResultReason.Canceled?p===n.Identify?(this.privProfileId=i.identificationResult.identifiedProfile.profileId,this.privScore=i.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=i.verificationResult.score,i.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=r.ResultReason.NoMatch),i.verificationResult.profileId!==void 0&&i.verificationResult.profileId!==""&&(this.privProfileId=i.verificationResult.profileId)):(this.privErrorDetails=l,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[u])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(i))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}t.SpeakerRecognitionResult=o;class s extends r.CancellationDetailsBase{constructor(i,c,u){super(i,c,u)}static fromResult(i){const c=r.CancellationReason.Error;let u=r.CancellationErrorCode.NoError;return i.properties&&(u=r.CancellationErrorCode[i.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(c,i.errorDetails,u)}}t.SpeakerRecognitionCancellationDetails=s}(gl)),gl}var ml={},Or={},yf;function sC(){if(yf)return Or;yf=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.ConversationImpl=Or.Conversation=void 0;const t=k(),e=b(),r=O,n=E();let o=class{constructor(){}static createConversationAsync(i,c,u,l){r.Contracts.throwIfNullOrUndefined(i,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(i.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!i.subscriptionKey&&!i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(i.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof c=="string"?(p=new s(i,c),e.marshalPromiseToCallbacks((async()=>{})(),u,l)):(p=new s(i),d=c,h=u,p.createConversationAsync(()=>{d&&d()},v=>{h&&h(v)})),p}};Or.Conversation=o;class s extends o{constructor(i,c){if(super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||i.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{i.targetLanguages.length===0&&i.addTargetLanguage(this.privLanguage),i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||i.setProfanity(n.ProfanityOption.Masked);let d=i.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),r.Contracts.throwIfNullOrTooLong(d,"nickname",50),r.Contracts.throwIfNullOrTooShort(d,"nickname",2),i.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],d)}this.privConfig=i;const l=i;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var i,c;return(i=this.privParticipants.me)!=null&&i.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const i=this.conversationId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:i,participants:c,conversationProperties:u}}get canSend(){var i;return this.privIsConnected&&!((i=this.privParticipants.me)!=null&&i.isMuted)}get canSendAsHost(){var i;return this.privIsConnected&&((i=this.privParticipants.me)==null?void 0:i.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),this.privToken=i}set conversationTranslator(i){this.privConversationTranslator=i}onToken(i){this.privConversationTranslator.onToken(i)}createConversationAsync(i,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startConversationAsync(i,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=t.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(i,c,u){r.Contracts.throwIfNullOrUndefined(i,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(i),c,u)}joinConversationAsync(i,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,i,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(i,c){e.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),i,c)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(i,c){e.marshalPromiseToCallbacks(this.endConversationImplAsync(),i,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(i,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&i.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(i),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof i=="string"?l=i:i.hasOwnProperty("id")?l=i.id:i.hasOwnProperty("userId")&&(l=i.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockConversationAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),i.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(i){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await i.enforceAudioGating(),this.privTranscriberRecognizer=i,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const i=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:i,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(i){if(this.privParticipants.addOrUpdateParticipant(i)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[i],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(i){this.privParticipants.deleteParticipant(i.id);const c=this.conversationInfo;return c.participants=[i],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(i){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}i&&this.dispose()}handleCallback(i,c){if(i){try{i()}catch(u){c&&c(u)}i=void 0}}handleError(i,c){if(c)if(i instanceof Error){const u=i;c(u.name+": "+u.message)}else c(i)}toParticipants(i){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return i?c:c.filter(u=>u.isHost===!1)}toParticipant(i){return new n.Participant(i.id,i.avatar,i.displayName,i.isHost,i.isMuted,i.isUsingTts,i.preferredLanguage,i.voice)}getMuteAllCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMuteCommand(i,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:i,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getEjectCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:i,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getChangeNicknameCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:i,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMessageCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(i,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:i,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return Or.ConversationImpl=s,Or}var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.ConversationCommon=void 0;class E0{constructor(e){this.privAudioConfig=e}handleCallback(e,r){if(e){try{e()}catch(n){r&&r(n)}e=void 0}}handleError(e,r){if(r)if(e instanceof Error){const n=e;r(n.name+": "+n.message)}else r(e)}}iu.ConversationCommon=E0;var Gi={},Sf;function w0(){if(Sf)return Gi;Sf=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.ConversationExpirationEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o){super(o),this.privExpirationTime=n}get expirationTime(){return this.privExpirationTime}};return Gi.ConversationExpirationEventArgs=e,Gi}var Qi={},Cf;function I0(){if(Cf)return Qi;Cf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.ConversationParticipantsChangedEventArgs=void 0;const t=E();let e=class extends t.SessionEventArgs{constructor(n,o,s){super(s),this.privReason=n,this.privParticipant=o}get reason(){return this.privReason}get participants(){return this.privParticipant}};return Qi.ConversationParticipantsChangedEventArgs=e,Qi}var Xi={},Pf;function T0(){if(Pf)return Xi;Pf=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.ConversationTranslationCanceledEventArgs=void 0;const t=qs();let e=class extends t.CancellationEventArgsBase{};return Xi.ConversationTranslationCanceledEventArgs=e,Xi}var Yi={},Rf;function _0(){if(Rf)return Yi;Rf=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.ConversationTranslationEventArgs=void 0;const t=E();let e=class extends t.RecognitionEventArgs{constructor(n,o,s){super(o,s),this.privResult=n}get result(){return this.privResult}};return Yi.ConversationTranslationEventArgs=e,Yi}var Zi={},Ef;function A0(){if(Ef)return Zi;Ef=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.ConversationTranslationResult=void 0;const t=US();let e=class extends t.TranslationRecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(o,a,i,c,u,l,void 0,void 0,p,d,h),this.privId=n,this.privOrigLang=s}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return Zi.ConversationTranslationResult=e,Zi}var yl={},eo={},$s={};Object.defineProperty($s,"__esModule",{value:!0});$s.StringUtils=void 0;class k0{static formatString(e,r){if(!e)return"";if(!r)return e;let n="",o="";const s=c=>{n+=c},a=c=>{o+=c};let i=s;for(let c=0;c<e.length;c++){const u=e[c],l=c+1<e.length?e[c+1]:"";switch(u){case"{":l==="{"?(i("{"),c++):i=a;break;case"}":l==="}"?(i("}"),c++):(r.hasOwnProperty(o)&&(n+=r[o]),i=s,o="");break;default:i(u);break}}return n}}$s.StringUtils=k0;var wf;function b0(){if(wf)return eo;wf=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.ConversationTranslatorConnectionFactory=void 0;const t=me(),e=$s,r=O,n=E(),o=ge,s=yt,a=St(),i=k();let c=class aC extends a.ConnectionFactoryBase{constructor(l){super(),r.Contracts.throwIfNullOrUndefined(l,"convGetter"),this.privConvGetter=l}create(l,p,d){const h=l.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",v=this.privConvGetter().room,m=v.cognitiveSpeechRegion||l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),S={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(m),path:aC.CTS_VIRT_MIC_PATH,region:encodeURIComponent(m)};S[s.QueryParameterNames.Language]=encodeURIComponent(l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),S[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(v.roomId),S[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(v.participantId),S[s.QueryParameterNames.CtsIsParticipant]=v.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let f="";const g={},y={};if(h){f=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),f||(f="wss://"+l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),f=e.StringUtils.formatString(f,S);const P=new URL(f);P.searchParams.forEach((T,w)=>{g[w]=T}),new i.TranscriberConnectionFactory().setQueryParams(g,l,f),g[s.QueryParameterNames.CtsMeetingId]=S[s.QueryParameterNames.CtsMeetingId],g[s.QueryParameterNames.CtsDeviceId]=S[s.QueryParameterNames.CtsDeviceId],v.isHost||(g[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in g||(g[s.QueryParameterNames.Format]="simple"),P.searchParams.forEach((T,w)=>{P.searchParams.set(w,g[w]),delete g[w]}),f=P.toString()}else{const P=new i.TranslationConnectionFactory;f=P.getEndpointUrl(l,!0),f=e.StringUtils.formatString(f,S),P.setQueryParams(g,l,f)}y[o.HeaderNames.ConnectionId]=d,y[t.RestConfigBase.configParams.token]=v.token,p.token&&(y[p.headerName]=p.token);const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new t.WebsocketConnection(f,g,y,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(l),C,d)}};return eo.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",eo}var If;function M0(){return If||(If=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const e=k(),r=b0(),n=b(),o=O,s=E(),a=sC(),i=zd();var c;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(c=t.SpeechState||(t.SpeechState={}));class u extends s.TranslationRecognizer{constructor(d,h,v,m){super(d,h,new r.ConversationTranslatorConnectionFactory(m)),this.privSpeechState=c.Inactive,v&&(this.privTranslator=v,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(S,f)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,f)},this.recognized=async(S,f)=>{var g;(g=f.result)!=null&&g.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(f.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,f)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new i.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,d,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class l extends i.ConversationCommon{constructor(d){super(d),this.privErrors=e.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const v=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));v[d]=h,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(v))}joinConversationAsync(d,h,v,m,S){try{if(typeof d=="string"){o.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),o.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),S);let f=v;(f==null||f==="")&&(f=e.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(f),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],f),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],h);const g=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const C of g){const P=this.privProperties.getProperty(C);if(P){const R=typeof C=="string"?C:s.PropertyId[C];this.privSpeechTranslationConfig.setProperty(R,P)}}const y=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));for(const C of Object.keys(y))this.privSpeechTranslationConfig.setServiceProperty(C,y[C],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,f,C=>{C||this.handleError(new Error(this.privErrors.permissionDeniedConnect),S),this.privSpeechTranslationConfig.authorizationToken=C,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(m,S)},P=>{this.handleError(P,S)})},C=>{this.handleError(C,S)})}else typeof d=="object"?(o.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),o.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),o.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(v,m)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),m)}catch(f){this.handleError(f,typeof v=="string"?S:m)}}leaveConversationAsync(d,h){n.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,v){try{o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,v)}catch(m){this.handleError(m,v)}}startTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{o.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),o.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),o.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(v){throw this.privIsSpeaking=!1,await this.cancelSpeech(),v}})(),d,h)}stopTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((v,m)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(v,m)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,v){n.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,v)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}t.ConversationTranslator=l}(yl)),yl}var to={},Tf;function O0(){if(Tf)return to;Tf=1,Object.defineProperty(to,"__esModule",{value:!0}),to.ConversationTranscriber=void 0;const t=k(),e=b(),r=O,n=E();let o=class cC extends n.Recognizer{constructor(a,i){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(i,c.properties,new t.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,i,c){const u=a;return i.properties.mergeTo(u.properties),new cC(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,i){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,i)}stopTranscribingAsync(a,i){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,i)}close(a,i){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,i)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,i,c,u){const l=c;return u.isSpeakerDiarizationEnabled=!0,new t.ConversationTranscriptionServiceRecognizer(a,i,l,u,this)}};return to.ConversationTranscriber=o,to}var Dr={},_f;function D0(){if(_f)return Dr;_f=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Participant=Dr.User=void 0;const t=E();class e{constructor(o){this.privUserId=o}get userId(){return this.privUserId}}Dr.User=e;class r{constructor(o,s,a,i,c,u,l,p){this.privId=o,this.privAvatar=s,this.privDisplayName=a,this.privIsHost=i,this.privIsMuted=c,this.privIsUsingTts=u,this.privPreferredLanguage=l,this.privVoice=p,this.privProperties=new t.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(o,s,a){return new r(o,"",o,!1,!1,!1,s,a)}}return Dr.Participant=r,Dr}var uC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))})(uC);var zr={},Af;function z0(){if(Af)return zr;Af=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.MeetingImpl=zr.Meeting=void 0;const t=k(),e=b(),r=O,n=E();let o=class{constructor(){}static createMeetingAsync(i,c,u,l){if(r.Contracts.throwIfNullOrUndefined(i,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(i.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!i.subscriptionKey&&!i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(i.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new s(i,c);return e.marshalPromiseToCallbacks((async()=>{})(),u,l),p}};zr.Meeting=o;class s extends o{constructor(i,c){super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||i.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=i.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=i;const l=i;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var i,c;return(i=this.privParticipants.me)!=null&&i.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const i=this.meetingId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:i,participants:c,meetingProperties:u}}get canSend(){var i;return this.privIsConnected&&!((i=this.privParticipants.me)!=null&&i.isMuted)}get canSendAsHost(){var i;return this.privIsConnected&&((i=this.privParticipants.me)==null?void 0:i.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"authorizationToken"),this.privToken=i}createMeetingAsync(i,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startMeetingAsync(i,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(i,c,u){r.Contracts.throwIfNullOrUndefined(i,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(i),c,u)}joinMeetingAsync(i,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,i,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(i,c){e.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),i,c)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(i,c){e.marshalPromiseToCallbacks(this.endMeetingImplAsync(),i,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(i,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&i.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(i),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof i=="string"?l=i:i.hasOwnProperty("id")?l=i.id:i.hasOwnProperty("userId")&&(l=i.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockMeetingAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(i,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(i,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==i&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(i,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),i.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(i,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(i),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(i){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await i.enforceAudioGating(),this.privTranscriberRecognizer=i,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const i=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:i,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(i){if(this.privParticipants.addOrUpdateParticipant(i)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[i],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(i){this.privParticipants.deleteParticipant(i.id);const c=this.meetingInfo;return c.participants=[i],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(i){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}i&&this.dispose()}handleCallback(i,c){if(i){try{i()}catch(u){c&&c(u)}i=void 0}}handleError(i,c){if(c)if(i instanceof Error){const u=i;c(u.name+": "+u.message)}else c(i)}toParticipants(i){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return i?c:c.filter(u=>u.isHost===!1)}toParticipant(i){return new n.Participant(i.id,i.avatar,i.displayName,i.isHost,i.isMuted,i.isUsingTts,i.preferredLanguage,i.voice)}getMuteAllCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMuteCommand(i,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:i,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getEjectCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(i,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:i,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getChangeNicknameCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(i,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:i,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:i})}getMessageCommand(i){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(i,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:i,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return zr.MeetingImpl=s,zr}var ro={},kf;function N0(){if(kf)return ro;kf=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.MeetingTranscriptionCanceledEventArgs=void 0;const t=qs();class e extends t.CancellationEventArgsBase{}return ro.MeetingTranscriptionCanceledEventArgs=e,ro}var no={},bf;function j0(){if(bf)return no;bf=1,Object.defineProperty(no,"__esModule",{value:!0}),no.MeetingTranscriber=void 0;const t=k(),e=b(),r=O,n=E(),o=zd();let s=class{constructor(i){this.privAudioConfig=i,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,i)}joinMeetingAsync(i,c,u){const l=i;r.Contracts.throwIfNullOrUndefined(o.MeetingImpl,"Meeting"),this.privRecognizer=new t.TranscriberRecognizer(i.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),e.marshalPromiseToCallbacks(l.connectTranscriberRecognizer(this.privRecognizer),c,u)}startTranscribingAsync(i,c){this.privRecognizer.startContinuousRecognitionAsync(i,c)}stopTranscribingAsync(i,c){this.privRecognizer.stopContinuousRecognitionAsync(i,c)}leaveMeetingAsync(i,c){this.privRecognizer.disconnectCallbacks(),e.marshalPromiseToCallbacks((async()=>{})(),i,c)}close(i,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),i,c)}async dispose(i){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),i&&(this.privDisposedRecognizer=!0))}};return no.MeetingTranscriber=s,no}var io={},Mf;function L0(){if(Mf)return io;Mf=1,Object.defineProperty(io,"__esModule",{value:!0}),io.ConversationTranscriptionResult=void 0;const t=E();let e=class extends t.RecognitionResult{constructor(n,o,s,a,i,c,u,l,p,d,h){super(n,o,s,a,i,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return io.ConversationTranscriptionResult=e,io}var Of;function zd(){return Of||(Of=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=sC();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return e.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return e.ConversationImpl}});var r=iu;Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=w0();Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var o=I0();Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return o.ConversationParticipantsChangedEventArgs}});var s=T0();Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var a=_0();Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var i=A0();Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return i.ConversationTranslationResult}});var c=M0();Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var u=O0();Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var l=D0();Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return l.User}});var p=uC;Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=z0();Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=N0();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var v=j0();Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return v.MeetingTranscriber}});var m=L0();Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return m.ConversationTranscriptionResult}})}(ml)),ml}var Nr={},Df;function Nd(){if(Df)return Nr;Df=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.SynthesisRequest=Nr.Synthesizer=void 0;const t=k(),e=b(),r=O,n=E();let o=class lC{constructor(i){const c=i;r.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new e.Queue}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(i){r.Contracts.throwIfNullOrWhitespace(i,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,i)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===t.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(i){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),l=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),p=lC.XMLEncode(i);return this.autoDetectSourceLanguage?u="en-US":l=l||c[u],l&&(p=`<voice name='${l}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${p}</speak>`,p}async dispose(i){this.privDisposed||(i&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const i=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(i.text,i.isSSML,i.requestId,i.cb,i.err,i.dataStream)}}createSynthesizerConfig(i){return new t.SynthesizerConfig(i,this.privProperties)}implCommonSynthesizeSetup(){let i=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(i=i+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const l=this.createSynthesizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(i,c,u)))),p=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new t.CognitiveSubscriptionKeyAuthentication(p):new t.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,l),this.privRestAdapter=this.createRestSynthesisAdapter(d,l)}static XMLEncode(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Nr.Synthesizer=o;class s{constructor(i,c,u,l,p,d){this.requestId=i,this.text=c,this.isSSML=u,this.cb=l,this.err=p,this.dataStream=d}}return Nr.SynthesisRequest=s,Nr}var oo={},zf;function x0(){if(zf)return oo;zf=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.SpeechSynthesizer=void 0;const t=k(),e=b(),r=Fs,n=wr,o=Ce,s=O,a=E(),i=Nd();let c=class pC extends a.Synthesizer{constructor(l,p){super(l),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(l,p,d){const h=l;return p.properties.mergeTo(h.properties),new pC(l,d)}speakTextAsync(l,p,d,h){this.speakImpl(l,!1,p,d,h)}speakSsmlAsync(l,p,d,h){this.speakImpl(l,!0,p,d,h)}async getVoicesAsync(l=""){return this.getVoices(l)}close(l,p){s.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),l,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(l,p,d){return new t.SpeechSynthesisAdapter(l,p,d,this,this.audioConfig)}createRestSynthesisAdapter(l,p){return new t.SynthesisRestAdapter(p,l)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(l,p,d,h,v){try{s.Contracts.throwIfDisposed(this.privDisposed);const m=e.createNoDashGuid();let S;v instanceof a.PushAudioOutputStreamCallback?S=new o.PushAudioOutputStreamImpl(v):v instanceof a.PullAudioOutputStream?S=v:v!==void 0?S=new r.AudioFileWriter(v):S=void 0,this.synthesisRequestQueue.enqueue(new i.SynthesisRequest(m,l,p,f=>{if(this.privSynthesizing=!1,d)try{d(f)}catch(g){h&&h(g)}d=void 0,this.adapterSpeak().catch(()=>{})},f=>{h&&h(f)},S)),this.adapterSpeak().catch(()=>{})}catch(m){if(h)if(m instanceof Error){const S=m;h(S.name+": "+S.message)}else h(m);this.dispose(!0).catch(()=>{})}}async getVoices(l){const p=e.createNoDashGuid(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return l&&l.length>0&&(h=h.filter(v=>!!v.Locale&&v.Locale.toLowerCase()===l.toLowerCase())),new a.SynthesisVoicesResult(p,h,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return oo.SpeechSynthesizer=c,oo}var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.SynthesisResult=void 0;class B0{constructor(e,r,n,o){this.privResultId=e,this.privReason=r,this.privErrorDetails=n,this.privProperties=o}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}ou.SynthesisResult=B0;var so={},Nf;function F0(){if(Nf)return so;Nf=1,Object.defineProperty(so,"__esModule",{value:!0}),so.SpeechSynthesisResult=void 0;const t=E();let e=class extends t.SynthesisResult{constructor(n,o,s,a,i,c){super(n,o,a,i),this.privAudioData=s,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return so.SpeechSynthesisResult=e,so}var su={};Object.defineProperty(su,"__esModule",{value:!0});su.SpeechSynthesisEventArgs=void 0;class q0{constructor(e){this.privResult=e}get result(){return this.privResult}}su.SpeechSynthesisEventArgs=q0;var au={};Object.defineProperty(au,"__esModule",{value:!0});au.SpeechSynthesisWordBoundaryEventArgs=void 0;class U0{constructor(e,r,n,o,s,a){this.privAudioOffset=e,this.privDuration=r,this.privText=n,this.privWordLength=o,this.privTextOffset=s,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}au.SpeechSynthesisWordBoundaryEventArgs=U0;var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.SpeechSynthesisBookmarkEventArgs=void 0;class $0{constructor(e,r){this.privAudioOffset=e,this.privText=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}cu.SpeechSynthesisBookmarkEventArgs=$0;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.SpeechSynthesisVisemeEventArgs=void 0;class W0{constructor(e,r,n){this.privAudioOffset=e,this.privVisemeId=r,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}uu.SpeechSynthesisVisemeEventArgs=W0;var dC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))})(dC);var ao={},jf;function V0(){if(jf)return ao;jf=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.SynthesisVoicesResult=void 0;const t=E();let e=class extends t.SynthesisResult{constructor(n,o,s){if(Array.isArray(o)){super(n,t.ResultReason.VoicesListRetrieved,void 0,new t.PropertyCollection),this.privVoices=[];for(const a of o)this.privVoices.push(new t.VoiceInfo(a))}else super(n,t.ResultReason.Canceled,s||"Error information unavailable",new t.PropertyCollection)}get voices(){return this.privVoices}};return ao.SynthesisVoicesResult=e,ao}var hC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0;var e;(function(s){s[s.Unknown=0]="Unknown",s[s.Female=1]="Female",s[s.Male=2]="Male",s[s.Neutral=3]="Neutral"})(e=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={}));var r;(function(s){s[s.OnlineNeural=1]="OnlineNeural",s[s.OnlineStandard=2]="OnlineStandard",s[s.OfflineNeural=3]="OfflineNeural",s[s.OfflineStandard=4]="OfflineStandard"})(r=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));const n={[e[e.Neutral]]:e.Neutral,[e[e.Male]]:e.Male,[e[e.Female]]:e.Female};class o{constructor(a){if(this.privStyleList=[],a){if(this.privName=a.Name,this.privLocale=a.Locale,this.privShortName=a.ShortName,this.privLocaleName=a.LocaleName,this.privDisplayName=a.DisplayName,this.privLocalName=a.LocalName,this.privVoiceType=a.VoiceType.endsWith("Standard")?r.OnlineStandard:r.OnlineNeural,this.privGender=n[a.Gender]||e.Unknown,a.StyleList&&Array.isArray(a.StyleList))for(const i of a.StyleList)this.privStyleList.push(i);this.privSampleRateHertz=a.SampleRateHertz,this.privStatus=a.Status,a.ExtendedPropertyMap&&(this.privExtendedPropertyMap=a.ExtendedPropertyMap),this.privWordsPerMinute=a.WordsPerMinute,Array.isArray(a.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...a.SecondaryLocaleList]),Array.isArray(a.RolePlayList)&&(this.privRolePlayList=[...a.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}t.VoiceInfo=o})(hC);var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.SpeakerAudioDestination=void 0;const jr=b(),H0=Ce,tt=Er,K0=60*30,Lf={[tt.AudioFormatTag.PCM]:"audio/wav",[tt.AudioFormatTag.MuLaw]:"audio/x-wav",[tt.AudioFormatTag.MP3]:"audio/mpeg",[tt.AudioFormatTag.OGG_OPUS]:"audio/ogg",[tt.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[tt.AudioFormatTag.ALaw]:"audio/x-wav",[tt.AudioFormatTag.FLAC]:"audio/flac"};class J0{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||jr.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,r,n){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{r&&r()},o=>{n&&n(o)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,r){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},n=>{r&&r(n)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===tt.AudioFormatTag.PCM||this.privFormat.formatTag===tt.AudioFormatTag.MuLaw||this.privFormat.formatTag===tt.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(()=>{n=this.privFormat.addHeader(n);const o=new Blob([n],{type:Lf[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(o),this.notifyPlayback().then(()=>{e&&e()},s=>{r&&r(s)})},o=>{r&&r(o)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;const r=Lf[this.privFormat.formatTag];r===void 0?console.warn(`Unknown mimeType for format ${tt.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(r)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=K0,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(r),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(n=>{jr.Events.instance.onEvent(new jr.BackgroundEvent(n))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(n=>{jr.Events.instance.onEvent(new jr.BackgroundEvent(n))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(n=>{jr.Events.instance.onEvent(new jr.BackgroundEvent(n))})):(console.warn(`Format ${tt.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new H0.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e;return((e=this.privAudio)==null?void 0:e.volume)??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,r){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},n=>{r&&r(n)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}lu.SpeakerAudioDestination=J0;var co={},xf;function G0(){if(xf)return co;xf=1,Object.defineProperty(co,"__esModule",{value:!0}),co.ConversationTranscriptionCanceledEventArgs=void 0;const t=qs();let e=class extends t.CancellationEventArgsBase{};return co.ConversationTranscriptionCanceledEventArgs=e,co}var uo={},Bf;function Q0(){if(Bf)return uo;Bf=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.MeetingTranscriptionCanceledEventArgs=void 0;const t=qs();let e=class extends t.CancellationEventArgsBase{};return uo.MeetingTranscriptionCanceledEventArgs=e,uo}var vC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))})(vC);var fC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))})(fC);var lo={},Ff;function X0(){if(Ff)return lo;Ff=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.PronunciationAssessmentConfig=void 0;const t=O,e=E();let r=class gC{constructor(o,s=e.PronunciationAssessmentGradingSystem.FivePoint,a=e.PronunciationAssessmentGranularity.Phoneme,i=!1){t.Contracts.throwIfNullOrUndefined(o,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,o),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[s]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(i))}static fromJSON(o){t.Contracts.throwIfNullOrUndefined(o,"json");const s=new gC("");return s.privProperties=new e.PropertyCollection,s.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,o),s}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(o){this.updateJson();const s=o.internalData;s.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,s.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,s.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(o){t.Contracts.throwIfNullOrWhitespace(o,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,o)}set phonemeAlphabet(o){t.Contracts.throwIfNullOrWhitespace(o,"phonemeAlphabet"),this.privPhonemeAlphabet=o}set enableMiscue(o){const s=o?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,s)}get enableMiscue(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(o){this.privNBestPhonemeCount=o}set enableProsodyAssessment(o){this.privEnableProsodyAssessment=o}enableContentAssessmentWithTopic(o){this.privContentAssessmentTopic=o}get properties(){return this.privProperties}updateJson(){const o=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}"),s=JSON.parse(o),a=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);a&&(s.referenceText=a);const i=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);i&&(s.gradingSystem=i);const c=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);c&&(s.granularity=c),this.privPhonemeAlphabet&&(s.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(s.nbestPhonemeCount=this.privNBestPhonemeCount),s.enableProsodyAssessment=this.privEnableProsodyAssessment,s.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(s.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(s))}};return lo.PronunciationAssessmentConfig=r,lo}var Lr={},qf;function Y0(){if(qf)return Lr;qf=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.PronunciationAssessmentResult=Lr.ContentAssessmentResult=void 0;const t=O,e=E();class r{constructor(s){this.privPronJson=s}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}Lr.ContentAssessmentResult=r;let n=class mC{constructor(s){const a=JSON.parse(s);t.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(s){t.Contracts.throwIfNullOrUndefined(s,"result");const a=s.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return t.Contracts.throwIfNullOrUndefined(a,"json"),new mC(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.AccuracyScore}get pronunciationScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.PronScore}get completenessScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.CompletenessScore}get fluencyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.FluencyScore}get prosodyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new r(this.detailResult)}};return Lr.PronunciationAssessmentResult=n,Lr}var po={},Uf;function Z0(){if(Uf)return po;Uf=1,Object.defineProperty(po,"__esModule",{value:!0}),po.AvatarConfig=void 0;const t=O,e=E();let r=class{constructor(o,s,a){this.privCustomized=!1,t.Contracts.throwIfNullOrWhitespace(o,"character"),this.character=o,this.style=s,a===void 0&&(a=new e.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(o){this.privCustomized=o}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(o){this.privBackgroundColor=o}};return po.AvatarConfig=r,po}var yC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"}(t.AvatarEventTypes||(t.AvatarEventTypes={}));class e{constructor(n,o){this.privOffset=n,this.privDescription=o}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}t.AvatarEventArgs=e})(yC);var ho={},vo={},$f;function SC(){if($f)return vo;$f=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.SpeechSynthesisConnectionFactory=void 0;const t=me(),e=E(),r=St(),n=k(),o=ge,s=yt;let a=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),h=r.ConnectionFactoryBase.getHostSuffix(d),v=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=v===void 0?"tts":"voice",S=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+m+".speech"+h),f={},g={};u.token!==void 0&&u.token!==""&&(g[u.headerName]=u.token),g[o.HeaderNames.ConnectionId]=l,v!==void 0&&v!==""&&(!p||p.search(s.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(f[s.QueryParameterNames.CustomVoiceDeploymentId]=v),c.avatarEnabled&&(!p||p.search(s.QueryParameterNames.EnableAvatar)===-1)&&(f[s.QueryParameterNames.EnableAvatar]="true"),p||(p=S+this.synthesisUri),c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const y=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,f,g,new n.WebsocketMessageFormatter,t.ProxyInfo.fromParameters(c.parameters),y,l)}};return vo.SpeechSynthesisConnectionFactory=a,vo}var Wf;function e_(){if(Wf)return ho;Wf=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.AvatarSynthesizer=void 0;const t=SC(),e=k(),r=b(),n=wr,o=E(),s=O,a=Nd();let i=class extends o.Synthesizer{constructor(u,l){super(u),s.Contracts.throwIfNullOrUndefined(l,"avatarConfig"),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.privAvatarConfig=l,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(o.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){s.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const l=new r.Deferred;u.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,r.EventType.Debug)),u.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),l.resolve())},u.onicecandidate=m=>{m.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+m.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),l.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),l.resolve())},2e3);const p=await u.createOffer();await u.setLocalDescription(p),await l.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(o.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const d=await this.speak("",!1);if(d.reason!==o.ResultReason.SynthesizingAudioCompleted)return new o.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(o.PropertyId.TalkingAvatarService_WebRTC_SDP)),v=new RTCSessionDescription(JSON.parse(h));return await u.setRemoteDescription(v),new o.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(u){const l=await this.speak(u,!1);return new o.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async speakSsmlAsync(u){const l=await this.speak(u,!0);return new o.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,l,p){return new e.AvatarSynthesisAdapter(u,l,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,l){}createSynthesizerConfig(u){const l=super.createSynthesizerConfig(u);return l.avatarEnabled=!0,l}async speak(u,l){const p=r.createNoDashGuid(),d=new r.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,u,l,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return ho.AvatarSynthesizer=i,ho}var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.AvatarVideoFormat=Fn.Coordinate=void 0;class t_{constructor(e,r){this.x=e,this.y=r}}Fn.Coordinate=t_;class r_{constructor(e="H264",r=2e6,n=1920,o=1080){this.codec=e,this.bitrate=r,this.width=n,this.height=o}setCropRange(e,r){this.cropRange={bottomRight:r,topLeft:e}}}Fn.AvatarVideoFormat=r_;var fo={},Vf;function n_(){if(Vf)return fo;Vf=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.AvatarWebRTCConnectionResult=void 0;const t=E();let e=class extends t.SynthesisResult{constructor(n,o,s,a,i){super(o,s,a,i),this.privSDPAnswer=n}get SDPAnswer(){return this.privSDPAnswer}};return fo.AvatarWebRTCConnectionResult=e,fo}var go={},Hf;function i_(){if(Hf)return go;Hf=1,Object.defineProperty(go,"__esModule",{value:!0}),go.Diagnostics=void 0;const t=me(),e=b();let r=class{static SetLoggingLevel(o){this.privListener=new t.ConsoleLoggingListener(o),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(o){if(typeof window>"u")this.privListener&&(this.privListener.logPath=o);else throw new Error("File system logging not available in browser.")}};return go.Diagnostics=r,r.privListener=void 0,go}var Kf;function E(){return Kf||(Kf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=LS();Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return e.AudioConfig}});var r=Er;Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=OS();Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var o=Ce;Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return o.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return o.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return o.PushAudioOutputStream}});var s=xS;Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var a=Uc;Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var i=$c;Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return i.PushAudioOutputStreamCallback}});var c=Wc;Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var u=Vc;Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var l=DT();Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var p=BS;Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=zT();Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=Hc;Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var v=jT();Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return v.SpeechRecognitionResult}});var m=LT();Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return m.IntentRecognitionResult}});var S=Bn;Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return S.LanguageUnderstandingModel}});var f=xT();Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return f.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return f.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return f.MeetingTranscriptionEventArgs}});var g=BT();Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return g.SpeechRecognitionCanceledEventArgs}});var y=FT();Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return y.TranslationRecognitionEventArgs}});var C=qT();Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var P=US();Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return P.TranslationRecognitionResult}});var R=Kc;Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return R.TranslationSynthesisResult}});var T=$S;Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return T.ResultReason}});var w=$T();Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return w.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return w.SpeechConfigImpl}});var B=WT();Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return B.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return B.SpeechTranslationConfigImpl}});var D=VS();Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return D.PropertyCollection}});var ue=Jc;Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return ue.PropertyId}});var W=VT();Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return W.Recognizer}});var ie=HT();Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return ie.SpeechRecognizer}});var Ct=KT();Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return Ct.IntentRecognizer}});var cn=JS;Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return cn.VoiceProfileType}});var Pt=JT();Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return Pt.TranslationRecognizer}});var Kt=GT();Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return Kt.Translations}});var _=YS;Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return _.NoMatchReason}});var M=QT();Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return M.NoMatchDetails}});var N=Gc;Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return N.TranslationRecognitionCanceledEventArgs}});var K=YT();Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return K.IntentRecognitionCanceledEventArgs}});var Q=Us;Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return Q.CancellationDetailsBase}});var un=e0();Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return un.CancellationDetails}});var At=tC;Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return At.CancellationErrorCode}});var Xn=t0();Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return Xn.ConnectionEventArgs}});var kt=r0();Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return kt.ServiceEventArgs}});var ln=QS();Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return ln.Connection}});var OC=Qc;Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return OC.PhraseListGrammar}});var DC=bd();Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return DC.DialogServiceConfig}});var zC=n0();Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return zC.BotFrameworkConfig}});var NC=i0();Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return NC.CustomCommandsConfig}});var jC=s0();Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return jC.DialogServiceConnector}});var LC=Xc;Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return LC.ActivityReceivedEventArgs}});var xC=Yc;Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return xC.TurnStatusReceivedEventArgs}});var BC=rC;Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return BC.ServicePropertyChannel}});var FC=nC;Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return FC.ProfanityOption}});var qC=l0();Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return qC.BaseAudioPlayer}});var UC=eu;Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return UC.ConnectionMessageEventArgs}});var $C=GS();Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return $C.ConnectionMessage}});var WC=tu;Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return WC.VoiceProfile}});var Gd=h0();Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return Gd.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return Gd.VoiceProfileEnrollmentCancellationDetails}});var Qd=v0();Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return Qd.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return Qd.VoiceProfileCancellationDetails}});var VC=f0();Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return VC.VoiceProfilePhraseResult}});var HC=g0();Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return HC.VoiceProfileClient}});var KC=m0();Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return KC.SpeakerRecognizer}});var JC=y0();Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return JC.SpeakerIdentificationModel}});var GC=S0();Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return GC.SpeakerVerificationModel}});var QC=C0();Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return QC.AutoDetectSourceLanguageConfig}});var XC=ru;Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return XC.AutoDetectSourceLanguageResult}});var YC=nu;Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return YC.SourceLanguageConfig}});var bu=R0();Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return bu.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return bu.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return bu.SpeakerRecognitionCancellationDetails}});var qe=zd();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return qe.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return qe.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return qe.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return qe.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return qe.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return qe.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return qe.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return qe.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return qe.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return qe.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return qe.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return qe.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return qe.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return qe.User}});var ZC=Nd();Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return ZC.Synthesizer}});var eP=Td;Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return eP.SpeechSynthesisOutputFormat}});var tP=x0();Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return tP.SpeechSynthesizer}});var rP=ou;Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return rP.SynthesisResult}});var nP=F0();Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return nP.SpeechSynthesisResult}});var iP=su;Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return iP.SpeechSynthesisEventArgs}});var oP=au;Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return oP.SpeechSynthesisWordBoundaryEventArgs}});var sP=cu;Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return sP.SpeechSynthesisBookmarkEventArgs}});var aP=uu;Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return aP.SpeechSynthesisVisemeEventArgs}});var cP=dC;Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return cP.SpeechSynthesisBoundaryType}});var uP=V0();Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return uP.SynthesisVoicesResult}});var lP=hC;Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return lP.VoiceInfo}});var pP=lu;Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return pP.SpeakerAudioDestination}});var dP=G0();Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return dP.ConversationTranscriptionCanceledEventArgs}});var hP=Q0();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return hP.MeetingTranscriptionCanceledEventArgs}});var vP=vC;Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return vP.PronunciationAssessmentGradingSystem}});var fP=fC;Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return fP.PronunciationAssessmentGranularity}});var gP=X0();Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return gP.PronunciationAssessmentConfig}});var mP=Y0();Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return mP.PronunciationAssessmentResult}});var yP=Od;Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return yP.LanguageIdMode}});var SP=Z0();Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return SP.AvatarConfig}});var CP=yC;Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return CP.AvatarEventArgs}});var PP=e_();Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return PP.AvatarSynthesizer}});var Xd=Fn;Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return Xd.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return Xd.Coordinate}});var RP=n_();Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return RP.AvatarWebRTCConnectionResult}});var EP=i_();Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return EP.Diagnostics}});var wP=wd;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return wP.LogLevel}})}(vl)),vl}var Jf;function o_(){if(Jf)return vi;Jf=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.ProxyInfo=void 0;const t=E();let e=class CC{constructor(n,o,s,a){this.privProxyHostName=n,this.privProxyPort=o,this.privProxyUserName=s,this.privProxyPassword=a}static fromParameters(n){return new CC(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(n){return this.fromParameters(n.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return vi.ProxyInfo=e,vi}var PC={};const s_=new Set(["json","buffer","string"]);var a_=t=>(...e)=>{const r=new Set;let n,o,s,a="";return e.forEach(i=>{if(typeof i=="string")if(i.toUpperCase()===i)if(n){const c=`Can't set method to ${i}, already set to ${n}.`;throw new Error(c)}else n=i;else if(i.startsWith("http:")||i.startsWith("https:"))a=i;else if(s_.has(i))o=i;else throw new Error(`Unknown encoding, ${i}`);else if(typeof i=="number")r.add(i);else if(typeof i=="object")if(Array.isArray(i)||i instanceof Set)i.forEach(c=>r.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=i}else throw new Error(`Unknown type: ${typeof i}`)}),n||(n="GET"),r.size===0&&r.add(200),t(r,n,o,s,a)};const c_=a_;class jd extends Error{constructor(e,...r){super(...r),Error.captureStackTrace&&Error.captureStackTrace(this,jd),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let n;Object.defineProperty(this,"responseBody",{get:()=>(n||(n=this.arrayBuffer()),n)}),this.headers={};for(const[s,a]of e.headers.entries())this.headers[s.toLowerCase()]=a}}const u_=(t,e,r,n,o)=>async(s,a,i={})=>{s=o+(s||"");let c=new URL(s);if(n||(n={}),c.username&&(n.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),n["Content-Type"]="application/json";else throw new Error("Unknown body type.");i=new Headers({...n||{},...i});const u=await fetch(c,{method:e,headers:i,body:a});if(u.statusCode=u.status,!t.has(u.status))throw new jd(u);return r==="json"?u.json():r==="buffer"?u.arrayBuffer():r==="string"?u.text():u};var l_=c_(u_);(function(t){var e=F&&F.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const r=e(l_),n=b();var o;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(o=t.RestRequestType||(t.RestRequestType={}));class s{constructor(i){if(!i)throw new n.ArgumentNullError("configParams");this.privHeaders=i.headers,this.privIgnoreCache=i.ignoreCache}static extractHeaderValue(i,c){let u="";try{const l=c.trim().split(/[\r\n]+/),p={};l.forEach(d=>{const h=d.split(": "),v=h.shift().toLowerCase(),m=h.join(": ");p[v]=m}),u=p[i.toLowerCase()]}catch{}return u}set options(i){this.privHeaders=i.headers,this.privIgnoreCache=i.ignoreCache}setHeaders(i,c){this.privHeaders[i]=c}request(i,c,u={},l=null){const p=new n.Deferred,d=i===o.File?"POST":i,h=(m,S={})=>{const f=m;return{data:JSON.stringify(S),headers:JSON.stringify(m.headers),json:S,ok:m.statusCode>=200&&m.statusCode<300,status:m.statusCode,statusText:S.error?S.error.message:f.statusText?f.statusText:f.statusMessage}},v=m=>{const S=r.default(c,d,this.privHeaders,200,201,202,204,400,401,402,403,404),f=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;S(f,m).then(async g=>{if(i===o.Delete||g.statusCode===204)p.resolve(h(g));else try{const y=await g.json();p.resolve(h(g,y))}catch{p.resolve(h(g))}}).catch(g=>{p.reject(g)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),i===o.Post&&l&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),v(l),p.promise}queryParams(i={}){return Object.keys(i).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(i[c])).join("&")}}t.RestMessageAdapter=s})(PC);var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.RestConfigBase=void 0;class vr{static get requestOptions(){return vr.privDefaultRequestOptions}static get configParams(){return vr.privDefaultParams}static get restErrors(){return vr.privRestErrors}}Ws.RestConfigBase=vr;vr.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};vr.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};vr.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var Gf;function me(){return Gf||(Gf=1,function(t){var e=F&&F.__createBinding||(Object.create?function(n,o,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return o[s]}})}:function(n,o,s,a){a===void 0&&(a=s),n[a]=o[s]}),r=F&&F.__exportStar||function(n,o){for(var s in n)s!=="default"&&!o.hasOwnProperty(s)&&e(o,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(xc,t),r(bS,t),r(aT(),t),r(cT(),t),r(Bc,t),r(Fc,t),r(Bs,t),r(qc,t),r(o_(),t),r(PC,t),r(Ws,t)}(pl)),pl}var Qf;function p_(){if(Qf)return pi;Qf=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.IntentConnectionFactory=void 0;const t=me(),e=E(),r=St(),n=k(),o=ge;let s=class extends r.ConnectionFactoryBase{create(i,c,u){let l=i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const v=i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_IntentRegion),m=r.ConnectionFactoryBase.getHostSuffix(v);l=i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+v+".sr.speech"+m)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:i.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(i,p,l);const d={};c.token!==void 0&&c.token!==""&&(d[c.headerName]=c.token),d[o.HeaderNames.ConnectionId]=u,i.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,l);const h=i.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(l,p,d,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(i),h,u)}getSpeechRegionFromIntentRegion(i){switch(i){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return i}}};return pi.IntentConnectionFactory=s,pi}var xr={},Xf;function d_(){if(Xf)return xr;Xf=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.VoiceProfileConnectionFactory=xr.SpeakerRecognitionConnectionFactory=void 0;const t=me(),e=E(),r=St(),n=k(),o=ge;class s extends r.ConnectionFactoryBase{create(u,l,p,d){let h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const f=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region),g=r.ConnectionFactoryBase.getHostSuffix(f),y=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`wss://${f}.spr-frontend.speech${g}`),C=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${y}/speaker/ws/${this.scenarioToPath(C)}/${p}`}const v={format:"simple",language:u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,v,h);const m={};l.token!==void 0&&l.token!==""&&(m[l.headerName]=l.token),m[o.HeaderNames.ConnectionId]=d,m[o.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,h);const S=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(h,v,m,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),S,d)}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends s{create(u,l,p){return super.create(u,l,"recognition",p)}};xr.SpeakerRecognitionConnectionFactory=a;class i extends s{create(u,l,p){return super.create(u,l,"profile",p)}}return xr.VoiceProfileConnectionFactory=i,xr}var pu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const e=b();class r extends e.PlatformEvent{constructor(l,p,d,h=e.EventType.Info){super(l,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=r;class n extends r{constructor(l,p,d,h){super("RecognitionTriggeredEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.RecognitionTriggeredEvent=n;class o extends r{constructor(l,p,d,h){super("ListeningStartedEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.ListeningStartedEvent=o;class s extends r{constructor(l,p,d){super("ConnectingToServiceEvent",l,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}t.ConnectingToServiceEvent=s;class a extends r{constructor(l,p,d,h,v){super("RecognitionStartedEvent",l,v),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}t.RecognitionStartedEvent=a;var i;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(i=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));class c extends r{constructor(l,p,d,h,v,m,S,f){super("RecognitionEndedEvent",l,v,S===i.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=S,this.privError=f,this.privServiceTag=m}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}t.RecognitionEndedEvent=c})(pu);var mo={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.SpeechConnectionMessage=void 0;const Sl=b(),Dt=ge;class Ld extends Sl.ConnectionMessage{constructor(e,r,n,o,s,a,i,c){if(!r)throw new Sl.ArgumentNullError("path");if(!n)throw new Sl.ArgumentNullError("requestId");const u={};if(u[Dt.HeaderNames.Path]=r,u[Dt.HeaderNames.RequestId]=n,u[Dt.HeaderNames.RequestTimestamp]=new Date().toISOString(),o&&(u[Dt.HeaderNames.ContentType]=o),a&&(u[Dt.HeaderNames.RequestStreamId]=a),i)for(const l in i)l&&(u[l]=i[l]);c?super(e,s,u,c):super(e,s,u),this.privPath=r,this.privRequestId=n,this.privContentType=o,this.privStreamId=a,this.privAdditionalHeaders=i}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let r=null,n=null,o=null,s=null;const a={};if(e.headers)for(const i in e.headers)i&&(i.toLowerCase()===Dt.HeaderNames.Path.toLowerCase()?r=e.headers[i]:i.toLowerCase()===Dt.HeaderNames.RequestId.toLowerCase()?n=e.headers[i]:i.toLowerCase()===Dt.HeaderNames.ContentType.toLowerCase()?o=e.headers[i]:i.toLowerCase()===Dt.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[i]:a[i]=e.headers[i]);return new Ld(e.messageType,r,n,o,e.body,s,a,e.id)}}Ht.SpeechConnectionMessage=Ld;var Yf;function h_(){if(Yf)return mo;Yf=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.ServiceRecognizerBase=void 0;const t=me(),e=b(),r=E(),n=k(),o=Ht;let s=class Yo{constructor(i,c,u,l,p){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!i)throw new e.ArgumentNullError("authentication");if(!c)throw new e.ArgumentNullError("connectionFactory");if(!u)throw new e.ArgumentNullError("audioSource");if(!l)throw new e.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=l.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=i,this.privConnectionFactory=c,this.privAudioSource=u,this.privRecognizerConfig=l,this.privIsDisposed=!1,this.privRecognizer=p,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=e.Timeout.setTimeout:typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const v=h;(v.statusCode===1003||v.statusCode===1007||v.statusCode===1002||v.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,v.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${v.reason} websocket error code: ${v.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=e.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const i=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(i!==void 0){const c=i.split(","),u=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),l=u!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:l},output:{interimResults:{mode:"Always"}},targetLanguages:c}),u!==void 0){const p={};for(const d of c)p[d]=u;this.privSpeechContext.setSection("synthesis",{defaultVoices:p})}}}setSpeechSegmentationTimeoutJson(){const i=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(i!==void 0){const c=this.recognitionMode===n.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===n.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",u=parseInt(i,10),l=this.privSpeechContext.getSection("phraseDetection");l.mode=c,l[c]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:u}},this.privSpeechContext.setSection("phraseDetection",l)}}setLanguageIdJson(){const i=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const u=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let l;this.privRecognizerConfig.languageIdMode==="Continuous"?l="DetectContinuous":l="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:u,mode:l,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const p=this.privRecognizerConfig.sourceLanguageModels;p!==void 0&&(i.customModels=p,i.onInterim={action:"None"},i.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(i.onInterim={action:"Translate"},i.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",i)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(i){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,i)}set voiceProfileType(i){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,i)}set authentication(i){this.privAuthentication=i}isDisposed(){return this.privIsDisposed}async dispose(i){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(i)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(i,c,u){if(this.recognizeOverride!==void 0){await this.recognizeOverride(i,c,u);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=i,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=c,this.privErrorCallback=u,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const l=this.connectImpl();let p;try{const v=await this.audioSource.attach(this.privRequestSession.audioNodeId),m=await this.audioSource.format,S=await this.audioSource.deviceInfo;this.privIsLiveAudio=S.type&&S.type===n.type.Microphones,p=new t.ReplayableAudioNode(v,m.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:S}}catch(v){throw await this.privRequestSession.onStopRecognizing(),v}try{await l}catch(v){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,v);return}const d=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(p).catch(async v=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,v)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(i,c){this.connectImpl().then(()=>{try{i&&i()}catch(u){c&&c(u)}},u=>{try{c&&c(u)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(i){}async sendNetworkMessage(i,c){const u=typeof c=="string"?e.MessageType.Text:e.MessageType.Binary,l=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new o.SpeechConnectionMessage(u,i,this.privRequestSession.requestId,l,c))}set activityTemplate(i){this.privActivityTemplate=i}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(i){this.privExpectContentAssessmentResponse=i}async sendTelemetryData(){const i=this.privRequestSession.getTelemetry();if(Yo.telemetryDataEnabled!==!0||this.privIsDisposed||i===null)return;if(Yo.telemetryData)try{Yo.telemetryData(i)}catch{}await(await this.fetchConnection()).send(new o.SpeechConnectionMessage(e.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",i))}async cancelRecognitionLocal(i,c,u){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i,c,u))}async receiveMessage(){try{if(this.privIsDisposed)return;let i=await this.fetchConnection();const c=await i.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!c)return this.receiveMessage();this.privServiceHasSentMessage=!0;const u=o.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const l=n.SpeechDetected.fromJSON(u.textBody),p=new r.RecognitionEventArgs(l.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p);break;case"speech.enddetected":let d;u.textBody.length>0?d=u.textBody:d="{ Offset: 0 }";const h=n.SpeechDetected.fromJSON(d),v=new r.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,v);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const m=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,m);return}else i=await this.fetchConnection(),await this.sendPrePayloadJSON(i);break;default:await this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const c=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(c)}sendSpeechContext(i,c){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const u=this.speechContext.toJSON();if(c&&this.privRequestSession.onSpeechContext(),u)return i.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",u))}noOp(){}async sendPrePayloadJSON(i,c=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(i);await this.sendSpeechContext(i,c),await this.sendWaveHeader(i)}async sendWaveHeader(i){const c=await this.audioSource.format;return i.send(new o.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",c.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(i=>i.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(i,c,u){if(c.onSpeechContext(),Yo.telemetryDataEnabled!==!0){const p={context:{system:JSON.parse(u).context.system}};u=JSON.stringify(p)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const l=JSON.parse(u);l.context.DisableReferenceChannel="True",l.context.MicSpec="1_0_0",u=JSON.stringify(l)}if(u)return i.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speech.config",c.requestId,"application/json",u))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(i=>i.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(i){const c=await this.audioSource.format;this.privAverageBytesPerMs=c.avgBytesPerSec/1e3;let u=Date.now();const l=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),p=c.avgBytesPerSec/1e3*parseInt(l,10),d=this.privRequestSession.recogNumber,h=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d){const v=await this.fetchConnection(),m=await i.read();if(this.privRequestSession.isSpeechEnded)return;let S,f;if(!m||m.isEnd?(S=null,f=0):(S=m.buffer,this.privRequestSession.onAudioSent(S.byteLength),p>=this.privRequestSession.bytesSent?f=0:f=Math.max(0,u-Date.now())),f!==0&&await this.delay(f),S!==null&&(u=Date.now()+S.byteLength*1e3/(c.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d)if(v.send(new o.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,S)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),m!=null&&m.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return h()}};return h()}async retryableConnect(){let i=!1;this.privAuthFetchEventId=e.createNoDashGuid();const c=this.privRequestSession.sessionId;this.privConnectionId=c!==void 0?c:e.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let u=0,l="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const d=await(i?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const h=this.privConnectionFactory.create(this.privRecognizerConfig,d,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(h.events),h.events.attach(m=>{this.connectionEvents.onEvent(m)});const v=await h.open();if(v.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(v.statusCode),Promise.resolve(h);v.statusCode===1006&&(i=!0),u=v.statusCode,l=v.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(u,l),Promise.reject(`Unable to contact server. StatusCode: ${u}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${l}`)}delay(i){return new Promise(c=>this.privSetTimeout(c,i))}writeBufferToConsole(i){let c="Buffer Size: ";if(i===null)c+="null";else{const u=new Uint8Array(i);c+=`${i.byteLength}\r
`;for(let l=0;l<i.byteLength;l++)c+=u[l].toString(16).padStart(2,"0")+" ",(l+1)%16===0&&(console.info(c),c="")}console.info(c)}async sendFinalAudio(){await(await this.fetchConnection()).send(new o.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const i=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(i):(await this.sendSpeechServiceConfig(i,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(i,!1),i)}};return mo.ServiceRecognizerBase=s,s.telemetryDataEnabled=!0,mo}var yo={},Zf;function v_(){if(Zf)return yo;Zf=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.ConversationServiceRecognizer=void 0;const t=E(),e=k();let r=class extends e.ServiceRecognizerBase{constructor(o,s,a,i,c){super(o,s,a,i,c),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(o){}handleRecognizedCallback(o,s,a){}handleRecognizingCallback(o,s,a){}async processSpeechMessages(o){let s=!1;switch(o.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(o.textBody),s=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(o.textBody),s=!0;break}return s}cancelRecognition(o,s,a,i,c){}async handleSpeechPhrase(o){const s=e.SimpleSpeechPhrase.fromJSON(o),a=e.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus);let i;const c=new t.PropertyCollection;c.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o);const u=s.Offset+this.privRequestSession.currentTurnAudioOffset;let l=u;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),t.ResultReason.Canceled===a){const p=e.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),d=e.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);await this.cancelRecognitionLocal(p,d,e.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&a===t.ResultReason.NoMatch&&s.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])i=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,s.DisplayText,s.Duration,u,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,o,c);else{const p=e.DetailedSpeechPhrase.fromJSON(o),d=p.Offset+this.privRequestSession.currentTurnAudioOffset,h=p.getJsonWithCorrectedOffsets(d);i=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,p.Text,p.Duration,d,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,h,c),l=i.offset}this.handleRecognizedCallback(i,l,this.privRequestSession.sessionId)}}handleSpeechHypothesis(o){const s=e.SpeechHypothesis.fromJSON(o),a=s.Offset+this.privRequestSession.currentTurnAudioOffset,i=new t.PropertyCollection;i.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o);const c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,o,i);this.privRequestSession.onHypothesis(a),this.handleRecognizingCallback(c,s.Duration,this.privRequestSession.sessionId)}};return yo.ConversationServiceRecognizer=r,yo}var Cl={},eg;function f_(){return eg||(eg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;const e=E(),r=k();var n;(function(s){s[s.Interactive=0]="Interactive",s[s.Conversation=1]="Conversation",s[s.Dictation=2]="Dictation"})(n=t.RecognitionMode||(t.RecognitionMode={})),function(s){s[s.Simple=0]="Simple",s[s.Detailed=1]="Detailed"}(t.SpeechResultFormat||(t.SpeechResultFormat={}));class o{constructor(a,i){this.privSpeechServiceConfig=a||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=i,this.privMaxRetryCount=parseInt(i.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=i.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===n.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const a=[];let i=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const u=c+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),l=this.parameters.getProperty(u,void 0);l!==void 0?(a.push({language:c,endpoint:l}),i=!0):a.push({language:c,endpoint:""})}return i?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}t.RecognizerConfig=o}(Cl)),Cl}var RC={};Object.defineProperty(RC,"__esModule",{value:!0});var du={};Object.defineProperty(du,"__esModule",{value:!0});du.WebsocketMessageFormatter=void 0;const et=b(),tg=`\r
`;class g_{toConnectionMessage(e){const r=new et.Deferred;try{if(e.messageType===et.MessageType.Text){const n=e.textContent;let o={},s=null;if(n){const a=n.split(`\r
\r
`);a&&a.length>0&&(o=this.parseHeaders(a[0]),a.length>1&&(s=a[1]))}r.resolve(new et.ConnectionMessage(e.messageType,s,o,e.id))}else if(e.messageType===et.MessageType.Binary){const n=e.binaryContent;let o={},s=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(n),i=a.getInt16(0);if(n.byteLength<i+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<i;u++)c+=String.fromCharCode(a.getInt8(u+2));o=this.parseHeaders(c),n.byteLength>i+2&&(s=n.slice(2+i)),r.resolve(new et.ConnectionMessage(e.messageType,s,o,e.id))}}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){const r=new et.Deferred;try{if(e.messageType===et.MessageType.Text){const n=`${this.makeHeaders(e)}${tg}${e.textBody?e.textBody:""}`;r.resolve(new et.RawWebsocketMessage(et.MessageType.Text,n,e.id))}else if(e.messageType===et.MessageType.Binary){const n=this.makeHeaders(e),o=e.binaryBody,s=this.stringToArrayBuffer(n),a=new Int8Array(s),i=a.byteLength,c=new Int8Array(2+i+(o?o.byteLength:0));if(c[0]=i>>8&255,c[1]=i&255,c.set(a,2),o){const l=new Int8Array(o);c.set(l,2+i)}const u=c.buffer;r.resolve(new et.RawWebsocketMessage(et.MessageType.Binary,u,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}makeHeaders(e){let r="";if(e.headers)for(const n in e.headers)n&&(r+=`${n}: ${e.headers[n]}${tg}`);return r}parseHeaders(e){const r={};if(e){const n=e.match(/[^\r\n]+/g);if(r){for(const o of n)if(o){const s=o.indexOf(":"),a=s>0?o.substr(0,s).trim().toLowerCase():o,i=s>0&&o.length>s+1?o.substr(s+1).trim():"";r[a]=i}}}return r}stringToArrayBuffer(e){const r=new ArrayBuffer(e.length),n=new DataView(r);for(let o=0;o<e.length;o++)n.setUint8(o,e.charCodeAt(o));return r}}du.WebsocketMessageFormatter=g_;var So={},rg;function m_(){if(rg)return So;rg=1,Object.defineProperty(So,"__esModule",{value:!0}),So.SpeechConnectionFactory=void 0;const t=me(),e=k(),r=E(),n=St(),o=k(),s=ge,a=yt;let i=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(u,l,p){let d=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),v=n.ConnectionFactoryBase.getHostSuffix(h),m=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),S={},f=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(S[a.QueryParameterNames.CustomSpeechDeploymentId]=f):g&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(S[a.QueryParameterNames.Language]=g),(!d||d.search(a.QueryParameterNames.Format)===-1)&&(S[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(S[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,S,d),!d)switch(u.recognitionMode){case o.RecognitionMode.Conversation:u.parameters.getProperty(e.ForceDictationPropertyName,"false")==="true"?d=m+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${m}${this.universalUri}${u.recognitionEndpointVersion}`:d=m+this.conversationRelativeUri;break;case o.RecognitionMode.Dictation:d=m+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${m}${this.universalUri}${u.recognitionEndpointVersion}`:d=m+this.interactiveRelativeUri;break}const y={};l.token!==void 0&&l.token!==""&&(y[l.headerName]=l.token),y[s.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,S,y,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),R=P.uri;return u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,R),P}};return So.SpeechConnectionFactory=i,So}var Co={},ng;function y_(){if(ng)return Co;ng=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.ConversationTranscriberConnectionFactory=void 0;const t=me(),e=E(),r=k(),n=St(),o=k(),s=ge,a=yt;let i=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(u,l,p){let d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),v=n.ConnectionFactoryBase.getHostSuffix(h),m=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),S={},f=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);f?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(S[a.QueryParameterNames.CustomSpeechDeploymentId]=f):g&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(S[a.QueryParameterNames.Language]=g),u.autoDetectSourceLanguages!==void 0&&(S[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,S,d),d||(d=`${m}${this.universalUri}`);const y={};l.token!==void 0&&l.token!==""&&(y[l.headerName]=l.token),y[s.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,S,y,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),R=P.uri;return u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,R),P}setV2UrlParams(u,l,p){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((v,m)=>{this.setUrlParameter(m,v,u,l,p)});const h=JSON.parse(u.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(v=>{l[v]=h[v]})}};return Co.ConversationTranscriberConnectionFactory=i,Co}var Po={},ig;function S_(){if(ig)return Po;ig=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.TranscriberConnectionFactory=void 0;const t=me(),e=E(),r=St(),n=k(),o=ge,s=yt;let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),h=r.ConnectionFactoryBase.getHostSuffix(d),v="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,m=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,v),S={};this.setQueryParams(S,c,p),p||(p=m);const f={};u.token!==void 0&&u.token!==""&&(f[u.headerName]=u.token),f[o.HeaderNames.ConnectionId]=l,c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const g=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,S,f,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(c),g,l)}setQueryParams(c,u,l){const p=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(s.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[s.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(s.QueryParameterNames.Language in c)&&(c[s.QueryParameterNames.Language]=d);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",v=u.parameters.getProperty(n.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(h||v)&&(c[s.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,c,l)}};return Po.TranscriberConnectionFactory=a,Po}var Ro={},og;function C_(){if(og)return Ro;og=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.TranslationConnectionFactory=void 0;const t=me(),e=$s,r=E(),n=St(),o=k(),s=ge,a=yt;let i=class extends n.ConnectionFactoryBase{create(u,l,p){const d=this.getEndpointUrl(u),h={};u.autoDetectSourceLanguages!==void 0&&(h[a.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(h,u,d);const v={};l.token!==void 0&&l.token!==""&&(v[l.headerName]=l.token),v[s.HeaderNames.ConnectionId]=p,u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,d);const m=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(d,h,v,new o.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),m,p)}getEndpointUrl(u,l){const p=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),d=n.ConnectionFactoryBase.getHostSuffix(p);let h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h||(u.autoDetectSourceLanguages!==void 0?h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+"/speech/universal/v2":h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"),l===!0?h:e.StringUtils.formatString(h,{region:p})}setQueryParams(u,l,p){u.from=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=l.recognitionMode===o.RecognitionMode.Interactive?"interactive":l.recognitionMode===o.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(l,u,p),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,l,u,p);const d=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(u.voice=d,u.features="texttospeech")}};return Ro.TranslationConnectionFactory=i,Ro}var Eo={},sg;function P_(){if(sg)return Eo;sg=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.EnumTranslation=void 0;const t=E(),e=k();let r=class{static implTranslateRecognitionResult(o,s=!1){let a=t.ResultReason.Canceled;switch(o){case e.RecognitionStatus.Success:a=t.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:a=s?t.ResultReason.RecognizedSpeech:t.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:a=t.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:a=t.ResultReason.Canceled;break}return a}static implTranslateCancelResult(o){let s=t.CancellationReason.EndOfStream;switch(o){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:s=t.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:s=t.CancellationReason.Error;break}return s}static implTranslateCancelErrorCode(o){let s=t.CancellationErrorCode.NoError;switch(o){case e.RecognitionStatus.Error:s=t.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:s=t.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:s=t.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:s=t.CancellationErrorCode.Forbidden;break;default:s=t.CancellationErrorCode.NoError;break}return s}static implTranslateErrorDetails(o){let s="The speech service encountered an internal error and could not continue.";switch(o){case t.CancellationErrorCode.Forbidden:s="The recognizer is using a free subscription that ran out of quota.";break;case t.CancellationErrorCode.BadRequestParameters:s="Invalid parameter or unsupported audio format in the request.";break;case t.CancellationErrorCode.TooManyRequests:s="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return s}};return Eo.EnumTranslation=r,Eo}var EC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(t.SynthesisStatus||(t.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(t.RecognitionStatus||(t.RecognitionStatus={}))})(EC);var wo={},ag;function R_(){if(ag)return wo;ag=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.TranslationSynthesisEnd=void 0;const t=k();let e=class wC{constructor(n){this.privSynthesisEnd=JSON.parse(n),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(n){return new wC(n)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return wo.TranslationSynthesisEnd=e,wo}var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.TranslationHypothesis=void 0;const E_=O,w_=Nc;class Za{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=w_.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new Za(JSON.parse(e))}static fromTranslationResponse(e){E_.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const r=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,r.Translation=e,new Za(r)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return(e=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:e.Language}}hu.TranslationHypothesis=Za;var Io={},cg;function I_(){if(cg)return Io;cg=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.TranslationPhrase=void 0;const t=O,e=k(),r=Nc;let n=class wp{constructor(s){this.privTranslationPhrase=s,this.privTranslationPhrase.RecognitionStatus=e.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(s){return new wp(JSON.parse(s))}static fromTranslationResponse(s){t.Contracts.throwIfNullOrUndefined(s,"translationResponse");const a=s.SpeechPhrase;return s.SpeechPhrase=void 0,a.Translation=s,a.Text=a.DisplayText,new wp(a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Language}get Confidence(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return Io.TranslationPhrase=n,Io}var To={},ug;function T_(){if(ug)return To;ug=1,Object.defineProperty(To,"__esModule",{value:!0}),To.TranslationServiceRecognizer=void 0;const t=b(),e=E(),r=k();let n=class extends r.ConversationServiceRecognizer{constructor(s,a,i,c,u){super(s,a,i,c,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(l=>{l.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(s){const a=new e.PropertyCollection;let i=await this.processSpeechMessages(s);if(i)return!0;const c=async l=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),l.RecognitionStatus===r.RecognitionStatus.Success){const p=this.fireEventForResult(l,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=r.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),d=new e.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,l.Text,l.Duration,this.privRequestSession.currentTurnAudioOffset+l.Offset,l.Language,l.Confidence,void 0,s.textBody,a);if(p===e.ResultReason.Canceled){const h=r.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),v=r.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,v,r.EnumTranslation.implTranslateErrorDetails(v))}else{if(!(this.privRequestSession.isSpeechEnded&&p===e.ResultReason.NoMatch&&l.RecognitionStatus!==r.RecognitionStatus.InitialSilenceTimeout)){const h=new e.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0}},u=(l,p)=>{const d=this.fireEventForResult(l,p);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}i=!0};switch(s.messageType===t.MessageType.Text&&a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"translation.hypothesis":u(r.TranslationHypothesis.fromJSON(s.textBody),a);break;case"translation.response":const l=JSON.parse(s.textBody);if(l.SpeechPhrase)await c(r.TranslationPhrase.fromTranslationResponse(l));else{const d=JSON.parse(s.textBody);d.SpeechHypothesis&&u(r.TranslationHypothesis.fromTranslationResponse(d),a)}break;case"translation.phrase":await c(r.TranslationPhrase.fromJSON(s.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(s.binaryBody,this.privRequestSession.sessionId),i=!0;break;case"audio.end":case"translation.synthesis.end":const p=r.TranslationSynthesisEnd.fromJSON(s.textBody);switch(p.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new e.TranslationSynthesisResult(e.ResultReason.Canceled,void 0),h=new e.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new e.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,e.CancellationReason.Error,p.FailureReason,e.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}i=!0;break}return i}cancelRecognition(s,a,i,c,u){const l=new e.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const p=new e.TranslationRecognitionCanceledEventArgs(s,i,u,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.TranslationRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(s,a,i){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,i);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(s,a,i){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,i);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(s,a){let i;if(s.Translation.Translations!==void 0){i=new e.Translations;for(const v of s.Translation.Translations)i.set(v.Language,v.Text||v.DisplayText)}let c,u;s instanceof r.TranslationPhrase?(s.Translation&&s.Translation.TranslationStatus===t.TranslationStatus.Success?c=e.ResultReason.TranslatedSpeech:c=e.ResultReason.RecognizedSpeech,u=s.Confidence):c=e.ResultReason.TranslatingSpeech;const l=s.Language,p=s.Offset+this.privRequestSession.currentTurnAudioOffset,d=new e.TranslationRecognitionResult(i,this.privRequestSession.requestId,c,s.Text,s.Duration,p,l,u,s.Translation.FailureReason,JSON.stringify(s),a);return new e.TranslationRecognitionEventArgs(d,p,this.privRequestSession.sessionId)}sendSynthesisAudio(s,a){const i=s===void 0?e.ResultReason.SynthesizingAudioCompleted:e.ResultReason.SynthesizingAudio,c=new e.TranslationSynthesisResult(i,s),u=new e.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return To.TranslationServiceRecognizer=n,To}var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.SpeechDetected=void 0;class xd{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new xd(e)}get Offset(){return this.privSpeechStartDetected.Offset}}vu.SpeechDetected=xd;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.SpeechHypothesis=void 0;class Bd{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new Bd(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}fu.SpeechHypothesis=Bd;var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.SpeechKeyword=void 0;class Fd{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new Fd(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}gu.SpeechKeyword=Fd;var _o={},lg;function __(){if(lg)return _o;lg=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.SpeechServiceRecognizer=void 0;const t=E(),e=k();let r=class extends e.ServiceRecognizerBase{constructor(o,s,a,i,c){super(o,s,a,i,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(o){let s;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody);let i=!1;switch(o.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(o.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,o.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.SpeechRecognitionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}i=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(o.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),v=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,v,e.EnumTranslation.implTranslateErrorDetails(v))}else{if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,o.textBody,a);else{const v=e.DetailedSpeechPhrase.fromJSON(o.textBody),m=v.Offset+this.privRequestSession.currentTurnAudioOffset,S=v.getJsonWithCorrectedOffsets(m);s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,v.RecognitionStatus===e.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,m,v.Language,v.LanguageDetectionConfidence,void 0,void 0,S,a)}const h=new t.SpeechRecognitionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0;break}return i}cancelRecognition(o,s,a,i,c){const u=new t.PropertyCollection;if(u.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[i]),this.privSpeechRecognizer.canceled){const l=new t.SpeechRecognitionCanceledEventArgs(a,c,i,void 0,o);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new t.SpeechRecognitionResult(s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return _o.SpeechServiceRecognizer=r,_o}var Ao={},pg;function A_(){if(pg)return Ao;pg=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.ConversationTranscriptionServiceRecognizer=void 0;const t=E(),e=k();let r=class extends e.ServiceRecognizerBase{constructor(o,s,a,i,c){super(o,s,a,i,c),this.privConversationTranscriber=c,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const o=this.privSpeechContext.getSection("phraseDetection");o.mode="Conversation";const s={};s.mode="Anonymous",s.audioSessionId=this.privDiarizationSessionId,s.audioOffsetMs=0,o.speakerDiarization=s,this.privSpeechContext.setSection("phraseDetection",o)}}async processTypeSpecificMessages(o){let s;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody);let i=!1;switch(o.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(o.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,o.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.ConversationTranscriptionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch{}i=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(o.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),v=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,v,e.EnumTranslation.implTranslateErrorDetails(v))}else if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,o.textBody,a);else{const v=e.DetailedSpeechPhrase.fromJSON(o.textBody),m=v.Offset+this.privRequestSession.currentTurnAudioOffset,S=v.getJsonWithCorrectedOffsets(m);s=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,v.RecognitionStatus===e.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,m,v.Language,v.LanguageDetectionConfidence,p.SpeakerId,void 0,S,a)}const h=new t.ConversationTranscriptionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,h)}catch{}}i=!0;break}return i}cancelRecognition(o,s,a,i,c){if(new t.PropertyCollection().setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[i]),this.privConversationTranscriber.canceled){const l=new t.ConversationTranscriptionCanceledEventArgs(a,c,i,void 0,o);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,l)}catch{}}}};return Ao.ConversationTranscriptionServiceRecognizer=r,Ao}var ko={},dg;function k_(){if(dg)return ko;dg=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.TranscriptionServiceRecognizer=void 0;const t=b(),e=E(),r=k(),n=Ht;let o=class extends r.ConversationServiceRecognizer{constructor(a,i,c,u,l){super(a,i,c,u,l),this.privTranscriberRecognizer=l,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,i){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,i))}}async sendMeetingSpeechEventAsync(a,i){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,i))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,i,c){try{const u=new e.SpeechRecognitionEventArgs(a,i,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,i,c){try{const u=new e.SpeechRecognitionEventArgs(a,i,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,i,c,u,l){const p=new e.PropertyCollection;if(p.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new e.MeetingTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new e.ConversationTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new e.SpeechRecognitionResult(i,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const i=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(i,"start");await this.sendSpeechEvent(a,c)}else{const i=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(i,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,i){const c=JSON.stringify(i);if(c)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,i){const c={id:"meeting",name:i,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,i){const c={id:"meeting",name:i,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return ko.TranscriptionServiceRecognizer=o,ko}var bo={},hg;function b_(){if(hg)return bo;hg=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.DetailedSpeechPhrase=void 0;const t=k();let e=class IC{constructor(n){this.privDetailedSpeechPhrase=JSON.parse(n),this.privDetailedSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new IC(n)}getJsonWithCorrectedOffsets(n){if(this.privDetailedSpeechPhrase.NBest){let o;for(const s of this.privDetailedSpeechPhrase.NBest)if(s.Words&&s.Words[0]){o=s.Words[0].Offset;break}if(o&&o<n){const s=n-o;for(const a of this.privDetailedSpeechPhrase.NBest){if(a.Words)for(const i of a.Words)i.Offset+=s;if(a.DisplayWords)for(const i of a.DisplayWords)i.Offset+=s}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return bo.DetailedSpeechPhrase=e,bo}var Mo={},vg;function M_(){if(vg)return Mo;vg=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.SimpleSpeechPhrase=void 0;const t=k();let e=class TC{constructor(n){this.privSimpleSpeechPhrase=JSON.parse(n),this.privSimpleSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new TC(n)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return Mo.SimpleSpeechPhrase=e,Mo}var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.AddedLmIntent=void 0;class O_{constructor(e,r){this.modelImpl=e,this.intentName=r}}mu.AddedLmIntent=O_;var Oo={},fg;function D_(){if(fg)return Oo;fg=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.IntentServiceRecognizer=void 0;const t=b(),e=E(),r=k();let n=class extends r.ServiceRecognizerBase{constructor(s,a,i,c,u){super(s,a,i,c,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1}setIntents(s,a){this.privAddedLmIntents=s,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(s){let a,i,c=!1;const u=new e.PropertyCollection;switch(s.messageType===t.MessageType.Text&&u.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speech.hypothesis":const p=r.SpeechHypothesis.fromJSON(s.textBody);if(a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,e.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,s.textBody,u),this.privRequestSession.onHypothesis(a.offset),i=new e.IntentRecognitionEventArgs(a,p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,i)}catch{}c=!0;break;case"speech.phrase":const d=r.SimpleSpeechPhrase.fromJSON(s.textBody);a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,s.textBody,u),i=new e.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||e.ResultReason.NoMatch===i.result.reason?(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),h()):this.privPendingIntentArgs=i,c=!0;break;case"response":if(i=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,i===void 0){if(s.textBody==="")return;i=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const v=r.IntentResponse.fromJSON(s.textBody);if(v!==null&&v.topScoringIntent&&v.topScoringIntent.intent){let m=this.privAddedLmIntents[v.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(m=this.privUmbrellaIntent),m){const S=m===void 0||m.intentName===void 0?v.topScoringIntent.intent:m.intentName;let f=i.result.reason;S!==void 0&&(f=e.ResultReason.RecognizedIntent);const g=i.result.properties!==void 0?i.result.properties:new e.PropertyCollection;g.setProperty(e.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,s.textBody),i=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult(S,i.result.resultId,f,i.result.text,i.result.duration,i.result.offset,void 0,void 0,i.result.errorDetails,i.result.json,g),i.offset,i.sessionId)}}if(this.privRequestSession.onPhraseRecognized(i.offset+i.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,i)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(i.result)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,a,i,c,u){const l=new e.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const p=new e.IntentRecognitionCanceledEventArgs(i,u,c,void 0,void 0,s);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.IntentRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return Oo.IntentServiceRecognizer=n,Oo}var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.IntentResponse=void 0;class qd{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new qd(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}yu.IntentResponse=qd;var _C={};Object.defineProperty(_C,"__esModule",{value:!0});var Su={},Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.ServiceTelemetryListener=void 0;const zt=b(),gg=pu;class z_{constructor(e,r,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=r,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof gg.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof zt.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof zt.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof zt.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof zt.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof zt.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof gg.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof zt.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof zt.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof zt.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof zt.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const r={Metrics:e,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(r);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}Cu.ServiceTelemetryListener=z_;Object.defineProperty(Su,"__esModule",{value:!0});Su.RequestSession=void 0;const hn=b(),da=pu,N_=Cu;class j_{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=hn.createNoDashGuid(),this.privAudioNodeId=hn.createNoDashGuid(),this.privTurnDeferral=new hn.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new N_.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new da.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(e,r){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,r?await this.onComplete():this.onEvent(new da.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(e,r){this.privAuthFetchEventId=e,this.privSessionId=r,this.onEvent(new da.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(e){e&&await this.onComplete()}async onConnectionEstablishCompleted(e,r){if(e===200){this.onEvent(new da.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&await this.onComplete()}async onServiceTurnEndResponse(e){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=hn.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new hn.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),hn.Events.instance.onEvent(e)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}Su.RequestSession=j_;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.SpeechContext=void 0;class L_{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,r){this.privContext[e]=r}setPronunciationAssessmentParams(e,r,n=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),n&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),r&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:r},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}Pu.SpeechContext=L_;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.DynamicGrammarBuilder=void 0;class x_{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const r=[];this.privPhrases.forEach(n=>{r.push({Text:n})}),e.Groups=[{Type:"Generic",Items:r}]}return e}}Ru.DynamicGrammarBuilder=x_;var AC={};Object.defineProperty(AC,"__esModule",{value:!0});var Do={},Eu={},wu={},Ud={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class e{constructor(n){this.privActivityResponse=JSON.parse(n)}static fromJSON(n){return new e(n)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=e,function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}(t.MessageDataStreamType||(t.MessageDataStreamType={}))})(Ud);Object.defineProperty(wu,"__esModule",{value:!0});wu.DialogServiceTurnState=void 0;const B_=wr,F_=Ce,q_=Ud;class U_{constructor(e,r){this.privRequestId=r,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,r){return e.messageDataStreamType===q_.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=F_.AudioOutputStream.createPullStream(),this.privAudioStream.format=r!==void 0?r:B_.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}wu.DialogServiceTurnState=U_;Object.defineProperty(Eu,"__esModule",{value:!0});Eu.DialogServiceTurnStateManager=void 0;const mg=Re,$_=wu;class W_{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new mg.InvalidOperationError("Service error: There is already a turn with id:"+e);const r=new $_.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,r),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new mg.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const r=this.privTurnMap.get(e);return r.complete(),this.privTurnMap.delete(e),r}}Eu.DialogServiceTurnStateManager=W_;var yg;function V_(){if(yg)return Do;yg=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.DialogServiceAdapter=void 0;const t=me(),e=rn,r=b(),n=wr,o=E(),s=Eu,a=k(),i=Ud,c=Ht;let u=class extends a.ServiceRecognizerBase{constructor(p,d,h,v,m){super(p,d,h,v,m),this.privEvents=new r.EventSource,this.privDialogServiceConnector=m,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(S,f,g)=>this.listenOnce(S,f,g),this.postConnectImplOverride=S=>this.dialogConnectImpl(S),this.configConnectionOverride=S=>this.configConnection(S),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=h,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(S=>{S.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(p){const d=r.createGuid(),h=r.createNoDashGuid(),v={context:{interactionId:d},messagePayload:JSON.parse(p),version:.5},m=JSON.stringify(v);await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent",h,"application/json",m))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(p){const d=new o.PropertyCollection;p.messageType===r.MessageType.Text&&d.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,p.textBody);let h,v;switch(p.path.toLowerCase()){case"speech.phrase":const S=a.SimpleSpeechPhrase.fromJSON(p.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+S.Offset+S.Duration),S.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&S.RecognitionStatus!==a.RecognitionStatus.Error){const R=this.fireEventForResult(S,d);if(this.privLastResult=R.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,R)}catch{}}v=!0;break;case"speech.hypothesis":const f=a.SpeechHypothesis.fromJSON(p.textBody),g=f.Offset+this.privRequestSession.currentTurnAudioOffset;h=new o.SpeechRecognitionResult(this.privRequestSession.requestId,o.ResultReason.RecognizingSpeech,f.Text,f.Duration,g,f.Language,f.LanguageDetectionConfidence,void 0,void 0,p.textBody,d),this.privRequestSession.onHypothesis(g);const y=new o.SpeechRecognitionEventArgs(h,f.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,y)}catch{}v=!0;break;case"speech.keyword":const C=a.SpeechKeyword.fromJSON(p.textBody);h=new o.SpeechRecognitionResult(this.privRequestSession.requestId,C.Status==="Accepted"?o.ResultReason.RecognizedKeyword:o.ResultReason.NoMatch,C.Text,C.Duration,C.Offset,void 0,void 0,void 0,void 0,p.textBody,d),C.Status!=="Accepted"&&(this.privLastResult=h);const P=new o.SpeechRecognitionEventArgs(h,h.duration,h.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,P)}catch{}v=!0;break;case"audio":{const R=p.requestId.toUpperCase(),T=this.privTurnStateManager.GetTurn(R);try{p.binaryBody?T.audioStream.write(p.binaryBody):T.endAudioStream()}catch{}}v=!0;break;case"response":this.handleResponseMessage(p),v=!0;break}const m=new r.Deferred;return m.resolve(v),m.promise}async cancelRecognition(p,d,h,v,m){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const S=new o.PropertyCollection;S.setProperty(a.CancellationErrorCodePropertyName,o.CancellationErrorCode[v]);const f=new o.SpeechRecognitionCanceledEventArgs(h,m,v,void 0,p);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,f)}catch{}if(this.privSuccessCallback){const g=new o.SpeechRecognitionResult(void 0,o.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,m,void 0,S);try{this.privSuccessCallback(g),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(p,d,h){this.privRecognizerConfig.recognitionMode=p,this.privSuccessCallback=d,this.privErrorCallback=h,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(o.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const v=this.connectImpl(),m=this.sendPreAudioMessages(),S=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),f=await this.privDialogAudioSource.format,g=await this.privDialogAudioSource.deviceInfo,y=new t.ReplayableAudioNode(S,f.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(y,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:g};try{await v,await m}catch(R){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,R),Promise.resolve()}const C=new o.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,C),this.sendAudio(y).then(()=>{},async R=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,R)})}dialogConnectImpl(p){return this.privConnectionLoop=this.startMessageLoop(),p}receiveDialogMessageOverride(){const p=new r.Deferred,d=async()=>{try{const h=this.isDisposed(),v=!this.isDisposed()&&this.terminateMessageLoop;if(h||v){p.resolve(void 0);return}const S=await(await this.fetchConnection()).read();if(!S)return d();const f=c.SpeechConnectionMessage.fromConnectionMessage(S);switch(f.path.toLowerCase()){case"turn.start":{const w=f.requestId.toUpperCase(),B=this.privRequestSession.requestId.toUpperCase();w!==B?this.privTurnStateManager.StartTurn(w):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const y=a.SpeechDetected.fromJSON(f.textBody),C=new o.RecognitionEventArgs(y.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,C);break;case"speech.enddetected":let P;f.textBody.length>0?P=f.textBody:P="{ Offset: 0 }";const R=a.SpeechDetected.fromJSON(P);this.privRequestSession.onServiceRecognized(R.Offset+this.privRequestSession.currentTurnAudioOffset);const T=new o.RecognitionEventArgs(R.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,T);break;case"turn.end":{const w=f.requestId.toUpperCase(),B=this.privRequestSession.requestId.toUpperCase();if(w!==B)this.privTurnStateManager.CompleteTurn(w);else{const D=new o.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,D),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(ue){this.privErrorCallback&&this.privErrorCallback(ue)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(f)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(f.path.toLowerCase(),f.textBody))}catch{}}return d()}catch{this.terminateMessageLoop=!0,p.resolve()}};return d().catch(h=>{r.Events.instance.onEvent(new r.BackgroundEvent(h))}),p.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(p){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,p)}return Promise.resolve()}async configConnection(p){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(p,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(p),p)}async sendPreAudioMessages(){const p=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(p,!0),await this.sendAgentContext(p),await this.sendWaveHeader(p)}sendAgentConfig(p){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(o.PropertyId.Conversation_DialogType)===o.DialogServiceConfig.DialogTypes.CustomCommands){const h=this.agentConfig.get();h.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(h)}this.onEvent(new e.SendingAgentContextMessageEvent(this.agentConfig));const d=this.agentConfig.toJsonString();return this.agentConfigSent=!0,p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",d))}}sendAgentContext(p){const d=r.createGuid(),h=this.privDialogServiceConnector.properties.getProperty(o.PropertyId.Conversation_Speech_Activity_Template),m=JSON.stringify({channelData:"",context:{interactionId:d},messagePayload:typeof h===void 0?void 0:h,version:.5});return p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",m))}fireEventForResult(p,d){const h=a.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),v=p.Offset+this.privRequestSession.currentTurnAudioOffset,m=new o.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,v,p.Language,p.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(p),d);return new o.SpeechRecognitionEventArgs(m,v,this.privRequestSession.sessionId)}handleResponseMessage(p){const d=JSON.parse(p.textBody);switch(d.messageType.toLowerCase()){case"message":const h=p.requestId.toUpperCase(),v=i.ActivityPayloadResponse.fromJSON(p.textBody),m=this.privTurnStateManager.GetTurn(h);if(v.conversationId){const g=this.agentConfig.get();g.botInfo.conversationId=v.conversationId,this.agentConfig.set(g)}const S=m.processActivityPayload(v,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),f=new o.ActivityReceivedEventArgs(v.messagePayload,S);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,f)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new o.TurnStatusReceivedEventArgs(p.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${d.messageType}. Ignoring.`));break}}onEvent(p){this.privEvents.onEvent(p),r.Events.instance.onEvent(p)}addKeywordContextData(){const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(p===void 0)return;const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),v=p.split(";"),m=d===void 0?[]:d.split(";"),S=h===void 0?[]:h.split(";"),f=[];for(let g=0;g<v.length;g++){const y={};y.text=v[g],g<m.length&&(y.offset=Number(m[g])),g<S.length&&(y.duration=Number(S[g])),f.push(y)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:f,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return Do.DialogServiceAdapter=u,Do}var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.AgentConfig=void 0;class H_{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}Iu.AgentConfig=H_;var Pl={},zo={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.ConversationConnectionConfig=void 0;const K_=Ws;class De extends K_.RestConfigBase{static get host(){return De.privHost}static get apiVersion(){return De.privApiVersion}static get clientAppId(){return De.privClientAppId}static get defaultLanguageCode(){return De.privDefaultLanguageCode}static get restPath(){return De.privRestPath}static get webSocketPath(){return De.privWebSocketPath}static get transcriptionEventKeys(){return De.privTranscriptionEventKeys}}Qn.ConversationConnectionConfig=De;De.privHost="dev.microsofttranslator.com";De.privRestPath="/capito/room";De.privApiVersion="2.0";De.privDefaultLanguageCode="en-US";De.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";De.privWebSocketPath="/capito/translate";De.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var Sg;function J_(){if(Sg)return zo;Sg=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.ConversationManager=void 0;const t=me(),e=O,r=E(),n=Qn;let o=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new t.RestMessageAdapter({})}createOrJoin(a,i,c,u){try{e.Contracts.throwIfNullOrUndefined(a,"args");const l=a.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),d=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),v=a.getProperty(r.PropertyId.SpeechServiceConnection_Key),m=a.getProperty(r.PropertyId.SpeechServiceConnection_Region),S=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(l,"languageCode"),e.Contracts.throwIfNullOrWhitespace(p,"nickname"),e.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const f={};f[this.privRequestParams.apiVersion]=this.privApiVersion,f[this.privRequestParams.languageCode]=l,f[this.privRequestParams.nickname]=p;const g={};h&&(g[this.privRequestParams.correlationId]=h),g[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,i!==void 0?f[this.privRequestParams.roomId]=i:(e.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionRegion),g[this.privRequestParams.subscriptionRegion]=m,v?g[this.privRequestParams.subscriptionKey]=v:S?g[this.privRequestParams.authorization]=`Bearer ${S}`:e.Contracts.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionKey));const y={};y.headers=g,this.privRestAdapter.options=y;const C=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Post,C,f,null).then(P=>{const R=t.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,P.headers);if(!P.ok){if(u){let w=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",P.status.toString()),B;try{B=JSON.parse(P.data),w+=` [${B.error.code}: ${B.error.message}]`}catch{w+=` [${P.data}]`}R&&(w+=` ${R}`),u(w)}return}const T=JSON.parse(P.data);if(T&&(T.requestId=R),c){try{c(T)}catch(w){u&&u(w)}c=void 0}}).catch(()=>{})}catch(l){if(u)if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}}leave(a,i){return new Promise((c,u)=>{try{e.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","token"));const l=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=i;const h={};p&&(h[this.privRequestParams.correlationId]=p);const v={};v.headers=h,this.privRestAdapter.options=v;const m=`https://${l}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Delete,m,d,null).then(S=>{S.ok,c()}).catch(()=>{})}catch(l){if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}})}};return zo.ConversationManager=o,zo}var Br={},No={},Tu={},Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.ConversationConnectionMessage=void 0;const G_=b();class Q_ extends G_.ConnectionMessage{constructor(e,r,n,o){super(e,r,n,o);const s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}}Vs.ConversationConnectionMessage=Q_;Object.defineProperty(Tu,"__esModule",{value:!0});Tu.ConversationWebsocketMessageFormatter=void 0;const Fr=b(),Cg=Vs;class X_{toConnectionMessage(e){const r=new Fr.Deferred;try{if(e.messageType===Fr.MessageType.Text){const n=new Cg.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);r.resolve(n)}else e.messageType===Fr.MessageType.Binary&&r.resolve(new Cg.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){const r=new Fr.Deferred;try{if(e.messageType===Fr.MessageType.Text){const n=`${e.textBody?e.textBody:""}`;r.resolve(new Fr.RawWebsocketMessage(Fr.MessageType.Text,n,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}}Tu.ConversationWebsocketMessageFormatter=X_;var Pg;function Y_(){if(Pg)return No;Pg=1,Object.defineProperty(No,"__esModule",{value:!0}),No.ConversationConnectionFactory=void 0;const t=me(),e=b(),r=O,n=E(),o=St(),s=Qn,a=Tu;let i=class extends o.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),h=u.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,e.createGuid()),v=`wss://${d}${s.ConversationConnectionConfig.webSocketPath}`,m=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(m,"token");const S={};S[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,S[s.ConversationConnectionConfig.configParams.token]=m,S[s.ConversationConnectionConfig.configParams.correlationId]=h;const f=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(v,S,{},new a.ConversationWebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),f,p)}};return No.ConversationConnectionFactory=i,No}var jo={},_u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.ConversationRequestSession=void 0;const Rl=b();class Z_{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=Rl.createNoDashGuid(),this.privRequestCompletionDeferral=new Rl.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,r){this.privSessionId=r}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=Rl.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach()}}onComplete(){}}_u.ConversationRequestSession=Z_;var je={},Rg;function kC(){if(Rg)return je;Rg=1,Object.defineProperty(je,"__esModule",{value:!0}),je.ConversationReceivedTranslationEventArgs=je.ParticipantsListEventArgs=je.ParticipantAttributeEventArgs=je.ParticipantEventArgs=je.LockRoomEventArgs=je.MuteAllEventArgs=void 0;const t=E();class e extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}je.MuteAllEventArgs=e;class r extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}je.LockRoomEventArgs=r;class n extends t.SessionEventArgs{constructor(c,u){super(u),this.privParticipant=c}get participant(){return this.privParticipant}}je.ParticipantEventArgs=n;class o extends t.SessionEventArgs{constructor(c,u,l,p){super(p),this.privKey=u,this.privValue=l,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}je.ParticipantAttributeEventArgs=o;class s extends t.SessionEventArgs{constructor(c,u,l,p,d,h,v,m,S){super(S),this.privRoomId=c,this.privSessionToken=u,this.privTranslateTo=l,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=v,this.privParticipants=m}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}je.ParticipantsListEventArgs=s;class a{constructor(c,u,l){this.privPayload=u,this.privCommand=c,this.privSessionId=l}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return je.ConversationReceivedTranslationEventArgs=a,je}var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.ConversationTranslatorCommandTypes=Ft.ConversationTranslatorMessageTypes=Ft.InternalParticipants=void 0;class eA{constructor(e=[],r){this.participants=e,this.meId=r}addOrUpdateParticipant(e){if(e===void 0)return;const r=this.getParticipantIndex(e.id);return r>-1?this.participants.splice(r,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(r=>r.id===e)}getParticipant(e){return this.participants.find(r=>r.id===e)}deleteParticipant(e){this.participants=this.participants.filter(r=>r.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}}Ft.InternalParticipants=eA;Ft.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};Ft.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var bC={},Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.CommandResponsePayload=void 0;const tA=t=>JSON.parse(t);class $d{constructor(e){this.privCommandResponse=tA(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new $d(e)}}Au.CommandResponsePayload=$d;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.ParticipantPayloadResponse=qn.ParticipantsListPayloadResponse=void 0;const rA=t=>JSON.parse(t),nA=t=>JSON.parse(t);class Wd{constructor(e){this.privParticipantsPayloadResponse=rA(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new Wd(e)}}qn.ParticipantsListPayloadResponse=Wd;class Vd{constructor(e){this.privParticipantPayloadResponse=nA(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new Vd(e)}}qn.ParticipantPayloadResponse=Vd;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.TextResponsePayload=Un.SpeechResponsePayload=void 0;const iA=t=>JSON.parse(t),oA=t=>JSON.parse(t);class Hd{constructor(e){this.privSpeechResponse=iA(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new Hd(e)}}Un.SpeechResponsePayload=Hd;class Kd{constructor(e){this.privTextResponse=oA(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new Kd(e)}}Un.TextResponsePayload=Kd;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Au;Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return e.CommandResponsePayload}});var r=qn;Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=Un;Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})})(bC);var Eg;function sA(){if(Eg)return jo;Eg=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.ConversationServiceAdapter=void 0;const t=b(),e=E(),r=k(),n=Vs,o=_u,s=kC(),a=Ft,i=bC;let c=class extends r.ServiceRecognizerBase{constructor(l,p,d,h,v){super(l,p,d,h,v),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=v,this.privConversationAuthentication=l,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=m=>this.conversationConnectImpl(m),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new o.ConversationRequestSession(t.createNoDashGuid()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(l){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(l),await super.dispose(l)}async sendMessage(l){return(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,l))}async sendMessageAsync(l){await(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,l))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,e.CancellationReason.Error,e.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(l,p,d,h,v){this.terminateMessageLoop=!0;const m=new e.ConversationTranslationCanceledEventArgs(d,v,h,void 0,l);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,m)}catch{}}async conversationConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const l=new t.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return l.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,v=d.conversationMessageType.toLowerCase();let m=!1;try{switch(v){case"info":case"participant_command":case"command":const S=i.CommandResponsePayload.fromJSON(d.textBody);switch(S.command.toLowerCase()){case"participantlist":const R=i.ParticipantsListPayloadResponse.fromJSON(d.textBody),T=R.participants.map(ie=>({avatar:ie.avatar,displayName:ie.nickname,id:ie.participantId,isHost:ie.ishost,isMuted:ie.ismuted,isUsingTts:ie.usetts,preferredLanguage:ie.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(R.roomid,R.token,R.translateTo,R.profanityFilter,R.roomProfanityFilter,R.roomLocked,R.muteAll,T,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,S.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,S.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setMute,S.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(S.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new e.ConversationExpirationEventArgs(S.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,S.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(S.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.changeNickname,S.value,h));break;case"joinsession":const w=i.ParticipantPayloadResponse.fromJSON(d.textBody),B={avatar:w.avatar,displayName:w.nickname,id:w.participantId,isHost:w.ishost,isMuted:w.ismuted,isUsingTts:w.usetts,preferredLanguage:w.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(B,h));break;case"leavesession":const D={id:S.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(D,h));break;case"disconnectsession":const ue={id:S.participantId};break;case"token":const W=new r.CognitiveTokenAuthentication(()=>{const ie=S.token;return Promise.resolve(ie)},()=>{const ie=S.token;return Promise.resolve(ie)});this.authentication=W,this.privConversationServiceConnector.onToken(W);break;default:break}break;case"partial":case"final":const f=i.SpeechResponsePayload.fromJSON(d.textBody),g=v==="final"?e.ResultReason.TranslatedParticipantSpeech:e.ResultReason.TranslatingParticipantSpeech,y=new e.ConversationTranslationResult(f.participantId,this.getTranslations(f.translations),f.language,f.id,g,f.recognition,void 0,void 0,d.textBody,void 0);f.isFinal?((y.text!==void 0&&y.text.length>0||f.id===this.privLastPartialUtteranceId)&&(m=!0),m&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,y,h))):y.text!==void 0&&(this.privLastPartialUtteranceId=f.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,y,h)));break;case"translated_message":const C=i.TextResponsePayload.fromJSON(d.textBody),P=new e.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,void 0,void 0,C.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,P,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return l.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const l=this.receiveConversationMessageOverride();try{return await l}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",e.CancellationReason.Error,e.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(l=>l.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(l=>l),this.privConnectionConfigPromise)}getTranslations(l){let p;if(l!==void 0){p=new e.Translations;for(const d of l)p.set(d.lang,d.translation)}return p}};return jo.ConversationServiceAdapter=c,jo}var wg;function aA(){if(wg)return Br;wg=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.ConversationTranslatorRecognizer=Br.ConversationRecognizerFactory=void 0;const t=k(),e=b(),r=O,n=E(),o=Y_(),s=sA();class a{static fromConfig(u,l,p){return new i(u,l,p)}}Br.ConversationRecognizerFactory=a;let i=class extends n.Recognizer{constructor(u,l,p){const d=l;r.Contracts.throwIfNull(d,"speechConfig");const h=u;r.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new o.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this),this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=e.Timeout.setTimeout,this.privClearTimeout=e.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},p=>{l&&l(p)})}catch(p){if(l)if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p);this.dispose(!0).catch(d=>{e.Events.instance.onEvent(new e.BackgroundEvent(d))})}}sendRequest(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{e.Events.instance.onEvent(new e.BackgroundEvent(h))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new t.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,p,d){const h=p;return new s.ConversationServiceAdapter(u,l,h,d,this)}sendMessage(u,l,p){const d=this.privReco;((v,m,S)=>{v!==void 0?v.then(()=>{try{m&&m()}catch(f){S&&S(`'Unhandled error on promise callback: ${f}'`)}},f=>{try{S&&S(f)}catch{}}):S&&S("Null promise")})(d.sendMessageAsync(u),l,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return Br.ConversationTranslatorRecognizer=i,Br}var Lo={},Ig;function cA(){if(Ig)return Lo;Ig=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.TranscriberRecognizer=void 0;const t=b(),e=O,r=E(),n=k();let o=class extends r.Recognizer{constructor(a,i){const c=a;e.Contracts.throwIfNull(c,"speechTranslationConfig");const u=i;e.Contracts.throwIfNull(u,"audioConfigImpl"),e.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(i,c.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return e.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){e.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return e.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){e.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return e.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,i){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),a,i)}stopContinuousRecognitionAsync(a,i){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,i)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(a,i){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendSpeechEventAsync(a,i)}async pushMeetingEvent(a,i){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendMeetingSpeechEventAsync(a,i)}async enforceAudioGating(){const c=(await this.audioConfig.format).channels;if(c===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(c!==8)throw new Error(`Unsupported audio configuration: Detected ${c}-channel audio`)}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(i,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(i,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(i,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(i,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(i,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new n.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,i,c,u){const l=c;return new n.TranscriptionServiceRecognizer(a,i,l,u,this)}};return Lo.TranscriberRecognizer=o,Lo}var Tg;function uA(){return Tg||(Tg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=J_();Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return e.ConversationManager}});var r=Qn;Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=aA();Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var o=cA();Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return o.TranscriberRecognizer}});var s=kC();Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var a=Ft;Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(Pl)),Pl}var Jd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"}(t.MetadataType||(t.MetadataType={}));class e{constructor(n){this.privSynthesisAudioMetadata=JSON.parse(n)}static fromJSON(n){return new e(n)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=e})(Jd);var xo={},It={};Object.defineProperty(It,"__esModule",{value:!0});It.SynthesisStartedEvent=It.ConnectingToSynthesisServiceEvent=It.SynthesisTriggeredEvent=It.SpeechSynthesisEvent=void 0;const _g=b();class ku extends _g.PlatformEvent{constructor(e,r,n=_g.EventType.Info){super(e,n),this.privRequestId=r}get requestId(){return this.privRequestId}}It.SpeechSynthesisEvent=ku;class lA extends ku{constructor(e,r,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=r,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}It.SynthesisTriggeredEvent=lA;class pA extends ku{constructor(e,r){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}It.ConnectingToSynthesisServiceEvent=pA;class dA extends ku{constructor(e,r){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}It.SynthesisStartedEvent=dA;var Ag;function hA(){if(Ag)return xo;Ag=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.SynthesisTurn=void 0;const t=b(),e=Ce,r=E(),n=Jd,o=It;let s=class Ip{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=t.createNoDashGuid(),this.privTurnDeferral=new t.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(i){this.privStreamId=i}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(i){this.privAudioOutputFormat=i}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const i=new r.PropertyCollection;return i.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),i}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const i=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(i),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(i,c,u,l){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=i,this.privRawText=c,this.privIsSSML=u,this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",l!==void 0&&(this.privTurnAudioDestination=l,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new o.SynthesisTriggeredEvent(this.requestId,void 0,l===void 0?void 0:l.id()))}onPreConnectionStart(i){this.privAuthFetchEventId=i,this.onEvent(new o.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(i){i&&this.onComplete()}onConnectionEstablishCompleted(i){if(i===200){this.onEvent(new o.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else i===403&&this.onComplete()}onServiceResponseMessage(i){const c=JSON.parse(i);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(i){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new t.Deferred;const c=JSON.parse(i);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(i){this.isSynthesizing&&(this.privAudioOutputStream.write(i),this.privBytesReceived+=i.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(i))}onTextBoundaryEvent(i){this.updateTextOffset(i.Data.text.Text,i.Type)}onVisemeMetadataReceived(i){i.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=i.Data.AnimationChunk)}onSessionEnd(i){this.privAudioDuration=i.Data.Offset}async constructSynthesisResult(){const i=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,i,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const i=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",i}onEvent(i){t.Events.instance.onEvent(i)}static isXmlTag(i){return i.length>=2&&i[0]==="<"&&i[i.length-1]===">"}updateTextOffset(i,c){c===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(i,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+i.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Ip.isXmlTag(i)&&this.updateTextOffset(i,c))):(this.privSentenceOffset=this.privRawText.indexOf(i,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+i.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Ip.isXmlTag(i)&&this.updateTextOffset(i,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(i){return this.privRawText.indexOf("<",i+1)>this.privRawText.indexOf(">",i+1)}};return xo.SynthesisTurn=s,xo}var Bo={},kg;function vA(){if(kg)return Bo;kg=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.SynthesisAdapterBase=void 0;const t=b(),e=E(),r=k(),n=Ht;let o=class{constructor(a,i,c,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new t.ArgumentNullError("authentication");if(!i)throw new t.ArgumentNullError("connectionFactory");if(!c)throw new t.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=i,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(l=>{if(l.name==="ConnectionClosedEvent"){const p=l;p.statusCode!==1e3&&this.cancelSynthesisLocal(e.CancellationReason.Error,p.statusCode===1007?e.CancellationErrorCode.BadRequestParameters:e.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,i){const c=typeof i=="string"?t.MessageType.Text:t.MessageType.Binary,u=typeof i=="string"?"application/json":"";return(await this.fetchConnection()).send(new n.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,u,i))}async Speak(a,i,c,u,l,p){let d;if(i?d=a:d=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(d,c,u,l);this.privSuccessCallback=u,this.privErrorCallback=l,this.privSynthesisTurn.startNewSynthesis(c,a,i,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(e.CancellationReason.Error,e.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,i,c,u){const l=new e.PropertyCollection;l.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]);const p=new e.SpeechSynthesisResult(a,e.ResultReason.Canceled,void 0,u,l);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,i,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,i,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const i=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!i)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=n.SpeechConnectionMessage.fromConnectionMessage(i);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const u=r.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const p of u)switch(p.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new e.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case r.MetadataType.Bookmark:const h=new e.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const v=new e.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(v)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let l;try{l=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(l)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(l);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const i=this.synthesisContext.toJSON();if(i)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",i))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=t.createNoDashGuid(),this.privConnectionId=t.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const i=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=i.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);u.events.attach(p=>{this.connectionEvents.onEvent(p)});const l=await u.open();return l.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.resolve(u)):l.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${l.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Url)} Reason: ${l.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,i){if(i)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",i))}sendSsmlMessage(a,i,c){return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"ssml",c,"application/ssml+xml",i))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return Bo.SynthesisAdapterBase=o,o.telemetryDataEnabled=!0,Bo}var Fo={},bg;function fA(){if(bg)return Fo;bg=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.AvatarSynthesisAdapter=void 0;const t=E(),e=k();let r=class extends e.SynthesisAdapterBase{constructor(o,s,a,i,c){super(o,s,a,void 0),this.privAvatarSynthesizer=i,this.privSynthesizer=i,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var o,s,a,i,c,u,l,p,d,h,v,m,S,f,g,y;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(o=this.privAvatarConfig.videoFormat)==null?void 0:o.bitrate,codec:(s=this.privAvatarConfig.videoFormat)==null?void 0:s.codec,crop:{bottomRight:{x:(c=(i=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:i.bottomRight)==null?void 0:c.x,y:(p=(l=(u=this.privAvatarConfig.videoFormat)==null?void 0:u.cropRange)==null?void 0:l.bottomRight)==null?void 0:p.y},topLeft:{x:(v=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:v.x,y:(f=(S=(m=this.privAvatarConfig.videoFormat)==null?void 0:m.cropRange)==null?void 0:S.topLeft)==null?void 0:f.y}},resolution:{height:(g=this.privAvatarConfig.videoFormat)==null?void 0:g.height,width:(y=this.privAvatarConfig.videoFormat)==null?void 0:y.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(o){if(this.privAvatarSynthesizer.avatarEventReceived){const s=new t.AvatarEventArgs(o.Data.Offset,o.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,s)}catch{}}}};return Fo.AvatarSynthesisAdapter=r,Fo}var qo={},Mg;function gA(){if(Mg)return qo;Mg=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.SpeechSynthesisAdapter=void 0;const t=E(),e=k();let r=class extends e.SynthesisAdapterBase{constructor(o,s,a,i,c){super(o,s,a,c),this.privSpeechSynthesizer=i,this.privSynthesizer=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(o){const s=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(o,t.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,s)}onSynthesizing(o){if(this.privSpeechSynthesizer.synthesizing)try{const s=this.privSynthesisTurn.audioOutputFormat.addHeader(o),a=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(this.privSynthesisTurn.requestId,t.ResultReason.SynthesizingAudio,s));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(o){if(this.privSpeechSynthesizer.SynthesisCanceled){const s=new t.SpeechSynthesisEventArgs(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch{}}}onSynthesisCompleted(o){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new t.SpeechSynthesisEventArgs(o))}catch{}}onWordBoundary(o){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,o)}catch{}}onVisemeReceived(o){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,o)}catch{}}onBookmarkReached(o){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,o)}catch{}}};return qo.SpeechSynthesisAdapter=r,qo}var Uo={},Og;function mA(){if(Og)return Uo;Og=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.SynthesisRestAdapter=void 0;const t=me(),e=E(),r=St(),n=ge;let o=class{constructor(a,i){let c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const l=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),p=r.ConnectionFactoryBase.getHostSuffix(l);c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${l}.tts.speech${p}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const u=t.RestConfigBase.requestOptions;this.privRestAdapter=new t.RestMessageAdapter(u),this.privAuthentication=i}getVoicesList(a){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(i=>(this.privRestAdapter.setHeaders(i.headerName,i.token),this.privRestAdapter.request(t.RestRequestType.Get,this.privUri)))}};return Uo.SynthesisRestAdapter=o,Uo}var El={},Dg;function yA(){return Dg||(Dg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const e=k();var r;(function(o){o[o.Standard=0]="Standard",o[o.Custom=1]="Custom"})(r=t.SynthesisServiceType||(t.SynthesisServiceType={}));class n{constructor(s,a){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=s||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(s){this.privSynthesisServiceType=s}set synthesisVideoSection(s){this.privSpeechServiceConfig.Context.synthesis={video:s}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}t.SynthesizerConfig=n}(El)),El}var $o={},zg;function SA(){if(zg)return $o;zg=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.SynthesisContext=void 0;const t=E();let e=class{constructor(){this.privContext={}}setSection(n,o){this.privContext[n]=o}set audioOutputFormat(n){this.privAudioOutputFormat=n}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(n){const o=this.buildSynthesisContext(n);this.setSection("synthesis",o)}buildSynthesisContext(n){return{audio:{metadataOptions:{bookmarkEnabled:!!(n!=null&&n.bookmarkReached),punctuationBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(n!=null&&n.wordBoundary)),sentenceBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(n!=null&&n.visemeReceived),wordBoundaryEnabled:n==null?void 0:n.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(n!=null&&n.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:n==null?void 0:n.autoDetectSourceLanguage}}}};return $o.SynthesisContext=e,$o}var Wo={},Ng;function CA(){if(Ng)return Wo;Ng=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.SpeakerRecognitionConfig=void 0;const t=k();let e=class{constructor(n,o){this.privContext=n||new t.Context(null),this.privParameters=o}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Wo.SpeakerRecognitionConfig=e,Wo}var Vo={},jg;function PA(){if(jg)return Vo;jg=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.SpeakerServiceRecognizer=void 0;const t=me(),e=b(),r=E(),n=k(),o=Ht;let s=class extends n.ServiceRecognizerBase{constructor(i,c,u,l,p){super(i,c,u,l,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=u,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(i){let c=!1;const u=new r.PropertyCollection;switch(i.messageType===e.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,i.textBody),i.path.toLowerCase()){case"speaker.response":const p=JSON.parse(i.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new r.SpeakerRecognitionResult(p,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,p.status.reason):d=new r.SpeakerRecognitionResult(p,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(i,c,u,l,p){if(new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]),this.privResultDeferral){const h=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},r.ResultReason.Canceled,l,p);try{this.privResultDeferral.resolve(h)}catch(v){this.privResultDeferral.reject(v)}}}async recognizeSpeakerOnce(i){this.privSpeakerModel=i,this.voiceProfileType=i.scenario,this.privResultDeferral||(this.privResultDeferral=new e.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(i)),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new t.ReplayableAudioNode(l,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await c,await u}catch(S){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,S)}const v=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(h).then(()=>{},S=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,S)}),this.privResultDeferral.promise}async sendPreAudioMessages(i){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,i)}async sendSpeakerRecognition(i,c){const u=JSON.stringify(c);return i.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(i){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:i.profileIds,scenario:i.scenario}}};return Vo.SpeakerServiceRecognizer=s,Vo}var Ho={},Lg;function RA(){if(Lg)return Ho;Lg=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.VoiceServiceRecognizer=void 0;const t=me(),e=b(),r=E(),n=k(),o=Ht;let s=class extends n.ServiceRecognizerBase{constructor(i,c,u,l,p){super(i,c,u,l,p),this.privDeferralMap=new e.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(i){this.privSpeakerAudioSource=i}processTypeSpecificMessages(i){let c=!1;const u=new r.PropertyCollection;switch(i.messageType===e.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,i.textBody),i.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(i.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,i.requestId);break;case"delete":case"reset":this.handleResultResponse(p,i.requestId);break;case"fetch":const m=JSON.parse(i.textBody);this.handleFetchResponse(m,i.requestId);break}c=!0;break;case"speaker.phrases":const d=JSON.parse(i.textBody);this.handlePhrasesResponse(d,i.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(i.textBody),v=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(i.requestId)&&this.privDeferralMap.complete(i.requestId,v),this.privRequestSession.onSpeechEnded(),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(i,c,u,l,p){new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]);const h=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,p,p);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(i,c){this.voiceProfileType=i.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendCreateProfile(l,i,c),this.receiveMessage(),l.promise}catch(l){throw l}}async resetProfile(i){return this.voiceProfileType=i.profileType.toString(),this.sendCommonRequest("reset",i.profileType,i)}async deleteProfile(i){return this.voiceProfileType=i.profileType.toString(),this.sendCommonRequest("delete",i.profileType,i)}async retrieveEnrollmentResult(i){return this.voiceProfileType=i.profileType.toString(),this.privExpectedProfileId=i.profileId,this.sendCommonRequest("fetch",i.profileType,i)}async getAllProfiles(i){return this.voiceProfileType=i.toString(),this.sendCommonRequest("fetch",i)}async getActivationPhrases(i,c){this.voiceProfileType=i.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendPhrasesRequest(l,i,c),this.receiveMessage(),l.promise}catch(l){throw l}}async enrollProfile(i){this.voiceProfileType=i.profileType.toString();const c=new e.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),l=this.sendPreAudioMessages(i,c),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,v=new t.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(v,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await u,await l}catch(f){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,f)}const m=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,m),this.receiveMessage(),this.sendAudio(v).then(()=>{},f=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,f)}),c.promise}async sendPreAudioMessages(i,c){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(i.profileType),i)}async sendPhrasesRequest(i,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,i);const p=this.scenarioFrom(c),d={locale:u,scenario:p};return l.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(i,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,i);const p=c===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:u,number:"1",scenario:p};return l.send(new o.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(i,c,u=void 0){const l=this.connectImpl();try{const p=new e.Deferred;this.privRequestSession.onSpeechContext(),await l;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,i,this.scenarioFrom(c),u),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(i,c,u,l){const p={scenario:u};return l?p.profileIds=[l.profileId]:p.maxPageSize=-1,i.send(new o.SpeechConnectionMessage(e.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(i){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:i.profileIds,scenario:i.scenario}}handlePhrasesResponse(i,c){if(this.privDeferralMap.getId(c))if(i.status.statusCode.toLowerCase()!=="success"){const u=r.ResultReason.Canceled,l=new r.VoiceProfilePhraseResult(u,i.status.statusCode,i.passPhraseType,[]);this.privDeferralMap.complete(c,l)}else if(i.phrases&&i.phrases.length>0){const u=r.ResultReason.EnrollingVoiceProfile,l=new r.VoiceProfilePhraseResult(u,i.status.statusCode,i.passPhraseType,i.phrases);this.privDeferralMap.complete(c,l)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(i,c){if(i.profiles&&i.profiles.length>0)if(this.privDeferralMap.getId(c)){const u=i.profiles.map(l=>l.profileId);this.privDeferralMap.complete(c,u)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(i,c){if(this.privDeferralMap.getId(c)){const u=i.operation.toLowerCase()==="delete"?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,l=i.status.statusCode.toLowerCase()==="success"?u:r.ResultReason.Canceled,p=new r.VoiceProfileResult(l,`statusCode: ${i.status.statusCode}, errorDetails: ${i.status.reason}`);this.privDeferralMap.complete(c,p)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(i,c){if(this.privDeferralMap.getId(c)&&i.profiles[0]){if(this.privExpectedProfileId&&i.profiles.length===1&&i.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=i.profiles[0],l=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),i.status.reason);this.privDeferralMap.complete(c,l)}else if(i.profiles.length>0){const u=i.profiles,l=[];for(const p of u)l.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),i.status.reason));this.privDeferralMap.complete(c,l)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(i){switch(i.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(i){return i===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":i===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return Ho.VoiceServiceRecognizer=s,Ho}var MC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;class e{constructor(i){this.context=i}serialize(){return JSON.stringify(this,(i,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const u={};for(const l in c)Object.hasOwnProperty.call(c,l)&&(u[l&&l.charAt(0).toLowerCase()+l.substring(1)]=c[l]);return u}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(i){this.recognition=i.toLowerCase()}}t.SpeechServiceConfig=e;class r{constructor(i){this.system=new n,this.os=i}}t.Context=r;class n{constructor(){const i="1.35.0";this.name="SpeechSDK",this.version=i,this.build="JavaScript",this.lang="JavaScript"}}t.System=n;class o{constructor(i,c,u){this.platform=i,this.name=c,this.version=u}}t.OS=o;class s{constructor(i,c,u){this.manufacturer=i,this.model=c,this.version=u}}t.Device=s,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(t.connectivity||(t.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(t.type||(t.type={}))})(MC);var xg;function k(){return xg||(xg=1,function(t){var e=F&&F.__createBinding||(Object.create?function(s,a,i,c){c===void 0&&(c=i),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[i]}})}:function(s,a,i,c){c===void 0&&(c=i),s[c]=a[i]}),r=F&&F.__exportStar||function(s,a){for(var i in s)i!=="default"&&!a.hasOwnProperty(i)&&e(a,s,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,r(gc,t),r(Lc,t),r(Gn,t),r(AS,t),r(kS,t),r(p_(),t),r(d_(),t),r(pu,t),r(h_(),t),r(v_(),t),r(f_(),t),r(RC,t),r(du,t),r(m_(),t),r(y_(),t),r(S_(),t),r(C_(),t),r(SC(),t),r(P_(),t),r(EC,t),r(R_(),t),r(hu,t),r(I_(),t),r(T_(),t),r(vu,t),r(fu,t),r(gu,t),r(__(),t),r(A_(),t),r(k_(),t),r(b_(),t),r(M_(),t),r(mu,t),r(D_(),t),r(yu,t),r(_C,t),r(Su,t),r(Pu,t),r(Ru,t),r(AC,t),r(V_(),t),r(Iu,t),r(uA(),t),r(Jd,t),r(hA(),t),r(vA(),t);var n=fA();Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var o=gA();Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return o.SpeechSynthesisAdapter}}),r(mA(),t),r(yA(),t),r(SA(),t),r(CA(),t),r(PA(),t),r(RA(),t),r(MC,t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(nl)),nl}(function(t){var e=F&&F.__createBinding||(Object.create?function(o,s,a,i){i===void 0&&(i=a),Object.defineProperty(o,i,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,i){i===void 0&&(i=a),o[i]=s[a]}),r=F&&F.__exportStar||function(o,s){for(var a in o)a!=="default"&&!s.hasOwnProperty(a)&&e(s,o,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=k();new n.AgentConfig,r(E(),t)})(Xo);const $r=class $r{constructor(e,r){Ir(this,"speechKey");Ir(this,"speechRegion");Ir(this,"onRecognizing",()=>{});Ir(this,"onRecognitionDone",()=>{});Ir(this,"speechRecognizer");this.speechKey=e,this.speechRegion=r}static getInstance(e,r){return $r.instance||($r.instance=new $r(e,r)),$r.instance}startRecognition(e,r){this.onRecognizing=e,this.onRecognitionDone=r;const n=Xo.SpeechConfig.fromSubscription(this.speechKey,this.speechRegion);n.speechRecognitionLanguage="fr-FR",this.recognizeFromMicrophone(n)}stopRecognition(){var e;(e=this.speechRecognizer)==null||e.stopContinuousRecognitionAsync(),console.log("Speech recognition stopped.")}recognizeFromMicrophone(e){const r=Xo.AudioConfig.fromDefaultMicrophoneInput();this.speechRecognizer=new Xo.SpeechRecognizer(e,r);const n=Xo.PhraseListGrammar.fromRecognizer(this.speechRecognizer);n.addPhrase("Skyincap"),n.addPhrase("Skyconseil"),n.addPhrase("Guidor"),n.addPhrase("Vercel"),n.addPhrase("Bitbucket"),n.addPhrase("Jira"),n.addPhrase("Vitest"),n.addPhrase("Sharik"),n.addPhrase("Playwright"),n.addPhrase("la doc"),this.speechRecognizer.recognizing=(o,s)=>{const a=s.result.text;console.log(`RECOGNIZING: Text=${a}`),this.onRecognizing(a)},this.speechRecognizer.recognized=(o,s)=>{const a=s.result.text;console.log(`RECOGNIZED: Text=${a}`),this.onRecognitionDone(a)},this.speechRecognizer.startContinuousRecognitionAsync(),console.log("Speak into your microphone.")}};Ir($r,"instance");let Tp=$r;function EA(){const[t,e]=H.useState(""),[r,n]=H.useState(!1),o=Tp.getInstance("299e99fca6a8494b83dfaff613468932","francecentral");H.useEffect(()=>{window.scrollTo(0,document.body.scrollHeight)},[t]);let s=0,a=0;const i=["","",""];function c(){n(!0),e("Listening..."),o.startRecognition(l,u)}function u(d){d.length>0&&(i[s%3]=d,e(i[a%3]+`
`+i[(a+1)%3]+`
`+i[(a+2)%3]),s++,s>2&&a++)}function l(d){d.length>0&&(i[s%3]=d,e(i[a%3]+`
`+i[(a+1)%3]+`
`+i[(a+2)%3]))}function p(){n(!1),o.stopRecognition()}return pt.jsx(nw,{defaultTheme:"system",storageKey:"vite-ui-theme",children:pt.jsxs("div",{className:"row max-w-6xl",children:[r?pt.jsxs(Sp,{onClick:p,children:[pt.jsx(Gw,{className:"mr-2 h-4 w-4"})," Stop"]}):pt.jsxs(Sp,{onClick:c,children:[pt.jsx(Jw,{className:"mr-2 h-4 w-4"})," Start"]}),pt.jsx("div",{className:"mt-8 text-3xl text-left leading-snug",children:t})]})})}wl.createRoot(document.getElementById("root")).render(pt.jsx(WP.StrictMode,{children:pt.jsx(EA,{})}));
