var nw=Object.defineProperty;var iw=(e,t,r)=>t in e?nw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ur=(e,t,r)=>(iw(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ow(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Cy={exports:{}},zc={},Py={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs=Symbol.for("react.element"),sw=Symbol.for("react.portal"),aw=Symbol.for("react.fragment"),cw=Symbol.for("react.strict_mode"),uw=Symbol.for("react.profiler"),lw=Symbol.for("react.provider"),pw=Symbol.for("react.context"),dw=Symbol.for("react.forward_ref"),hw=Symbol.for("react.suspense"),fw=Symbol.for("react.memo"),vw=Symbol.for("react.lazy"),ff=Symbol.iterator;function gw(e){return e===null||typeof e!="object"?null:(e=ff&&e[ff]||e["@@iterator"],typeof e=="function"?e:null)}var Ry={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ey=Object.assign,wy={};function ai(e,t,r){this.props=e,this.context=t,this.refs=wy,this.updater=r||Ry}ai.prototype.isReactComponent={};ai.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ai.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ty(){}Ty.prototype=ai.prototype;function Nd(e,t,r){this.props=e,this.context=t,this.refs=wy,this.updater=r||Ry}var xd=Nd.prototype=new Ty;xd.constructor=Nd;Ey(xd,ai.prototype);xd.isPureReactComponent=!0;var vf=Array.isArray,Iy=Object.prototype.hasOwnProperty,zd={current:null},_y={key:!0,ref:!0,__self:!0,__source:!0};function Ay(e,t,r){var n,i={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Iy.call(t,n)&&!_y.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Zs,type:e,key:o,ref:a,props:i,_owner:zd.current}}function mw(e,t){return{$$typeof:Zs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ld(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zs}function yw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var gf=/\/+/g;function Cl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yw(""+e.key):t.toString(36)}function Ua(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Zs:case sw:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+Cl(a,0):n,vf(i)?(r="",e!=null&&(r=e.replace(gf,"$&/")+"/"),Ua(i,t,r,"",function(u){return u})):i!=null&&(Ld(i)&&(i=mw(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(gf,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",vf(e))for(var s=0;s<e.length;s++){o=e[s];var c=n+Cl(o,s);a+=Ua(o,t,r,c,i)}else if(c=gw(e),typeof c=="function")for(e=c.call(e),s=0;!(o=e.next()).done;)o=o.value,c=n+Cl(o,s++),a+=Ua(o,t,r,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Sa(e,t,r){if(e==null)return e;var n=[],i=0;return Ua(e,n,"","",function(o){return t.call(r,o,i++)}),n}function Sw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Je={current:null},Wa={transition:null},Cw={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:zd};J.Children={map:Sa,forEach:function(e,t,r){Sa(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Sa(e,function(){t++}),t},toArray:function(e){return Sa(e,function(t){return t})||[]},only:function(e){if(!Ld(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=ai;J.Fragment=aw;J.Profiler=uw;J.PureComponent=Nd;J.StrictMode=cw;J.Suspense=hw;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cw;J.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ey({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=zd.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)Iy.call(t,c)&&!_y.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:Zs,type:e.type,key:i,ref:o,props:n,_owner:a}};J.createContext=function(e){return e={$$typeof:pw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lw,_context:e},e.Consumer=e};J.createElement=Ay;J.createFactory=function(e){var t=Ay.bind(null,e);return t.type=e,t};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:dw,render:e}};J.isValidElement=Ld;J.lazy=function(e){return{$$typeof:vw,_payload:{_status:-1,_result:e},_init:Sw}};J.memo=function(e,t){return{$$typeof:fw,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=Wa.transition;Wa.transition={};try{e()}finally{Wa.transition=t}};J.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};J.useCallback=function(e,t){return Je.current.useCallback(e,t)};J.useContext=function(e){return Je.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return Je.current.useDeferredValue(e)};J.useEffect=function(e,t){return Je.current.useEffect(e,t)};J.useId=function(){return Je.current.useId()};J.useImperativeHandle=function(e,t,r){return Je.current.useImperativeHandle(e,t,r)};J.useInsertionEffect=function(e,t){return Je.current.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return Je.current.useLayoutEffect(e,t)};J.useMemo=function(e,t){return Je.current.useMemo(e,t)};J.useReducer=function(e,t,r){return Je.current.useReducer(e,t,r)};J.useRef=function(e){return Je.current.useRef(e)};J.useState=function(e){return Je.current.useState(e)};J.useSyncExternalStore=function(e,t,r){return Je.current.useSyncExternalStore(e,t,r)};J.useTransition=function(){return Je.current.useTransition()};J.version="18.2.0";Py.exports=J;var C=Py.exports;const dt=Sy(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw=C,Rw=Symbol.for("react.element"),Ew=Symbol.for("react.fragment"),ww=Object.prototype.hasOwnProperty,Tw=Pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Iw={key:!0,ref:!0,__self:!0,__source:!0};function by(e,t,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)ww.call(t,n)&&!Iw.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Rw,type:e,key:o,ref:a,props:i,_owner:Tw.current}}zc.Fragment=Ew;zc.jsx=by;zc.jsxs=by;Cy.exports=zc;var W=Cy.exports,Cp={},ky={exports:{}},ct={},Oy={exports:{}},My={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,x){var F=b.length;b.push(x);e:for(;0<F;){var Z=F-1>>>1,ee=b[Z];if(0<i(ee,x))b[Z]=x,b[F]=ee,F=Z;else break e}}function r(b){return b.length===0?null:b[0]}function n(b){if(b.length===0)return null;var x=b[0],F=b.pop();if(F!==x){b[0]=F;e:for(var Z=0,ee=b.length,Et=ee>>>1;Z<Et;){var lt=2*(Z+1)-1,gi=b[lt],Ut=lt+1,_n=b[Ut];if(0>i(gi,F))Ut<ee&&0>i(_n,gi)?(b[Z]=_n,b[Ut]=F,Z=Ut):(b[Z]=gi,b[lt]=F,Z=lt);else if(Ut<ee&&0>i(_n,F))b[Z]=_n,b[Ut]=F,Z=Ut;else break e}}return x}function i(b,x){var F=b.sortIndex-x.sortIndex;return F!==0?F:b.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var c=[],u=[],l=1,p=null,d=3,h=!1,f=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(b){for(var x=r(u);x!==null;){if(x.callback===null)n(u);else if(x.startTime<=b)n(u),x.sortIndex=x.expirationTime,t(c,x);else break;x=r(u)}}function P(b){if(g=!1,S(b),!f)if(r(c)!==null)f=!0,ie(R);else{var x=r(u);x!==null&&Ne(P,x.startTime-b)}}function R(b,x){f=!1,g&&(g=!1,v(E),E=-1),h=!0;var F=d;try{for(S(x),p=r(c);p!==null&&(!(p.expirationTime>x)||b&&!G());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,d=p.priorityLevel;var ee=Z(p.expirationTime<=x);x=e.unstable_now(),typeof ee=="function"?p.callback=ee:p===r(c)&&n(c),S(x)}else n(c);p=r(c)}if(p!==null)var Et=!0;else{var lt=r(u);lt!==null&&Ne(P,lt.startTime-x),Et=!1}return Et}finally{p=null,d=F,h=!1}}var w=!1,I=null,E=-1,N=5,D=-1;function G(){return!(e.unstable_now()-D<N)}function L(){if(I!==null){var b=e.unstable_now();D=b;var x=!0;try{x=I(!0,b)}finally{x?Y():(w=!1,I=null)}}else w=!1}var Y;if(typeof m=="function")Y=function(){m(L)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ne=M.port2;M.port1.onmessage=L,Y=function(){ne.postMessage(null)}}else Y=function(){y(L,0)};function ie(b){I=b,w||(w=!0,Y())}function Ne(b,x){E=y(function(){b(e.unstable_now())},x)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){f||h||(f=!0,ie(R))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(b){switch(d){case 1:case 2:case 3:var x=3;break;default:x=d}var F=d;d=x;try{return b()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,x){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var F=d;d=b;try{return x()}finally{d=F}},e.unstable_scheduleCallback=function(b,x,F){var Z=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Z+F:Z):F=Z,b){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=F+ee,b={id:l++,callback:x,priorityLevel:b,startTime:F,expirationTime:ee,sortIndex:-1},F>Z?(b.sortIndex=F,t(u,b),r(c)===null&&b===r(u)&&(g?(v(E),E=-1):g=!0,Ne(P,F-Z))):(b.sortIndex=ee,t(c,b),f||h||(f=!0,ie(R))),b},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(b){var x=d;return function(){var F=d;d=x;try{return b.apply(this,arguments)}finally{d=F}}}})(My);Oy.exports=My;var _w=Oy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy=C,at=_w;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ny=new Set,Os={};function En(e,t){Gn(e,t),Gn(e+"Capture",t)}function Gn(e,t){for(Os[e]=t,e=0;e<t.length;e++)Ny.add(t[e])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pp=Object.prototype.hasOwnProperty,Aw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mf={},yf={};function bw(e){return Pp.call(yf,e)?!0:Pp.call(mf,e)?!1:Aw.test(e)?yf[e]=!0:(mf[e]=!0,!1)}function kw(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ow(e,t,r,n){if(t===null||typeof t>"u"||kw(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ge(e,t,r,n,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oe[e]=new Ge(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oe[t]=new Ge(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oe[e]=new Ge(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oe[e]=new Ge(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oe[e]=new Ge(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oe[e]=new Ge(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oe[e]=new Ge(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oe[e]=new Ge(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oe[e]=new Ge(e,5,!1,e.toLowerCase(),null,!1,!1)});var jd=/[\-:]([a-z])/g;function Bd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jd,Bd);Oe[t]=new Ge(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jd,Bd);Oe[t]=new Ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jd,Bd);Oe[t]=new Ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oe[e]=new Ge(e,1,!1,e.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oe[e]=new Ge(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fd(e,t,r,n){var i=Oe.hasOwnProperty(t)?Oe[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ow(t,r,i,n)&&(r=null),n||i===null?bw(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var cr=Dy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ca=Symbol.for("react.element"),On=Symbol.for("react.portal"),Mn=Symbol.for("react.fragment"),$d=Symbol.for("react.strict_mode"),Rp=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),zy=Symbol.for("react.context"),qd=Symbol.for("react.forward_ref"),Ep=Symbol.for("react.suspense"),wp=Symbol.for("react.suspense_list"),Ud=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),Ly=Symbol.for("react.offscreen"),Sf=Symbol.iterator;function mi(e){return e===null||typeof e!="object"?null:(e=Sf&&e[Sf]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,Pl;function hs(e){if(Pl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pl=t&&t[1]||""}return`
`+Pl+e}var Rl=!1;function El(e,t){if(!e||Rl)return"";Rl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=s);break}}}finally{Rl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?hs(e):""}function Mw(e){switch(e.tag){case 5:return hs(e.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 2:case 15:return e=El(e.type,!1),e;case 11:return e=El(e.type.render,!1),e;case 1:return e=El(e.type,!0),e;default:return""}}function Tp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mn:return"Fragment";case On:return"Portal";case Rp:return"Profiler";case $d:return"StrictMode";case Ep:return"Suspense";case wp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zy:return(e.displayName||"Context")+".Consumer";case xy:return(e._context.displayName||"Context")+".Provider";case qd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ud:return t=e.displayName||null,t!==null?t:Tp(e.type)||"Memo";case fr:t=e._payload,e=e._init;try{return Tp(e(t))}catch{}}return null}function Dw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tp(t);case 8:return t===$d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nw(e){var t=jy(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pa(e){e._valueTracker||(e._valueTracker=Nw(e))}function By(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=jy(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function cc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ip(e,t){var r=t.checked;return pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Cf(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Mr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fy(e,t){t=t.checked,t!=null&&Fd(e,"checked",t,!1)}function _p(e,t){Fy(e,t);var r=Mr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ap(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ap(e,t.type,Mr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pf(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ap(e,t,r){(t!=="number"||cc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var fs=Array.isArray;function Un(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Mr(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function bp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rf(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(A(92));if(fs(r)){if(1<r.length)throw Error(A(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Mr(r)}}function $y(e,t){var r=Mr(t.value),n=Mr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Ef(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ra,Uy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ra=Ra||document.createElement("div"),Ra.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ra.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ms(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xw=["Webkit","ms","Moz","O"];Object.keys(Cs).forEach(function(e){xw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cs[t]=Cs[e]})});function Wy(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Cs.hasOwnProperty(e)&&Cs[e]?(""+t).trim():t+"px"}function Hy(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Wy(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var zw=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Op(e,t){if(t){if(zw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function Mp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dp=null;function Wd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Np=null,Wn=null,Hn=null;function wf(e){if(e=ra(e)){if(typeof Np!="function")throw Error(A(280));var t=e.stateNode;t&&(t=$c(t),Np(e.stateNode,e.type,t))}}function Vy(e){Wn?Hn?Hn.push(e):Hn=[e]:Wn=e}function Ky(){if(Wn){var e=Wn,t=Hn;if(Hn=Wn=null,wf(e),t)for(e=0;e<t.length;e++)wf(t[e])}}function Jy(e,t){return e(t)}function Gy(){}var wl=!1;function Qy(e,t,r){if(wl)return e(t,r);wl=!0;try{return Jy(e,t,r)}finally{wl=!1,(Wn!==null||Hn!==null)&&(Gy(),Ky())}}function Ds(e,t){var r=e.stateNode;if(r===null)return null;var n=$c(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(A(231,t,typeof r));return r}var xp=!1;if(nr)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){xp=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{xp=!1}function Lw(e,t,r,n,i,o,a,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(l){this.onError(l)}}var Ps=!1,uc=null,lc=!1,zp=null,jw={onError:function(e){Ps=!0,uc=e}};function Bw(e,t,r,n,i,o,a,s,c){Ps=!1,uc=null,Lw.apply(jw,arguments)}function Fw(e,t,r,n,i,o,a,s,c){if(Bw.apply(this,arguments),Ps){if(Ps){var u=uc;Ps=!1,uc=null}else throw Error(A(198));lc||(lc=!0,zp=u)}}function wn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Xy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tf(e){if(wn(e)!==e)throw Error(A(188))}function $w(e){var t=e.alternate;if(!t){if(t=wn(e),t===null)throw Error(A(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Tf(i),e;if(o===n)return Tf(i),t;o=o.sibling}throw Error(A(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(A(189))}}if(r.alternate!==n)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?e:t}function Yy(e){return e=$w(e),e!==null?Zy(e):null}function Zy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zy(e);if(t!==null)return t;e=e.sibling}return null}var eS=at.unstable_scheduleCallback,If=at.unstable_cancelCallback,qw=at.unstable_shouldYield,Uw=at.unstable_requestPaint,ve=at.unstable_now,Ww=at.unstable_getCurrentPriorityLevel,Hd=at.unstable_ImmediatePriority,tS=at.unstable_UserBlockingPriority,pc=at.unstable_NormalPriority,Hw=at.unstable_LowPriority,rS=at.unstable_IdlePriority,Lc=null,Bt=null;function Vw(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Lc,e,void 0,(e.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:Gw,Kw=Math.log,Jw=Math.LN2;function Gw(e){return e>>>=0,e===0?32:31-(Kw(e)/Jw|0)|0}var Ea=64,wa=4194304;function vs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=vs(s):(o&=a,o!==0&&(n=vs(o)))}else a=r&~i,a!==0?n=vs(a):o!==0&&(n=vs(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-At(t),i=1<<r,n|=e[r],t&=~i;return n}function Qw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xw(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-At(o),s=1<<a,c=i[a];c===-1?(!(s&r)||s&n)&&(i[a]=Qw(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}function Lp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nS(){var e=Ea;return Ea<<=1,!(Ea&4194240)&&(Ea=64),e}function Tl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ea(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-At(t),e[t]=r}function Yw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-At(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function Vd(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-At(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var te=0;function iS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var oS,Kd,sS,aS,cS,jp=!1,Ta=[],Er=null,wr=null,Tr=null,Ns=new Map,xs=new Map,yr=[],Zw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _f(e,t){switch(e){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Ns.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(t.pointerId)}}function Si(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=ra(t),t!==null&&Kd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function e0(e,t,r,n,i){switch(t){case"focusin":return Er=Si(Er,e,t,r,n,i),!0;case"dragenter":return wr=Si(wr,e,t,r,n,i),!0;case"mouseover":return Tr=Si(Tr,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Ns.set(o,Si(Ns.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,xs.set(o,Si(xs.get(o)||null,e,t,r,n,i)),!0}return!1}function uS(e){var t=un(e.target);if(t!==null){var r=wn(t);if(r!==null){if(t=r.tag,t===13){if(t=Xy(r),t!==null){e.blockedOn=t,cS(e.priority,function(){sS(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ha(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Bp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Dp=n,r.target.dispatchEvent(n),Dp=null}else return t=ra(r),t!==null&&Kd(t),e.blockedOn=r,!1;t.shift()}return!0}function Af(e,t,r){Ha(e)&&r.delete(t)}function t0(){jp=!1,Er!==null&&Ha(Er)&&(Er=null),wr!==null&&Ha(wr)&&(wr=null),Tr!==null&&Ha(Tr)&&(Tr=null),Ns.forEach(Af),xs.forEach(Af)}function Ci(e,t){e.blockedOn===t&&(e.blockedOn=null,jp||(jp=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,t0)))}function zs(e){function t(i){return Ci(i,e)}if(0<Ta.length){Ci(Ta[0],e);for(var r=1;r<Ta.length;r++){var n=Ta[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Er!==null&&Ci(Er,e),wr!==null&&Ci(wr,e),Tr!==null&&Ci(Tr,e),Ns.forEach(t),xs.forEach(t),r=0;r<yr.length;r++)n=yr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<yr.length&&(r=yr[0],r.blockedOn===null);)uS(r),r.blockedOn===null&&yr.shift()}var Vn=cr.ReactCurrentBatchConfig,hc=!0;function r0(e,t,r,n){var i=te,o=Vn.transition;Vn.transition=null;try{te=1,Jd(e,t,r,n)}finally{te=i,Vn.transition=o}}function n0(e,t,r,n){var i=te,o=Vn.transition;Vn.transition=null;try{te=4,Jd(e,t,r,n)}finally{te=i,Vn.transition=o}}function Jd(e,t,r,n){if(hc){var i=Bp(e,t,r,n);if(i===null)xl(e,t,n,fc,r),_f(e,n);else if(e0(i,e,t,r,n))n.stopPropagation();else if(_f(e,n),t&4&&-1<Zw.indexOf(e)){for(;i!==null;){var o=ra(i);if(o!==null&&oS(o),o=Bp(e,t,r,n),o===null&&xl(e,t,n,fc,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else xl(e,t,n,null,r)}}var fc=null;function Bp(e,t,r,n){if(fc=null,e=Wd(n),e=un(e),e!==null)if(t=wn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Xy(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fc=e,null}function lS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ww()){case Hd:return 1;case tS:return 4;case pc:case Hw:return 16;case rS:return 536870912;default:return 16}default:return 16}}var Cr=null,Gd=null,Va=null;function pS(){if(Va)return Va;var e,t=Gd,r=t.length,n,i="value"in Cr?Cr.value:Cr.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[o-n];n++);return Va=i.slice(e,1<n?1-n:void 0)}function Ka(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ia(){return!0}function bf(){return!1}function ut(e){function t(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ia:bf,this.isPropagationStopped=bf,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),t}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qd=ut(ci),ta=pe({},ci,{view:0,detail:0}),i0=ut(ta),Il,_l,Pi,jc=pe({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pi&&(Pi&&e.type==="mousemove"?(Il=e.screenX-Pi.screenX,_l=e.screenY-Pi.screenY):_l=Il=0,Pi=e),Il)},movementY:function(e){return"movementY"in e?e.movementY:_l}}),kf=ut(jc),o0=pe({},jc,{dataTransfer:0}),s0=ut(o0),a0=pe({},ta,{relatedTarget:0}),Al=ut(a0),c0=pe({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),u0=ut(c0),l0=pe({},ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),p0=ut(l0),d0=pe({},ci,{data:0}),Of=ut(d0),h0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=v0[e])?!!t[e]:!1}function Xd(){return g0}var m0=pe({},ta,{key:function(e){if(e.key){var t=h0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ka(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?f0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xd,charCode:function(e){return e.type==="keypress"?Ka(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ka(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),y0=ut(m0),S0=pe({},jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mf=ut(S0),C0=pe({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xd}),P0=ut(C0),R0=pe({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),E0=ut(R0),w0=pe({},jc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),T0=ut(w0),I0=[9,13,27,32],Yd=nr&&"CompositionEvent"in window,Rs=null;nr&&"documentMode"in document&&(Rs=document.documentMode);var _0=nr&&"TextEvent"in window&&!Rs,dS=nr&&(!Yd||Rs&&8<Rs&&11>=Rs),Df=" ",Nf=!1;function hS(e,t){switch(e){case"keyup":return I0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dn=!1;function A0(e,t){switch(e){case"compositionend":return fS(t);case"keypress":return t.which!==32?null:(Nf=!0,Df);case"textInput":return e=t.data,e===Df&&Nf?null:e;default:return null}}function b0(e,t){if(Dn)return e==="compositionend"||!Yd&&hS(e,t)?(e=pS(),Va=Gd=Cr=null,Dn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dS&&t.locale!=="ko"?null:t.data;default:return null}}var k0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!k0[e.type]:t==="textarea"}function vS(e,t,r,n){Vy(n),t=vc(t,"onChange"),0<t.length&&(r=new Qd("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Es=null,Ls=null;function O0(e){IS(e,0)}function Bc(e){var t=zn(e);if(By(t))return e}function M0(e,t){if(e==="change")return t}var gS=!1;if(nr){var bl;if(nr){var kl="oninput"in document;if(!kl){var zf=document.createElement("div");zf.setAttribute("oninput","return;"),kl=typeof zf.oninput=="function"}bl=kl}else bl=!1;gS=bl&&(!document.documentMode||9<document.documentMode)}function Lf(){Es&&(Es.detachEvent("onpropertychange",mS),Ls=Es=null)}function mS(e){if(e.propertyName==="value"&&Bc(Ls)){var t=[];vS(t,Ls,e,Wd(e)),Qy(O0,t)}}function D0(e,t,r){e==="focusin"?(Lf(),Es=t,Ls=r,Es.attachEvent("onpropertychange",mS)):e==="focusout"&&Lf()}function N0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bc(Ls)}function x0(e,t){if(e==="click")return Bc(t)}function z0(e,t){if(e==="input"||e==="change")return Bc(t)}function L0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:L0;function js(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Pp.call(t,i)||!kt(e[i],t[i]))return!1}return!0}function jf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bf(e,t){var r=jf(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jf(r)}}function yS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function SS(){for(var e=window,t=cc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=cc(e.document)}return t}function Zd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function j0(e){var t=SS(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&yS(r.ownerDocument.documentElement,r)){if(n!==null&&Zd(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=Bf(r,o);var a=Bf(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var B0=nr&&"documentMode"in document&&11>=document.documentMode,Nn=null,Fp=null,ws=null,$p=!1;function Ff(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$p||Nn==null||Nn!==cc(n)||(n=Nn,"selectionStart"in n&&Zd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ws&&js(ws,n)||(ws=n,n=vc(Fp,"onSelect"),0<n.length&&(t=new Qd("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Nn)))}function _a(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xn={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionend:_a("Transition","TransitionEnd")},Ol={},CS={};nr&&(CS=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);function Fc(e){if(Ol[e])return Ol[e];if(!xn[e])return e;var t=xn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in CS)return Ol[e]=t[r];return e}var PS=Fc("animationend"),RS=Fc("animationiteration"),ES=Fc("animationstart"),wS=Fc("transitionend"),TS=new Map,$f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){TS.set(e,t),En(t,[e])}for(var Ml=0;Ml<$f.length;Ml++){var Dl=$f[Ml],F0=Dl.toLowerCase(),$0=Dl[0].toUpperCase()+Dl.slice(1);xr(F0,"on"+$0)}xr(PS,"onAnimationEnd");xr(RS,"onAnimationIteration");xr(ES,"onAnimationStart");xr("dblclick","onDoubleClick");xr("focusin","onFocus");xr("focusout","onBlur");xr(wS,"onTransitionEnd");Gn("onMouseEnter",["mouseout","mouseover"]);Gn("onMouseLeave",["mouseout","mouseover"]);Gn("onPointerEnter",["pointerout","pointerover"]);Gn("onPointerLeave",["pointerout","pointerover"]);En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));En("onBeforeInput",["compositionend","keypress","textInput","paste"]);En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q0=new Set("cancel close invalid load scroll toggle".split(" ").concat(gs));function qf(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Fw(n,t,void 0,e),e.currentTarget=null}function IS(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;qf(i,s,u),o=c}else for(a=0;a<n.length;a++){if(s=n[a],c=s.instance,u=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;qf(i,s,u),o=c}}}if(lc)throw e=zp,lc=!1,zp=null,e}function se(e,t){var r=t[Vp];r===void 0&&(r=t[Vp]=new Set);var n=e+"__bubble";r.has(n)||(_S(t,e,2,!1),r.add(n))}function Nl(e,t,r){var n=0;t&&(n|=4),_S(r,e,n,t)}var Aa="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[Aa]){e[Aa]=!0,Ny.forEach(function(r){r!=="selectionchange"&&(q0.has(r)||Nl(r,!1,e),Nl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Aa]||(t[Aa]=!0,Nl("selectionchange",!1,t))}}function _S(e,t,r,n){switch(lS(t)){case 1:var i=r0;break;case 4:i=n0;break;default:i=Jd}r=i.bind(null,t,r,e),i=void 0,!xp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function xl(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=un(s),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}s=s.parentNode}}n=n.return}Qy(function(){var u=o,l=Wd(r),p=[];e:{var d=TS.get(e);if(d!==void 0){var h=Qd,f=e;switch(e){case"keypress":if(Ka(r)===0)break e;case"keydown":case"keyup":h=y0;break;case"focusin":f="focus",h=Al;break;case"focusout":f="blur",h=Al;break;case"beforeblur":case"afterblur":h=Al;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=s0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=P0;break;case PS:case RS:case ES:h=u0;break;case wS:h=E0;break;case"scroll":h=i0;break;case"wheel":h=T0;break;case"copy":case"cut":case"paste":h=p0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Mf}var g=(t&4)!==0,y=!g&&e==="scroll",v=g?d!==null?d+"Capture":null:d;g=[];for(var m=u,S;m!==null;){S=m;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,v!==null&&(P=Ds(m,v),P!=null&&g.push(Fs(m,P,S)))),y)break;m=m.return}0<g.length&&(d=new h(d,f,null,r,l),p.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&r!==Dp&&(f=r.relatedTarget||r.fromElement)&&(un(f)||f[ir]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(f=r.relatedTarget||r.toElement,h=u,f=f?un(f):null,f!==null&&(y=wn(f),f!==y||f.tag!==5&&f.tag!==6)&&(f=null)):(h=null,f=u),h!==f)){if(g=kf,P="onMouseLeave",v="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=Mf,P="onPointerLeave",v="onPointerEnter",m="pointer"),y=h==null?d:zn(h),S=f==null?d:zn(f),d=new g(P,m+"leave",h,r,l),d.target=y,d.relatedTarget=S,P=null,un(l)===u&&(g=new g(v,m+"enter",f,r,l),g.target=S,g.relatedTarget=y,P=g),y=P,h&&f)t:{for(g=h,v=f,m=0,S=g;S;S=An(S))m++;for(S=0,P=v;P;P=An(P))S++;for(;0<m-S;)g=An(g),m--;for(;0<S-m;)v=An(v),S--;for(;m--;){if(g===v||v!==null&&g===v.alternate)break t;g=An(g),v=An(v)}g=null}else g=null;h!==null&&Uf(p,d,h,g,!1),f!==null&&y!==null&&Uf(p,y,f,g,!0)}}e:{if(d=u?zn(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var R=M0;else if(xf(d))if(gS)R=z0;else{R=N0;var w=D0}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(R=x0);if(R&&(R=R(e,u))){vS(p,R,r,l);break e}w&&w(e,d,u),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&Ap(d,"number",d.value)}switch(w=u?zn(u):window,e){case"focusin":(xf(w)||w.contentEditable==="true")&&(Nn=w,Fp=u,ws=null);break;case"focusout":ws=Fp=Nn=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":$p=!1,Ff(p,r,l);break;case"selectionchange":if(B0)break;case"keydown":case"keyup":Ff(p,r,l)}var I;if(Yd)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Dn?hS(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(dS&&r.locale!=="ko"&&(Dn||E!=="onCompositionStart"?E==="onCompositionEnd"&&Dn&&(I=pS()):(Cr=l,Gd="value"in Cr?Cr.value:Cr.textContent,Dn=!0)),w=vc(u,E),0<w.length&&(E=new Of(E,e,null,r,l),p.push({event:E,listeners:w}),I?E.data=I:(I=fS(r),I!==null&&(E.data=I)))),(I=_0?A0(e,r):b0(e,r))&&(u=vc(u,"onBeforeInput"),0<u.length&&(l=new Of("onBeforeInput","beforeinput",null,r,l),p.push({event:l,listeners:u}),l.data=I))}IS(p,t)})}function Fs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vc(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ds(e,r),o!=null&&n.unshift(Fs(e,o,i)),o=Ds(e,t),o!=null&&n.push(Fs(e,o,i))),e=e.return}return n}function An(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uf(e,t,r,n,i){for(var o=t._reactName,a=[];r!==null&&r!==n;){var s=r,c=s.alternate,u=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&u!==null&&(s=u,i?(c=Ds(r,o),c!=null&&a.unshift(Fs(r,c,s))):i||(c=Ds(r,o),c!=null&&a.push(Fs(r,c,s)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var U0=/\r\n?/g,W0=/\u0000|\uFFFD/g;function Wf(e){return(typeof e=="string"?e:""+e).replace(U0,`
`).replace(W0,"")}function ba(e,t,r){if(t=Wf(t),Wf(e)!==t&&r)throw Error(A(425))}function gc(){}var qp=null,Up=null;function Wp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hp=typeof setTimeout=="function"?setTimeout:void 0,H0=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,V0=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(K0)}:Hp;function K0(e){setTimeout(function(){throw e})}function zl(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),zs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);zs(t)}function Ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),zt="__reactFiber$"+ui,$s="__reactProps$"+ui,ir="__reactContainer$"+ui,Vp="__reactEvents$"+ui,J0="__reactListeners$"+ui,G0="__reactHandles$"+ui;function un(e){var t=e[zt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ir]||r[zt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Vf(e);e!==null;){if(r=e[zt])return r;e=Vf(e)}return t}e=r,r=e.parentNode}return null}function ra(e){return e=e[zt]||e[ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function $c(e){return e[$s]||null}var Kp=[],Ln=-1;function zr(e){return{current:e}}function ae(e){0>Ln||(e.current=Kp[Ln],Kp[Ln]=null,Ln--)}function re(e,t){Ln++,Kp[Ln]=e.current,e.current=t}var Dr={},We=zr(Dr),Ze=zr(!1),vn=Dr;function Qn(e,t){var r=e.type.contextTypes;if(!r)return Dr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function et(e){return e=e.childContextTypes,e!=null}function mc(){ae(Ze),ae(We)}function Kf(e,t,r){if(We.current!==Dr)throw Error(A(168));re(We,t),re(Ze,r)}function AS(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(A(108,Dw(e)||"Unknown",i));return pe({},r,n)}function yc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dr,vn=We.current,re(We,e),re(Ze,Ze.current),!0}function Jf(e,t,r){var n=e.stateNode;if(!n)throw Error(A(169));r?(e=AS(e,t,vn),n.__reactInternalMemoizedMergedChildContext=e,ae(Ze),ae(We),re(We,e)):ae(Ze),re(Ze,r)}var Qt=null,qc=!1,Ll=!1;function bS(e){Qt===null?Qt=[e]:Qt.push(e)}function Q0(e){qc=!0,bS(e)}function Lr(){if(!Ll&&Qt!==null){Ll=!0;var e=0,t=te;try{var r=Qt;for(te=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Qt=null,qc=!1}catch(i){throw Qt!==null&&(Qt=Qt.slice(e+1)),eS(Hd,Lr),i}finally{te=t,Ll=!1}}return null}var jn=[],Bn=0,Sc=null,Cc=0,vt=[],gt=0,gn=null,Xt=1,Yt="";function sn(e,t){jn[Bn++]=Cc,jn[Bn++]=Sc,Sc=e,Cc=t}function kS(e,t,r){vt[gt++]=Xt,vt[gt++]=Yt,vt[gt++]=gn,gn=e;var n=Xt;e=Yt;var i=32-At(n)-1;n&=~(1<<i),r+=1;var o=32-At(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Xt=1<<32-At(t)+i|r<<i|n,Yt=o+e}else Xt=1<<o|r<<i|n,Yt=e}function eh(e){e.return!==null&&(sn(e,1),kS(e,1,0))}function th(e){for(;e===Sc;)Sc=jn[--Bn],jn[Bn]=null,Cc=jn[--Bn],jn[Bn]=null;for(;e===gn;)gn=vt[--gt],vt[gt]=null,Yt=vt[--gt],vt[gt]=null,Xt=vt[--gt],vt[gt]=null}var st=null,ot=null,ce=!1,_t=null;function OS(e,t){var r=mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Gf(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,st=e,ot=Ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,st=e,ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=gn!==null?{id:Xt,overflow:Yt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,st=e,ot=null,!0):!1;default:return!1}}function Jp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gp(e){if(ce){var t=ot;if(t){var r=t;if(!Gf(e,t)){if(Jp(e))throw Error(A(418));t=Ir(r.nextSibling);var n=st;t&&Gf(e,t)?OS(n,r):(e.flags=e.flags&-4097|2,ce=!1,st=e)}}else{if(Jp(e))throw Error(A(418));e.flags=e.flags&-4097|2,ce=!1,st=e}}}function Qf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;st=e}function ka(e){if(e!==st)return!1;if(!ce)return Qf(e),ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wp(e.type,e.memoizedProps)),t&&(t=ot)){if(Jp(e))throw MS(),Error(A(418));for(;t;)OS(e,t),t=Ir(t.nextSibling)}if(Qf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ot=Ir(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ot=null}}else ot=st?Ir(e.stateNode.nextSibling):null;return!0}function MS(){for(var e=ot;e;)e=Ir(e.nextSibling)}function Xn(){ot=st=null,ce=!1}function rh(e){_t===null?_t=[e]:_t.push(e)}var X0=cr.ReactCurrentBatchConfig;function Tt(e,t){if(e&&e.defaultProps){t=pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Pc=zr(null),Rc=null,Fn=null,nh=null;function ih(){nh=Fn=Rc=null}function oh(e){var t=Pc.current;ae(Pc),e._currentValue=t}function Qp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Kn(e,t){Rc=e,nh=Fn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ye=!0),e.firstContext=null)}function Ct(e){var t=e._currentValue;if(nh!==e)if(e={context:e,memoizedValue:t,next:null},Fn===null){if(Rc===null)throw Error(A(308));Fn=e,Rc.dependencies={lanes:0,firstContext:e}}else Fn=Fn.next=e;return t}var ln=null;function sh(e){ln===null?ln=[e]:ln.push(e)}function DS(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,sh(t)):(r.next=i.next,i.next=r),t.interleaved=r,or(e,n)}function or(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vr=!1;function ah(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function er(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _r(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,X&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,or(e,r)}return i=n.interleaved,i===null?(t.next=t,sh(n)):(t.next=i.next,i.next=t),n.interleaved=t,or(e,r)}function Ja(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Vd(e,r)}}function Xf(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ec(e,t,r,n){var i=e.updateQueue;vr=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var l=e.alternate;l!==null&&(l=l.updateQueue,s=l.lastBaseUpdate,s!==a&&(s===null?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;a=0,l=u=c=null,s=o;do{var d=s.lane,h=s.eventTime;if((n&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,g=s;switch(d=t,h=r,g.tag){case 1:if(f=g.payload,typeof f=="function"){p=f.call(h,p,d);break e}p=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=g.payload,d=typeof f=="function"?f.call(h,p,d):f,d==null)break e;p=pe({},p,d);break e;case 2:vr=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},l===null?(u=l=h,c=p):l=l.next=h,a|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(l===null&&(c=p),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);yn|=a,e.lanes=a,e.memoizedState=p}}function Yf(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(A(191,i));i.call(n)}}}var xS=new Dy.Component().refs;function Xp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Uc={isMounted:function(e){return(e=e._reactInternals)?wn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ke(),i=br(e),o=er(n,i);o.payload=t,r!=null&&(o.callback=r),t=_r(e,o,i),t!==null&&(bt(t,e,i,n),Ja(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ke(),i=br(e),o=er(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=_r(e,o,i),t!==null&&(bt(t,e,i,n),Ja(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ke(),n=br(e),i=er(r,n);i.tag=2,t!=null&&(i.callback=t),t=_r(e,i,n),t!==null&&(bt(t,e,n,r),Ja(t,e,n))}};function Zf(e,t,r,n,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!js(r,n)||!js(i,o):!0}function zS(e,t,r){var n=!1,i=Dr,o=t.contextType;return typeof o=="object"&&o!==null?o=Ct(o):(i=et(t)?vn:We.current,n=t.contextTypes,o=(n=n!=null)?Qn(e,i):Dr),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Uc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ev(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Uc.enqueueReplaceState(t,t.state,null)}function Yp(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=xS,ah(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ct(o):(o=et(t)?vn:We.current,i.context=Qn(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Xp(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Uc.enqueueReplaceState(i,i.state,null),Ec(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ri(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var n=r.stateNode}if(!n)throw Error(A(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;s===xS&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,e))}return e}function Oa(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tv(e){var t=e._init;return t(e._payload)}function LS(e){function t(v,m){if(e){var S=v.deletions;S===null?(v.deletions=[m],v.flags|=16):S.push(m)}}function r(v,m){if(!e)return null;for(;m!==null;)t(v,m),m=m.sibling;return null}function n(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function i(v,m){return v=kr(v,m),v.index=0,v.sibling=null,v}function o(v,m,S){return v.index=S,e?(S=v.alternate,S!==null?(S=S.index,S<m?(v.flags|=2,m):S):(v.flags|=2,m)):(v.flags|=1048576,m)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,m,S,P){return m===null||m.tag!==6?(m=Wl(S,v.mode,P),m.return=v,m):(m=i(m,S),m.return=v,m)}function c(v,m,S,P){var R=S.type;return R===Mn?l(v,m,S.props.children,P,S.key):m!==null&&(m.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===fr&&tv(R)===m.type)?(P=i(m,S.props),P.ref=Ri(v,m,S),P.return=v,P):(P=ec(S.type,S.key,S.props,null,v.mode,P),P.ref=Ri(v,m,S),P.return=v,P)}function u(v,m,S,P){return m===null||m.tag!==4||m.stateNode.containerInfo!==S.containerInfo||m.stateNode.implementation!==S.implementation?(m=Hl(S,v.mode,P),m.return=v,m):(m=i(m,S.children||[]),m.return=v,m)}function l(v,m,S,P,R){return m===null||m.tag!==7?(m=fn(S,v.mode,P,R),m.return=v,m):(m=i(m,S),m.return=v,m)}function p(v,m,S){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Wl(""+m,v.mode,S),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ca:return S=ec(m.type,m.key,m.props,null,v.mode,S),S.ref=Ri(v,null,m),S.return=v,S;case On:return m=Hl(m,v.mode,S),m.return=v,m;case fr:var P=m._init;return p(v,P(m._payload),S)}if(fs(m)||mi(m))return m=fn(m,v.mode,S,null),m.return=v,m;Oa(v,m)}return null}function d(v,m,S,P){var R=m!==null?m.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:s(v,m,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ca:return S.key===R?c(v,m,S,P):null;case On:return S.key===R?u(v,m,S,P):null;case fr:return R=S._init,d(v,m,R(S._payload),P)}if(fs(S)||mi(S))return R!==null?null:l(v,m,S,P,null);Oa(v,S)}return null}function h(v,m,S,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(S)||null,s(m,v,""+P,R);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ca:return v=v.get(P.key===null?S:P.key)||null,c(m,v,P,R);case On:return v=v.get(P.key===null?S:P.key)||null,u(m,v,P,R);case fr:var w=P._init;return h(v,m,S,w(P._payload),R)}if(fs(P)||mi(P))return v=v.get(S)||null,l(m,v,P,R,null);Oa(m,P)}return null}function f(v,m,S,P){for(var R=null,w=null,I=m,E=m=0,N=null;I!==null&&E<S.length;E++){I.index>E?(N=I,I=null):N=I.sibling;var D=d(v,I,S[E],P);if(D===null){I===null&&(I=N);break}e&&I&&D.alternate===null&&t(v,I),m=o(D,m,E),w===null?R=D:w.sibling=D,w=D,I=N}if(E===S.length)return r(v,I),ce&&sn(v,E),R;if(I===null){for(;E<S.length;E++)I=p(v,S[E],P),I!==null&&(m=o(I,m,E),w===null?R=I:w.sibling=I,w=I);return ce&&sn(v,E),R}for(I=n(v,I);E<S.length;E++)N=h(I,v,E,S[E],P),N!==null&&(e&&N.alternate!==null&&I.delete(N.key===null?E:N.key),m=o(N,m,E),w===null?R=N:w.sibling=N,w=N);return e&&I.forEach(function(G){return t(v,G)}),ce&&sn(v,E),R}function g(v,m,S,P){var R=mi(S);if(typeof R!="function")throw Error(A(150));if(S=R.call(S),S==null)throw Error(A(151));for(var w=R=null,I=m,E=m=0,N=null,D=S.next();I!==null&&!D.done;E++,D=S.next()){I.index>E?(N=I,I=null):N=I.sibling;var G=d(v,I,D.value,P);if(G===null){I===null&&(I=N);break}e&&I&&G.alternate===null&&t(v,I),m=o(G,m,E),w===null?R=G:w.sibling=G,w=G,I=N}if(D.done)return r(v,I),ce&&sn(v,E),R;if(I===null){for(;!D.done;E++,D=S.next())D=p(v,D.value,P),D!==null&&(m=o(D,m,E),w===null?R=D:w.sibling=D,w=D);return ce&&sn(v,E),R}for(I=n(v,I);!D.done;E++,D=S.next())D=h(I,v,E,D.value,P),D!==null&&(e&&D.alternate!==null&&I.delete(D.key===null?E:D.key),m=o(D,m,E),w===null?R=D:w.sibling=D,w=D);return e&&I.forEach(function(L){return t(v,L)}),ce&&sn(v,E),R}function y(v,m,S,P){if(typeof S=="object"&&S!==null&&S.type===Mn&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ca:e:{for(var R=S.key,w=m;w!==null;){if(w.key===R){if(R=S.type,R===Mn){if(w.tag===7){r(v,w.sibling),m=i(w,S.props.children),m.return=v,v=m;break e}}else if(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===fr&&tv(R)===w.type){r(v,w.sibling),m=i(w,S.props),m.ref=Ri(v,w,S),m.return=v,v=m;break e}r(v,w);break}else t(v,w);w=w.sibling}S.type===Mn?(m=fn(S.props.children,v.mode,P,S.key),m.return=v,v=m):(P=ec(S.type,S.key,S.props,null,v.mode,P),P.ref=Ri(v,m,S),P.return=v,v=P)}return a(v);case On:e:{for(w=S.key;m!==null;){if(m.key===w)if(m.tag===4&&m.stateNode.containerInfo===S.containerInfo&&m.stateNode.implementation===S.implementation){r(v,m.sibling),m=i(m,S.children||[]),m.return=v,v=m;break e}else{r(v,m);break}else t(v,m);m=m.sibling}m=Hl(S,v.mode,P),m.return=v,v=m}return a(v);case fr:return w=S._init,y(v,m,w(S._payload),P)}if(fs(S))return f(v,m,S,P);if(mi(S))return g(v,m,S,P);Oa(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,m!==null&&m.tag===6?(r(v,m.sibling),m=i(m,S),m.return=v,v=m):(r(v,m),m=Wl(S,v.mode,P),m.return=v,v=m),a(v)):r(v,m)}return y}var Yn=LS(!0),jS=LS(!1),na={},Ft=zr(na),qs=zr(na),Us=zr(na);function pn(e){if(e===na)throw Error(A(174));return e}function ch(e,t){switch(re(Us,t),re(qs,e),re(Ft,na),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kp(t,e)}ae(Ft),re(Ft,t)}function Zn(){ae(Ft),ae(qs),ae(Us)}function BS(e){pn(Us.current);var t=pn(Ft.current),r=kp(t,e.type);t!==r&&(re(qs,e),re(Ft,r))}function uh(e){qs.current===e&&(ae(Ft),ae(qs))}var ue=zr(0);function wc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jl=[];function lh(){for(var e=0;e<jl.length;e++)jl[e]._workInProgressVersionPrimary=null;jl.length=0}var Ga=cr.ReactCurrentDispatcher,Bl=cr.ReactCurrentBatchConfig,mn=0,le=null,Se=null,Pe=null,Tc=!1,Ts=!1,Ws=0,Y0=0;function xe(){throw Error(A(321))}function ph(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!kt(e[r],t[r]))return!1;return!0}function dh(e,t,r,n,i,o){if(mn=o,le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ga.current=e===null||e.memoizedState===null?rT:nT,e=r(n,i),Ts){o=0;do{if(Ts=!1,Ws=0,25<=o)throw Error(A(301));o+=1,Pe=Se=null,t.updateQueue=null,Ga.current=iT,e=r(n,i)}while(Ts)}if(Ga.current=Ic,t=Se!==null&&Se.next!==null,mn=0,Pe=Se=le=null,Tc=!1,t)throw Error(A(300));return e}function hh(){var e=Ws!==0;return Ws=0,e}function xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?le.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function Pt(){if(Se===null){var e=le.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Pe===null?le.memoizedState:Pe.next;if(t!==null)Pe=t,Se=e;else{if(e===null)throw Error(A(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Pe===null?le.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function Hs(e,t){return typeof t=="function"?t(e):t}function Fl(e){var t=Pt(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=Se,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,c=null,u=o;do{var l=u.lane;if((mn&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var p={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(s=c=p,a=n):c=c.next=p,le.lanes|=l,yn|=l}u=u.next}while(u!==null&&u!==o);c===null?a=n:c.next=s,kt(n,t.memoizedState)||(Ye=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,le.lanes|=o,yn|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function $l(e){var t=Pt(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);kt(o,t.memoizedState)||(Ye=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function FS(){}function $S(e,t){var r=le,n=Pt(),i=t(),o=!kt(n.memoizedState,i);if(o&&(n.memoizedState=i,Ye=!0),n=n.queue,fh(WS.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Pe!==null&&Pe.memoizedState.tag&1){if(r.flags|=2048,Vs(9,US.bind(null,r,n,i,t),void 0,null),Re===null)throw Error(A(349));mn&30||qS(r,t,i)}return i}function qS(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=le.updateQueue,t===null?(t={lastEffect:null,stores:null},le.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function US(e,t,r,n){t.value=r,t.getSnapshot=n,HS(t)&&VS(e)}function WS(e,t,r){return r(function(){HS(t)&&VS(e)})}function HS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!kt(e,r)}catch{return!0}}function VS(e){var t=or(e,1);t!==null&&bt(t,e,1,-1)}function rv(e){var t=xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t.queue=e,e=e.dispatch=tT.bind(null,le,e),[t.memoizedState,e]}function Vs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=le.updateQueue,t===null?(t={lastEffect:null,stores:null},le.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function KS(){return Pt().memoizedState}function Qa(e,t,r,n){var i=xt();le.flags|=e,i.memoizedState=Vs(1|t,r,void 0,n===void 0?null:n)}function Wc(e,t,r,n){var i=Pt();n=n===void 0?null:n;var o=void 0;if(Se!==null){var a=Se.memoizedState;if(o=a.destroy,n!==null&&ph(n,a.deps)){i.memoizedState=Vs(t,r,o,n);return}}le.flags|=e,i.memoizedState=Vs(1|t,r,o,n)}function nv(e,t){return Qa(8390656,8,e,t)}function fh(e,t){return Wc(2048,8,e,t)}function JS(e,t){return Wc(4,2,e,t)}function GS(e,t){return Wc(4,4,e,t)}function QS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function XS(e,t,r){return r=r!=null?r.concat([e]):null,Wc(4,4,QS.bind(null,t,e),r)}function vh(){}function YS(e,t){var r=Pt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ph(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ZS(e,t){var r=Pt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ph(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function eC(e,t,r){return mn&21?(kt(r,t)||(r=nS(),le.lanes|=r,yn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ye=!0),e.memoizedState=r)}function Z0(e,t){var r=te;te=r!==0&&4>r?r:4,e(!0);var n=Bl.transition;Bl.transition={};try{e(!1),t()}finally{te=r,Bl.transition=n}}function tC(){return Pt().memoizedState}function eT(e,t,r){var n=br(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},rC(e))nC(t,r);else if(r=DS(e,t,r,n),r!==null){var i=Ke();bt(r,e,n,i),iC(r,t,n)}}function tT(e,t,r){var n=br(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(rC(e))nC(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,kt(s,a)){var c=t.interleaved;c===null?(i.next=i,sh(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=DS(e,t,i,n),r!==null&&(i=Ke(),bt(r,e,n,i),iC(r,t,n))}}function rC(e){var t=e.alternate;return e===le||t!==null&&t===le}function nC(e,t){Ts=Tc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function iC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Vd(e,r)}}var Ic={readContext:Ct,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},rT={readContext:Ct,useCallback:function(e,t){return xt().memoizedState=[e,t===void 0?null:t],e},useContext:Ct,useEffect:nv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Qa(4194308,4,QS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Qa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qa(4,2,e,t)},useMemo:function(e,t){var r=xt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=eT.bind(null,le,e),[n.memoizedState,e]},useRef:function(e){var t=xt();return e={current:e},t.memoizedState=e},useState:rv,useDebugValue:vh,useDeferredValue:function(e){return xt().memoizedState=e},useTransition:function(){var e=rv(!1),t=e[0];return e=Z0.bind(null,e[1]),xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=le,i=xt();if(ce){if(r===void 0)throw Error(A(407));r=r()}else{if(r=t(),Re===null)throw Error(A(349));mn&30||qS(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,nv(WS.bind(null,n,o,e),[e]),n.flags|=2048,Vs(9,US.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=xt(),t=Re.identifierPrefix;if(ce){var r=Yt,n=Xt;r=(n&~(1<<32-At(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ws++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Y0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nT={readContext:Ct,useCallback:YS,useContext:Ct,useEffect:fh,useImperativeHandle:XS,useInsertionEffect:JS,useLayoutEffect:GS,useMemo:ZS,useReducer:Fl,useRef:KS,useState:function(){return Fl(Hs)},useDebugValue:vh,useDeferredValue:function(e){var t=Pt();return eC(t,Se.memoizedState,e)},useTransition:function(){var e=Fl(Hs)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:FS,useSyncExternalStore:$S,useId:tC,unstable_isNewReconciler:!1},iT={readContext:Ct,useCallback:YS,useContext:Ct,useEffect:fh,useImperativeHandle:XS,useInsertionEffect:JS,useLayoutEffect:GS,useMemo:ZS,useReducer:$l,useRef:KS,useState:function(){return $l(Hs)},useDebugValue:vh,useDeferredValue:function(e){var t=Pt();return Se===null?t.memoizedState=e:eC(t,Se.memoizedState,e)},useTransition:function(){var e=$l(Hs)[0],t=Pt().memoizedState;return[e,t]},useMutableSource:FS,useSyncExternalStore:$S,useId:tC,unstable_isNewReconciler:!1};function ei(e,t){try{var r="",n=t;do r+=Mw(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function ql(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Zp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var oT=typeof WeakMap=="function"?WeakMap:Map;function oC(e,t,r){r=er(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ac||(Ac=!0,ud=n),Zp(e,t)},r}function sC(e,t,r){r=er(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Zp(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Zp(e,t),typeof n!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function iv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new oT;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=ST.bind(null,e,t,r),t.then(e,e))}function ov(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sv(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=er(-1,1),t.tag=2,_r(r,t,1))),r.lanes|=1),e)}var sT=cr.ReactCurrentOwner,Ye=!1;function Ve(e,t,r,n){t.child=e===null?jS(t,null,r,n):Yn(t,e.child,r,n)}function av(e,t,r,n,i){r=r.render;var o=t.ref;return Kn(t,i),n=dh(e,t,r,n,o,i),r=hh(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,sr(e,t,i)):(ce&&r&&eh(t),t.flags|=1,Ve(e,t,n,i),t.child)}function cv(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!Eh(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,aC(e,t,o,n,i)):(e=ec(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:js,r(a,n)&&e.ref===t.ref)return sr(e,t,i)}return t.flags|=1,e=kr(o,n),e.ref=t.ref,e.return=t,t.child=e}function aC(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(js(o,n)&&e.ref===t.ref)if(Ye=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(Ye=!0);else return t.lanes=e.lanes,sr(e,t,i)}return ed(e,t,r,n,i)}function cC(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(qn,nt),nt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,re(qn,nt),nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,re(qn,nt),nt|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,re(qn,nt),nt|=n;return Ve(e,t,i,r),t.child}function uC(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ed(e,t,r,n,i){var o=et(r)?vn:We.current;return o=Qn(t,o),Kn(t,i),r=dh(e,t,r,n,o,i),n=hh(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,sr(e,t,i)):(ce&&n&&eh(t),t.flags|=1,Ve(e,t,r,i),t.child)}function uv(e,t,r,n,i){if(et(r)){var o=!0;yc(t)}else o=!1;if(Kn(t,i),t.stateNode===null)Xa(e,t),zS(t,r,n),Yp(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ct(u):(u=et(r)?vn:We.current,u=Qn(t,u));var l=r.getDerivedStateFromProps,p=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||c!==u)&&ev(t,a,n,u),vr=!1;var d=t.memoizedState;a.state=d,Ec(t,n,a,i),c=t.memoizedState,s!==n||d!==c||Ze.current||vr?(typeof l=="function"&&(Xp(t,r,l,n),c=t.memoizedState),(s=vr||Zf(t,r,s,n,d,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,NS(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Tt(t.type,s),a.props=u,p=t.pendingProps,d=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ct(c):(c=et(r)?vn:We.current,c=Qn(t,c));var h=r.getDerivedStateFromProps;(l=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==p||d!==c)&&ev(t,a,n,c),vr=!1,d=t.memoizedState,a.state=d,Ec(t,n,a,i);var f=t.memoizedState;s!==p||d!==f||Ze.current||vr?(typeof h=="function"&&(Xp(t,r,h,n),f=t.memoizedState),(u=vr||Zf(t,r,u,n,d,f,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,f,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,f,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return td(e,t,r,n,o,i)}function td(e,t,r,n,i,o){uC(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&Jf(t,r,!1),sr(e,t,o);n=t.stateNode,sT.current=t;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Yn(t,e.child,null,o),t.child=Yn(t,null,s,o)):Ve(e,t,s,o),t.memoizedState=n.state,i&&Jf(t,r,!0),t.child}function lC(e){var t=e.stateNode;t.pendingContext?Kf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kf(e,t.context,!1),ch(e,t.containerInfo)}function lv(e,t,r,n,i){return Xn(),rh(i),t.flags|=256,Ve(e,t,r,n),t.child}var rd={dehydrated:null,treeContext:null,retryLane:0};function nd(e){return{baseLanes:e,cachePool:null,transitions:null}}function pC(e,t,r){var n=t.pendingProps,i=ue.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),re(ue,i&1),e===null)return Gp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Kc(a,n,0,null),e=fn(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=nd(r),t.memoizedState=rd,e):gh(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return aT(e,t,a,n,s,i,r);if(o){o=n.fallback,a=t.mode,i=e.child,s=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=kr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=kr(s,o):(o=fn(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?nd(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=rd,n}return o=e.child,e=o.sibling,n=kr(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function gh(e,t){return t=Kc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ma(e,t,r,n){return n!==null&&rh(n),Yn(t,e.child,null,r),e=gh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aT(e,t,r,n,i,o,a){if(r)return t.flags&256?(t.flags&=-257,n=ql(Error(A(422))),Ma(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=Kc({mode:"visible",children:n.children},i,0,null),o=fn(o,i,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Yn(t,e.child,null,a),t.child.memoizedState=nd(a),t.memoizedState=rd,o);if(!(t.mode&1))return Ma(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(A(419)),n=ql(o,n,void 0),Ma(e,t,a,n)}if(s=(a&e.childLanes)!==0,Ye||s){if(n=Re,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,or(e,i),bt(n,e,i,-1))}return Rh(),n=ql(Error(A(421))),Ma(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=CT.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ot=Ir(i.nextSibling),st=t,ce=!0,_t=null,e!==null&&(vt[gt++]=Xt,vt[gt++]=Yt,vt[gt++]=gn,Xt=e.id,Yt=e.overflow,gn=t),t=gh(t,n.children),t.flags|=4096,t)}function pv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Qp(e.return,t,r)}function Ul(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function dC(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(Ve(e,t,n.children,r),n=ue.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pv(e,r,t);else if(e.tag===19)pv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(re(ue,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&wc(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Ul(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&wc(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Ul(t,!0,r,null,o);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),yn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,r=kr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=kr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function cT(e,t,r){switch(t.tag){case 3:lC(t),Xn();break;case 5:BS(t);break;case 1:et(t.type)&&yc(t);break;case 4:ch(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;re(Pc,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(re(ue,ue.current&1),t.flags|=128,null):r&t.child.childLanes?pC(e,t,r):(re(ue,ue.current&1),e=sr(e,t,r),e!==null?e.sibling:null);re(ue,ue.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return dC(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),re(ue,ue.current),n)break;return null;case 22:case 23:return t.lanes=0,cC(e,t,r)}return sr(e,t,r)}var hC,id,fC,vC;hC=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};id=function(){};fC=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,pn(Ft.current);var o=null;switch(r){case"input":i=Ip(e,i),n=Ip(e,n),o=[];break;case"select":i=pe({},i,{value:void 0}),n=pe({},n,{value:void 0}),o=[];break;case"textarea":i=bp(e,i),n=bp(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=gc)}Op(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Os.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==s&&(c!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Os.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&se("scroll",e),o||s===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};vC=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ei(e,t){if(!ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function uT(e,t,r){var n=t.pendingProps;switch(th(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return et(t.type)&&mc(),ze(t),null;case 3:return n=t.stateNode,Zn(),ae(Ze),ae(We),lh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ka(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_t!==null&&(dd(_t),_t=null))),id(e,t),ze(t),null;case 5:uh(t);var i=pn(Us.current);if(r=t.type,e!==null&&t.stateNode!=null)fC(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(A(166));return ze(t),null}if(e=pn(Ft.current),ka(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[zt]=t,n[$s]=o,e=(t.mode&1)!==0,r){case"dialog":se("cancel",n),se("close",n);break;case"iframe":case"object":case"embed":se("load",n);break;case"video":case"audio":for(i=0;i<gs.length;i++)se(gs[i],n);break;case"source":se("error",n);break;case"img":case"image":case"link":se("error",n),se("load",n);break;case"details":se("toggle",n);break;case"input":Cf(n,o),se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},se("invalid",n);break;case"textarea":Rf(n,o),se("invalid",n)}Op(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&ba(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&ba(n.textContent,s,e),i=["children",""+s]):Os.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&se("scroll",n)}switch(r){case"input":Pa(n),Pf(n,o,!0);break;case"textarea":Pa(n),Ef(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=gc)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qy(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[zt]=t,e[$s]=n,hC(e,t,!1,!1),t.stateNode=e;e:{switch(a=Mp(r,n),r){case"dialog":se("cancel",e),se("close",e),i=n;break;case"iframe":case"object":case"embed":se("load",e),i=n;break;case"video":case"audio":for(i=0;i<gs.length;i++)se(gs[i],e);i=n;break;case"source":se("error",e),i=n;break;case"img":case"image":case"link":se("error",e),se("load",e),i=n;break;case"details":se("toggle",e),i=n;break;case"input":Cf(e,n),i=Ip(e,n),se("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=pe({},n,{value:void 0}),se("invalid",e);break;case"textarea":Rf(e,n),i=bp(e,n),se("invalid",e);break;default:i=n}Op(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?Hy(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Uy(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ms(e,c):typeof c=="number"&&Ms(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Os.hasOwnProperty(o)?c!=null&&o==="onScroll"&&se("scroll",e):c!=null&&Fd(e,o,c,a))}switch(r){case"input":Pa(e),Pf(e,n,!1);break;case"textarea":Pa(e),Ef(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Mr(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Un(e,!!n.multiple,o,!1):n.defaultValue!=null&&Un(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=gc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ze(t),null;case 6:if(e&&t.stateNode!=null)vC(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(A(166));if(r=pn(Us.current),pn(Ft.current),ka(t)){if(n=t.stateNode,r=t.memoizedProps,n[zt]=t,(o=n.nodeValue!==r)&&(e=st,e!==null))switch(e.tag){case 3:ba(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ba(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[zt]=t,t.stateNode=n}return ze(t),null;case 13:if(ae(ue),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ce&&ot!==null&&t.mode&1&&!(t.flags&128))MS(),Xn(),t.flags|=98560,o=!1;else if(o=ka(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(A(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(A(317));o[zt]=t}else Xn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ze(t),o=!1}else _t!==null&&(dd(_t),_t=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ue.current&1?Ce===0&&(Ce=3):Rh())),t.updateQueue!==null&&(t.flags|=4),ze(t),null);case 4:return Zn(),id(e,t),e===null&&Bs(t.stateNode.containerInfo),ze(t),null;case 10:return oh(t.type._context),ze(t),null;case 17:return et(t.type)&&mc(),ze(t),null;case 19:if(ae(ue),o=t.memoizedState,o===null)return ze(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)Ei(o,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=wc(e),a!==null){for(t.flags|=128,Ei(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return re(ue,ue.current&1|2),t.child}e=e.sibling}o.tail!==null&&ve()>ti&&(t.flags|=128,n=!0,Ei(o,!1),t.lanes=4194304)}else{if(!n)if(e=wc(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ei(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ce)return ze(t),null}else 2*ve()-o.renderingStartTime>ti&&r!==1073741824&&(t.flags|=128,n=!0,Ei(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ve(),t.sibling=null,r=ue.current,re(ue,n?r&1|2:r&1),t):(ze(t),null);case 22:case 23:return Ph(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?nt&1073741824&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function lT(e,t){switch(th(t),t.tag){case 1:return et(t.type)&&mc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zn(),ae(Ze),ae(We),lh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uh(t),null;case 13:if(ae(ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Xn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(ue),null;case 4:return Zn(),null;case 10:return oh(t.type._context),null;case 22:case 23:return Ph(),null;case 24:return null;default:return null}}var Da=!1,Ue=!1,pT=typeof WeakSet=="function"?WeakSet:Set,k=null;function $n(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){he(e,t,n)}else r.current=null}function od(e,t,r){try{r()}catch(n){he(e,t,n)}}var dv=!1;function dT(e,t){if(qp=hc,e=SS(),Zd(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,c=-1,u=0,l=0,p=e,d=null;t:for(;;){for(var h;p!==r||i!==0&&p.nodeType!==3||(s=a+i),p!==o||n!==0&&p.nodeType!==3||(c=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===e)break t;if(d===r&&++u===i&&(s=a),d===o&&++l===n&&(c=a),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}r=s===-1||c===-1?null:{start:s,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Up={focusedElem:e,selectionRange:r},hc=!1,k=t;k!==null;)if(t=k,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,k=e;else for(;k!==null;){t=k;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var g=f.memoizedProps,y=f.memoizedState,v=t.stateNode,m=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Tt(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(P){he(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,k=e;break}k=t.return}return f=dv,dv=!1,f}function Is(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&od(t,r,o)}i=i.next}while(i!==n)}}function Hc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function sd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function gC(e){var t=e.alternate;t!==null&&(e.alternate=null,gC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zt],delete t[$s],delete t[Vp],delete t[J0],delete t[G0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mC(e){return e.tag===5||e.tag===3||e.tag===4}function hv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ad(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=gc));else if(n!==4&&(e=e.child,e!==null))for(ad(e,t,r),e=e.sibling;e!==null;)ad(e,t,r),e=e.sibling}function cd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(cd(e,t,r),e=e.sibling;e!==null;)cd(e,t,r),e=e.sibling}var _e=null,It=!1;function lr(e,t,r){for(r=r.child;r!==null;)yC(e,t,r),r=r.sibling}function yC(e,t,r){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Lc,r)}catch{}switch(r.tag){case 5:Ue||$n(r,t);case 6:var n=_e,i=It;_e=null,lr(e,t,r),_e=n,It=i,_e!==null&&(It?(e=_e,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):_e.removeChild(r.stateNode));break;case 18:_e!==null&&(It?(e=_e,r=r.stateNode,e.nodeType===8?zl(e.parentNode,r):e.nodeType===1&&zl(e,r),zs(e)):zl(_e,r.stateNode));break;case 4:n=_e,i=It,_e=r.stateNode.containerInfo,It=!0,lr(e,t,r),_e=n,It=i;break;case 0:case 11:case 14:case 15:if(!Ue&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&od(r,t,a),i=i.next}while(i!==n)}lr(e,t,r);break;case 1:if(!Ue&&($n(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){he(r,t,s)}lr(e,t,r);break;case 21:lr(e,t,r);break;case 22:r.mode&1?(Ue=(n=Ue)||r.memoizedState!==null,lr(e,t,r),Ue=n):lr(e,t,r);break;default:lr(e,t,r)}}function fv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new pT),t.forEach(function(n){var i=PT.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function wt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:_e=s.stateNode,It=!1;break e;case 3:_e=s.stateNode.containerInfo,It=!0;break e;case 4:_e=s.stateNode.containerInfo,It=!0;break e}s=s.return}if(_e===null)throw Error(A(160));yC(o,a,i),_e=null,It=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){he(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)SC(t,e),t=t.sibling}function SC(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wt(t,e),Nt(e),n&4){try{Is(3,e,e.return),Hc(3,e)}catch(g){he(e,e.return,g)}try{Is(5,e,e.return)}catch(g){he(e,e.return,g)}}break;case 1:wt(t,e),Nt(e),n&512&&r!==null&&$n(r,r.return);break;case 5:if(wt(t,e),Nt(e),n&512&&r!==null&&$n(r,r.return),e.flags&32){var i=e.stateNode;try{Ms(i,"")}catch(g){he(e,e.return,g)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&Fy(i,o),Mp(s,a);var u=Mp(s,o);for(a=0;a<c.length;a+=2){var l=c[a],p=c[a+1];l==="style"?Hy(i,p):l==="dangerouslySetInnerHTML"?Uy(i,p):l==="children"?Ms(i,p):Fd(i,l,p,u)}switch(s){case"input":_p(i,o);break;case"textarea":$y(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Un(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?Un(i,!!o.multiple,o.defaultValue,!0):Un(i,!!o.multiple,o.multiple?[]:"",!1))}i[$s]=o}catch(g){he(e,e.return,g)}}break;case 6:if(wt(t,e),Nt(e),n&4){if(e.stateNode===null)throw Error(A(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){he(e,e.return,g)}}break;case 3:if(wt(t,e),Nt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{zs(t.containerInfo)}catch(g){he(e,e.return,g)}break;case 4:wt(t,e),Nt(e);break;case 13:wt(t,e),Nt(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Sh=ve())),n&4&&fv(e);break;case 22:if(l=r!==null&&r.memoizedState!==null,e.mode&1?(Ue=(u=Ue)||l,wt(t,e),Ue=u):wt(t,e),Nt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!l&&e.mode&1)for(k=e,l=e.child;l!==null;){for(p=k=l;k!==null;){switch(d=k,h=d.child,d.tag){case 0:case 11:case 14:case 15:Is(4,d,d.return);break;case 1:$n(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){n=d,r=d.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){he(n,r,g)}}break;case 5:$n(d,d.return);break;case 22:if(d.memoizedState!==null){gv(p);continue}}h!==null?(h.return=d,k=h):gv(p)}l=l.sibling}e:for(l=null,p=e;;){if(p.tag===5){if(l===null){l=p;try{i=p.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=Wy("display",a))}catch(g){he(e,e.return,g)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){he(e,e.return,g)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:wt(t,e),Nt(e),n&4&&fv(e);break;case 21:break;default:wt(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(mC(r)){var n=r;break e}r=r.return}throw Error(A(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ms(i,""),n.flags&=-33);var o=hv(e);cd(e,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=hv(e);ad(e,s,a);break;default:throw Error(A(161))}}catch(c){he(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hT(e,t,r){k=e,CC(e)}function CC(e,t,r){for(var n=(e.mode&1)!==0;k!==null;){var i=k,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Da;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||Ue;s=Da;var u=Ue;if(Da=a,(Ue=c)&&!u)for(k=i;k!==null;)a=k,c=a.child,a.tag===22&&a.memoizedState!==null?mv(i):c!==null?(c.return=a,k=c):mv(i);for(;o!==null;)k=o,CC(o),o=o.sibling;k=i,Da=s,Ue=u}vv(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,k=o):vv(e)}}function vv(e){for(;k!==null;){var t=k;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ue||Hc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ue)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Tt(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Yf(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Yf(t,a,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&zs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Ue||t.flags&512&&sd(t)}catch(d){he(t,t.return,d)}}if(t===e){k=null;break}if(r=t.sibling,r!==null){r.return=t.return,k=r;break}k=t.return}}function gv(e){for(;k!==null;){var t=k;if(t===e){k=null;break}var r=t.sibling;if(r!==null){r.return=t.return,k=r;break}k=t.return}}function mv(e){for(;k!==null;){var t=k;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Hc(4,t)}catch(c){he(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){he(t,i,c)}}var o=t.return;try{sd(t)}catch(c){he(t,o,c)}break;case 5:var a=t.return;try{sd(t)}catch(c){he(t,a,c)}}}catch(c){he(t,t.return,c)}if(t===e){k=null;break}var s=t.sibling;if(s!==null){s.return=t.return,k=s;break}k=t.return}}var fT=Math.ceil,_c=cr.ReactCurrentDispatcher,mh=cr.ReactCurrentOwner,yt=cr.ReactCurrentBatchConfig,X=0,Re=null,me=null,be=0,nt=0,qn=zr(0),Ce=0,Ks=null,yn=0,Vc=0,yh=0,_s=null,Xe=null,Sh=0,ti=1/0,Gt=null,Ac=!1,ud=null,Ar=null,Na=!1,Pr=null,bc=0,As=0,ld=null,Ya=-1,Za=0;function Ke(){return X&6?ve():Ya!==-1?Ya:Ya=ve()}function br(e){return e.mode&1?X&2&&be!==0?be&-be:X0.transition!==null?(Za===0&&(Za=nS()),Za):(e=te,e!==0||(e=window.event,e=e===void 0?16:lS(e.type)),e):1}function bt(e,t,r,n){if(50<As)throw As=0,ld=null,Error(A(185));ea(e,r,n),(!(X&2)||e!==Re)&&(e===Re&&(!(X&2)&&(Vc|=r),Ce===4&&Sr(e,be)),tt(e,n),r===1&&X===0&&!(t.mode&1)&&(ti=ve()+500,qc&&Lr()))}function tt(e,t){var r=e.callbackNode;Xw(e,t);var n=dc(e,e===Re?be:0);if(n===0)r!==null&&If(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&If(r),t===1)e.tag===0?Q0(yv.bind(null,e)):bS(yv.bind(null,e)),V0(function(){!(X&6)&&Lr()}),r=null;else{switch(iS(n)){case 1:r=Hd;break;case 4:r=tS;break;case 16:r=pc;break;case 536870912:r=rS;break;default:r=pc}r=AC(r,PC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function PC(e,t){if(Ya=-1,Za=0,X&6)throw Error(A(327));var r=e.callbackNode;if(Jn()&&e.callbackNode!==r)return null;var n=dc(e,e===Re?be:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=kc(e,n);else{t=n;var i=X;X|=2;var o=EC();(Re!==e||be!==t)&&(Gt=null,ti=ve()+500,hn(e,t));do try{mT();break}catch(s){RC(e,s)}while(!0);ih(),_c.current=o,X=i,me!==null?t=0:(Re=null,be=0,t=Ce)}if(t!==0){if(t===2&&(i=Lp(e),i!==0&&(n=i,t=pd(e,i))),t===1)throw r=Ks,hn(e,0),Sr(e,n),tt(e,ve()),r;if(t===6)Sr(e,n);else{if(i=e.current.alternate,!(n&30)&&!vT(i)&&(t=kc(e,n),t===2&&(o=Lp(e),o!==0&&(n=o,t=pd(e,o))),t===1))throw r=Ks,hn(e,0),Sr(e,n),tt(e,ve()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(A(345));case 2:an(e,Xe,Gt);break;case 3:if(Sr(e,n),(n&130023424)===n&&(t=Sh+500-ve(),10<t)){if(dc(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ke(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hp(an.bind(null,e,Xe,Gt),t);break}an(e,Xe,Gt);break;case 4:if(Sr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-At(n);o=1<<a,a=t[a],a>i&&(i=a),n&=~o}if(n=i,n=ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*fT(n/1960))-n,10<n){e.timeoutHandle=Hp(an.bind(null,e,Xe,Gt),n);break}an(e,Xe,Gt);break;case 5:an(e,Xe,Gt);break;default:throw Error(A(329))}}}return tt(e,ve()),e.callbackNode===r?PC.bind(null,e):null}function pd(e,t){var r=_s;return e.current.memoizedState.isDehydrated&&(hn(e,t).flags|=256),e=kc(e,t),e!==2&&(t=Xe,Xe=r,t!==null&&dd(t)),e}function dd(e){Xe===null?Xe=e:Xe.push.apply(Xe,e)}function vT(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!kt(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sr(e,t){for(t&=~yh,t&=~Vc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-At(t),n=1<<r;e[r]=-1,t&=~n}}function yv(e){if(X&6)throw Error(A(327));Jn();var t=dc(e,0);if(!(t&1))return tt(e,ve()),null;var r=kc(e,t);if(e.tag!==0&&r===2){var n=Lp(e);n!==0&&(t=n,r=pd(e,n))}if(r===1)throw r=Ks,hn(e,0),Sr(e,t),tt(e,ve()),r;if(r===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,an(e,Xe,Gt),tt(e,ve()),null}function Ch(e,t){var r=X;X|=1;try{return e(t)}finally{X=r,X===0&&(ti=ve()+500,qc&&Lr())}}function Sn(e){Pr!==null&&Pr.tag===0&&!(X&6)&&Jn();var t=X;X|=1;var r=yt.transition,n=te;try{if(yt.transition=null,te=1,e)return e()}finally{te=n,yt.transition=r,X=t,!(X&6)&&Lr()}}function Ph(){nt=qn.current,ae(qn)}function hn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,H0(r)),me!==null)for(r=me.return;r!==null;){var n=r;switch(th(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mc();break;case 3:Zn(),ae(Ze),ae(We),lh();break;case 5:uh(n);break;case 4:Zn();break;case 13:ae(ue);break;case 19:ae(ue);break;case 10:oh(n.type._context);break;case 22:case 23:Ph()}r=r.return}if(Re=e,me=e=kr(e.current,null),be=nt=t,Ce=0,Ks=null,yh=Vc=yn=0,Xe=_s=null,ln!==null){for(t=0;t<ln.length;t++)if(r=ln[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}ln=null}return e}function RC(e,t){do{var r=me;try{if(ih(),Ga.current=Ic,Tc){for(var n=le.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Tc=!1}if(mn=0,Pe=Se=le=null,Ts=!1,Ws=0,mh.current=null,r===null||r.return===null){Ce=1,Ks=t,me=null;break}e:{var o=e,a=r.return,s=r,c=t;if(t=be,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=s,p=l.tag;if(!(l.mode&1)&&(p===0||p===11||p===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=ov(a);if(h!==null){h.flags&=-257,sv(h,a,s,o,t),h.mode&1&&iv(o,u,t),t=h,c=u;var f=t.updateQueue;if(f===null){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}else{if(!(t&1)){iv(o,u,t),Rh();break e}c=Error(A(426))}}else if(ce&&s.mode&1){var y=ov(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),sv(y,a,s,o,t),rh(ei(c,s));break e}}o=c=ei(c,s),Ce!==4&&(Ce=2),_s===null?_s=[o]:_s.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=oC(o,c,t);Xf(o,v);break e;case 1:s=c;var m=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ar===null||!Ar.has(S)))){o.flags|=65536,t&=-t,o.lanes|=t;var P=sC(o,s,t);Xf(o,P);break e}}o=o.return}while(o!==null)}TC(r)}catch(R){t=R,me===r&&r!==null&&(me=r=r.return);continue}break}while(!0)}function EC(){var e=_c.current;return _c.current=Ic,e===null?Ic:e}function Rh(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Re===null||!(yn&268435455)&&!(Vc&268435455)||Sr(Re,be)}function kc(e,t){var r=X;X|=2;var n=EC();(Re!==e||be!==t)&&(Gt=null,hn(e,t));do try{gT();break}catch(i){RC(e,i)}while(!0);if(ih(),X=r,_c.current=n,me!==null)throw Error(A(261));return Re=null,be=0,Ce}function gT(){for(;me!==null;)wC(me)}function mT(){for(;me!==null&&!qw();)wC(me)}function wC(e){var t=_C(e.alternate,e,nt);e.memoizedProps=e.pendingProps,t===null?TC(e):me=t,mh.current=null}function TC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=lT(r,t),r!==null){r.flags&=32767,me=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,me=null;return}}else if(r=uT(r,t,nt),r!==null){me=r;return}if(t=t.sibling,t!==null){me=t;return}me=t=e}while(t!==null);Ce===0&&(Ce=5)}function an(e,t,r){var n=te,i=yt.transition;try{yt.transition=null,te=1,yT(e,t,r,n)}finally{yt.transition=i,te=n}return null}function yT(e,t,r,n){do Jn();while(Pr!==null);if(X&6)throw Error(A(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(Yw(e,o),e===Re&&(me=Re=null,be=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Na||(Na=!0,AC(pc,function(){return Jn(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=yt.transition,yt.transition=null;var a=te;te=1;var s=X;X|=4,mh.current=null,dT(e,r),SC(r,e),j0(Up),hc=!!qp,Up=qp=null,e.current=r,hT(r),Uw(),X=s,te=a,yt.transition=o}else e.current=r;if(Na&&(Na=!1,Pr=e,bc=i),o=e.pendingLanes,o===0&&(Ar=null),Vw(r.stateNode),tt(e,ve()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ac)throw Ac=!1,e=ud,ud=null,e;return bc&1&&e.tag!==0&&Jn(),o=e.pendingLanes,o&1?e===ld?As++:(As=0,ld=e):As=0,Lr(),null}function Jn(){if(Pr!==null){var e=iS(bc),t=yt.transition,r=te;try{if(yt.transition=null,te=16>e?16:e,Pr===null)var n=!1;else{if(e=Pr,Pr=null,bc=0,X&6)throw Error(A(331));var i=X;for(X|=4,k=e.current;k!==null;){var o=k,a=o.child;if(k.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var u=s[c];for(k=u;k!==null;){var l=k;switch(l.tag){case 0:case 11:case 15:Is(8,l,o)}var p=l.child;if(p!==null)p.return=l,k=p;else for(;k!==null;){l=k;var d=l.sibling,h=l.return;if(gC(l),l===u){k=null;break}if(d!==null){d.return=h,k=d;break}k=h}}}var f=o.alternate;if(f!==null){var g=f.child;if(g!==null){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}k=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,k=a;else e:for(;k!==null;){if(o=k,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Is(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,k=v;break e}k=o.return}}var m=e.current;for(k=m;k!==null;){a=k;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,k=S;else e:for(a=m;k!==null;){if(s=k,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Hc(9,s)}}catch(R){he(s,s.return,R)}if(s===a){k=null;break e}var P=s.sibling;if(P!==null){P.return=s.return,k=P;break e}k=s.return}}if(X=i,Lr(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Lc,e)}catch{}n=!0}return n}finally{te=r,yt.transition=t}}return!1}function Sv(e,t,r){t=ei(r,t),t=oC(e,t,1),e=_r(e,t,1),t=Ke(),e!==null&&(ea(e,1,t),tt(e,t))}function he(e,t,r){if(e.tag===3)Sv(e,e,r);else for(;t!==null;){if(t.tag===3){Sv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ar===null||!Ar.has(n))){e=ei(r,e),e=sC(t,e,1),t=_r(t,e,1),e=Ke(),t!==null&&(ea(t,1,e),tt(t,e));break}}t=t.return}}function ST(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ke(),e.pingedLanes|=e.suspendedLanes&r,Re===e&&(be&r)===r&&(Ce===4||Ce===3&&(be&130023424)===be&&500>ve()-Sh?hn(e,0):yh|=r),tt(e,t)}function IC(e,t){t===0&&(e.mode&1?(t=wa,wa<<=1,!(wa&130023424)&&(wa=4194304)):t=1);var r=Ke();e=or(e,t),e!==null&&(ea(e,t,r),tt(e,r))}function CT(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),IC(e,r)}function PT(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(t),IC(e,r)}var _C;_C=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ze.current)Ye=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ye=!1,cT(e,t,r);Ye=!!(e.flags&131072)}else Ye=!1,ce&&t.flags&1048576&&kS(t,Cc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Xa(e,t),e=t.pendingProps;var i=Qn(t,We.current);Kn(t,r),i=dh(null,t,n,e,i,r);var o=hh();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,et(n)?(o=!0,yc(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ah(t),i.updater=Uc,t.stateNode=i,i._reactInternals=t,Yp(t,n,e,r),t=td(null,t,n,!0,o,r)):(t.tag=0,ce&&o&&eh(t),Ve(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Xa(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=ET(n),e=Tt(n,e),i){case 0:t=ed(null,t,n,e,r);break e;case 1:t=uv(null,t,n,e,r);break e;case 11:t=av(null,t,n,e,r);break e;case 14:t=cv(null,t,n,Tt(n.type,e),r);break e}throw Error(A(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Tt(n,i),ed(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Tt(n,i),uv(e,t,n,i,r);case 3:e:{if(lC(t),e===null)throw Error(A(387));n=t.pendingProps,o=t.memoizedState,i=o.element,NS(e,t),Ec(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=ei(Error(A(423)),t),t=lv(e,t,n,r,i);break e}else if(n!==i){i=ei(Error(A(424)),t),t=lv(e,t,n,r,i);break e}else for(ot=Ir(t.stateNode.containerInfo.firstChild),st=t,ce=!0,_t=null,r=jS(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xn(),n===i){t=sr(e,t,r);break e}Ve(e,t,n,r)}t=t.child}return t;case 5:return BS(t),e===null&&Gp(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Wp(n,i)?a=null:o!==null&&Wp(n,o)&&(t.flags|=32),uC(e,t),Ve(e,t,a,r),t.child;case 6:return e===null&&Gp(t),null;case 13:return pC(e,t,r);case 4:return ch(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Yn(t,null,n,r):Ve(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Tt(n,i),av(e,t,n,i,r);case 7:return Ve(e,t,t.pendingProps,r),t.child;case 8:return Ve(e,t,t.pendingProps.children,r),t.child;case 12:return Ve(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,re(Pc,n._currentValue),n._currentValue=a,o!==null)if(kt(o.value,a)){if(o.children===i.children&&!Ze.current){t=sr(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=er(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Qp(o.return,r,t),s.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(A(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),Qp(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ve(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Kn(t,r),i=Ct(i),n=n(i),t.flags|=1,Ve(e,t,n,r),t.child;case 14:return n=t.type,i=Tt(n,t.pendingProps),i=Tt(n.type,i),cv(e,t,n,i,r);case 15:return aC(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Tt(n,i),Xa(e,t),t.tag=1,et(n)?(e=!0,yc(t)):e=!1,Kn(t,r),zS(t,n,i),Yp(t,n,i,r),td(null,t,n,!0,e,r);case 19:return dC(e,t,r);case 22:return cC(e,t,r)}throw Error(A(156,t.tag))};function AC(e,t){return eS(e,t)}function RT(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(e,t,r,n){return new RT(e,t,r,n)}function Eh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ET(e){if(typeof e=="function")return Eh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qd)return 11;if(e===Ud)return 14}return 2}function kr(e,t){var r=e.alternate;return r===null?(r=mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ec(e,t,r,n,i,o){var a=2;if(n=e,typeof e=="function")Eh(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Mn:return fn(r.children,i,o,t);case $d:a=8,i|=8;break;case Rp:return e=mt(12,r,t,i|2),e.elementType=Rp,e.lanes=o,e;case Ep:return e=mt(13,r,t,i),e.elementType=Ep,e.lanes=o,e;case wp:return e=mt(19,r,t,i),e.elementType=wp,e.lanes=o,e;case Ly:return Kc(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xy:a=10;break e;case zy:a=9;break e;case qd:a=11;break e;case Ud:a=14;break e;case fr:a=16,n=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=mt(a,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function fn(e,t,r,n){return e=mt(7,e,n,t),e.lanes=r,e}function Kc(e,t,r,n){return e=mt(22,e,n,t),e.elementType=Ly,e.lanes=r,e.stateNode={isHidden:!1},e}function Wl(e,t,r){return e=mt(6,e,null,t),e.lanes=r,e}function Hl(e,t,r){return t=mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wT(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tl(0),this.expirationTimes=Tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wh(e,t,r,n,i,o,a,s,c){return e=new wT(e,t,r,s,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=mt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(o),e}function TT(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:On,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function bC(e){if(!e)return Dr;e=e._reactInternals;e:{if(wn(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var r=e.type;if(et(r))return AS(e,r,t)}return t}function kC(e,t,r,n,i,o,a,s,c){return e=wh(r,n,!0,e,i,o,a,s,c),e.context=bC(null),r=e.current,n=Ke(),i=br(r),o=er(n,i),o.callback=t??null,_r(r,o,i),e.current.lanes=i,ea(e,i,n),tt(e,n),e}function Jc(e,t,r,n){var i=t.current,o=Ke(),a=br(i);return r=bC(r),t.context===null?t.context=r:t.pendingContext=r,t=er(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=_r(i,t,a),e!==null&&(bt(e,i,a,o),Ja(e,i,a)),a}function Oc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Th(e,t){Cv(e,t),(e=e.alternate)&&Cv(e,t)}function IT(){return null}var OC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ih(e){this._internalRoot=e}Gc.prototype.render=Ih.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Jc(e,t,null,null)};Gc.prototype.unmount=Ih.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sn(function(){Jc(null,e,null,null)}),t[ir]=null}};function Gc(e){this._internalRoot=e}Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=aS();e={blockedOn:null,target:e,priority:t};for(var r=0;r<yr.length&&t!==0&&t<yr[r].priority;r++);yr.splice(r,0,e),r===0&&uS(e)}};function _h(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pv(){}function _T(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var u=Oc(a);o.call(u)}}var a=kC(t,n,e,0,null,!1,!1,"",Pv);return e._reactRootContainer=a,e[ir]=a.current,Bs(e.nodeType===8?e.parentNode:e),Sn(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=Oc(c);s.call(u)}}var c=wh(e,0,!1,null,null,!1,!1,"",Pv);return e._reactRootContainer=c,e[ir]=c.current,Bs(e.nodeType===8?e.parentNode:e),Sn(function(){Jc(t,c,r,n)}),c}function Xc(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=Oc(a);s.call(c)}}Jc(t,a,e,i)}else a=_T(r,t,e,i,n);return Oc(a)}oS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=vs(t.pendingLanes);r!==0&&(Vd(t,r|1),tt(t,ve()),!(X&6)&&(ti=ve()+500,Lr()))}break;case 13:Sn(function(){var n=or(e,1);if(n!==null){var i=Ke();bt(n,e,1,i)}}),Th(e,1)}};Kd=function(e){if(e.tag===13){var t=or(e,134217728);if(t!==null){var r=Ke();bt(t,e,134217728,r)}Th(e,134217728)}};sS=function(e){if(e.tag===13){var t=br(e),r=or(e,t);if(r!==null){var n=Ke();bt(r,e,t,n)}Th(e,t)}};aS=function(){return te};cS=function(e,t){var r=te;try{return te=e,t()}finally{te=r}};Np=function(e,t,r){switch(t){case"input":if(_p(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=$c(n);if(!i)throw Error(A(90));By(n),_p(n,i)}}}break;case"textarea":$y(e,r);break;case"select":t=r.value,t!=null&&Un(e,!!r.multiple,t,!1)}};Jy=Ch;Gy=Sn;var AT={usingClientEntryPoint:!1,Events:[ra,zn,$c,Vy,Ky,Ch]},wi={findFiberByHostInstance:un,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},bT={bundleType:wi.bundleType,version:wi.version,rendererPackageName:wi.rendererPackageName,rendererConfig:wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Yy(e),e===null?null:e.stateNode},findFiberByHostInstance:wi.findFiberByHostInstance||IT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xa.isDisabled&&xa.supportsFiber)try{Lc=xa.inject(bT),Bt=xa}catch{}}ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AT;ct.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_h(t))throw Error(A(200));return TT(e,t,null,r)};ct.createRoot=function(e,t){if(!_h(e))throw Error(A(299));var r=!1,n="",i=OC;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=wh(e,1,!1,null,null,r,!1,n,i),e[ir]=t.current,Bs(e.nodeType===8?e.parentNode:e),new Ih(t)};ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=Yy(t),e=e===null?null:e.stateNode,e};ct.flushSync=function(e){return Sn(e)};ct.hydrate=function(e,t,r){if(!Qc(t))throw Error(A(200));return Xc(null,e,t,!0,r)};ct.hydrateRoot=function(e,t,r){if(!_h(e))throw Error(A(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=OC;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=kC(t,null,e,1,r??null,i,!1,o,a),e[ir]=t.current,Bs(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Gc(t)};ct.render=function(e,t,r){if(!Qc(t))throw Error(A(200));return Xc(null,e,t,!1,r)};ct.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(A(40));return e._reactRootContainer?(Sn(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[ir]=null})}),!0):!1};ct.unstable_batchedUpdates=Ch;ct.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qc(r))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Xc(e,t,r,!1,n)};ct.version="18.2.0-next-9e3b772b8-20220608";function MC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MC)}catch(e){console.error(e)}}MC(),ky.exports=ct;var ia=ky.exports;const kT=Sy(ia);var Rv=ia;Cp.createRoot=Rv.createRoot,Cp.hydrateRoot=Rv.hydrateRoot;const OT={theme:"system",setTheme:()=>null},MT=C.createContext(OT);function DT({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme",...n}){const[i,o]=C.useState(()=>localStorage.getItem(r)||t);C.useEffect(()=>{const s=window.document.documentElement;if(s.classList.remove("light","dark"),i==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";s.classList.add(c);return}s.classList.add(i)},[i]);const a={theme:i,setTheme:s=>{localStorage.setItem(r,s),o(s)}};return W.jsx(MT.Provider,{...n,value:a,children:e})}const Ah=C.createContext({displayToast:e=>{},navigateTo:e=>{}});var ht=(e=>(e[e.Home=0]="Home",e[e.Login=1]="Login",e[e.Speech=2]="Speech",e))(ht||{});function NT(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var xT=["color"],zT=C.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,i=NT(e,xT);return C.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),C.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))});function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ee.apply(this,arguments)}function it(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function LT(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function DC(...e){return t=>e.forEach(r=>LT(r,t))}function Cn(...e){return C.useCallback(DC(...e),e)}function NC(e,t=[]){let r=[];function n(o,a){const s=C.createContext(a),c=r.length;r=[...r,a];function u(p){const{scope:d,children:h,...f}=p,g=(d==null?void 0:d[e][c])||s,y=C.useMemo(()=>f,Object.values(f));return C.createElement(g.Provider,{value:y},h)}function l(p,d){const h=(d==null?void 0:d[e][c])||s,f=C.useContext(h);if(f)return f;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,l]}const i=()=>{const o=r.map(a=>C.createContext(a));return function(s){const c=(s==null?void 0:s[e])||o;return C.useMemo(()=>({[`__scope${e}`]:{...s,[e]:c}}),[s,c])}};return i.scopeName=e,[n,jT(i,...t)]}function jT(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=n.reduce((s,{useScope:c,scopeName:u})=>{const p=c(o)[`__scope${u}`];return{...s,...p}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}const Js=C.forwardRef((e,t)=>{const{children:r,...n}=e,i=C.Children.toArray(r),o=i.find(FT);if(o){const a=o.props.children,s=i.map(c=>c===o?C.Children.count(a)>1?C.Children.only(null):C.isValidElement(a)?a.props.children:null:c);return C.createElement(hd,Ee({},n,{ref:t}),C.isValidElement(a)?C.cloneElement(a,void 0,s):null)}return C.createElement(hd,Ee({},n,{ref:t}),r)});Js.displayName="Slot";const hd=C.forwardRef((e,t)=>{const{children:r,...n}=e;return C.isValidElement(r)?C.cloneElement(r,{...$T(n,r.props),ref:t?DC(t,r.ref):r.ref}):C.Children.count(r)>1?C.Children.only(null):null});hd.displayName="SlotClone";const BT=({children:e})=>C.createElement(C.Fragment,null,e);function FT(e){return C.isValidElement(e)&&e.type===BT}function $T(e,t){const r={...t};for(const n in t){const i=e[n],o=t[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{o(...s),i(...s)}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}function qT(e){const t=e+"CollectionProvider",[r,n]=NC(t),[i,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=h=>{const{scope:f,children:g}=h,y=dt.useRef(null),v=dt.useRef(new Map).current;return dt.createElement(i,{scope:f,itemMap:v,collectionRef:y},g)},s=e+"CollectionSlot",c=dt.forwardRef((h,f)=>{const{scope:g,children:y}=h,v=o(s,g),m=Cn(f,v.collectionRef);return dt.createElement(Js,{ref:m},y)}),u=e+"CollectionItemSlot",l="data-radix-collection-item",p=dt.forwardRef((h,f)=>{const{scope:g,children:y,...v}=h,m=dt.useRef(null),S=Cn(f,m),P=o(u,g);return dt.useEffect(()=>(P.itemMap.set(m,{ref:m,...v}),()=>void P.itemMap.delete(m))),dt.createElement(Js,{[l]:"",ref:S},y)});function d(h){const f=o(e+"CollectionConsumer",h);return dt.useCallback(()=>{const y=f.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${l}]`));return Array.from(f.itemMap.values()).sort((P,R)=>v.indexOf(P.ref.current)-v.indexOf(R.ref.current))},[f.collectionRef,f.itemMap])}return[{Provider:a,Slot:c,ItemSlot:p},d,n]}const UT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$t=UT.reduce((e,t)=>{const r=C.forwardRef((n,i)=>{const{asChild:o,...a}=n,s=o?Js:t;return C.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),C.createElement(s,Ee({},a,{ref:i}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function xC(e,t){e&&ia.flushSync(()=>e.dispatchEvent(t))}function ar(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function WT(e,t=globalThis==null?void 0:globalThis.document){const r=ar(e);C.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[r,t])}const fd="dismissableLayer.update",HT="dismissableLayer.pointerDownOutside",VT="dismissableLayer.focusOutside";let Ev;const zC=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),KT=C.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:s,onDismiss:c,...u}=e,l=C.useContext(zC),[p,d]=C.useState(null),h=(r=p==null?void 0:p.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,f]=C.useState({}),g=Cn(t,E=>d(E)),y=Array.from(l.layers),[v]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),m=y.indexOf(v),S=p?y.indexOf(p):-1,P=l.layersWithOutsidePointerEventsDisabled.size>0,R=S>=m,w=GT(E=>{const N=E.target,D=[...l.branches].some(G=>G.contains(N));!R||D||(o==null||o(E),s==null||s(E),E.defaultPrevented||c==null||c())},h),I=QT(E=>{const N=E.target;[...l.branches].some(G=>G.contains(N))||(a==null||a(E),s==null||s(E),E.defaultPrevented||c==null||c())},h);return WT(E=>{S===l.layers.size-1&&(i==null||i(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},h),C.useEffect(()=>{if(p)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Ev=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(p)),l.layers.add(p),wv(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Ev)}},[p,h,n,l]),C.useEffect(()=>()=>{p&&(l.layers.delete(p),l.layersWithOutsidePointerEventsDisabled.delete(p),wv())},[p,l]),C.useEffect(()=>{const E=()=>f({});return document.addEventListener(fd,E),()=>document.removeEventListener(fd,E)},[]),C.createElement($t.div,Ee({},u,{ref:g,style:{pointerEvents:P?R?"auto":"none":void 0,...e.style},onFocusCapture:it(e.onFocusCapture,I.onFocusCapture),onBlurCapture:it(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:it(e.onPointerDownCapture,w.onPointerDownCapture)}))}),JT=C.forwardRef((e,t)=>{const r=C.useContext(zC),n=C.useRef(null),i=Cn(t,n);return C.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),C.createElement($t.div,Ee({},e,{ref:i}))});function GT(e,t=globalThis==null?void 0:globalThis.document){const r=ar(e),n=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const o=s=>{if(s.target&&!n.current){let l=function(){LC(HT,r,u,{discrete:!0})};var c=l;const u={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function QT(e,t=globalThis==null?void 0:globalThis.document){const r=ar(e),n=C.useRef(!1);return C.useEffect(()=>{const i=o=>{o.target&&!n.current&&LC(VT,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function wv(){const e=new CustomEvent(fd);document.dispatchEvent(e)}function LC(e,t,r,{discrete:n}){const i=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?xC(i,o):i.dispatchEvent(o)}const XT=KT,YT=JT,ZT=C.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...i}=e;return n?kT.createPortal(C.createElement($t.div,Ee({},i,{ref:t})),n):null}),vd=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{};function e1(e,t){return C.useReducer((r,n)=>{const i=t[r][n];return i??r},e)}const jC=e=>{const{present:t,children:r}=e,n=t1(t),i=typeof r=="function"?r({present:n.isPresent}):C.Children.only(r),o=Cn(n.ref,i.ref);return typeof r=="function"||n.isPresent?C.cloneElement(i,{ref:o}):null};jC.displayName="Presence";function t1(e){const[t,r]=C.useState(),n=C.useRef({}),i=C.useRef(e),o=C.useRef("none"),a=e?"mounted":"unmounted",[s,c]=e1(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const u=za(n.current);o.current=s==="mounted"?u:"none"},[s]),vd(()=>{const u=n.current,l=i.current;if(l!==e){const d=o.current,h=za(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(l&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),vd(()=>{if(t){const u=p=>{const h=za(n.current).includes(p.animationName);p.target===t&&h&&ia.flushSync(()=>c("ANIMATION_END"))},l=p=>{p.target===t&&(o.current=za(n.current))};return t.addEventListener("animationstart",l),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",l),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:C.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function za(e){return(e==null?void 0:e.animationName)||"none"}function r1({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,i]=n1({defaultProp:t,onChange:r}),o=e!==void 0,a=o?e:n,s=ar(r),c=C.useCallback(u=>{if(o){const p=typeof u=="function"?u(e):u;p!==e&&s(p)}else i(u)},[o,e,i,s]);return[a,c]}function n1({defaultProp:e,onChange:t}){const r=C.useState(e),[n]=r,i=C.useRef(n),o=ar(t);return C.useEffect(()=>{i.current!==n&&(o(n),i.current=n)},[n,i,o]),r}const BC=C.forwardRef((e,t)=>C.createElement($t.span,Ee({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),FC="ToastProvider",[bh,i1,o1]=qT("Toast"),[$C,wD]=NC("Toast",[o1]),[s1,Yc]=$C(FC),qC=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=e,[s,c]=C.useState(null),[u,l]=C.useState(0),p=C.useRef(!1),d=C.useRef(!1);return C.createElement(bh.Provider,{scope:t},C.createElement(s1,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:o,toastCount:u,viewport:s,onViewportChange:c,onToastAdd:C.useCallback(()=>l(h=>h+1),[]),onToastRemove:C.useCallback(()=>l(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:d},a))};qC.propTypes={label(e){if(e.label&&typeof e.label=="string"&&!e.label.trim()){const t=`Invalid prop \`label\` supplied to \`${FC}\`. Expected non-empty \`string\`.`;return new Error(t)}return null}};const a1="ToastViewport",c1=["F8"],gd="toast.viewportPause",md="toast.viewportResume",u1=C.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=c1,label:i="Notifications ({hotkey})",...o}=e,a=Yc(a1,r),s=i1(r),c=C.useRef(null),u=C.useRef(null),l=C.useRef(null),p=C.useRef(null),d=Cn(t,p,a.onViewportChange),h=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),f=a.toastCount>0;C.useEffect(()=>{const y=v=>{var m;n.every(P=>v[P]||v.code===P)&&((m=p.current)===null||m===void 0||m.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),C.useEffect(()=>{const y=c.current,v=p.current;if(f&&y&&v){const m=()=>{if(!a.isClosePausedRef.current){const w=new CustomEvent(gd);v.dispatchEvent(w),a.isClosePausedRef.current=!0}},S=()=>{if(a.isClosePausedRef.current){const w=new CustomEvent(md);v.dispatchEvent(w),a.isClosePausedRef.current=!1}},P=w=>{!y.contains(w.relatedTarget)&&S()},R=()=>{y.contains(document.activeElement)||S()};return y.addEventListener("focusin",m),y.addEventListener("focusout",P),y.addEventListener("pointermove",m),y.addEventListener("pointerleave",R),window.addEventListener("blur",m),window.addEventListener("focus",S),()=>{y.removeEventListener("focusin",m),y.removeEventListener("focusout",P),y.removeEventListener("pointermove",m),y.removeEventListener("pointerleave",R),window.removeEventListener("blur",m),window.removeEventListener("focus",S)}}},[f,a.isClosePausedRef]);const g=C.useCallback(({tabbingDirection:y})=>{const m=s().map(S=>{const P=S.ref.current,R=[P,...T1(P)];return y==="forwards"?R:R.reverse()});return(y==="forwards"?m.reverse():m).flat()},[s]);return C.useEffect(()=>{const y=p.current;if(y){const v=m=>{const S=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!S){const E=document.activeElement,N=m.shiftKey;if(m.target===y&&N){var R;(R=u.current)===null||R===void 0||R.focus();return}const L=g({tabbingDirection:N?"backwards":"forwards"}),Y=L.findIndex(M=>M===E);if(Vl(L.slice(Y+1)))m.preventDefault();else{var w,I;N?(w=u.current)===null||w===void 0||w.focus():(I=l.current)===null||I===void 0||I.focus()}}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[s,g]),C.createElement(YT,{ref:c,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:f?void 0:"none"}},f&&C.createElement(Tv,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});Vl(y)}}),C.createElement(bh.Slot,{scope:r},C.createElement($t.ol,Ee({tabIndex:-1},o,{ref:d}))),f&&C.createElement(Tv,{ref:l,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});Vl(y)}}))}),l1="ToastFocusProxy",Tv=C.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,o=Yc(l1,r);return C.createElement(BC,Ee({"aria-hidden":!0,tabIndex:0},i,{ref:t,style:{position:"fixed"},onFocus:a=>{var s;const c=a.relatedTarget;!((s=o.viewport)!==null&&s!==void 0&&s.contains(c))&&n()}}))}),Zc="Toast",p1="toast.swipeStart",d1="toast.swipeMove",h1="toast.swipeCancel",f1="toast.swipeEnd",v1=C.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:o,...a}=e,[s=!0,c]=r1({prop:n,defaultProp:i,onChange:o});return C.createElement(jC,{present:r||s},C.createElement(UC,Ee({open:s},a,{ref:t,onClose:()=>c(!1),onPause:ar(e.onPause),onResume:ar(e.onResume),onSwipeStart:it(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:it(e.onSwipeMove,u=>{const{x:l,y:p}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${l}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:it(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:it(e.onSwipeEnd,u=>{const{x:l,y:p}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${l}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),c(!1)})})))}),[g1,m1]=$C(Zc,{onClose(){}}),UC=C.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:c,onResume:u,onSwipeStart:l,onSwipeMove:p,onSwipeCancel:d,onSwipeEnd:h,...f}=e,g=Yc(Zc,r),[y,v]=C.useState(null),m=Cn(t,M=>v(M)),S=C.useRef(null),P=C.useRef(null),R=i||g.duration,w=C.useRef(0),I=C.useRef(R),E=C.useRef(0),{onToastAdd:N,onToastRemove:D}=g,G=ar(()=>{var M;(y==null?void 0:y.contains(document.activeElement))&&((M=g.viewport)===null||M===void 0||M.focus()),a()}),L=C.useCallback(M=>{!M||M===1/0||(window.clearTimeout(E.current),w.current=new Date().getTime(),E.current=window.setTimeout(G,M))},[G]);C.useEffect(()=>{const M=g.viewport;if(M){const ne=()=>{L(I.current),u==null||u()},ie=()=>{const Ne=new Date().getTime()-w.current;I.current=I.current-Ne,window.clearTimeout(E.current),c==null||c()};return M.addEventListener(gd,ie),M.addEventListener(md,ne),()=>{M.removeEventListener(gd,ie),M.removeEventListener(md,ne)}}},[g.viewport,R,c,u,L]),C.useEffect(()=>{o&&!g.isClosePausedRef.current&&L(R)},[o,R,g.isClosePausedRef,L]),C.useEffect(()=>(N(),()=>D()),[N,D]);const Y=C.useMemo(()=>y?KC(y):null,[y]);return g.viewport?C.createElement(C.Fragment,null,Y&&C.createElement(y1,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0},Y),C.createElement(g1,{scope:r,onClose:G},ia.createPortal(C.createElement(bh.ItemSlot,{scope:r},C.createElement(XT,{asChild:!0,onEscapeKeyDown:it(s,()=>{g.isFocusedToastEscapeKeyDownRef.current||G(),g.isFocusedToastEscapeKeyDownRef.current=!1})},C.createElement($t.li,Ee({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection},f,{ref:m,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:it(e.onKeyDown,M=>{M.key==="Escape"&&(s==null||s(M.nativeEvent),M.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,G()))}),onPointerDown:it(e.onPointerDown,M=>{M.button===0&&(S.current={x:M.clientX,y:M.clientY})}),onPointerMove:it(e.onPointerMove,M=>{if(!S.current)return;const ne=M.clientX-S.current.x,ie=M.clientY-S.current.y,Ne=!!P.current,b=["left","right"].includes(g.swipeDirection),x=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,F=b?x(0,ne):0,Z=b?0:x(0,ie),ee=M.pointerType==="touch"?10:2,Et={x:F,y:Z},lt={originalEvent:M,delta:Et};Ne?(P.current=Et,La(d1,p,lt,{discrete:!1})):Iv(Et,g.swipeDirection,ee)?(P.current=Et,La(p1,l,lt,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(ne)>ee||Math.abs(ie)>ee)&&(S.current=null)}),onPointerUp:it(e.onPointerUp,M=>{const ne=P.current,ie=M.target;if(ie.hasPointerCapture(M.pointerId)&&ie.releasePointerCapture(M.pointerId),P.current=null,S.current=null,ne){const Ne=M.currentTarget,b={originalEvent:M,delta:ne};Iv(ne,g.swipeDirection,g.swipeThreshold)?La(f1,h,b,{discrete:!0}):La(h1,d,b,{discrete:!0}),Ne.addEventListener("click",x=>x.preventDefault(),{once:!0})}})})))),g.viewport))):null});UC.propTypes={type(e){if(e.type&&!["foreground","background"].includes(e.type)){const t=`Invalid prop \`type\` supplied to \`${Zc}\`. Expected \`foreground | background\`.`;return new Error(t)}return null}};const y1=e=>{const{__scopeToast:t,children:r,...n}=e,i=Yc(Zc,t),[o,a]=C.useState(!1),[s,c]=C.useState(!1);return E1(()=>a(!0)),C.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),s?null:C.createElement(ZT,{asChild:!0},C.createElement(BC,n,o&&C.createElement(C.Fragment,null,i.label," ",r)))},S1=C.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return C.createElement($t.div,Ee({},n,{ref:t}))}),C1=C.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return C.createElement($t.div,Ee({},n,{ref:t}))}),P1="ToastAction",WC=C.forwardRef((e,t)=>{const{altText:r,...n}=e;return r?C.createElement(VC,{altText:r,asChild:!0},C.createElement(HC,Ee({},n,{ref:t}))):null});WC.propTypes={altText(e){return e.altText?null:new Error(`Missing prop \`altText\` expected on \`${P1}\``)}};const R1="ToastClose",HC=C.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=m1(R1,r);return C.createElement(VC,{asChild:!0},C.createElement($t.button,Ee({type:"button"},n,{ref:t,onClick:it(e.onClick,i.onClose)})))}),VC=C.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return C.createElement($t.div,Ee({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0},i,{ref:t}))});function KC(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),w1(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...KC(n))}}),t}function La(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?xC(i,o):i.dispatchEvent(o)}const Iv=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),o=n>i;return t==="left"||t==="right"?o&&n>r:!o&&i>r};function E1(e=()=>{}){const t=ar(e);vd(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function w1(e){return e.nodeType===e.ELEMENT_NODE}function T1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Vl(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}const I1=qC,JC=u1,GC=v1,QC=S1,XC=C1,YC=WC,ZC=HC;function eP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=eP(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function _1(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=eP(e))&&(n&&(n+=" "),n+=t);return n}const _v=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,Av=_1,tP=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Av(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=t,a=Object.keys(i).map(u=>{const l=r==null?void 0:r[u],p=o==null?void 0:o[u];if(l===null)return null;const d=_v(l)||_v(p);return i[u][d]}),s=r&&Object.entries(r).reduce((u,l)=>{let[p,d]=l;return d===void 0||(u[p]=d),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,l)=>{let{class:p,className:d,...h}=l;return Object.entries(h).every(f=>{let[g,y]=f;return Array.isArray(y)?y.includes({...o,...s}[g]):{...o,...s}[g]===y})?[...u,p,d]:u},[]);return Av(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};function rP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=rP(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function A1(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=rP(e))&&(n&&(n+=" "),n+=t);return n}const kh="-";function b1(e){const t=O1(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;function i(a){const s=a.split(kh);return s[0]===""&&s.length!==1&&s.shift(),nP(s,t)||k1(a)}function o(a,s){const c=r[a]||[];return s&&n[a]?[...c,...n[a]]:c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function nP(e,t){var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?nP(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(kh);return(a=t.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId}const bv=/^\[(.+)\]$/;function k1(e){if(bv.test(e)){const t=bv.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function O1(e){const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return D1(Object.entries(e.classGroups),r).forEach(([o,a])=>{yd(a,n,o,t)}),n}function yd(e,t,r,n){e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:kv(t,i);o.classGroupId=r;return}if(typeof i=="function"){if(M1(i)){yd(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([o,a])=>{yd(a,kv(t,o),r,n)})})}function kv(e,t){let r=e;return t.split(kh).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function M1(e){return e.isThemeGetter}function D1(e,t){return t?e.map(([r,n])=>{const i=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[t+a,s])):o);return[r,i]}):e}function N1(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;function i(o,a){r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return i(o,a),a},set(o,a){r.has(o)?r.set(o,a):i(o,a)}}}const iP="!";function x1(e){const t=e.separator,r=t.length===1,n=t[0],i=t.length;return function(a){const s=[];let c=0,u=0,l;for(let g=0;g<a.length;g++){let y=a[g];if(c===0){if(y===n&&(r||a.slice(g,g+i)===t)){s.push(a.slice(u,g)),u=g+i;continue}if(y==="/"){l=g;continue}}y==="["?c++:y==="]"&&c--}const p=s.length===0?a:a.substring(u),d=p.startsWith(iP),h=d?p.substring(1):p,f=l&&l>u?l-u:void 0;return{modifiers:s,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}}}function z1(e){if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t}function L1(e){return{cache:N1(e.cacheSize),splitModifiers:x1(e),...b1(e)}}const j1=/\s+/;function B1(e,t){const{splitModifiers:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,o=new Set;return e.trim().split(j1).map(a=>{const{modifiers:s,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:l}=r(a);let p=n(l?u.substring(0,l):u),d=!!l;if(!p){if(!l)return{isTailwindClass:!1,originalClassName:a};if(p=n(u),!p)return{isTailwindClass:!1,originalClassName:a};d=!1}const h=z1(s).join(":");return{isTailwindClass:!0,modifierId:c?h+iP:h,classGroupId:p,originalClassName:a,hasPostfixModifier:d}}).reverse().filter(a=>{if(!a.isTailwindClass)return!0;const{modifierId:s,classGroupId:c,hasPostfixModifier:u}=a,l=s+c;return o.has(l)?!1:(o.add(l),i(c,u).forEach(p=>o.add(s+p)),!0)}).reverse().map(a=>a.originalClassName).join(" ")}function F1(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=oP(t))&&(n&&(n+=" "),n+=r);return n}function oP(e){if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=oP(e[n]))&&(r&&(r+=" "),r+=t);return r}function $1(e,...t){let r,n,i,o=a;function a(c){const u=t.reduce((l,p)=>p(l),e());return r=L1(u),n=r.cache.get,i=r.cache.set,o=s,s(c)}function s(c){const u=n(c);if(u)return u;const l=B1(c,r);return i(c,l),l}return function(){return o(F1.apply(null,arguments))}}function oe(e){const t=r=>r[e]||[];return t.isThemeGetter=!0,t}const sP=/^\[(?:([a-z-]+):)?(.+)\]$/i,q1=/^\d+\/\d+$/,U1=new Set(["px","full","screen"]),W1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,H1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,V1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,K1=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,J1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Wt(e){return dn(e)||U1.has(e)||q1.test(e)}function pr(e){return li(e,"length",rI)}function dn(e){return!!e&&!Number.isNaN(Number(e))}function ja(e){return li(e,"number",dn)}function Ti(e){return!!e&&Number.isInteger(Number(e))}function G1(e){return e.endsWith("%")&&dn(e.slice(0,-1))}function q(e){return sP.test(e)}function dr(e){return W1.test(e)}const Q1=new Set(["length","size","percentage"]);function X1(e){return li(e,Q1,aP)}function Y1(e){return li(e,"position",aP)}const Z1=new Set(["image","url"]);function eI(e){return li(e,Z1,iI)}function tI(e){return li(e,"",nI)}function Ii(){return!0}function li(e,t,r){const n=sP.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1}function rI(e){return H1.test(e)&&!V1.test(e)}function aP(){return!1}function nI(e){return K1.test(e)}function iI(e){return J1.test(e)}function oI(){const e=oe("colors"),t=oe("spacing"),r=oe("blur"),n=oe("brightness"),i=oe("borderColor"),o=oe("borderRadius"),a=oe("borderSpacing"),s=oe("borderWidth"),c=oe("contrast"),u=oe("grayscale"),l=oe("hueRotate"),p=oe("invert"),d=oe("gap"),h=oe("gradientColorStops"),f=oe("gradientColorStopPositions"),g=oe("inset"),y=oe("margin"),v=oe("opacity"),m=oe("padding"),S=oe("saturate"),P=oe("scale"),R=oe("sepia"),w=oe("skew"),I=oe("space"),E=oe("translate"),N=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",q,t],L=()=>[q,t],Y=()=>["",Wt,pr],M=()=>["auto",dn,q],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],Ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],b=()=>["start","end","center","between","around","evenly","stretch"],x=()=>["","0",q],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[dn,ja],ee=()=>[dn,q];return{cacheSize:500,separator:":",theme:{colors:[Ii],spacing:[Wt,pr],blur:["none","",dr,q],brightness:Z(),borderColor:[e],borderRadius:["none","","full",dr,q],borderSpacing:L(),borderWidth:Y(),contrast:Z(),grayscale:x(),hueRotate:ee(),invert:x(),gap:L(),gradientColorStops:[e],gradientColorStopPositions:[G1,pr],inset:G(),margin:G(),opacity:Z(),padding:L(),saturate:Z(),scale:Z(),sepia:x(),skew:ee(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",q]}],container:["container"],columns:[{columns:[dr]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),q]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ti,q]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",q]}],grow:[{grow:x()}],shrink:[{shrink:x()}],order:[{order:["first","last","none",Ti,q]}],"grid-cols":[{"grid-cols":[Ii]}],"col-start-end":[{col:["auto",{span:["full",Ti,q]},q]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Ii]}],"row-start-end":[{row:["auto",{span:[Ti,q]},q]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",q]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",q]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...b()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...b(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...b(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",q,t]}],"min-w":[{"min-w":[q,t,"min","max","fit"]}],"max-w":[{"max-w":[q,t,"none","full","min","max","fit","prose",{screen:[dr]},dr]}],h:[{h:[q,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[q,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[q,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[q,t,"auto","min","max","fit"]}],"font-size":[{text:["base",dr,pr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ja]}],"font-family":[{font:[Ii]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",q]}],"line-clamp":[{"line-clamp":["none",dn,ja]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Wt,q]}],"list-image":[{"list-image":["none",q]}],"list-style-type":[{list:["none","disc","decimal",q]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Wt,pr]}],"underline-offset":[{"underline-offset":["auto",Wt,q]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),Y1]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",X1]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eI]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:ie()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[Wt,q]}],"outline-w":[{outline:[Wt,pr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Wt,pr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",dr,tI]}],"shadow-color":[{shadow:[Ii]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":Ne()}],"bg-blend":[{"bg-blend":Ne()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",dr,q]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[l]}],invert:[{invert:[p]}],saturate:[{saturate:[S]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[l]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",q]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",q]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",q]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Ti,q]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",q]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",q]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",q]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Wt,pr,ja]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const sI=$1(oI);function jr(...e){return sI(A1(e))}const aI=I1,cP=C.forwardRef(({className:e,...t},r)=>W.jsx(JC,{ref:r,className:jr("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));cP.displayName=JC.displayName;const cI=tP("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),uP=C.forwardRef(({className:e,variant:t,...r},n)=>W.jsx(GC,{ref:n,className:jr(cI({variant:t}),e),...r}));uP.displayName=GC.displayName;const uI=C.forwardRef(({className:e,...t},r)=>W.jsx(YC,{ref:r,className:jr("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));uI.displayName=YC.displayName;const lP=C.forwardRef(({className:e,...t},r)=>W.jsx(ZC,{ref:r,className:jr("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:W.jsx(zT,{className:"h-4 w-4"})}));lP.displayName=ZC.displayName;const pP=C.forwardRef(({className:e,...t},r)=>W.jsx(QC,{ref:r,className:jr("text-sm font-semibold [&+div]:text-xs",e),...t}));pP.displayName=QC.displayName;const dP=C.forwardRef(({className:e,...t},r)=>W.jsx(XC,{ref:r,className:jr("text-sm opacity-90",e),...t}));dP.displayName=XC.displayName;const lI=1,pI=1e6;let Kl=0;function dI(){return Kl=(Kl+1)%Number.MAX_SAFE_INTEGER,Kl.toString()}const Jl=new Map,Ov=e=>{if(Jl.has(e))return;const t=setTimeout(()=>{Jl.delete(e),bs({type:"REMOVE_TOAST",toastId:e})},pI);Jl.set(e,t)},hI=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,lI)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Ov(r):e.toasts.forEach(n=>{Ov(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},tc=[];let rc={toasts:[]};function bs(e){rc=hI(rc,e),tc.forEach(t=>{t(rc)})}function fI({...e}){const t=dI(),r=i=>bs({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>bs({type:"DISMISS_TOAST",toastId:t});return bs({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:r}}function hP(){const[e,t]=C.useState(rc);return C.useEffect(()=>(tc.push(t),()=>{const r=tc.indexOf(t);r>-1&&tc.splice(r,1)}),[e]),{...e,toast:fI,dismiss:r=>bs({type:"DISMISS_TOAST",toastId:r})}}function vI(){const{toasts:e}=hP();return W.jsxs(aI,{children:[e.map(function({id:t,title:r,description:n,action:i,...o}){return W.jsxs(uP,{...o,children:[W.jsxs("div",{className:"grid gap-1",children:[r&&W.jsx(pP,{children:r}),n&&W.jsx(dP,{children:n})]}),i,W.jsx(lP,{})]},t)}),W.jsx(cP,{})]})}function gI(e={}){const{nonce:t,onScriptLoadSuccess:r,onScriptLoadError:n}=e,[i,o]=C.useState(!1),a=C.useRef(r);a.current=r;const s=C.useRef(n);return s.current=n,C.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=t,c.onload=()=>{var u;o(!0),(u=a.current)===null||u===void 0||u.call(a)},c.onerror=()=>{var u;o(!1),(u=s.current)===null||u===void 0||u.call(s)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[t]),i}const fP=C.createContext(null);function mI({clientId:e,nonce:t,onScriptLoadSuccess:r,onScriptLoadError:n,children:i}){const o=gI({nonce:t,onScriptLoadSuccess:r,onScriptLoadError:n}),a=C.useMemo(()=>({clientId:e,scriptLoadedSuccessfully:o}),[e,o]);return dt.createElement(fP.Provider,{value:a},i)}function yI(){const e=C.useContext(fP);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function SI(e){var t;return(t=e==null?void 0:e.clientId)!==null&&t!==void 0?t:e==null?void 0:e.client_id}const CI={large:40,medium:32,small:20};function PI({onSuccess:e,onError:t,useOneTap:r,promptMomentNotification:n,type:i="standard",theme:o="outline",size:a="large",text:s,shape:c,logo_alignment:u,width:l,locale:p,click_listener:d,containerProps:h,...f}){const g=C.useRef(null),{clientId:y,scriptLoadedSuccessfully:v}=yI(),m=C.useRef(e);m.current=e;const S=C.useRef(t);S.current=t;const P=C.useRef(n);return P.current=n,C.useEffect(()=>{var R,w,I,E,N,D,G,L,Y;if(v)return(I=(w=(R=window==null?void 0:window.google)===null||R===void 0?void 0:R.accounts)===null||w===void 0?void 0:w.id)===null||I===void 0||I.initialize({client_id:y,callback:M=>{var ne;if(!(M!=null&&M.credential))return(ne=S.current)===null||ne===void 0?void 0:ne.call(S);const{credential:ie,select_by:Ne}=M;m.current({credential:ie,clientId:SI(M),select_by:Ne})},...f}),(D=(N=(E=window==null?void 0:window.google)===null||E===void 0?void 0:E.accounts)===null||N===void 0?void 0:N.id)===null||D===void 0||D.renderButton(g.current,{type:i,theme:o,size:a,text:s,shape:c,logo_alignment:u,width:l,locale:p,click_listener:d}),r&&((Y=(L=(G=window==null?void 0:window.google)===null||G===void 0?void 0:G.accounts)===null||L===void 0?void 0:L.id)===null||Y===void 0||Y.prompt(P.current)),()=>{var M,ne,ie;r&&((ie=(ne=(M=window==null?void 0:window.google)===null||M===void 0?void 0:M.accounts)===null||ne===void 0?void 0:ne.id)===null||ie===void 0||ie.cancel())}},[y,v,r,i,o,a,s,c,u,l,p]),dt.createElement("div",{...h,ref:g,style:{height:CI[a],...h==null?void 0:h.style}})}class ms extends Error{}ms.prototype.name="InvalidTokenError";function RI(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function EI(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return RI(t)}catch{return atob(t)}}function Mv(e,t){if(typeof e!="string")throw new ms("Invalid token specified: must be a string");t||(t={});const r=t.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw new ms(`Invalid token specified: missing part #${r+1}`);let i;try{i=EI(n)}catch(o){throw new ms(`Invalid token specified: invalid base64 for part #${r+1} (${o.message})`)}try{return JSON.parse(i)}catch(o){throw new ms(`Invalid token specified: invalid json for part #${r+1} (${o.message})`)}}/*! js-cookie v3.0.5 | MIT */function Ba(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var wI={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Sd(e,t){function r(i,o,a){if(!(typeof document>"u")){a=Ba({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,a[c]!==!0&&(s+="="+a[c].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+s}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},s=0;s<o.length;s++){var c=o[s].split("="),u=c.slice(1).join("=");try{var l=decodeURIComponent(c[0]);if(a[l]=e.read(u,l),i===l)break}catch{}}return i?a[i]:a}}return Object.create({set:r,get:n,remove:function(i,o){r(i,"",Ba({},o,{expires:-1}))},withAttributes:function(i){return Sd(this.converter,Ba({},this.attributes,i))},withConverter:function(i){return Sd(Ba({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Dv=Sd(wI,{path:"/"});class Zt{constructor(t){this.token=t}static fromCookie(t){const r=Dv.get(t);if(r)return new Zt(r)}get isExpired(){const r=Mv(this.token).exp,n=Date.now()/1e3;return r?n>=r-30:!1}get expirationDate(){const t=Mv(this.token);return new Date(t.exp*1e3)}storeInCookie(t){Dv.set(t,this.token,{secure:!0,expires:this.expirationDate})}toString(){return this.token}}function vP(e,t){return function(){return e.apply(t,arguments)}}const{toString:TI}=Object.prototype,{getPrototypeOf:Oh}=Object,eu=(e=>t=>{const r=TI.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),qt=e=>(e=e.toLowerCase(),t=>eu(t)===e),tu=e=>t=>typeof t===e,{isArray:pi}=Array,Gs=tu("undefined");function II(e){return e!==null&&!Gs(e)&&e.constructor!==null&&!Gs(e.constructor)&&St(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gP=qt("ArrayBuffer");function _I(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&gP(e.buffer),t}const AI=tu("string"),St=tu("function"),mP=tu("number"),ru=e=>e!==null&&typeof e=="object",bI=e=>e===!0||e===!1,nc=e=>{if(eu(e)!=="object")return!1;const t=Oh(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kI=qt("Date"),OI=qt("File"),MI=qt("Blob"),DI=qt("FileList"),NI=e=>ru(e)&&St(e.pipe),xI=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||St(e.append)&&((t=eu(e))==="formdata"||t==="object"&&St(e.toString)&&e.toString()==="[object FormData]"))},zI=qt("URLSearchParams"),LI=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function oa(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),pi(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let s;for(n=0;n<a;n++)s=o[n],t.call(null,e[s],s,e)}}function yP(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const SP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,CP=e=>!Gs(e)&&e!==SP;function Cd(){const{caseless:e}=CP(this)&&this||{},t={},r=(n,i)=>{const o=e&&yP(t,i)||i;nc(t[o])&&nc(n)?t[o]=Cd(t[o],n):nc(n)?t[o]=Cd({},n):pi(n)?t[o]=n.slice():t[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&oa(arguments[n],r);return t}const jI=(e,t,r,{allOwnKeys:n}={})=>(oa(t,(i,o)=>{r&&St(i)?e[o]=vP(i,r):e[o]=i},{allOwnKeys:n}),e),BI=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),FI=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},$I=(e,t,r,n)=>{let i,o,a;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],(!n||n(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=r!==!1&&Oh(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},qI=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},UI=e=>{if(!e)return null;if(pi(e))return e;let t=e.length;if(!mP(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},WI=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Oh(Uint8Array)),HI=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},VI=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},KI=qt("HTMLFormElement"),JI=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Nv=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),GI=qt("RegExp"),PP=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};oa(r,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(n[o]=a||i)}),Object.defineProperties(e,n)},QI=e=>{PP(e,(t,r)=>{if(St(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(St(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},XI=(e,t)=>{const r={},n=i=>{i.forEach(o=>{r[o]=!0})};return pi(e)?n(e):n(String(e).split(t)),r},YI=()=>{},ZI=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Gl="abcdefghijklmnopqrstuvwxyz",xv="0123456789",RP={DIGIT:xv,ALPHA:Gl,ALPHA_DIGIT:Gl+Gl.toUpperCase()+xv},e_=(e=16,t=RP.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function t_(e){return!!(e&&St(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const r_=e=>{const t=new Array(10),r=(n,i)=>{if(ru(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const o=pi(n)?[]:{};return oa(n,(a,s)=>{const c=r(a,i+1);!Gs(c)&&(o[s]=c)}),t[i]=void 0,o}}return n};return r(e,0)},n_=qt("AsyncFunction"),i_=e=>e&&(ru(e)||St(e))&&St(e.then)&&St(e.catch),T={isArray:pi,isArrayBuffer:gP,isBuffer:II,isFormData:xI,isArrayBufferView:_I,isString:AI,isNumber:mP,isBoolean:bI,isObject:ru,isPlainObject:nc,isUndefined:Gs,isDate:kI,isFile:OI,isBlob:MI,isRegExp:GI,isFunction:St,isStream:NI,isURLSearchParams:zI,isTypedArray:WI,isFileList:DI,forEach:oa,merge:Cd,extend:jI,trim:LI,stripBOM:BI,inherits:FI,toFlatObject:$I,kindOf:eu,kindOfTest:qt,endsWith:qI,toArray:UI,forEachEntry:HI,matchAll:VI,isHTMLForm:KI,hasOwnProperty:Nv,hasOwnProp:Nv,reduceDescriptors:PP,freezeMethods:QI,toObjectSet:XI,toCamelCase:JI,noop:YI,toFiniteNumber:ZI,findKey:yP,global:SP,isContextDefined:CP,ALPHABET:RP,generateString:e_,isSpecCompliantForm:t_,toJSONObject:r_,isAsyncFn:n_,isThenable:i_};function Q(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}T.inherits(Q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:T.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const EP=Q.prototype,wP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wP[e]={value:e}});Object.defineProperties(Q,wP);Object.defineProperty(EP,"isAxiosError",{value:!0});Q.from=(e,t,r,n,i,o)=>{const a=Object.create(EP);return T.toFlatObject(e,a,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),Q.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const o_=null;function Pd(e){return T.isPlainObject(e)||T.isArray(e)}function TP(e){return T.endsWith(e,"[]")?e.slice(0,-2):e}function zv(e,t,r){return e?e.concat(t).map(function(i,o){return i=TP(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function s_(e){return T.isArray(e)&&!e.some(Pd)}const a_=T.toFlatObject(T,{},null,function(t){return/^is[A-Z]/.test(t)});function nu(e,t,r){if(!T.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=T.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!T.isUndefined(y[g])});const n=r.metaTokens,i=r.visitor||l,o=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&T.isSpecCompliantForm(t);if(!T.isFunction(i))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(T.isDate(f))return f.toISOString();if(!c&&T.isBlob(f))throw new Q("Blob is not supported. Use a Buffer instead.");return T.isArrayBuffer(f)||T.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function l(f,g,y){let v=f;if(f&&!y&&typeof f=="object"){if(T.endsWith(g,"{}"))g=n?g:g.slice(0,-2),f=JSON.stringify(f);else if(T.isArray(f)&&s_(f)||(T.isFileList(f)||T.endsWith(g,"[]"))&&(v=T.toArray(f)))return g=TP(g),v.forEach(function(S,P){!(T.isUndefined(S)||S===null)&&t.append(a===!0?zv([g],P,o):a===null?g:g+"[]",u(S))}),!1}return Pd(f)?!0:(t.append(zv(y,g,o),u(f)),!1)}const p=[],d=Object.assign(a_,{defaultVisitor:l,convertValue:u,isVisitable:Pd});function h(f,g){if(!T.isUndefined(f)){if(p.indexOf(f)!==-1)throw Error("Circular reference detected in "+g.join("."));p.push(f),T.forEach(f,function(v,m){(!(T.isUndefined(v)||v===null)&&i.call(t,v,T.isString(m)?m.trim():m,g,d))===!0&&h(v,g?g.concat(m):[m])}),p.pop()}}if(!T.isObject(e))throw new TypeError("data must be an object");return h(e),t}function Lv(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Mh(e,t){this._pairs=[],e&&nu(e,this,t)}const IP=Mh.prototype;IP.append=function(t,r){this._pairs.push([t,r])};IP.toString=function(t){const r=t?function(n){return t.call(this,n,Lv)}:Lv;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function c_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _P(e,t,r){if(!t)return e;const n=r&&r.encode||c_,i=r&&r.serialize;let o;if(i?o=i(t,r):o=T.isURLSearchParams(t)?t.toString():new Mh(t,r).toString(n),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class jv{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){T.forEach(this.handlers,function(n){n!==null&&t(n)})}}const AP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},u_=typeof URLSearchParams<"u"?URLSearchParams:Mh,l_=typeof FormData<"u"?FormData:null,p_=typeof Blob<"u"?Blob:null,d_={isBrowser:!0,classes:{URLSearchParams:u_,FormData:l_,Blob:p_},protocols:["http","https","file","blob","url","data"]},bP=typeof window<"u"&&typeof document<"u",h_=(e=>bP&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),f_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",v_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bP,hasStandardBrowserEnv:h_,hasStandardBrowserWebWorkerEnv:f_},Symbol.toStringTag,{value:"Module"})),Lt={...v_,...d_};function g_(e,t){return nu(e,new Lt.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,o){return Lt.isNode&&T.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function m_(e){return T.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function y_(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}function kP(e){function t(r,n,i,o){let a=r[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=r.length;return a=!a&&T.isArray(i)?i.length:a,c?(T.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):((!i[a]||!T.isObject(i[a]))&&(i[a]=[]),t(r,n,i[a],o)&&T.isArray(i[a])&&(i[a]=y_(i[a])),!s)}if(T.isFormData(e)&&T.isFunction(e.entries)){const r={};return T.forEachEntry(e,(n,i)=>{t(m_(n),i,r,0)}),r}return null}function S_(e,t,r){if(T.isString(e))try{return(t||JSON.parse)(e),T.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Dh={transitional:AP,adapter:["xhr","http"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=T.isObject(t);if(o&&T.isHTMLForm(t)&&(t=new FormData(t)),T.isFormData(t))return i?JSON.stringify(kP(t)):t;if(T.isArrayBuffer(t)||T.isBuffer(t)||T.isStream(t)||T.isFile(t)||T.isBlob(t))return t;if(T.isArrayBufferView(t))return t.buffer;if(T.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return g_(t,this.formSerializer).toString();if((s=T.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return nu(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),S_(t)):t}],transformResponse:[function(t){const r=this.transitional||Dh.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(t&&T.isString(t)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?Q.from(s,Q.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lt.classes.FormData,Blob:Lt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};T.forEach(["delete","get","head","post","put","patch"],e=>{Dh.headers[e]={}});const Nh=Dh,C_=T.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),P_=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||t[r]&&C_[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Bv=Symbol("internals");function _i(e){return e&&String(e).trim().toLowerCase()}function ic(e){return e===!1||e==null?e:T.isArray(e)?e.map(ic):String(e)}function R_(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const E_=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ql(e,t,r,n,i){if(T.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!T.isString(t)){if(T.isString(n))return t.indexOf(n)!==-1;if(T.isRegExp(n))return n.test(t)}}function w_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function T_(e,t){const r=T.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,o,a){return this[n].call(this,t,i,o,a)},configurable:!0})})}class iu{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function o(s,c,u){const l=_i(c);if(!l)throw new Error("header name must be a non-empty string");const p=T.findKey(i,l);(!p||i[p]===void 0||u===!0||u===void 0&&i[p]!==!1)&&(i[p||c]=ic(s))}const a=(s,c)=>T.forEach(s,(u,l)=>o(u,l,c));return T.isPlainObject(t)||t instanceof this.constructor?a(t,r):T.isString(t)&&(t=t.trim())&&!E_(t)?a(P_(t),r):t!=null&&o(r,t,n),this}get(t,r){if(t=_i(t),t){const n=T.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return R_(i);if(T.isFunction(r))return r.call(this,i,n);if(T.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=_i(t),t){const n=T.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Ql(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function o(a){if(a=_i(a),a){const s=T.findKey(n,a);s&&(!r||Ql(n,n[s],s,r))&&(delete n[s],i=!0)}}return T.isArray(t)?t.forEach(o):o(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const o=r[n];(!t||Ql(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const r=this,n={};return T.forEach(this,(i,o)=>{const a=T.findKey(n,o);if(a){r[a]=ic(i),delete r[o];return}const s=t?w_(o):String(o).trim();s!==o&&delete r[o],r[s]=ic(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return T.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&T.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Bv]=this[Bv]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=_i(a);n[s]||(T_(i,a),n[s]=!0)}return T.isArray(t)?t.forEach(o):o(t),this}}iu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);T.reduceDescriptors(iu.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});T.freezeMethods(iu);const tr=iu;function Xl(e,t){const r=this||Nh,n=t||r,i=tr.from(n.headers);let o=n.data;return T.forEach(e,function(s){o=s.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function OP(e){return!!(e&&e.__CANCEL__)}function sa(e,t,r){Q.call(this,e??"canceled",Q.ERR_CANCELED,t,r),this.name="CanceledError"}T.inherits(sa,Q,{__CANCEL__:!0});function I_(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Q("Request failed with status code "+r.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const __=Lt.hasStandardBrowserEnv?{write(e,t,r,n,i,o){const a=[e+"="+encodeURIComponent(t)];T.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),T.isString(n)&&a.push("path="+n),T.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function A_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function b_(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function MP(e,t){return e&&!A_(t)?b_(e,t):t}const k_=Lt.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(o){let a=o;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){const s=T.isString(a)?i(a):a;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function O_(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function M_(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,o=0,a;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),l=n[o];a||(a=u),r[i]=c,n[i]=u;let p=o,d=0;for(;p!==i;)d+=r[p++],p=p%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),u-a<t)return;const h=l&&u-l;return h?Math.round(d*1e3/h):void 0}}function Fv(e,t){let r=0;const n=M_(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-r,c=n(s),u=o<=a;r=o;const l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const D_=typeof XMLHttpRequest<"u",N_=D_&&function(e){return new Promise(function(r,n){let i=e.data;const o=tr.from(e.headers).normalize();let{responseType:a,withXSRFToken:s}=e,c;function u(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}let l;if(T.isFormData(i)){if(Lt.hasStandardBrowserEnv||Lt.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((l=o.getContentType())!==!1){const[g,...y]=l?l.split(";").map(v=>v.trim()).filter(Boolean):[];o.setContentType([g||"multipart/form-data",...y].join("; "))}}let p=new XMLHttpRequest;if(e.auth){const g=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(g+":"+y))}const d=MP(e.baseURL,e.url);p.open(e.method.toUpperCase(),_P(d,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function h(){if(!p)return;const g=tr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),v={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:g,config:e,request:p};I_(function(S){r(S),u()},function(S){n(S),u()},v),p=null}if("onloadend"in p?p.onloadend=h:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(h)},p.onabort=function(){p&&(n(new Q("Request aborted",Q.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new Q("Network Error",Q.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let y=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const v=e.transitional||AP;e.timeoutErrorMessage&&(y=e.timeoutErrorMessage),n(new Q(y,v.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,e,p)),p=null},Lt.hasStandardBrowserEnv&&(s&&T.isFunction(s)&&(s=s(e)),s||s!==!1&&k_(d))){const g=e.xsrfHeaderName&&e.xsrfCookieName&&__.read(e.xsrfCookieName);g&&o.set(e.xsrfHeaderName,g)}i===void 0&&o.setContentType(null),"setRequestHeader"in p&&T.forEach(o.toJSON(),function(y,v){p.setRequestHeader(v,y)}),T.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),a&&a!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",Fv(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",Fv(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=g=>{p&&(n(!g||g.type?new sa(null,e,p):g),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const f=O_(d);if(f&&Lt.protocols.indexOf(f)===-1){n(new Q("Unsupported protocol "+f+":",Q.ERR_BAD_REQUEST,e));return}p.send(i||null)})},Rd={http:o_,xhr:N_};T.forEach(Rd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const $v=e=>`- ${e}`,x_=e=>T.isFunction(e)||e===null||e===!1,DP={getAdapter:e=>{e=T.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let o=0;o<t;o++){r=e[o];let a;if(n=r,!x_(r)&&(n=Rd[(a=String(r)).toLowerCase()],n===void 0))throw new Q(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map($v).join(`
`):" "+$v(o[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Rd};function Yl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sa(null,e)}function qv(e){return Yl(e),e.headers=tr.from(e.headers),e.data=Xl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),DP.getAdapter(e.adapter||Nh.adapter)(e).then(function(n){return Yl(e),n.data=Xl.call(e,e.transformResponse,n),n.headers=tr.from(n.headers),n},function(n){return OP(n)||(Yl(e),n&&n.response&&(n.response.data=Xl.call(e,e.transformResponse,n.response),n.response.headers=tr.from(n.response.headers))),Promise.reject(n)})}const Uv=e=>e instanceof tr?e.toJSON():e;function ri(e,t){t=t||{};const r={};function n(u,l,p){return T.isPlainObject(u)&&T.isPlainObject(l)?T.merge.call({caseless:p},u,l):T.isPlainObject(l)?T.merge({},l):T.isArray(l)?l.slice():l}function i(u,l,p){if(T.isUndefined(l)){if(!T.isUndefined(u))return n(void 0,u,p)}else return n(u,l,p)}function o(u,l){if(!T.isUndefined(l))return n(void 0,l)}function a(u,l){if(T.isUndefined(l)){if(!T.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function s(u,l,p){if(p in t)return n(u,l);if(p in e)return n(void 0,u)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(u,l)=>i(Uv(u),Uv(l),!0)};return T.forEach(Object.keys(Object.assign({},e,t)),function(l){const p=c[l]||i,d=p(e[l],t[l],l);T.isUndefined(d)&&p!==s||(r[l]=d)}),r}const NP="1.6.7",xh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{xh[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Wv={};xh.transitional=function(t,r,n){function i(o,a){return"[Axios v"+NP+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,s)=>{if(t===!1)throw new Q(i(a," has been removed"+(r?" in "+r:"")),Q.ERR_DEPRECATED);return r&&!Wv[a]&&(Wv[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,s):!0}};function z_(e,t,r){if(typeof e!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],a=t[o];if(a){const s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new Q("option "+o+" must be "+c,Q.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Q("Unknown option "+o,Q.ERR_BAD_OPTION)}}const Ed={assertOptions:z_,validators:xh},hr=Ed.validators;class Mc{constructor(t){this.defaults=t,this.interceptors={request:new jv,response:new jv}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ri(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&Ed.assertOptions(n,{silentJSONParsing:hr.transitional(hr.boolean),forcedJSONParsing:hr.transitional(hr.boolean),clarifyTimeoutError:hr.transitional(hr.boolean)},!1),i!=null&&(T.isFunction(i)?r.paramsSerializer={serialize:i}:Ed.assertOptions(i,{encode:hr.function,serialize:hr.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=o&&T.merge(o.common,o[r.method]);o&&T.forEach(["delete","get","head","post","put","patch","common"],f=>{delete o[f]}),r.headers=tr.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let l,p=0,d;if(!c){const f=[qv.bind(this),void 0];for(f.unshift.apply(f,s),f.push.apply(f,u),d=f.length,l=Promise.resolve(r);p<d;)l=l.then(f[p++],f[p++]);return l}d=s.length;let h=r;for(p=0;p<d;){const f=s[p++],g=s[p++];try{h=f(h)}catch(y){g.call(this,y);break}}try{l=qv.call(this,h)}catch(f){return Promise.reject(f)}for(p=0,d=u.length;p<d;)l=l.then(u[p++],u[p++]);return l}getUri(t){t=ri(this.defaults,t);const r=MP(t.baseURL,t.url);return _P(r,t.params,t.paramsSerializer)}}T.forEach(["delete","get","head","options"],function(t){Mc.prototype[t]=function(r,n){return this.request(ri(n||{},{method:t,url:r,data:(n||{}).data}))}});T.forEach(["post","put","patch"],function(t){function r(n){return function(o,a,s){return this.request(ri(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Mc.prototype[t]=r(),Mc.prototype[t+"Form"]=r(!0)});const oc=Mc;class zh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},t(function(o,a,s){n.reason||(n.reason=new sa(o,a,s),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new zh(function(i){t=i}),cancel:t}}}const L_=zh;function j_(e){return function(r){return e.apply(null,r)}}function B_(e){return T.isObject(e)&&e.isAxiosError===!0}const wd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(wd).forEach(([e,t])=>{wd[t]=e});const F_=wd;function xP(e){const t=new oc(e),r=vP(oc.prototype.request,t);return T.extend(r,oc.prototype,t,{allOwnKeys:!0}),T.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return xP(ri(e,i))},r}const ye=xP(Nh);ye.Axios=oc;ye.CanceledError=sa;ye.CancelToken=L_;ye.isCancel=OP;ye.VERSION=NP;ye.toFormData=nu;ye.AxiosError=Q;ye.Cancel=ye.CanceledError;ye.all=function(t){return Promise.all(t)};ye.spread=j_;ye.isAxiosError=B_;ye.mergeConfig=ri;ye.AxiosHeaders=tr;ye.formToJSON=e=>kP(T.isHTMLForm(e)?new FormData(e):e);ye.getAdapter=DP.getAdapter;ye.HttpStatusCode=F_;ye.default=ye;const $_="https://sky-s2t-auth.azurewebsites.net/api",Hv=ye.create({baseURL:$_,headers:{"Content-Type":"application/json"},params:{code:"2aZeumwaczzQssE0tmwXMDOOBmeaEtKODbrFHM80xcCLAzFuSM8aGQ=="}});class zP{static async login(t){return(await Hv.post("/login",{},{headers:{Authorization:`Bearer ${t}`}})).data}static async refreshToken(t){return(await Hv.post("/refreshToken",{},{headers:{Authorization:`Bearer ${t.toString()}`}})).data}}var Dc=(e=>(e[e.OTHER=0]="OTHER",e[e.INVALID_HOSTED_DOMAIN=1]="INVALID_HOSTED_DOMAIN",e[e.USER_ACCESS_REVOKED=2]="USER_ACCESS_REVOKED",e))(Dc||{});class Td{static getErrorMessage(t){let r="Something went wrong. Please try again later.";if(!t)return r;switch(t.code){case Dc.INVALID_HOSTED_DOMAIN:r="Please log in with your Skyincap account";break;case Dc.USER_ACCESS_REVOKED:r="Your access has been revoked. Please contact your administrator.";break}return r}}const LP=({size:e=24,className:t,...r})=>W.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,...r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:jr("animate-spin",t),children:W.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})});function q_(){const{navigateTo:e,displayToast:t}=C.useContext(Ah),[r,n]=C.useState(!1);async function i(a){n(!0),zP.login(a.credential).then(s=>{new Zt(s.accessToken).storeInCookie("accessToken"),new Zt(s.refreshToken).storeInCookie("refreshToken"),e(ht.Speech)}).catch(s=>{var l;const c=(l=s.response)==null?void 0:l.data,u=Td.getErrorMessage(c);t(u)}).finally(()=>{n(!1)})}function o(){const a={code:Dc.OTHER,message:"Google login failed."},s=Td.getErrorMessage(a);t(s)}return W.jsx("div",{className:"absolute inset-0 grid place-content-center",children:r?W.jsx(LP,{}):W.jsx(PI,{shape:"pill",theme:"filled_blue",use_fedcm_for_prompt:!0,onSuccess:i,onError:o})})}var ys={},Zl={},ou={},ep={},de={},di={},Rt={},jP={},su={},au={};Object.defineProperty(au,"__esModule",{value:!0});au.default=W_;let Fa;const U_=new Uint8Array(16);function W_(){if(!Fa&&(Fa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Fa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fa(U_)}var Br={},Tn={},cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.default=void 0;var H_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;cu.default=H_;Object.defineProperty(Tn,"__esModule",{value:!0});Tn.default=void 0;var V_=K_(cu);function K_(e){return e&&e.__esModule?e:{default:e}}function J_(e){return typeof e=="string"&&V_.default.test(e)}var G_=J_;Tn.default=G_;Object.defineProperty(Br,"__esModule",{value:!0});Br.default=void 0;Br.unsafeStringify=BP;var Q_=X_(Tn);function X_(e){return e&&e.__esModule?e:{default:e}}const Ie=[];for(let e=0;e<256;++e)Ie.push((e+256).toString(16).slice(1));function BP(e,t=0){return Ie[e[t+0]]+Ie[e[t+1]]+Ie[e[t+2]]+Ie[e[t+3]]+"-"+Ie[e[t+4]]+Ie[e[t+5]]+"-"+Ie[e[t+6]]+Ie[e[t+7]]+"-"+Ie[e[t+8]]+Ie[e[t+9]]+"-"+Ie[e[t+10]]+Ie[e[t+11]]+Ie[e[t+12]]+Ie[e[t+13]]+Ie[e[t+14]]+Ie[e[t+15]]}function Y_(e,t=0){const r=BP(e,t);if(!(0,Q_.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Z_=Y_;Br.default=Z_;Object.defineProperty(su,"__esModule",{value:!0});su.default=void 0;var eA=rA(au),tA=Br;function rA(e){return e&&e.__esModule?e:{default:e}}let Vv,tp,rp=0,np=0;function nA(e,t,r){let n=t&&r||0;const i=t||new Array(16);e=e||{};let o=e.node||Vv,a=e.clockseq!==void 0?e.clockseq:tp;if(o==null||a==null){const d=e.random||(e.rng||eA.default)();o==null&&(o=Vv=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=tp=(d[6]<<8|d[7])&16383)}let s=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:np+1;const u=s-rp+(c-np)/1e4;if(u<0&&e.clockseq===void 0&&(a=a+1&16383),(u<0||s>rp)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");rp=s,np=c,tp=a,s+=122192928e5;const l=((s&268435455)*1e4+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;const p=s/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let d=0;d<6;++d)i[n+d]=o[d];return t||(0,tA.unsafeStringify)(i)}var iA=nA;su.default=iA;var uu={},Nr={},aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.default=void 0;var oA=sA(Tn);function sA(e){return e&&e.__esModule?e:{default:e}}function aA(e){if(!(0,oA.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var cA=aA;aa.default=cA;Object.defineProperty(Nr,"__esModule",{value:!0});Nr.URL=Nr.DNS=void 0;Nr.default=hA;var uA=Br,lA=pA(aa);function pA(e){return e&&e.__esModule?e:{default:e}}function dA(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}const FP="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Nr.DNS=FP;const $P="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Nr.URL=$P;function hA(e,t,r){function n(i,o,a,s){var c;if(typeof i=="string"&&(i=dA(i)),typeof o=="string"&&(o=(0,lA.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,a){s=s||0;for(let l=0;l<16;++l)a[s+l]=u[l];return a}return(0,uA.unsafeStringify)(u)}try{n.name=e}catch{}return n.DNS=FP,n.URL=$P,n}var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.default=void 0;function fA(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return vA(gA(mA(e),e.length*8))}function vA(e){const t=[],r=e.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){const o=e[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(a)}return t}function qP(e){return(e+64>>>9<<4)+14+1}function gA(e,t){e[t>>5]|=128<<t%32,e[qP(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let a=0;a<e.length;a+=16){const s=r,c=n,u=i,l=o;r=Le(r,n,i,o,e[a],7,-680876936),o=Le(o,r,n,i,e[a+1],12,-389564586),i=Le(i,o,r,n,e[a+2],17,606105819),n=Le(n,i,o,r,e[a+3],22,-1044525330),r=Le(r,n,i,o,e[a+4],7,-176418897),o=Le(o,r,n,i,e[a+5],12,1200080426),i=Le(i,o,r,n,e[a+6],17,-1473231341),n=Le(n,i,o,r,e[a+7],22,-45705983),r=Le(r,n,i,o,e[a+8],7,1770035416),o=Le(o,r,n,i,e[a+9],12,-1958414417),i=Le(i,o,r,n,e[a+10],17,-42063),n=Le(n,i,o,r,e[a+11],22,-1990404162),r=Le(r,n,i,o,e[a+12],7,1804603682),o=Le(o,r,n,i,e[a+13],12,-40341101),i=Le(i,o,r,n,e[a+14],17,-1502002290),n=Le(n,i,o,r,e[a+15],22,1236535329),r=je(r,n,i,o,e[a+1],5,-165796510),o=je(o,r,n,i,e[a+6],9,-1069501632),i=je(i,o,r,n,e[a+11],14,643717713),n=je(n,i,o,r,e[a],20,-373897302),r=je(r,n,i,o,e[a+5],5,-701558691),o=je(o,r,n,i,e[a+10],9,38016083),i=je(i,o,r,n,e[a+15],14,-660478335),n=je(n,i,o,r,e[a+4],20,-405537848),r=je(r,n,i,o,e[a+9],5,568446438),o=je(o,r,n,i,e[a+14],9,-1019803690),i=je(i,o,r,n,e[a+3],14,-187363961),n=je(n,i,o,r,e[a+8],20,1163531501),r=je(r,n,i,o,e[a+13],5,-1444681467),o=je(o,r,n,i,e[a+2],9,-51403784),i=je(i,o,r,n,e[a+7],14,1735328473),n=je(n,i,o,r,e[a+12],20,-1926607734),r=Be(r,n,i,o,e[a+5],4,-378558),o=Be(o,r,n,i,e[a+8],11,-2022574463),i=Be(i,o,r,n,e[a+11],16,1839030562),n=Be(n,i,o,r,e[a+14],23,-35309556),r=Be(r,n,i,o,e[a+1],4,-1530992060),o=Be(o,r,n,i,e[a+4],11,1272893353),i=Be(i,o,r,n,e[a+7],16,-155497632),n=Be(n,i,o,r,e[a+10],23,-1094730640),r=Be(r,n,i,o,e[a+13],4,681279174),o=Be(o,r,n,i,e[a],11,-358537222),i=Be(i,o,r,n,e[a+3],16,-722521979),n=Be(n,i,o,r,e[a+6],23,76029189),r=Be(r,n,i,o,e[a+9],4,-640364487),o=Be(o,r,n,i,e[a+12],11,-421815835),i=Be(i,o,r,n,e[a+15],16,530742520),n=Be(n,i,o,r,e[a+2],23,-995338651),r=Fe(r,n,i,o,e[a],6,-198630844),o=Fe(o,r,n,i,e[a+7],10,1126891415),i=Fe(i,o,r,n,e[a+14],15,-1416354905),n=Fe(n,i,o,r,e[a+5],21,-57434055),r=Fe(r,n,i,o,e[a+12],6,1700485571),o=Fe(o,r,n,i,e[a+3],10,-1894986606),i=Fe(i,o,r,n,e[a+10],15,-1051523),n=Fe(n,i,o,r,e[a+1],21,-2054922799),r=Fe(r,n,i,o,e[a+8],6,1873313359),o=Fe(o,r,n,i,e[a+15],10,-30611744),i=Fe(i,o,r,n,e[a+6],15,-1560198380),n=Fe(n,i,o,r,e[a+13],21,1309151649),r=Fe(r,n,i,o,e[a+4],6,-145523070),o=Fe(o,r,n,i,e[a+11],10,-1120210379),i=Fe(i,o,r,n,e[a+2],15,718787259),n=Fe(n,i,o,r,e[a+9],21,-343485551),r=Rr(r,s),n=Rr(n,c),i=Rr(i,u),o=Rr(o,l)}return[r,n,i,o]}function mA(e){if(e.length===0)return[];const t=e.length*8,r=new Uint32Array(qP(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function Rr(e,t){const r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function yA(e,t){return e<<t|e>>>32-t}function pu(e,t,r,n,i,o){return Rr(yA(Rr(Rr(t,e),Rr(n,o)),i),r)}function Le(e,t,r,n,i,o,a){return pu(t&r|~t&n,e,t,i,o,a)}function je(e,t,r,n,i,o,a){return pu(t&n|r&~n,e,t,i,o,a)}function Be(e,t,r,n,i,o,a){return pu(t^r^n,e,t,i,o,a)}function Fe(e,t,r,n,i,o,a){return pu(r^(t|~n),e,t,i,o,a)}var SA=fA;lu.default=SA;Object.defineProperty(uu,"__esModule",{value:!0});uu.default=void 0;var CA=UP(Nr),PA=UP(lu);function UP(e){return e&&e.__esModule?e:{default:e}}const RA=(0,CA.default)("v3",48,PA.default);var EA=RA;uu.default=EA;var du={},hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.default=void 0;const wA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var TA={randomUUID:wA};hu.default=TA;Object.defineProperty(du,"__esModule",{value:!0});du.default=void 0;var Kv=WP(hu),IA=WP(au),_A=Br;function WP(e){return e&&e.__esModule?e:{default:e}}function AA(e,t,r){if(Kv.default.randomUUID&&!t&&!e)return Kv.default.randomUUID();e=e||{};const n=e.random||(e.rng||IA.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,_A.unsafeStringify)(n)}var bA=AA;du.default=bA;var fu={},vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.default=void 0;function kA(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function ip(e,t){return e<<t|e>>>32-t}function OA(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const a=unescape(encodeURIComponent(e));e=[];for(let s=0;s<a.length;++s)e.push(a.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let a=0;a<i;++a){const s=new Uint32Array(16);for(let c=0;c<16;++c)s[c]=e[a*64+c*4]<<24|e[a*64+c*4+1]<<16|e[a*64+c*4+2]<<8|e[a*64+c*4+3];o[a]=s}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<i;++a){const s=new Uint32Array(80);for(let h=0;h<16;++h)s[h]=o[a][h];for(let h=16;h<80;++h)s[h]=ip(s[h-3]^s[h-8]^s[h-14]^s[h-16],1);let c=r[0],u=r[1],l=r[2],p=r[3],d=r[4];for(let h=0;h<80;++h){const f=Math.floor(h/20),g=ip(c,5)+kA(f,u,l,p)+d+t[f]+s[h]>>>0;d=p,p=l,l=ip(u,30)>>>0,u=c,c=g}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+p>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var MA=OA;vu.default=MA;Object.defineProperty(fu,"__esModule",{value:!0});fu.default=void 0;var DA=HP(Nr),NA=HP(vu);function HP(e){return e&&e.__esModule?e:{default:e}}const xA=(0,DA.default)("v5",80,NA.default);var zA=xA;fu.default=zA;var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.default=void 0;var LA="00000000-0000-0000-0000-000000000000";gu.default=LA;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.default=void 0;var jA=BA(Tn);function BA(e){return e&&e.__esModule?e:{default:e}}function FA(e){if(!(0,jA.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var $A=FA;mu.default=$A;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return a.default}});var t=l(su),r=l(uu),n=l(du),i=l(fu),o=l(gu),a=l(mu),s=l(Tn),c=l(Br),u=l(aa);function l(p){return p&&p.__esModule?p:{default:p}}})(jP);Object.defineProperty(Rt,"__esModule",{value:!0});Rt.createNoDashGuid=Rt.createGuid=void 0;const qA=jP,VP=()=>qA.v4();Rt.createGuid=VP;const UA=()=>VP().replace(new RegExp("-","g"),"").toUpperCase();Rt.createNoDashGuid=UA;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=Rt;(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None"})(e.EventType||(e.EventType={}));class r{constructor(i,o){this.privName=i,this.privEventId=t.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=o,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}e.PlatformEvent=r})(di);Object.defineProperty(de,"__esModule",{value:!0});de.AudioStreamNodeErrorEvent=de.AudioStreamNodeDetachedEvent=de.AudioStreamNodeAttachedEvent=de.AudioStreamNodeAttachingEvent=de.AudioStreamNodeEvent=de.AudioSourceErrorEvent=de.AudioSourceOffEvent=de.AudioSourceReadyEvent=de.AudioSourceInitializingEvent=de.AudioSourceEvent=void 0;const Id=di;class hi extends Id.PlatformEvent{constructor(t,r,n=Id.EventType.Info){super(t,n),this.privAudioSourceId=r}get audioSourceId(){return this.privAudioSourceId}}de.AudioSourceEvent=hi;class WA extends hi{constructor(t){super("AudioSourceInitializingEvent",t)}}de.AudioSourceInitializingEvent=WA;class HA extends hi{constructor(t){super("AudioSourceReadyEvent",t)}}de.AudioSourceReadyEvent=HA;class VA extends hi{constructor(t){super("AudioSourceOffEvent",t)}}de.AudioSourceOffEvent=VA;class KA extends hi{constructor(t,r){super("AudioSourceErrorEvent",t,Id.EventType.Error),this.privError=r}get error(){return this.privError}}de.AudioSourceErrorEvent=KA;class ca extends hi{constructor(t,r,n){super(t,r),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}de.AudioStreamNodeEvent=ca;class JA extends ca{constructor(t,r){super("AudioStreamNodeAttachingEvent",t,r)}}de.AudioStreamNodeAttachingEvent=JA;class GA extends ca{constructor(t,r){super("AudioStreamNodeAttachedEvent",t,r)}}de.AudioStreamNodeAttachedEvent=GA;class QA extends ca{constructor(t,r){super("AudioStreamNodeDetachedEvent",t,r)}}de.AudioStreamNodeDetachedEvent=QA;class XA extends ca{constructor(t,r,n){super("AudioStreamNodeErrorEvent",t,r),this.privError=n}get error(){return this.privError}}de.AudioStreamNodeErrorEvent=XA;var ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.ConnectionMessageSentEvent=ge.ConnectionMessageReceivedEvent=ge.ConnectionEstablishErrorEvent=ge.ConnectionErrorEvent=ge.ConnectionClosedEvent=ge.ConnectionEstablishedEvent=ge.ConnectionStartEvent=ge.ConnectionEvent=ge.ServiceEvent=void 0;const Pn=di;class YA extends Pn.PlatformEvent{constructor(t,r,n=Pn.EventType.Info){super(t,n),this.privJsonResult=r}get jsonString(){return this.privJsonResult}}ge.ServiceEvent=YA;class Fr extends Pn.PlatformEvent{constructor(t,r,n=Pn.EventType.Info){super(t,n),this.privConnectionId=r}get connectionId(){return this.privConnectionId}}ge.ConnectionEvent=Fr;class ZA extends Fr{constructor(t,r,n){super("ConnectionStartEvent",t),this.privUri=r,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}}ge.ConnectionStartEvent=ZA;class eb extends Fr{constructor(t){super("ConnectionEstablishedEvent",t)}}ge.ConnectionEstablishedEvent=eb;class tb extends Fr{constructor(t,r,n){super("ConnectionClosedEvent",t,Pn.EventType.Debug),this.privReason=n,this.privStatusCode=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ge.ConnectionClosedEvent=tb;class rb extends Fr{constructor(t,r,n){super("ConnectionErrorEvent",t,Pn.EventType.Debug),this.privMessage=r,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}}ge.ConnectionErrorEvent=rb;class nb extends Fr{constructor(t,r,n){super("ConnectionEstablishErrorEvent",t,Pn.EventType.Error),this.privStatusCode=r,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ge.ConnectionEstablishErrorEvent=nb;class ib extends Fr{constructor(t,r,n){super("ConnectionMessageReceivedEvent",t),this.privNetworkReceivedTime=r,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}ge.ConnectionMessageReceivedEvent=ib;class ob extends Fr{constructor(t,r,n){super("ConnectionMessageSentEvent",t),this.privNetworkSentTime=r,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}ge.ConnectionMessageSentEvent=ob;var Lh={},ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.ObjectDisposedError=ke.InvalidOperationError=ke.ArgumentNullError=void 0;class sb extends Error{constructor(t){super(t),this.name="ArgumentNull",this.message=t}}ke.ArgumentNullError=sb;class ab extends Error{constructor(t){super(t),this.name="InvalidOperation",this.message=t}}ke.InvalidOperationError=ab;class cb extends Error{constructor(t,r){super(r),this.name=t+"ObjectDisposed",this.message=r}}ke.ObjectDisposedError=cb;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=ke,r=Rt;var n;(function(o){o[o.Text=0]="Text",o[o.Binary=1]="Binary"})(n=e.MessageType||(e.MessageType={}));class i{constructor(a,s,c,u){if(this.privBody=null,a===n.Text&&s&&typeof s!="string")throw new t.InvalidOperationError("Payload must be a string");if(a===n.Binary&&s&&!(s instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=s,this.privHeaders=c||{},this.privId=u||r.createNoDashGuid(),this.messageType){case n.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}e.ConnectionMessage=i})(Lh);var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.ConnectionOpenResponse=void 0;class ub{constructor(t,r){this.privStatusCode=t,this.privReason=r}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}yu.ConnectionOpenResponse=ub;var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.DeferralMap=void 0;class lb{constructor(){this.privMap={}}add(t,r){this.privMap[t]=r}getId(t){return this.privMap[t]}complete(t,r){try{this.privMap[t].resolve(r)}catch(n){this.privMap[t].reject(n)}finally{this.privMap[t]=void 0}}}Su.DeferralMap=lb;var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.SendingAgentContextMessageEvent=Rn.DialogEvent=void 0;const Jv=di;class KP extends Jv.PlatformEvent{constructor(t,r=Jv.EventType.Info){super(t,r)}}Rn.DialogEvent=KP;class pb extends KP{constructor(t){super("SendingAgentContextMessageEvent"),this.privAgentConfig=t}get agentConfig(){return this.privAgentConfig}}Rn.SendingAgentContextMessageEvent=pb;var Cu={},ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.EventSource=void 0;const db=ke,hb=Rt;class fb{constructor(t){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=t}onEvent(t){if(this.isDisposed())throw new db.ObjectDisposedError("EventSource");if(this.metadata)for(const r in this.metadata)r&&t.metadata&&(t.metadata[r]||(t.metadata[r]=this.metadata[r]));for(const r in this.privEventListeners)r&&this.privEventListeners[r]&&this.privEventListeners[r](t)}attach(t){const r=hb.createNoDashGuid();return this.privEventListeners[r]=t,{detach:()=>(delete this.privEventListeners[r],Promise.resolve())}}attachListener(t){return this.attach(r=>t.onEvent(r))}attachConsoleListener(t){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(r=>t.onEvent(r)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}ua.EventSource=fb;Object.defineProperty(Cu,"__esModule",{value:!0});Cu.Events=void 0;const vb=ke,gb=ua;class Qs{static setEventSource(t){if(!t)throw new vb.ArgumentNullError("eventSource");Qs.privInstance=t}static get instance(){return Qs.privInstance}}Cu.Events=Qs;Qs.privInstance=new gb.EventSource;var JP={};Object.defineProperty(JP,"__esModule",{value:!0});var GP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionState=void 0,function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"}(e.ConnectionState||(e.ConnectionState={}))})(GP);var QP={};Object.defineProperty(QP,"__esModule",{value:!0});var XP={};Object.defineProperty(XP,"__esModule",{value:!0});var YP={};Object.defineProperty(YP,"__esModule",{value:!0});var ZP={};Object.defineProperty(ZP,"__esModule",{value:!0});var eR={};Object.defineProperty(eR,"__esModule",{value:!0});var tR={};Object.defineProperty(tR,"__esModule",{value:!0});var rR={};Object.defineProperty(rR,"__esModule",{value:!0});var nR={};Object.defineProperty(nR,"__esModule",{value:!0});var la={};Object.defineProperty(la,"__esModule",{value:!0});la.List=void 0;const mb=ke;class gr{constructor(t){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],t)for(const r of t)this.privList.push(r)}get(t){return this.throwIfDisposed(),this.privList[t]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(t){this.throwIfDisposed(),this.insertAt(this.privList.length,t)}insertAt(t,r){this.throwIfDisposed(),t===0?this.privList.unshift(r):t===this.privList.length?this.privList.push(r):this.privList.splice(t,0,r),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(t){return this.throwIfDisposed(),this.remove(t,1)[0]}remove(t,r){this.throwIfDisposed();const n=this.privList.splice(t,r);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(t){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[r]=t,{detach:()=>(delete this.privAddSubscriptions[r],Promise.resolve())}}onRemoved(t){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[r]=t,{detach:()=>(delete this.privRemoveSubscriptions[r],Promise.resolve())}}onDisposed(t){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[r]=t,{detach:()=>(delete this.privDisposedSubscriptions[r],Promise.resolve())}}join(t){return this.throwIfDisposed(),this.privList.join(t)}toArray(){const t=Array();return this.privList.forEach(r=>{t.push(r)}),t}any(t){return this.throwIfDisposed(),t?this.where(t).length()>0:this.length()>0}all(t){return this.throwIfDisposed(),this.where(t).length()===this.length()}forEach(t){this.throwIfDisposed();for(let r=0;r<this.length();r++)t(this.privList[r],r)}select(t){this.throwIfDisposed();const r=[];for(let n=0;n<this.privList.length;n++)r.push(t(this.privList[n],n));return new gr(r)}where(t){this.throwIfDisposed();const r=new gr;for(let n=0;n<this.privList.length;n++)t(this.privList[n],n)&&r.add(this.privList[n]);return r}orderBy(t){this.throwIfDisposed();const n=this.toArray().sort(t);return new gr(n)}orderByDesc(t){return this.throwIfDisposed(),this.orderBy((r,n)=>t(n,r))}clone(){return this.throwIfDisposed(),new gr(this.toArray())}concat(t){return this.throwIfDisposed(),new gr(this.privList.concat(t.toArray()))}concatArray(t){return this.throwIfDisposed(),new gr(this.privList.concat(t))}isDisposed(){return this.privList==null}dispose(t){this.isDisposed()||(this.privDisposeReason=t,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new mb.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(t){if(t)for(const r in t)r&&t[r]()}}la.List=gr;var jh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0;var t;(function(s){s[s.None=0]="None",s[s.Resolved=1]="Resolved",s[s.Rejected=2]="Rejected"})(t=e.PromiseState||(e.PromiseState={}));class r{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=r;class n{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,u)=>{this.privOnSetResult=c,this.privOnSetError=u}}}e.PromiseResultEventSource=n;class i{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,u)=>{this.privResolve=c,this.privReject=u})}get promise(){return this.privPromise}}e.Deferred=i;class o{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new n,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(c);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(c,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(c){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(c);for(const u of this.privErrorHandlers)this.executeErrorCallback(c,u);this.detachHandlers()}on(c,u){c==null&&(c=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(u)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,u):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(c,u,l){try{u(c)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,l)}}executeErrorCallback(c,u){if(u)try{u(c)}catch(l){throw new Error(`'Unhandled callback error: ${l}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}e.Sink=o;function a(s,c,u){s.then(l=>{try{c&&c(l)}catch(p){if(u)try{if(p instanceof Error){const d=p;u(d.name+": "+d.message)}else u(p)}catch{}}},l=>{if(u)try{if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}catch{}})}e.marshalPromiseToCallbacks=a})(jh);var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.Queue=void 0;const op=ke,sp=la,Gv=jh;var ks;(function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"})(ks||(ks={}));class yb{constructor(t){this.privPromiseStore=new sp.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=t||new sp.List,this.privDetachables=[],this.privSubscribers=new sp.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(t){this.throwIfDispose(),this.enqueueFromPromise(new Promise(r=>r(t)))}enqueueFromPromise(t){this.throwIfDispose(),t.then(r=>{this.privList.add(r)},()=>{})}dequeue(){this.throwIfDispose();const t=new Gv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:ks.Dequeue}),this.drain()),t.promise}peek(){this.throwIfDispose();const t=new Gv.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:ks.Peek}),this.drain()),t.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(t,r){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=r,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}for(const i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&t){const i=[];return this.privPromiseStore.toArray().forEach(o=>{i.push(o)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(o=>{t(o)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(t){await this.drainAndDispose(null,t)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const t=this.privSubscribers,r=this.privList;if(t&&r){for(;r.length()>0&&t.length()>0&&!this.privIsDisposing;){const n=t.removeFirst();if(n.type===ks.Peek)n.deferral.resolve(r.first());else{const i=r.removeFirst();n.deferral.resolve(i)}}this.privSubscribers===t&&(this.privSubscribers=t),this.privList===r&&(this.privList=r)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new op.InvalidOperationError(this.privDisposeReason):new op.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new op.InvalidOperationError("Queue disposing")}}pa.Queue=yb;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.RawWebsocketMessage=void 0;const $a=Lh,Ai=ke,Sb=Rt;class Cb{constructor(t,r,n){if(this.privPayload=null,!r)throw new Ai.ArgumentNullError("payload");if(t===$a.MessageType.Binary&&Object.getPrototypeOf(r).constructor.name!=="ArrayBuffer")throw new Ai.InvalidOperationError("Payload must be ArrayBuffer");if(t===$a.MessageType.Text&&typeof r!="string")throw new Ai.InvalidOperationError("Payload must be a string");this.privMessageType=t,this.privPayload=r,this.privId=n||Sb.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===$a.MessageType.Binary)throw new Ai.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===$a.MessageType.Text)throw new Ai.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Pu.RawWebsocketMessage=Cb;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.RiffPcmEncoder=void 0;class Pb{constructor(t,r){this.privActualSampleRate=t,this.privDesiredSampleRate=r}encode(t){const r=this.downSampleAudioFrame(t,this.privActualSampleRate,this.privDesiredSampleRate);if(!r)return null;const n=r.length*2,i=new ArrayBuffer(n),o=new DataView(i);return this.floatTo16BitPCM(o,0,r),i}setString(t,r,n){for(let i=0;i<n.length;i++)t.setUint8(r+i,n.charCodeAt(i))}floatTo16BitPCM(t,r,n){for(let i=0;i<n.length;i++,r+=2){const o=Math.max(-1,Math.min(1,n[i]));t.setInt16(r,o<0?o*32768:o*32767,!0)}}downSampleAudioFrame(t,r,n){if(!t)return null;if(n===r||n>r)return t;const i=r/n,o=Math.round(t.length/i),a=new Float32Array(o);let s=0,c=0;for(;c<o;){const u=Math.round((c+1)*i);let l=0,p=0;for(;s<u&&s<t.length;)l+=t[s++],p++;a[c++]=l/p}return a}}Ru.RiffPcmEncoder=Pb;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.Stream=void 0;const Qv=ke,Rb=Rt,Xv=pa;class Eb{constructor(t){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=t||Rb.createNoDashGuid(),this.privReaderQueue=new Xv.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(t){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(t)}catch{}}read(){if(this.privIsReadEnded)throw new Qv.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async t=>((t===void 0||t.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),t))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new Xv.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new Qv.InvalidOperationError("Stream closed")}}Eu.Stream=Eb;var wu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(e.TranslationStatus||(e.TranslationStatus={}))})(wu);var bi={},Yv;function wb(){if(Yv)return bi;Yv=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.ChunkedArrayBufferStream=void 0;const e=z();let t=class extends e.Stream{constructor(n,i){super(i),this.privTargetChunkSize=n,this.privNextBufferReadyBytes=0}writeStreamChunk(n){if(n.isEnd||this.privNextBufferReadyBytes===0&&n.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(n);return}let i=0;for(;i<n.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=n.timeReceived);const o=Math.min(n.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),s=new Uint8Array(n.buffer.slice(i,o+i));a.set(s,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=o,i+=o,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return bi.ChunkedArrayBufferStream=t,bi}var iR={};Object.defineProperty(iR,"__esModule",{value:!0});var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.Timeout=void 0;class $e{static load(){const t=new Map([[0,()=>{}]]),r=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),o=new Worker(i);return o.addEventListener("message",({data:c})=>{if($e.isCallNotification(c)){const{params:{timerId:u}}=c,l=t.get(u);if(typeof l=="number"){const p=r.get(l);if(p===void 0||p!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),t.delete(u);else throw new Error("The timer is in an undefined state.")}else if($e.isClearResponse(c)){const{id:u}=c,l=r.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");r.delete(u),t.delete(l)}else{const{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{const u=Math.random();r.set(u,c),t.set(c,u),o.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{const l=Math.random();return t.set(l,c),o.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>($e.workerTimers!==null||($e.workerTimers=$e.load()),$e.workerTimers)}static isCallNotification(t){return t.method!==void 0&&t.method==="call"}static isClearResponse(t){return t.error===null&&typeof t.id=="number"}}Tu.Timeout=$e;$e.workerTimers=null;$e.clearTimeout=e=>$e.timers().clearTimeout(e);$e.setTimeout=(e,t)=>$e.timers().setTimeout(e,t);$e.timers=$e.loadWorkerTimers();var K={};Object.defineProperty(K,"__esModule",{value:!0});K.OCSPCacheUpdateErrorEvent=K.OCSPResponseRetrievedEvent=K.OCSPCacheFetchErrorEvent=K.OCSPVerificationFailedEvent=K.OCSPCacheHitEvent=K.OCSPCacheEntryNeedsRefreshEvent=K.OCSPCacheEntryExpiredEvent=K.OCSPWSUpgradeStartedEvent=K.OCSPStapleReceivedEvent=K.OCSPCacheUpdateCompleteEvent=K.OCSPDiskCacheStoreEvent=K.OCSPMemoryCacheStoreEvent=K.OCSPCacheUpdateNeededEvent=K.OCSPDiskCacheHitEvent=K.OCSPCacheMissEvent=K.OCSPMemoryCacheHitEvent=K.OCSPEvent=void 0;const Me=di;class De extends Me.PlatformEvent{constructor(t,r,n){super(t,r),this.privSignature=n}}K.OCSPEvent=De;class Tb extends De{constructor(t){super("OCSPMemoryCacheHitEvent",Me.EventType.Debug,t)}}K.OCSPMemoryCacheHitEvent=Tb;class Ib extends De{constructor(t){super("OCSPCacheMissEvent",Me.EventType.Debug,t)}}K.OCSPCacheMissEvent=Ib;class _b extends De{constructor(t){super("OCSPDiskCacheHitEvent",Me.EventType.Debug,t)}}K.OCSPDiskCacheHitEvent=_b;class Ab extends De{constructor(t){super("OCSPCacheUpdateNeededEvent",Me.EventType.Debug,t)}}K.OCSPCacheUpdateNeededEvent=Ab;class bb extends De{constructor(t){super("OCSPMemoryCacheStoreEvent",Me.EventType.Debug,t)}}K.OCSPMemoryCacheStoreEvent=bb;class kb extends De{constructor(t){super("OCSPDiskCacheStoreEvent",Me.EventType.Debug,t)}}K.OCSPDiskCacheStoreEvent=kb;class Ob extends De{constructor(t){super("OCSPCacheUpdateCompleteEvent",Me.EventType.Debug,t)}}K.OCSPCacheUpdateCompleteEvent=Ob;class Mb extends De{constructor(){super("OCSPStapleReceivedEvent",Me.EventType.Debug,"")}}K.OCSPStapleReceivedEvent=Mb;class Db extends De{constructor(t){super("OCSPWSUpgradeStartedEvent",Me.EventType.Debug,t)}}K.OCSPWSUpgradeStartedEvent=Db;class Nb extends De{constructor(t,r){super("OCSPCacheEntryExpiredEvent",Me.EventType.Debug,t),this.privExpireTime=r}}K.OCSPCacheEntryExpiredEvent=Nb;class xb extends De{constructor(t,r,n){super("OCSPCacheEntryNeedsRefreshEvent",Me.EventType.Debug,t),this.privExpireTime=n,this.privStartTime=r}}K.OCSPCacheEntryNeedsRefreshEvent=xb;class zb extends De{constructor(t,r,n){super("OCSPCacheHitEvent",Me.EventType.Debug,t),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=r,this.privStartTimeString=new Date(r).toLocaleTimeString()}}K.OCSPCacheHitEvent=zb;class Lb extends De{constructor(t,r){super("OCSPVerificationFailedEvent",Me.EventType.Debug,t),this.privError=r}}K.OCSPVerificationFailedEvent=Lb;class jb extends De{constructor(t,r){super("OCSPCacheFetchErrorEvent",Me.EventType.Debug,t),this.privError=r}}K.OCSPCacheFetchErrorEvent=jb;class Bb extends De{constructor(t){super("OCSPResponseRetrievedEvent",Me.EventType.Debug,t)}}K.OCSPResponseRetrievedEvent=Bb;class Fb extends De{constructor(t,r){super("OCSPCacheUpdateErrorEvent",Me.EventType.Debug,t),this.privError=r}}K.OCSPCacheUpdateErrorEvent=Fb;var ki={},Zv;function $b(){if(Zv)return ki;Zv=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.BackgroundEvent=void 0;const e=z();class t extends e.PlatformEvent{constructor(n){super("BackgroundEvent",e.EventType.Error),this.privError=n}get error(){return this.privError}}return ki.BackgroundEvent=t,ki}var eg;function z(){return eg||(eg=1,function(e){var t=H&&H.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),r=H&&H.__exportStar||function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&t(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(de,e),r(ge,e),r(Lh,e),r(yu,e),r(Su,e),r(Rn,e),r(ke,e),r(Cu,e),r(ua,e),r(Rt,e),r(JP,e),r(GP,e),r(QP,e),r(XP,e),r(YP,e),r(ZP,e),r(eR,e),r(tR,e),r(rR,e),r(nR,e),r(la,e),r(di,e),r(jh,e),r(pa,e),r(Pu,e),r(Ru,e),r(Eu,e);var n=wu;Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(wb(),e),r(iR,e),r(Tu,e),r(K,e),r($b(),e)}(ep)),ep}var we={};Object.defineProperty(we,"__esModule",{value:!0});we.HeaderNames=void 0;class Ot{}we.HeaderNames=Ot;Ot.AuthKey="Ocp-Apim-Subscription-Key";Ot.Authorization="Authorization";Ot.SpIDAuthKey="Apim-Subscription-Id";Ot.ConnectionId="X-ConnectionId";Ot.ContentType="Content-Type";Ot.CustomCommandsAppId="X-CommandsAppId";Ot.Path="Path";Ot.RequestId="X-RequestId";Ot.RequestStreamId="X-StreamId";Ot.RequestTimestamp="X-Timestamp";var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.AuthInfo=void 0;class qb{constructor(t,r){this.privHeaderName=t,this.privToken=r}get headerName(){return this.privHeaderName}get token(){return this.privToken}}fi.AuthInfo=qb;Object.defineProperty(ou,"__esModule",{value:!0});ou.CognitiveSubscriptionKeyAuthentication=void 0;const Ub=z(),Wb=we,Hb=fi;class Vb{constructor(t){if(!t)throw new Ub.ArgumentNullError("subscriptionKey");this.privAuthInfo=new Hb.AuthInfo(Wb.HeaderNames.AuthKey,t)}fetch(t){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(t){return Promise.resolve(this.privAuthInfo)}}ou.CognitiveSubscriptionKeyAuthentication=Vb;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.CognitiveTokenAuthentication=void 0;const tg=z(),rg=fi,ng=we;class Xs{constructor(t,r){if(!t)throw new tg.ArgumentNullError("fetchCallback");if(!r)throw new tg.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=t,this.privFetchOnExpiryCallback=r}fetch(t){return this.privFetchCallback(t).then(r=>new rg.AuthInfo(ng.HeaderNames.Authorization,r===void 0?void 0:Xs.privTokenPrefix+r))}fetchOnExpiry(t){return this.privFetchOnExpiryCallback(t).then(r=>new rg.AuthInfo(ng.HeaderNames.Authorization,r===void 0?void 0:Xs.privTokenPrefix+r))}}Iu.CognitiveTokenAuthentication=Xs;Xs.privTokenPrefix="Bearer ";var oR={};Object.defineProperty(oR,"__esModule",{value:!0});var sR={};Object.defineProperty(sR,"__esModule",{value:!0});var Oi={},ap={},_u={};const Kb={},Jb=Object.freeze(Object.defineProperty({__proto__:null,default:Kb},Symbol.toStringTag,{value:"Module"})),In=ow(Jb);var Bh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=z();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})})(Bh);var j={};Object.defineProperty(j,"__esModule",{value:!0});j.Contracts=void 0;class mr{static throwIfNullOrUndefined(t,r){if(t==null)throw new Error("throwIfNullOrUndefined:"+r)}static throwIfNull(t,r){if(t===null)throw new Error("throwIfNull:"+r)}static throwIfNullOrWhitespace(t,r){if(mr.throwIfNullOrUndefined(t,r),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+r)}static throwIfNullOrTooLong(t,r,n){if(mr.throwIfNullOrUndefined(t,r),(""+t).length>n)throw new Error("throwIfNullOrTooLong:"+r+" (more than "+n.toString()+" characters)")}static throwIfNullOrTooShort(t,r,n){if(mr.throwIfNullOrUndefined(t,r),(""+t).length<n)throw new Error("throwIfNullOrTooShort:"+r+" (less than "+n.toString()+" characters)")}static throwIfDisposed(t){if(t)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(t,r){if(mr.throwIfNullOrUndefined(t,r),t.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+r);for(const n of t)mr.throwIfNullOrWhitespace(n,r)}static throwIfFileDoesNotExist(t,r){mr.throwIfNullOrWhitespace(t,r)}static throwIfNotUndefined(t,r){if(t!==void 0)throw new Error("throwIfNotUndefined:"+r)}}j.Contracts=mr;var Gb=H&&H.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Qb=H&&H.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Xb=H&&H.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Gb(t,e,r);return Qb(t,e),t};Object.defineProperty(_u,"__esModule",{value:!0});_u.ConsoleLoggingListener=void 0;const ig=Xb(In),Mi=Bh,Yb=j;class Zb{constructor(t=Mi.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=t}set logPath(t){Yb.Contracts.throwIfNullOrUndefined(ig.openSync,`
File System access not available`),this.privLogPath=t}set enableConsoleOutput(t){this.privEnableConsoleOutput=t}onEvent(t){if(t.eventType>=this.privLogLevelFilter){const r=this.toString(t);if(this.privLogPath&&ig.writeFileSync(this.privLogPath,r+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(t.eventType){case Mi.LogLevel.Debug:console.debug(r);break;case Mi.LogLevel.Info:console.info(r);break;case Mi.LogLevel.Warning:console.warn(r);break;case Mi.LogLevel.Error:console.error(r);break;default:console.log(r);break}}}toString(t){const r=[`${t.eventTime}`,`${t.name}`],n=t;for(const i in n)if(i&&t.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const o=n[i];let a="<NULL>";o!=null&&(typeof o=="number"||typeof o=="string"?a=o.toString():a=JSON.stringify(o)),r.push(`${i}: ${a}`)}return r.join(" | ")}}_u.ConsoleLoggingListener=Zb;var aR={};Object.defineProperty(aR,"__esModule",{value:!0});var cp={},$r={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0;var t;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS"})(t=e.AudioFormatTag||(e.AudioFormatTag={}));class r{static getDefaultInputFormat(){return n.getDefaultInputFormat()}static getWaveFormat(o,a,s,c){return new n(o,a,s,c)}static getWaveFormatPCM(o,a,s){return new n(o,a,s)}}e.AudioStreamFormat=r;class n extends r{constructor(o=16e3,a=16,s=1,c=t.PCM){super();let u=!0;switch(c){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=a,this.samplesPerSec=o,this.channels=s,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const l=new DataView(this.privHeader);this.setString(l,0,"RIFF"),l.setUint32(4,0,!0),this.setString(l,8,"WAVEfmt "),l.setUint32(16,16,!0),l.setUint16(20,this.formatTag,!0),l.setUint16(22,this.channels,!0),l.setUint32(24,this.samplesPerSec,!0),l.setUint32(28,this.avgBytesPerSec,!0),l.setUint16(32,this.channels*(this.bitsPerSample/8),!0),l.setUint16(34,this.bitsPerSample,!0),this.setString(l,36,"data"),l.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new n}static getAudioContext(o){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return o!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:o}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(o,a,s){for(let c=0;c<s.length;c++)o.setUint8(a+c,s.charCodeAt(c))}}e.AudioStreamFormatImpl=n})($r);var og;function ek(){return og||(og=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=O(),r=z(),n=$r;e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,s,c,u){this.privRecorder=a,this.deviceId=s,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||r.createNoDashGuid(),this.privEvents=new r.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const u=c;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let s=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(s=(c,u,l)=>{a.mediaDevices.getUserMedia(c).then(u).catch(l)}),s){const c=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):s({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const l=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(l),this.onEvent(new r.AudioSourceErrorEvent(this.privId,l))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new r.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(s=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(s.readEnded(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>s.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const s=this.privStreams[a];s&&s.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(a,s){if(a===e.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(s);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const s=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(s===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const l of u)if(l.deviceId===s){this.privMicrophoneLabel=l.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const s=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=s;try{this.privRecorder.record(this.privContext,this.privMediaStream,s)}catch(u){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return s}onEvent(a){this.privEvents.onEvent(a),r.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}e.MicAudioSource=i,i.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()}(cp)),cp}var Di={},sg;function tk(){if(sg)return Di;sg=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.FileAudioSource=void 0;const e=O(),t=z(),r=$r;let n=class{constructor(o,a,s){this.privStreams={},this.privHeaderEnd=44,this.privId=s||t.createNoDashGuid(),this.privEvents=new t.EventSource,this.privSource=o,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=o.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const o=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(o,"")),Promise.reject(o)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(o){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,o));const a=await this.upload(o);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,o)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)),await this.turnOff()},id:()=>o,read:()=>a.read()})}detach(o){o&&this.privStreams[o]&&(this.privStreams[o].close(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)))}turnOff(){for(const o in this.privStreams)if(o){const a=this.privStreams[o];a&&!a.isClosed&&a.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(o=>Promise.resolve({bitspersample:o.bitsPerSample,channelcount:o.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:o.samplesPerSec,type:e.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),s=new t.Deferred,c=u=>{const l=new DataView(u),p=v=>String.fromCharCode(l.getUint8(v),l.getUint8(v+1),l.getUint8(v+2),l.getUint8(v+3));if(p(0)!=="RIFF"){s.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){s.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=l.getInt32(16,!0),h=l.getUint16(22,!0),f=l.getUint32(24,!0),g=l.getUint16(34,!0);let y=36+Math.max(d-16,0);for(;p(y)!=="data";y+=2)if(y>4288){s.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=y+8,s.resolve(r.AudioStreamFormat.getWaveFormatPCM(f,g,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=l=>{const p=l.target.result;c(p)},u.readAsArrayBuffer(a)}else{const u=a;c(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return s.promise}async upload(o){const a=s=>{const c=`Error occurred while processing '${this.privFilename}'. ${s}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,o,c)),new Error(c)};try{await this.turnOn();const s=await this.privAudioFormatPromise,c=new t.ChunkedArrayBufferStream(s.avgBytesPerSec/10,o);this.privStreams[o]=c;const u=this.privSource.slice(this.privHeaderEnd),l=p=>{c.isClosed||(c.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const p=new FileReader;p.onerror=d=>a(d.toString()),p.onload=d=>{const h=d.target.result;l(h)},p.readAsArrayBuffer(u)}else{const p=u;l(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return c}catch(s){a(s)}}onEvent(o){this.privEvents.onEvent(o),t.Events.instance.onEvent(o)}};return Di.FileAudioSource=n,Di}var Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.PcmRecorder=void 0;const rk=z();class nk{constructor(t){this.privStopInputOnRelease=t}record(t,r,n){const o=new rk.RiffPcmEncoder(t.sampleRate,16e3),a=t.createMediaStreamSource(r),s=()=>{const u=(()=>{let l=0;try{return t.createScriptProcessor(l,1,1)}catch{l=2048;let d=t.sampleRate;for(;l<16384&&d>=32e3;)l<<=1,d>>=1;return t.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{const p=l.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const d=o.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(t.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(t.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}t.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const u=new AudioWorkletNode(t,"speech-processor");u.port.onmessage=l=>{const p=l.data;if(n&&!n.isClosed){const d=o.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(t.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}}).catch(()=>{s()})}else try{s()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(t){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(t.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(r=>r.stop()),this.privMediaResources.source=null))}setWorkletUrl(t){this.privSpeechProcessorScript=t}}Au.PcmRecorder=nk;var bu={},da={},ik=H&&H.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ok=H&&H.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),cR=H&&H.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&ik(t,e,r);return ok(t,e),t},Fh=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(da,"__esModule",{value:!0});da.WebsocketMessageAdapter=void 0;const sk=cR(In),ak=cR(In),ck=Fh(In),uk=Fh(In),lk=Fh(In),pk=we,$=z();class Ys{constructor(t,r,n,i,o,a){if(!t)throw new $.ArgumentNullError("uri");if(!n)throw new $.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new $.EventSource,this.privConnectionId=r,this.privMessageFormatter=n,this.privConnectionState=$.ConnectionState.None,this.privUri=t,this.privHeaders=o,this.privEnableCompression=a,this.privHeaders[pk.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===$.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new $.Deferred,this.privCertificateValidatedDeferral=new $.Deferred,this.privConnectionState=$.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Ys.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const t={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),t.agent=this.getAgent();let n=new URL(this.privUri).protocol;(n==null?void 0:n.toLocaleLowerCase())==="wss:"?n="https:":(n==null?void 0:n.toLocaleLowerCase())==="ws:"&&(n="http:"),t.agent.protocol=n,this.privWebsocketClient=new lk.default(this.privUri,t)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new $.Queue,this.privDisconnectDeferral=new $.Deferred,this.privSendMessageQueue=new $.Queue,this.processSendQueue().catch(t=>{$.Events.instance.onEvent(new $.BackgroundEvent(t))})}catch(t){return this.privConnectionEstablishDeferral.resolve(new $.ConnectionOpenResponse(500,t)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new $.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=$.ConnectionState.Connected,this.onEvent(new $.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new $.ConnectionOpenResponse(200,""))},t=>{this.privConnectionEstablishDeferral.reject(t)})},this.privWebsocketClient.onerror=t=>{this.onEvent(new $.ConnectionErrorEvent(this.privConnectionId,t.message,t.type)),this.privLastErrorReceived=t.message},this.privWebsocketClient.onclose=t=>{this.privConnectionState===$.ConnectionState.Connecting?(this.privConnectionState=$.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new $.ConnectionOpenResponse(t.code,t.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=$.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new $.ConnectionClosedEvent(this.privConnectionId,t.code,t.reason))),this.onClose(t.code,t.reason).catch(r=>{$.Events.instance.onEvent(new $.BackgroundEvent(r))})},this.privWebsocketClient.onmessage=t=>{const r=new Date().toISOString();if(this.privConnectionState===$.ConnectionState.Connected){const n=new $.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),t.data instanceof ArrayBuffer){const i=new $.RawWebsocketMessage($.MessageType.Binary,t.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new $.ConnectionMessageReceivedEvent(this.privConnectionId,r,o)),n.resolve(o)},o=>{n.reject(`Invalid binary message format. Error: ${o}`)})}else{const i=new $.RawWebsocketMessage($.MessageType.Text,t.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new $.ConnectionMessageReceivedEvent(this.privConnectionId,r,o)),n.resolve(o)},o=>{n.reject(`Invalid text message format. Error: ${o}`)})}}},this.privConnectionEstablishDeferral.promise}send(t){if(this.privConnectionState!==$.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${$.ConnectionState[this.privConnectionState]} state`);const r=new $.Deferred,n=new $.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(t).then(i=>{n.resolve({Message:t,RawWebsocketMessage:i,sendStatusDeferral:r})},i=>{n.reject(`Error formatting the message. ${i}`)}),r.promise}read(){return this.privConnectionState!==$.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(t){if(this.privWebsocketClient)this.privConnectionState!==$.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,t||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(t){try{if(!t)return Promise.resolve();if(this.onEvent(new $.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),t.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(t.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+t.Message.id+" "+new Error().stack);return Promise.resolve()}catch(r){return Promise.reject(`websocket send error: ${r}`)}}async onClose(t,r){const n=`Connection closed. ${t}: ${r}`;this.privConnectionState=$.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},n),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(n)},n)}async processSendQueue(){for(;;){const r=await this.privSendMessageQueue.dequeue();if(!r)return;try{await this.sendRawMessage(r),r.sendStatusDeferral.resolve()}catch(n){r.sendStatusDeferral.reject(n)}}}onEvent(t){this.privConnectionEvents.onEvent(t),$.Events.instance.onEvent(t)}getAgent(){const t=new ck.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(t.proxyInfo=this.proxyInfo),t}static GetProxyAgent(t){const r={host:t.HostName,port:t.Port};return t.UserName?r.headers={"Proxy-Authentication":"Basic "+new Buffer(`${t.UserName}:${t.Password===void 0?"":t.Password}`).toString("base64")}:r.headers={},r.headers.requestOCSP="true",new uk.default(r)}createConnection(t,r){let n;if(r={...r,requestOCSP:!0,servername:r.host},this.proxyInfo){const o=Ys.GetProxyAgent(this.proxyInfo);n=new Promise((a,s)=>{o.callback(t,r,(c,u)=>{c?s(c):a(u)})})}else r.secureEndpoint?n=Promise.resolve(ak.connect(r)):n=Promise.resolve(sk.connect(r));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}da.WebsocketMessageAdapter=Ys;Ys.forceNpmWebSocket=!1;Object.defineProperty(bu,"__esModule",{value:!0});bu.WebsocketConnection=void 0;const up=z(),dk=da;class hk{constructor(t,r,n,i,o,a=!1,s){if(this.privIsDisposed=!1,!t)throw new up.ArgumentNullError("uri");if(!i)throw new up.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",u=0;if(r){for(const l in r)if(l){c+=u===0&&t.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(l);c+=p;let d=r[l];d&&(d=encodeURIComponent(d),c+=`=${d}`),u++}}if(n){for(const l in n)if(l){c+=u===0&&t.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(n[l]);c+=`${l}=${p}`,u++}}this.privUri=t+c,this.privId=s||up.createNoDashGuid(),this.privConnectionMessageAdapter=new dk.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,o,n,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(t){return this.privConnectionMessageAdapter.send(t)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}bu.WebsocketConnection=hk;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.ReplayableAudioNode=void 0;class fk{constructor(t,r){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=t,this.privBytesPerSecond=r}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const t=this.privReplayOffset-this.privBufferStartOffset;let r=Math.round(t*this.privBytesPerSecond*1e-7);r%2!==0&&r++;let n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){const i=this.privBuffers[n].chunk.buffer.slice(r);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then(t=>(t&&t.buffer&&(this.privBuffers.push(new vk(t,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=t.buffer.byteLength),t))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(t){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=t;const r=t-this.privBufferStartOffset;let n=Math.round(r*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&n>=this.privBuffers[i].chunk.buffer.byteLength;)n-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(t-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(t){if(t<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const r of this.privBuffers){const n=r.byteOffset/this.privBytesPerSecond*1e7,i=n+r.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(t>=n&&t<=i)return r.chunk.timeReceived}return 0}}ku.ReplayableAudioNode=fk;class vk{constructor(t,r,n){this.chunk=t,this.serial=r,this.byteOffset=n}}var Ni={},lp={},Ht={},ha={},gk=H&&H.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mk=H&&H.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yk=H&&H.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&gk(t,e,r);return mk(t,e),t};Object.defineProperty(ha,"__esModule",{value:!0});ha.AudioFileWriter=void 0;const xi=yk(In),pp=j;class Sk{constructor(t){pp.Contracts.throwIfNullOrUndefined(xi.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=xi.openSync(t,"w")}set format(t){pp.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=t;let r=0;this.privAudioFormat.hasHeader&&(r=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=xi.createWriteStream("",{fd:this.privFd,start:r,autoClose:!1}))}write(t){pp.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(t.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),xi.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),xi.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}ha.AudioFileWriter=Sk;var rt={},ag;function uR(){if(ag)return rt;ag=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.PullAudioInputStreamImpl=rt.PullAudioInputStream=rt.PushAudioInputStreamImpl=rt.PushAudioInputStream=rt.AudioInputStream=void 0;const e=O(),t=z(),r=Rt,n=_(),i=$r;let o=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,d){return c.create(p,d)}};rt.AudioInputStream=o;class a extends o{static create(p){return new s(p)}}rt.PushAudioInputStream=a;class s extends a{constructor(p){super(),p===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new t.EventSource,this.privId=r.createNoDashGuid(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let f=0;f<d.length;++f)d[f]=h[f];return d}}rt.PushAudioInputStreamImpl=s;class c extends o{constructor(){super()}static create(p,d){return new u(p,d)}}rt.PullAudioInputStream=c;class u extends c{constructor(p,d){super(),d===void 0?this.privFormat=n.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new t.EventSource,this.privId=r.createNoDashGuid(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const f=new ArrayBuffer(this.privBufferSize-d),g=this.privCallback.read(f);if(h===void 0?h=f:new Int8Array(h).set(new Int8Array(f),d),g===0)break;d+=g}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}}return rt.PullAudioInputStreamImpl=u,rt}var Ae={},qr={},$h={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))})($h);Object.defineProperty(qr,"__esModule",{value:!0});qr.AudioOutputFormatImpl=void 0;const V=$h,U=$r;class B extends U.AudioStreamFormatImpl{constructor(t,r,n,i,o,a,s,c,u){super(n,a,r,t),this.formatTag=t,this.avgBytesPerSec=i,this.blockAlign=o,this.priAudioFormatString=s,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(t){return t===void 0?B.getDefaultOutputFormat():B.fromSpeechSynthesisOutputFormatString(B.SpeechSynthesisOutputFormatToString[t])}static fromSpeechSynthesisOutputFormatString(t){switch(t){case"raw-8khz-8bit-mono-mulaw":return new B(U.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,t,!1);case"riff-16khz-16kbps-mono-siren":return new B(U.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new B(U.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,t,!1);case"audio-16khz-32kbitrate-mono-mp3":return new B(U.AudioFormatTag.MP3,1,16e3,4096,2,16,t,t,!1);case"audio-16khz-128kbitrate-mono-mp3":return new B(U.AudioFormatTag.MP3,1,16e3,16384,2,16,t,t,!1);case"audio-16khz-64kbitrate-mono-mp3":return new B(U.AudioFormatTag.MP3,1,16e3,8192,2,16,t,t,!1);case"audio-24khz-48kbitrate-mono-mp3":return new B(U.AudioFormatTag.MP3,1,24e3,6144,2,16,t,t,!1);case"audio-24khz-96kbitrate-mono-mp3":return new B(U.AudioFormatTag.MP3,1,24e3,12288,2,16,t,t,!1);case"audio-24khz-160kbitrate-mono-mp3":return new B(U.AudioFormatTag.MP3,1,24e3,20480,2,16,t,t,!1);case"raw-16khz-16bit-mono-truesilk":return new B(U.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,t,t,!1);case"riff-8khz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new B(U.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,16e3,32e3,2,16,t,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new B(U.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,t,t,!1);case"ogg-24khz-16bit-mono-opus":return new B(U.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,t,t,!1);case"raw-48khz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new B(U.AudioFormatTag.MP3,1,48e3,12288,2,16,t,t,!1);case"audio-48khz-192kbitrate-mono-mp3":return new B(U.AudioFormatTag.MP3,1,48e3,24576,2,16,t,t,!1);case"ogg-48khz-16bit-mono-opus":return new B(U.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,t,t,!1);case"webm-16khz-16bit-mono-opus":return new B(U.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,t,t,!1);case"webm-24khz-16bit-mono-opus":return new B(U.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,t,t,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new B(U.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new B(U.AudioFormatTag.OPUS,1,16e3,4e3,2,16,t,t,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new B(U.AudioFormatTag.OPUS,1,24e3,6e3,2,16,t,t,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new B(U.AudioFormatTag.OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-24khz-16bit-mono-flac":return new B(U.AudioFormatTag.FLAC,1,24e3,24e3,2,16,t,t,!1);case"audio-48khz-16bit-mono-flac":return new B(U.AudioFormatTag.FLAC,1,48e3,3e4,2,16,t,t,!1);case"raw-24khz-16bit-mono-truesilk":return new B(U.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,t,t,!1);case"raw-8khz-8bit-mono-alaw":return new B(U.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,t,!1);case"riff-8khz-8bit-mono-alaw":return new B(U.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,22050,44100,2,16,t,t,!1);case"riff-22050hz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,22050,44100,2,16,t,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,44100,88200,2,16,t,t,!1);case"riff-44100hz-16bit-mono-pcm":return new B(U.AudioFormatTag.PCM,1,44100,88200,2,16,t,"raw-44100hz-16bit-mono-pcm",!0);case"riff-16khz-16bit-mono-pcm":default:return new B(U.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return B.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(t){if(this.priHasHeader){const r=new DataView(this.privHeader);r.setUint32(4,t+this.privHeader.byteLength-8,!0),r.setUint32(40,t,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(t){if(!this.hasHeader)return t;this.updateHeader(t.byteLength);const r=new Uint8Array(t.byteLength+this.header.byteLength);return r.set(new Uint8Array(this.header),0),r.set(new Uint8Array(t),this.header.byteLength),r.buffer}}qr.AudioOutputFormatImpl=B;B.SpeechSynthesisOutputFormatToString={[V.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[V.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[V.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[V.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[V.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[V.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[V.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[V.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[V.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[V.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[V.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[V.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[V.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.PushAudioOutputStreamImpl=Ae.PushAudioOutputStream=Ae.PullAudioOutputStreamImpl=Ae.PullAudioOutputStream=Ae.AudioOutputStream=void 0;const _d=z(),Ck=j,Pk=qr;class qh{constructor(){}static createPullStream(){return Uh.create()}}Ae.AudioOutputStream=qh;class Uh extends qh{static create(){return new lR}}Ae.PullAudioOutputStream=Uh;class lR extends Uh{constructor(){super(),this.privId=_d.createNoDashGuid(),this.privStream=new _d.Stream}set format(t){t==null&&(this.privFormat=Pk.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=t}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(t){const r=new Int8Array(t);let n=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>t.byteLength)return r.set(this.privLastChunkView.slice(0,t.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(t.byteLength),Promise.resolve(t.byteLength);r.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<t.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let o;i.buffer.byteLength>t.byteLength-n?(o=i.buffer.slice(0,t.byteLength-n),this.privLastChunkView=new Int8Array(i.buffer.slice(t.byteLength-n))):o=i.buffer,r.set(new Int8Array(o),n),n+=o.byteLength}else this.privStream.readEnded()}return n}write(t){Ck.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:t,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}Ae.PullAudioOutputStreamImpl=lR;class pR extends qh{constructor(){super()}static create(t){return new dR(t)}}Ae.PushAudioOutputStream=pR;class dR extends pR{constructor(t){super(),this.privId=_d.createNoDashGuid(),this.privCallback=t}set format(t){}write(t){this.privCallback.write&&this.privCallback.write(t)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}Ae.PushAudioOutputStreamImpl=dR;var cg;function fR(){if(cg)return Ht;cg=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.AudioOutputConfigImpl=Ht.AudioConfigImpl=Ht.AudioConfig=void 0;const e=Te(),t=j,r=_(),n=ha,i=uR(),o=Ae;let a=class hR{static fromDefaultMicrophoneInput(){const l=new e.PcmRecorder(!0);return new s(new e.MicAudioSource(l))}static fromMicrophoneInput(l){const p=new e.PcmRecorder(!0);return new s(new e.MicAudioSource(p,l))}static fromWavFileInput(l,p="unnamedBuffer.wav"){return new s(new e.FileAudioSource(l,p))}static fromStreamInput(l){if(l instanceof r.PullAudioInputStreamCallback)return new s(new i.PullAudioInputStreamImpl(l));if(l instanceof r.AudioInputStream)return new s(l);if(typeof MediaStream<"u"&&l instanceof MediaStream){const p=new e.PcmRecorder(!1);return new s(new e.MicAudioSource(p,null,null,l))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new r.SpeakerAudioDestination)}static fromSpeakerOutput(l){if(l===void 0)return hR.fromDefaultSpeakerOutput();if(l instanceof r.SpeakerAudioDestination)return new c(l);throw new Error("Not Supported Type")}static fromAudioFileOutput(l){return new c(new n.AudioFileWriter(l))}static fromStreamOutput(l){if(l instanceof r.PushAudioOutputStreamCallback)return new c(new o.PushAudioOutputStreamImpl(l));if(l instanceof r.PushAudioOutputStream)return new c(l);if(l instanceof r.PullAudioOutputStream)return new c(l);throw new Error("Not Supported Type")}};Ht.AudioConfig=a;class s extends a{constructor(l){super(),this.privSource=l}get format(){return this.privSource.format}close(l,p){this.privSource.turnOff().then(()=>{l&&l()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(l){return this.privSource.attach(l)}detach(l){return this.privSource.detach(l)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(l,p){if(t.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(l,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(l,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(l,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Ht.AudioConfigImpl=s;class c extends a{constructor(l){super(),this.privDestination=l}set format(l){this.privDestination.format=l}write(l){this.privDestination.write(l)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Ht.AudioOutputConfigImpl=c,Ht}var vR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(e.CancellationReason||(e.CancellationReason={}))})(vR);var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.PullAudioInputStreamCallback=void 0;class Rk{}Ou.PullAudioInputStreamCallback=Rk;var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.PushAudioOutputStreamCallback=void 0;class Ek{}Mu.PushAudioOutputStreamCallback=Ek;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.KeywordRecognitionModel=void 0;const ug=j;class wk{constructor(){this.privDisposed=!1}static fromFile(t){throw ug.Contracts.throwIfFileDoesNotExist(t,"fileName"),new Error("Not yet implemented.")}static fromStream(t){throw ug.Contracts.throwIfNull(t,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}Du.KeywordRecognitionModel=wk;var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.SessionEventArgs=void 0;class Tk{constructor(t){this.privSessionId=t}get sessionId(){return this.privSessionId}}Nu.SessionEventArgs=Tk;var zi={},lg;function Ik(){if(lg)return zi;lg=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.RecognitionEventArgs=void 0;const e=_();let t=class extends e.SessionEventArgs{constructor(n,i){super(i),this.privOffset=n}get offset(){return this.privOffset}};return zi.RecognitionEventArgs=t,zi}var gR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(e.OutputFormat||(e.OutputFormat={}))})(gR);var Li={},pg;function _k(){if(pg)return Li;pg=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.IntentRecognitionEventArgs=void 0;const e=_();let t=class extends e.RecognitionEventArgs{constructor(n,i,o){super(i,o),this.privResult=n}get result(){return this.privResult}};return Li.IntentRecognitionEventArgs=t,Li}var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.RecognitionResult=void 0;class Ak{constructor(t,r,n,i,o,a,s,c,u,l){this.privResultId=t,this.privReason=r,this.privText=n,this.privDuration=i,this.privOffset=o,this.privLanguage=a,this.privLanguageDetectionConfidence=s,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}xu.RecognitionResult=Ak;var ji={},dg;function bk(){if(dg)return ji;dg=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.SpeechRecognitionResult=void 0;const e=_();let t=class extends e.RecognitionResult{constructor(n,i,o,a,s,c,u,l,p,d,h){super(n,i,o,a,s,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return ji.SpeechRecognitionResult=t,ji}var Bi={},hg;function kk(){if(hg)return Bi;hg=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.IntentRecognitionResult=void 0;const e=_();let t=class extends e.SpeechRecognitionResult{constructor(n,i,o,a,s,c,u,l,p,d,h){super(i,o,a,s,c,u,l,void 0,p,d,h),this.privIntentId=n}get intentId(){return this.privIntentId}};return Bi.IntentRecognitionResult=t,Bi}var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.LanguageUnderstandingModelImpl=ni.LanguageUnderstandingModel=void 0;const bn=j;class mR{constructor(){}static fromEndpoint(t){bn.Contracts.throwIfNull(t,"uri"),bn.Contracts.throwIfNullOrWhitespace(t.hostname,"uri");const r=new sc,n=t.host.indexOf(".");if(n===-1)throw new Error("Could not determine region from endpoint");r.region=t.host.substr(0,n);const i=t.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(r.appId=t.pathname.substr(i),r.subscriptionKey=t.searchParams.get("subscription-key"),r.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return r}static fromAppId(t){bn.Contracts.throwIfNullOrWhitespace(t,"appId");const r=new sc;return r.appId=t,r}static fromSubscription(t,r,n){bn.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey"),bn.Contracts.throwIfNullOrWhitespace(r,"appId"),bn.Contracts.throwIfNullOrWhitespace(n,"region");const i=new sc;return i.appId=r,i.region=n,i.subscriptionKey=t,i}}ni.LanguageUnderstandingModel=mR;class sc extends mR{}ni.LanguageUnderstandingModelImpl=sc;var Vt={},fg;function Ok(){if(fg)return Vt;fg=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.MeetingTranscriptionEventArgs=Vt.ConversationTranscriptionEventArgs=Vt.SpeechRecognitionEventArgs=void 0;const e=_();let t=class extends e.RecognitionEventArgs{constructor(o,a,s){super(a,s),this.privResult=o}get result(){return this.privResult}};Vt.SpeechRecognitionEventArgs=t;class r extends e.RecognitionEventArgs{constructor(o,a,s){super(a,s),this.privResult=o}get result(){return this.privResult}}Vt.ConversationTranscriptionEventArgs=r;class n extends t{}return Vt.MeetingTranscriptionEventArgs=n,Vt}var Fi={},$i={},vg;function fa(){if(vg)return $i;vg=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.CancellationEventArgsBase=void 0;const e=_();let t=class extends e.RecognitionEventArgs{constructor(n,i,o,a,s){super(a,s),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return $i.CancellationEventArgsBase=t,$i}var gg;function Mk(){if(gg)return Fi;gg=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.SpeechRecognitionCanceledEventArgs=void 0;const e=fa();let t=class extends e.CancellationEventArgsBase{};return Fi.SpeechRecognitionCanceledEventArgs=t,Fi}var qi={},mg;function Dk(){if(mg)return qi;mg=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.TranslationRecognitionEventArgs=void 0;const e=_();let t=class extends e.RecognitionEventArgs{constructor(n,i,o){super(i,o),this.privResult=n}get result(){return this.privResult}};return qi.TranslationRecognitionEventArgs=t,qi}var Ui={},yg;function Nk(){if(yg)return Ui;yg=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.TranslationSynthesisEventArgs=void 0;const e=_();let t=class extends e.SessionEventArgs{constructor(n,i){super(i),this.privResult=n}get result(){return this.privResult}};return Ui.TranslationSynthesisEventArgs=t,Ui}var Wi={},Sg;function SR(){if(Sg)return Wi;Sg=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.TranslationRecognitionResult=void 0;const e=_();let t=class yR extends e.SpeechRecognitionResult{constructor(n,i,o,a,s,c,u,l,p,d,h){super(i,o,a,s,c,u,l,void 0,p,d,h),this.privTranslations=n}static fromSpeechRecognitionResult(n){return new yR(void 0,n.resultId,n.reason,n.text,n.duration,n.offset,n.language,n.languageDetectionConfidence,n.errorDetails,n.json,n.properties)}get translations(){return this.privTranslations}};return Wi.TranslationRecognitionResult=t,Wi}var zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.TranslationSynthesisResult=void 0;class xk{constructor(t,r){this.privReason=t,this.privAudio=r}get audio(){return this.privAudio}get reason(){return this.privReason}}zu.TranslationSynthesisResult=xk;var CR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(e.ResultReason||(e.ResultReason={}))})(CR);var Wr={},Cg;function zk(){if(Cg)return Wr;Cg=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.SpeechConfigImpl=Wr.SpeechConfig=void 0;const e=O(),t=j,r=_();let n=class{constructor(){}static fromSubscription(a,s){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,s){t.Contracts.throwIfNull(a,"endpoint");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),s!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c}static fromHost(a,s){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),s!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c}static fromAuthorizationToken(a,s){t.Contracts.throwIfNull(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,s),c.authorizationToken=a,c}close(){}};Wr.SpeechConfig=n;class i extends n{constructor(){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}setProperty(a,s){t.Contracts.throwIfNull(s,"value"),this.privProperties.setProperty(a,s)}getProperty(a,s){return this.privProperties.getProperty(a,s)}setProxy(a,s,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],s),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(a,s){const c=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=s,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const a=new i;return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Wr.SpeechConfigImpl=i,Wr}var Hr={},Pg;function Lk(){if(Pg)return Hr;Pg=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.SpeechTranslationConfigImpl=Hr.SpeechTranslationConfig=void 0;const e=O(),t=j,r=_();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(a,s){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),c}static fromAuthorizationToken(a,s){t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),c}static fromHost(a,s){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),s!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c}static fromEndpoint(a,s){t.Contracts.throwIfNull(a,"endpoint"),t.Contracts.throwIfNull(s,"subscriptionKey");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c}};Hr.SpeechTranslationConfig=n;class i extends n{constructor(){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value");const s=this.targetLanguages;s.includes(a)||(s.push(a),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,s.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}setProxy(a,s,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],s),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(a,s){return this.privSpeechProperties.getProperty(a,s)}setProperty(a,s){this.privSpeechProperties.setProperty(a,s)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,s){const c=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=s,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Hr.SpeechTranslationConfigImpl=i,Hr}var Hi={},Rg;function RR(){if(Rg)return Hi;Rg=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.PropertyCollection=void 0;const e=_();let t=class PR{constructor(){this.privKeys=[],this.privValues=[]}getProperty(n,i){let o;typeof n=="string"?o=n:o=e.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(n,i){let o;typeof n=="string"?o=n:o=e.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o){this.privValues[a]=i;return}this.privKeys.push(o),this.privValues.push(i)}clone(){const n=new PR;for(let i=0;i<this.privKeys.length;i++)n.privKeys.push(this.privKeys[i]),n.privValues.push(this.privValues[i]);return n}mergeTo(n){this.privKeys.forEach(i=>{if(n.getProperty(i,void 0)===void 0){const o=this.getProperty(i);n.setProperty(i,o)}})}get keys(){return this.privKeys}};return Hi.PropertyCollection=t,Hi}var Lu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=16]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=25]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",t[t.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",t[t.Conversation_ApplicationId=46]="Conversation_ApplicationId",t[t.Conversation_DialogType=47]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=49]="Conversation_From_Id",t[t.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=56]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=57]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=59]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=67]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(e.PropertyId||(e.PropertyId={}))})(Lu);var Vi={},Eg;function jk(){if(Eg)return Vi;Eg=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Recognizer=void 0;const e=O(),t=z(),r=j,n=_();let i=class ER{constructor(a,s,c){this.audioConfig=a!==void 0?a:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=s.clone(),this.privConnectionFactory=c,this.implCommonRecognizerSetup()}close(a,s){r.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),a,s)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){e.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",s="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,s=navigator.userAgent,c=navigator.appVersion);const u=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(a,s,c))));this.privReco=this.createServiceRecognizer(ER.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed);const s=new t.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,s.resolve,s.reject);const c=await s.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(a){const s=a.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return s&&s!==""?new e.CognitiveSubscriptionKeyAuthentication(s):new e.CognitiveTokenAuthentication(()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return Vi.Recognizer=i,Vi}var Ki={},wg;function Bk(){if(wg)return Ki;wg=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.SpeechRecognizer=void 0;const e=O(),t=z(),r=j,n=_();let i=class wR extends n.Recognizer{constructor(a,s){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(s,c.properties,new e.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(a,s,c){const u=a;return s.properties.mergeTo(u.properties),new wR(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,s){t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,s)}startContinuousRecognitionAsync(a,s){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,s)}stopContinuousRecognitionAsync(a,s){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,s)}startKeywordRecognitionAsync(a,s,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,s){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,s)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,s,c,u){const l=c;return new e.SpeechServiceRecognizer(a,s,l,u,this)}};return Ki.SpeechRecognizer=i,Ki}var Ji={},Tg;function Fk(){if(Tg)return Ji;Tg=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.IntentRecognizer=void 0;const e=O(),t=z(),r=j,n=_();let i=class extends n.Recognizer{constructor(a,s){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const c=a;r.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(s,c.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,s){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,s)}startContinuousRecognitionAsync(a,s){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,s)}stopContinuousRecognitionAsync(a,s){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,s)}startKeywordRecognitionAsync(a,s,c){r.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,s){if(a)try{a()}catch(c){s&&s(c)}}addIntent(a,s){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(s,"intentId"),r.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([s,a])}addIntentWithLanguageModel(a,s,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(a,"intentId"),r.Contracts.throwIfNull(s,"model");const u=s;r.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[a]=new e.AddedLmIntent(u,c)}addAllIntents(a,s){r.Contracts.throwIfNull(a,"model");const c=a;r.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(c,s)}close(a,s){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,s)}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,s,c,u){const l=c;return new e.IntentServiceRecognizer(a,s,l,u,this)}async dispose(a){this.privDisposedIntentRecognizer||a&&(this.privDisposedIntentRecognizer=!0,await super.dispose(a))}buildSpeechContext(){let a,s,c;const u=[];this.privUmbrellaIntent!==void 0&&(a=this.privUmbrellaIntent.modelImpl.appId,s=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const l of Object.keys(this.privAddedLmIntents)){const p=this.privAddedLmIntents[l];if(a===void 0)a=p.modelImpl.appId;else if(a!==p.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(s===void 0)s=p.modelImpl.region;else if(s!==p.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(c===void 0)c=p.modelImpl.subscriptionKey;else if(c!==p.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+a+"-PRODUCTION#"+l;u.push(d)}return{Intent:{id:a,key:c===void 0?this.privProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+a+"-PRODUCTION"]}}};return Ji.IntentRecognizer=i,Ji}var TR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(e.VoiceProfileType||(e.VoiceProfileType={}))})(TR);var Gi={},Qi={},Vr={},Ig;function IR(){if(Ig)return Vr;Ig=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.ConnectionMessageImpl=Vr.ConnectionMessage=void 0;const e=we,t=z(),r=RR(),n=Lu;let i=class{};Vr.ConnectionMessage=i;class o{constructor(s){this.privConnectionMessage=s,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(s=>s.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Vr.ConnectionMessageImpl=o,Vr}var _g;function _R(){if(_g)return Qi;_g=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.Connection=void 0;const e=O(),t=z(),r=IR(),n=j,i=_();let o=class Ad{static fromRecognizer(s){const c=s.internalData,u=new Ad;return u.privInternalData=c,u.setupEvents(),u}static fromSynthesizer(s){const c=s.internalData,u=new Ad;return u.privInternalData=c,u.setupEvents(),u}openConnection(s,c){t.marshalPromiseToCallbacks(this.privInternalData.connect(),s,c)}closeConnection(s,c){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");t.marshalPromiseToCallbacks(this.privInternalData.disconnect(),s,c)}setMessageProperty(s,c,u){if(n.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if(s.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(c,u)}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if(s.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,u)}}sendMessageAsync(s,c,u,l){t.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(s,c),u,l)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(s=>{s.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(s.connectionId)):s.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(s.connectionId)):s.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(s.message))):s.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(s.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(s=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(s.jsonString,s.name))})}};return Qi.Connection=o,Qi}var Ag;function $k(){if(Ag)return Gi;Ag=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.TranslationRecognizer=void 0;const e=O(),t=z(),r=_R(),n=j,i=_();let o=class AR extends i.Recognizer{constructor(s,c,u){const l=s;n.Contracts.throwIfNull(l,"speechConfig"),super(c,l.properties,u||new e.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationVoice]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationToLanguages]),n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(s,c,u){const l=s;return c.properties.mergeTo(l.properties),new AR(s,u)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,s)}recognizeOnceAsync(s,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),s,c)}startContinuousRecognitionAsync(s,c){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),s,c)}stopContinuousRecognitionAsync(s,c){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),s,c)}removeTargetLanguage(s){if(n.Contracts.throwIfNullOrUndefined(s,"language to be removed"),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=c.indexOf(s);u>-1&&(c.splice(u,1),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")),this.updateLanguages(c))}}addTargetLanguage(s){n.Contracts.throwIfNullOrUndefined(s,"language to be added");let c=[];this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c.includes(s)||(c.push(s),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))):(this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,s),c=[s]),this.updateLanguages(c)}close(s,c){n.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),s,c)}onConnection(){}async dispose(s){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,s&&(await this.implRecognizerStop(),await super.dispose(s)))}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,c,u,l){const p=u;return new e.TranslationServiceRecognizer(s,c,p,l,this)}updateLanguages(s){const c=r.Connection.fromRecognizer(this);c&&(c.setMessageProperty("speech.context","translationcontext",{to:s}),c.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:s})))}};return Gi.TranslationRecognizer=o,Gi}var Xi={},bg;function qk(){if(bg)return Xi;bg=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.Translations=void 0;const e=_();let t=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(n,i){return this.privMap.getProperty(n,i)}set(n,i){this.privMap.setProperty(n,i)}};return Xi.Translations=t,Xi}var bR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(e.NoMatchReason||(e.NoMatchReason={}))})(bR);var Yi={},kg;function Uk(){if(kg)return Yi;kg=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.NoMatchDetails=void 0;const e=O(),t=_();let r=class kR{constructor(i){this.privReason=i}static fromResult(i){const o=e.SimpleSpeechPhrase.fromJSON(i.json);let a=t.NoMatchReason.NotRecognized;switch(o.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:a=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:a=t.NoMatchReason.InitialSilenceTimeout;break;default:a=t.NoMatchReason.NotRecognized;break}return new kR(a)}get reason(){return this.privReason}};return Yi.NoMatchDetails=r,Yi}var ju={};Object.defineProperty(ju,"__esModule",{value:!0});ju.TranslationRecognitionCanceledEventArgs=void 0;class Wk{constructor(t,r,n,i,o){this.privCancelReason=r,this.privErrorDetails=n,this.privResult=o,this.privSessionId=t,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}ju.TranslationRecognitionCanceledEventArgs=Wk;var Zi={},Og;function Hk(){if(Og)return Zi;Og=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.IntentRecognitionCanceledEventArgs=void 0;const e=_();let t=class extends e.IntentRecognitionEventArgs{constructor(n,i,o,a,s,c){super(a,s,c),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Zi.IntentRecognitionCanceledEventArgs=t,Zi}var va={};Object.defineProperty(va,"__esModule",{value:!0});va.CancellationDetailsBase=void 0;class Vk{constructor(t,r,n){this.privReason=t,this.privErrorDetails=r,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}va.CancellationDetailsBase=Vk;var eo={},Mg;function Kk(){if(Mg)return eo;Mg=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.CancellationDetails=void 0;const e=O(),t=va,r=_();let n=class OR extends t.CancellationDetailsBase{constructor(o,a,s){super(o,a,s)}static fromResult(o){let a=r.CancellationReason.Error,s=r.CancellationErrorCode.NoError;if(o instanceof r.RecognitionResult&&o.json){const c=e.SimpleSpeechPhrase.fromJSON(o.json);a=e.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return o.properties&&(s=r.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new OR(a,o.errorDetails||e.EnumTranslation.implTranslateErrorDetails(s),s)}};return eo.CancellationDetails=n,eo}var MR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(e.CancellationErrorCode||(e.CancellationErrorCode={}))})(MR);var to={},Dg;function Jk(){if(Dg)return to;Dg=1,Object.defineProperty(to,"__esModule",{value:!0}),to.ConnectionEventArgs=void 0;const e=_();let t=class extends e.SessionEventArgs{};return to.ConnectionEventArgs=t,to}var ro={},Ng;function Gk(){if(Ng)return ro;Ng=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.ServiceEventArgs=void 0;const e=_();let t=class extends e.SessionEventArgs{constructor(n,i,o){super(o),this.privJsonResult=n,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return ro.ServiceEventArgs=t,ro}var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.PhraseListGrammar=void 0;class Wh{constructor(t){this.privGrammerBuilder=t.dynamicGrammar}static fromRecognizer(t){const r=t.internalData;return new Wh(r)}addPhrase(t){this.privGrammerBuilder.addPhrase(t)}addPhrases(t){this.privGrammerBuilder.addPhrase(t)}clear(){this.privGrammerBuilder.clearPhrases()}}Bu.PhraseListGrammar=Wh;var Kr={},xg;function Hh(){if(xg)return Kr;xg=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.DialogServiceConfigImpl=Kr.DialogServiceConfig=void 0;const e=j,t=_();let r=class{constructor(){}set applicationId(o){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};Kr.DialogServiceConfig=r;class n extends r{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.privSpeechConfig.speechRecognitionLanguage=o}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(o){this.privSpeechConfig.outputFormat=o}setProperty(o,a){this.privSpeechConfig.setProperty(o,a)}getProperty(o,a){return this.privSpeechConfig.getProperty(o)}setProxy(o,a,s,c){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,o),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),s&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,s),c&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(o,a,s){this.privSpeechConfig.setServiceProperty(o,a)}close(){}}return Kr.DialogServiceConfigImpl=n,Kr}var no={},zg;function Qk(){if(zg)return no;zg=1,Object.defineProperty(no,"__esModule",{value:!0}),no.BotFrameworkConfig=void 0;const e=j,t=Hh(),r=_();let n=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"subscription"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),s&&c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c}static fromAuthorizationToken(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),s&&c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c}static fromHost(o,a,s){e.Contracts.throwIfNullOrUndefined(o,"host");const c=o instanceof URL?o:new URL(`wss://${o}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(o,a){e.Contracts.throwIfNull(o,"endpoint");const s=new t.DialogServiceConfigImpl;return s.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,o.toString()),a!==void 0&&s.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),s}};return no.BotFrameworkConfig=n,no}var io={},Lg;function Xk(){if(Lg)return io;Lg=1,Object.defineProperty(io,"__esModule",{value:!0}),io.CustomCommandsConfig=void 0;const e=j,t=Hh(),r=_();let n=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"subscription"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,o),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),c}static fromAuthorizationToken(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,o),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,s),c}set applicationId(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,o)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return io.CustomCommandsConfig=n,io}var oo={},so={},ao={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.QueryParameterNames=void 0;class fe{}Mt.QueryParameterNames=fe;fe.BotId="botid";fe.CustomSpeechDeploymentId="cid";fe.CustomVoiceDeploymentId="deploymentId";fe.EnableAudioLogging="storeAudio";fe.EnableLanguageId="lidEnabled";fe.EnableWordLevelTimestamps="wordLevelTimestamps";fe.EndSilenceTimeoutMs="endSilenceTimeoutMs";fe.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";fe.Format="format";fe.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";fe.Language="language";fe.Profanity="profanity";fe.RequestBotStatusMessages="enableBotMessageStatus";fe.StableIntermediateThreshold="stableIntermediateThreshold";fe.StableTranslation="stableTranslation";fe.TestHooks="testhooks";fe.Postprocessing="postprocessing";fe.CtsMeetingId="meetingId";fe.CtsDeviceId="deviceId";fe.CtsIsParticipant="isParticipant";fe.EnableAvatar="enableTalkingAvatar";var jg;function Dt(){if(jg)return ao;jg=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.ConnectionFactoryBase=void 0;const e=O(),t=_(),r=Mt;let n=class{static getHostSuffix(o){if(o){if(o.toLowerCase().startsWith("china"))return".azure.cn";if(o.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(o,a,s){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,r.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,r.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,r.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,r.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,r.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,r.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,r.QueryParameterNames.EnableWordLevelTimestamps],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,r.QueryParameterNames.StableIntermediateThreshold]]).forEach((l,p)=>{this.setUrlParameter(p,l,o,a,s)});const u=JSON.parse(o.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(l=>{a[l]=u[l]})}setUrlParameter(o,a,s,c,u){const l=s.parameters.getProperty(o,void 0);l&&(!u||u.search(a)===-1)&&(c[a]=l.toLocaleLowerCase())}};return ao.ConnectionFactoryBase=n,ao}var Bg;function Yk(){if(Bg)return so;Bg=1,Object.defineProperty(so,"__esModule",{value:!0}),so.DialogConnectionFactory=void 0;const e=Te(),t=O(),r=_(),n=Dt(),i=O(),o=we,a=Mt;class s extends n.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),h=u.parameters.getProperty(r.PropertyId.Conversation_DialogType),f=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),g=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),y=u.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),v={};v[o.HeaderNames.ConnectionId]=p,v[a.QueryParameterNames.Format]=u.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),v[a.QueryParameterNames.Language]=g,v[a.QueryParameterNames.RequestBotStatusMessages]=y,d&&(v[a.QueryParameterNames.BotId]=d,h===r.DialogServiceConfig.DialogTypes.CustomCommands&&(v[o.HeaderNames.CustomCommandsAppId]=d));const m=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",S=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",P={};l.token!=null&&l.token!==""&&(P[l.headerName]=l.token);let R=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!R){const I=n.ConnectionFactoryBase.getHostSuffix(f),E=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${f}.${s.BaseUrl}${I}`);R=`${E.endsWith("/")?E:E+"/"}${m}${s.ApiKey}/${S}`}this.setCommonUrlParams(u,v,R);const w=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(R,v,P,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),w,p)}}return so.DialogConnectionFactory=s,s.ApiKey="api",s.BaseUrl="convai.speech",so}var Fg;function Zk(){if(Fg)return oo;Fg=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.DialogServiceConnector=void 0;const e=Yk(),t=O(),r=z(),n=j,i=_(),o=Lu;let a=class extends i.Recognizer{constructor(c,u){const l=c;n.Contracts.throwIfNull(c,"dialogConfig"),super(u,l.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=l.properties.clone();const p=this.buildAgentConfig();this.privReco.agentConfig.set(p)}connect(c,u){r.marshalPromiseToCallbacks(this.privReco.connect(),c,u)}disconnect(c,u){r.marshalPromiseToCallbacks(this.privReco.disconnect(),c,u)}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(o.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(c){this.properties.setProperty(o.PropertyId.Conversation_Speech_Activity_Template,c)}listenOnceAsync(c,u){if(this.isTurnComplete){n.Contracts.throwIfDisposed(this.privIsDisposed);const p=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new r.Deferred;await this.privReco.recognize(t.RecognitionMode.Conversation,d.resolve,d.reject);const h=await d.promise;return await this.implRecognizerStop(),h})();p.catch(()=>{this.dispose(!0).catch(()=>{})}),r.marshalPromiseToCallbacks(p.finally(()=>{this.isTurnComplete=!0}),c,u)}}sendActivityAsync(c,u,l){r.marshalPromiseToCallbacks(this.privReco.sendMessage(c),u,l)}close(c,u){n.Contracts.throwIfDisposed(this.privIsDisposed),r.marshalPromiseToCallbacks(this.dispose(!0),c,u)}async dispose(c){this.privIsDisposed||c&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(c))}createRecognizerConfig(c){return new t.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,l,p){const d=l;return new t.DialogServiceAdapter(c,u,d,p,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(o.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(o.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(o.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return oo.DialogServiceConnector=a,oo}var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.ActivityReceivedEventArgs=void 0;class eO{constructor(t,r){this.privActivity=t,this.privAudioStream=r}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}Fu.ActivityReceivedEventArgs=eO;var $u={},qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.TurnStatusResponsePayload=void 0;class Vh{constructor(t){this.privMessageStatusResponse=JSON.parse(t)}static fromJSON(t){return new Vh(t)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}qu.TurnStatusResponsePayload=Vh;Object.defineProperty($u,"__esModule",{value:!0});$u.TurnStatusReceivedEventArgs=void 0;const tO=qu;class rO{constructor(t){this.privTurnStatus=tO.TurnStatusResponsePayload.fromJSON(t)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}$u.TurnStatusReceivedEventArgs=rO;var DR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,function(t){t[t.UriQueryParameter=0]="UriQueryParameter"}(e.ServicePropertyChannel||(e.ServicePropertyChannel={}))})(DR);var NR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(e.ProfanityOption||(e.ProfanityOption={}))})(NR);var co={},$g;function nO(){if($g)return co;$g=1,Object.defineProperty(co,"__esModule",{value:!0}),co.BaseAudioPlayer=void 0;const e=ke,t=_(),r=$r;let n=class{constructor(o){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,o===void 0&&(o=t.AudioStreamFormat.getDefaultInputFormat()),this.init(o)}playAudioSample(o,a,s){try{this.ensureInitializedContext();const c=this.formatAudioData(o),u=new Float32Array(this.samples.length+c.length);u.set(this.samples,0),u.set(c,this.samples.length),this.samples=u,a&&a()}catch(c){s&&s(c)}}stopAudio(o,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{o&&o()},s=>{a&&a(s)}),this.audioContext=null)}init(o){this.audioFormat=o,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const o=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},o)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(o){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(o),128);case 16:return this.formatArrayBuffer(new Int16Array(o),32768);case 32:return this.formatArrayBuffer(new Int32Array(o),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(o,a){const s=new Float32Array(o.length);for(let c=0;c<o.length;c++)s[c]=o[c]/a;return s}updateAudioBuffer(){if(this.samples.length===0)return;const o=this.audioFormat.channels,a=this.audioContext.createBufferSource(),s=this.samples.length/o,c=this.audioContext.createBuffer(o,s,this.audioFormat.samplesPerSec);for(let u=0;u<o;u++){let l=u;const p=c.getChannelData(u);for(let d=0;d<this.samples.length;d++,l+=o)p[d]=this.samples[l]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(o){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),s=this.audioContext.destination;await this.audioContext.decodeAudioData(o,c=>{a.buffer=c,a.connect(s),a.start(0)})}};return co.BaseAudioPlayer=n,co}var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.ConnectionMessageEventArgs=void 0;class iO{constructor(t){this.privConnectionMessage=t}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}Uu.ConnectionMessageEventArgs=iO;var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.VoiceProfile=void 0;class oO{constructor(t,r){this.privId=t,this.privProfileType=r}get profileId(){return this.privId}get profileType(){return this.privProfileType}}Wu.VoiceProfile=oO;var Jr={},qg;function sO(){if(qg)return Jr;qg=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.VoiceProfileEnrollmentCancellationDetails=Jr.VoiceProfileEnrollmentResult=void 0;const e=O(),t=_();let r=class bd{constructor(o,a,s){this.privReason=o,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=s,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(o){const a=[];for(const s of o.value){const c=s.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:s.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,u=new bd(c,null,null);u.privDetails=this.getIdentificationDetails(s),a.push(u)}return a}static FromVerificationProfileList(o){const a=[];for(const s of o.value){const c=s.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:s.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,u=new bd(c,null,null);u.privDetails=this.getVerificationDetails(s),a.push(u)}return a}static getIdentificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount||0,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.identificationProfileId,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.verificationProfileId,remainingEnrollmentsCount:o.remainingEnrollments||o.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}};Jr.VoiceProfileEnrollmentResult=r;class n extends t.CancellationDetailsBase{constructor(o,a,s){super(o,a,s)}static fromResult(o){const a=t.CancellationReason.Error;let s=t.CancellationErrorCode.NoError;return o.properties&&(s=t.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new n(a,o.errorDetails,s)}}return Jr.VoiceProfileEnrollmentCancellationDetails=n,Jr}var Gr={},Ug;function aO(){if(Ug)return Gr;Ug=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.VoiceProfileCancellationDetails=Gr.VoiceProfileResult=void 0;const e=O(),t=j,r=_();let n=class{constructor(a,s){this.privReason=a,this.privProperties=new r.PropertyCollection,a===r.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(s,"statusText"),this.privErrorDetails=s,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};Gr.VoiceProfileResult=n;class i extends r.CancellationDetailsBase{constructor(a,s,c){super(a,s,c)}static fromResult(a){const s=r.CancellationReason.Error;let c=r.CancellationErrorCode.NoError;return a.properties&&(c=r.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new i(s,a.errorDetails,c)}}return Gr.VoiceProfileCancellationDetails=i,Gr}var uo={},Wg;function cO(){if(Wg)return uo;Wg=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.VoiceProfilePhraseResult=void 0;const e=j,t=_();let r=class extends t.VoiceProfileResult{constructor(i,o,a,s){super(i,o),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(s,"phrase array"),this.privType=a,s&&s[0]&&(this.privPhrases=s)}get phrases(){return this.privPhrases}get type(){return this.privType}};return uo.VoiceProfilePhraseResult=r,uo}var lo={},Hg;function uO(){if(Hg)return lo;Hg=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.VoiceProfileClient=void 0;const e=O(),t=fR(),r=j,n=_();let i=class extends n.Recognizer{constructor(a){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const s=a;r.Contracts.throwIfNull(s,"speechConfig"),super(t.AudioConfig.fromStreamInput(n.AudioInputStream.createPushStream()),s.properties,new e.VoiceProfileConnectionFactory),this.privProperties=s.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,s){const c=await this.privVoiceAdapter.createProfile(a,s);return new n.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,s){return this.privVoiceAdapter.getActivationPhrases(a,s)}async enrollProfileAsync(a,s){const c=s;return r.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=s,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,s,c,u){const l=c;return new e.VoiceServiceRecognizer(a,s,l,u,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.properties)}getResult(a,s){return new n.VoiceProfileResult(a.ok?s:n.ResultReason.Canceled,a.statusText)}};return lo.VoiceProfileClient=i,lo}var po={},Vg;function lO(){if(Vg)return po;Vg=1,Object.defineProperty(po,"__esModule",{value:!0}),po.SpeakerRecognizer=void 0;const e=O(),t=j,r=_();let n=class extends r.Recognizer{constructor(o,a){t.Contracts.throwIfNullOrUndefined(o,"speechConfig");const s=o;t.Contracts.throwIfNullOrUndefined(s,"speechConfig"),super(a,s.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=s.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){t.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}async recognizeOnceAsync(o){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(o)}async close(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(o){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(o);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,a,s,c){const u=s;return new e.SpeakerServiceRecognizer(o,a,u,c,this)}async dispose(o){this.privDisposedSpeakerRecognizer||o&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(o))}};return po.SpeakerRecognizer=n,po}var ho={},Kg;function pO(){if(Kg)return ho;Kg=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.SpeakerIdentificationModel=void 0;const e=j,t=_();let r=class xR{constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const o of i){if(o.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+o.profileId);this.privVoiceProfiles.push(o),this.privProfileIds.push(o.profileId)}}static fromProfiles(i){return new xR(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return ho.SpeakerIdentificationModel=r,ho}var fo={},Jg;function dO(){if(Jg)return fo;Jg=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.SpeakerVerificationModel=void 0;const e=j,t=_();let r=class zR{constructor(i){if(e.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new zR(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return fo.SpeakerVerificationModel=r,fo}var vo={},Kh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(e.LanguageIdMode||(e.LanguageIdMode={}))})(Kh);var Gg;function hO(){if(Gg)return vo;Gg=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.AutoDetectSourceLanguageConfig=void 0;const e=O(),t=j,r=_(),n=Kh;let i=class ac{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const a=new ac;return a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),a}static fromLanguages(a){t.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const s=new ac;return s.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),s}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const s=new ac,c=[];return a.forEach(u=>{if(c.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const l=u.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();s.properties.setProperty(l,u.endpointId)}}),s.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),s}get properties(){return this.privProperties}set mode(a){a===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return vo.AutoDetectSourceLanguageConfig=i,vo}var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.AutoDetectSourceLanguageResult=void 0;const Qg=j;class Nc{constructor(t,r){Qg.Contracts.throwIfNullOrUndefined(t,"language"),Qg.Contracts.throwIfNullOrUndefined(r,"languageDetectionConfidence"),this.privLanguage=t,this.privLanguageDetectionConfidence=r}static fromResult(t){return new Nc(t.language,t.languageDetectionConfidence)}static fromConversationTranscriptionResult(t){return new Nc(t.language,t.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}Hu.AutoDetectSourceLanguageResult=Nc;var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.SourceLanguageConfig=void 0;const fO=j;class Jh{constructor(t,r){fO.Contracts.throwIfNullOrUndefined(t,"language"),this.privLanguage=t,this.privEndpointId=r}static fromLanguage(t,r){return new Jh(t,r)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}Vu.SourceLanguageConfig=Jh;var dp={},Xg;function vO(){return Xg||(Xg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=O(),r=_();var n;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(n=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}));class i{constructor(s,c=r.ResultReason.RecognizedSpeaker,u=r.CancellationErrorCode.NoError,l=""){this.privProperties=new r.PropertyCollection;const p=s.scenario==="TextIndependentIdentification"?n.Identify:n.Verify;this.privReason=c,this.privReason!==r.ResultReason.Canceled?p===n.Identify?(this.privProfileId=s.identificationResult.identifiedProfile.profileId,this.privScore=s.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=s.verificationResult.score,s.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=r.ResultReason.NoMatch),s.verificationResult.profileId!==void 0&&s.verificationResult.profileId!==""&&(this.privProfileId=s.verificationResult.profileId)):(this.privErrorDetails=l,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[u])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(s))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}e.SpeakerRecognitionResult=i;class o extends r.CancellationDetailsBase{constructor(s,c,u){super(s,c,u)}static fromResult(s){const c=r.CancellationReason.Error;let u=r.CancellationErrorCode.NoError;return s.properties&&(u=r.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new o(c,s.errorDetails,u)}}e.SpeakerRecognitionCancellationDetails=o}(dp)),dp}var hp={},Qr={},Yg;function LR(){if(Yg)return Qr;Yg=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.ConversationImpl=Qr.Conversation=void 0;const e=O(),t=z(),r=j,n=_();let i=class{constructor(){}static createConversationAsync(s,c,u,l){r.Contracts.throwIfNullOrUndefined(s,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(s.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!s.subscriptionKey&&!s.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(s.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof c=="string"?(p=new o(s,c),t.marshalPromiseToCallbacks((async()=>{})(),u,l)):(p=new o(s),d=c,h=u,p.createConversationAsync(()=>{d&&d()},f=>{h&&h(f)})),p}};Qr.Conversation=i;class o extends i{constructor(s,c){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new e.ConversationManager,s.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||s.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=s.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{s.targetLanguages.length===0&&s.addTargetLanguage(this.privLanguage),s.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||s.setProfanity(n.ProfanityOption.Masked);let d=s.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),r.Contracts.throwIfNullOrTooLong(d,"nickname",50),r.Contracts.throwIfNullOrTooShort(d,"nickname",2),s.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],d)}this.privConfig=s;const l=s;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var s,c;return(s=this.privParticipants.me)!=null&&s.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const s=this.conversationId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:s,participants:c,conversationProperties:u}}get canSend(){var s;return this.privIsConnected&&!((s=this.privParticipants.me)!=null&&s.isMuted)}get canSendAsHost(){var s;return this.privIsConnected&&((s=this.privParticipants.me)==null?void 0:s.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),this.privToken=s}set conversationTranslator(s){this.privConversationTranslator=s}onToken(s){this.privConversationTranslator.onToken(s)}createConversationAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startConversationAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(s,c,u){r.Contracts.throwIfNullOrUndefined(s,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(s),c,u)}joinConversationAsync(s,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,s,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(s,c){t.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),s,c)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(s,c){t.marshalPromiseToCallbacks(this.endConversationImplAsync(),s,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(s,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(s,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(s,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&s.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(s),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof s=="string"?l=s:s.hasOwnProperty("id")?l=s.id:s.hasOwnProperty("userId")&&(l=s.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockConversationAsync(s,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(s,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),s.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(s){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await s.enforceAudioGating(),this.privTranscriberRecognizer=s,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const s=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:s,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(s){if(this.privParticipants.addOrUpdateParticipant(s)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[s],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(s){this.privParticipants.deleteParticipant(s.id);const c=this.conversationInfo;return c.participants=[s],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(s){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}s&&this.dispose()}handleCallback(s,c){if(s){try{s()}catch(u){c&&c(u)}s=void 0}}handleError(s,c){if(c)if(s instanceof Error){const u=s;c(u.name+": "+u.message)}else c(s)}toParticipants(s){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return s?c:c.filter(u=>u.isHost===!1)}toParticipant(s){return new n.Participant(s.id,s.avatar,s.displayName,s.isHost,s.isMuted,s.isUsingTts,s.preferredLanguage,s.voice)}getMuteAllCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMuteCommand(s,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getEjectCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getChangeNicknameCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(s,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:s,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMessageCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(s,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:s,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return Qr.ConversationImpl=o,Qr}var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.ConversationCommon=void 0;class gO{constructor(t){this.privAudioConfig=t}handleCallback(t,r){if(t){try{t()}catch(n){r&&r(n)}t=void 0}}handleError(t,r){if(r)if(t instanceof Error){const n=t;r(n.name+": "+n.message)}else r(t)}}Ku.ConversationCommon=gO;var go={},Zg;function mO(){if(Zg)return go;Zg=1,Object.defineProperty(go,"__esModule",{value:!0}),go.ConversationExpirationEventArgs=void 0;const e=_();let t=class extends e.SessionEventArgs{constructor(n,i){super(i),this.privExpirationTime=n}get expirationTime(){return this.privExpirationTime}};return go.ConversationExpirationEventArgs=t,go}var mo={},em;function yO(){if(em)return mo;em=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.ConversationParticipantsChangedEventArgs=void 0;const e=_();let t=class extends e.SessionEventArgs{constructor(n,i,o){super(o),this.privReason=n,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return mo.ConversationParticipantsChangedEventArgs=t,mo}var yo={},tm;function SO(){if(tm)return yo;tm=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.ConversationTranslationCanceledEventArgs=void 0;const e=fa();let t=class extends e.CancellationEventArgsBase{};return yo.ConversationTranslationCanceledEventArgs=t,yo}var So={},rm;function CO(){if(rm)return So;rm=1,Object.defineProperty(So,"__esModule",{value:!0}),So.ConversationTranslationEventArgs=void 0;const e=_();let t=class extends e.RecognitionEventArgs{constructor(n,i,o){super(i,o),this.privResult=n}get result(){return this.privResult}};return So.ConversationTranslationEventArgs=t,So}var Co={},nm;function PO(){if(nm)return Co;nm=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.ConversationTranslationResult=void 0;const e=SR();let t=class extends e.TranslationRecognitionResult{constructor(n,i,o,a,s,c,u,l,p,d,h){super(i,a,s,c,u,l,void 0,void 0,p,d,h),this.privId=n,this.privOrigLang=o}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return Co.ConversationTranslationResult=t,Co}var fp={},Po={},ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.StringUtils=void 0;class RO{static formatString(t,r){if(!t)return"";if(!r)return t;let n="",i="";const o=c=>{n+=c},a=c=>{i+=c};let s=o;for(let c=0;c<t.length;c++){const u=t[c],l=c+1<t.length?t[c+1]:"";switch(u){case"{":l==="{"?(s("{"),c++):s=a;break;case"}":l==="}"?(s("}"),c++):(r.hasOwnProperty(i)&&(n+=r[i]),s=o,i="");break;default:s(u);break}}return n}}ga.StringUtils=RO;var im;function EO(){if(im)return Po;im=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.ConversationTranslatorConnectionFactory=void 0;const e=Te(),t=ga,r=j,n=_(),i=we,o=Mt,a=Dt(),s=O();let c=class jR extends a.ConnectionFactoryBase{constructor(l){super(),r.Contracts.throwIfNullOrUndefined(l,"convGetter"),this.privConvGetter=l}create(l,p,d){const h=l.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",f=this.privConvGetter().room,g=f.cognitiveSpeechRegion||l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),y={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(g),path:jR.CTS_VIRT_MIC_PATH,region:encodeURIComponent(g)};y[o.QueryParameterNames.Language]=encodeURIComponent(l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),y[o.QueryParameterNames.CtsMeetingId]=encodeURIComponent(f.roomId),y[o.QueryParameterNames.CtsDeviceId]=encodeURIComponent(f.participantId),y[o.QueryParameterNames.CtsIsParticipant]=f.isHost?"":"&"+o.QueryParameterNames.CtsIsParticipant;let v="";const m={},S={};if(h){v=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),v||(v="wss://"+l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),v=t.StringUtils.formatString(v,y);const R=new URL(v);R.searchParams.forEach((I,E)=>{m[E]=I}),new s.TranscriberConnectionFactory().setQueryParams(m,l,v),m[o.QueryParameterNames.CtsMeetingId]=y[o.QueryParameterNames.CtsMeetingId],m[o.QueryParameterNames.CtsDeviceId]=y[o.QueryParameterNames.CtsDeviceId],f.isHost||(m[o.QueryParameterNames.CtsIsParticipant]=""),o.QueryParameterNames.Format in m||(m[o.QueryParameterNames.Format]="simple"),R.searchParams.forEach((I,E)=>{R.searchParams.set(E,m[E]),delete m[E]}),v=R.toString()}else{const R=new s.TranslationConnectionFactory;v=R.getEndpointUrl(l,!0),v=t.StringUtils.formatString(v,y),R.setQueryParams(m,l,v)}S[i.HeaderNames.ConnectionId]=d,S[e.RestConfigBase.configParams.token]=f.token,p.token&&(S[p.headerName]=p.token);const P=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new e.WebsocketConnection(v,m,S,new s.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),P,d)}};return Po.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",Po}var om;function wO(){return om||(om=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=O(),r=EO(),n=z(),i=j,o=_(),a=LR(),s=Gh();var c;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(c=e.SpeechState||(e.SpeechState={}));class u extends o.TranslationRecognizer{constructor(d,h,f,g){super(d,h,new r.ConversationTranslatorConnectionFactory(g)),this.privSpeechState=c.Inactive,f&&(this.privTranslator=f,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(y,v)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,v)},this.recognized=async(y,v)=>{var m;(m=v.result)!=null&&m.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(v.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,v)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new s.ConversationTranslationCanceledEventArgs(o.CancellationReason.Error,d,o.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class l extends s.ConversationCommon{constructor(d){super(d),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new o.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const f=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));f[d]=h,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(f))}joinConversationAsync(d,h,f,g,y){try{if(typeof d=="string"){i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),y);let v=f;(v==null||v==="")&&(v=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=o.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(o.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(v),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage],v),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.ConversationTranslator_Name],h);const m=[o.PropertyId.SpeechServiceConnection_Host,o.PropertyId.ConversationTranslator_Host,o.PropertyId.SpeechServiceConnection_Endpoint,o.PropertyId.SpeechServiceConnection_ProxyHostName,o.PropertyId.SpeechServiceConnection_ProxyPassword,o.PropertyId.SpeechServiceConnection_ProxyPort,o.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const P of m){const R=this.privProperties.getProperty(P);if(R){const w=typeof P=="string"?P:o.PropertyId[P];this.privSpeechTranslationConfig.setProperty(w,R)}}const S=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const P of Object.keys(S))this.privSpeechTranslationConfig.setServiceProperty(P,S[P],o.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,v,P=>{P||this.handleError(new Error(this.privErrors.permissionDeniedConnect),y),this.privSpeechTranslationConfig.authorizationToken=P,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(g,y)},R=>{this.handleError(R,y)})},P=>{this.handleError(P,y)})}else typeof d=="object"?(i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(o.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(f,g)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),g)}catch(v){this.handleError(v,typeof f=="string"?y:g)}}leaveConversationAsync(d,h){n.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,f){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,f)}catch(g){this.handleError(g,f)}}startTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(f){throw this.privIsSpeaking=!1,await this.cancelSpeech(),f}})(),d,h)}stopTranscribingAsync(d,h){n.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((f,g)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(f,g)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,f){n.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,f)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=o.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}e.ConversationTranslator=l}(fp)),fp}var Ro={},sm;function TO(){if(sm)return Ro;sm=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.ConversationTranscriber=void 0;const e=O(),t=z(),r=j,n=_();let i=class BR extends n.Recognizer{constructor(a,s){const c=a;r.Contracts.throwIfNull(c,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(s,c.properties,new e.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,s,c){const u=a;return s.properties.mergeTo(u.properties),new BR(a,c)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple])===n.OutputFormat[n.OutputFormat.Simple]?n.OutputFormat.Simple:n.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,s){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,s)}stopTranscribingAsync(a,s){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,s)}close(a,s){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,s)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,s,c,u){const l=c;return u.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(a,s,l,u,this)}};return Ro.ConversationTranscriber=i,Ro}var Xr={},am;function IO(){if(am)return Xr;am=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.Participant=Xr.User=void 0;const e=_();class t{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}Xr.User=t;class r{constructor(i,o,a,s,c,u,l,p){this.privId=i,this.privAvatar=o,this.privDisplayName=a,this.privIsHost=s,this.privIsMuted=c,this.privIsUsingTts=u,this.privPreferredLanguage=l,this.privVoice=p,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,o,a){return new r(i,"",i,!1,!1,!1,o,a)}}return Xr.Participant=r,Xr}var FR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(e.ParticipantChangedReason||(e.ParticipantChangedReason={}))})(FR);var Yr={},cm;function _O(){if(cm)return Yr;cm=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.MeetingImpl=Yr.Meeting=void 0;const e=O(),t=z(),r=j,n=_();let i=class{constructor(){}static createMeetingAsync(s,c,u,l){if(r.Contracts.throwIfNullOrUndefined(s,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(s.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!s.subscriptionKey&&!s.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(s.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new o(s,c);return t.marshalPromiseToCallbacks((async()=>{})(),u,l),p}};Yr.Meeting=i;class o extends i{constructor(s,c){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(n.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new e.ConversationManager,s.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||s.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=s.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=s;const l=s;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var s,c;return(s=this.privParticipants.me)!=null&&s.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const s=this.meetingId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:s,participants:c,meetingProperties:u}}get canSend(){var s;return this.privIsConnected&&!((s=this.privParticipants.me)!=null&&s.isMuted)}get canSendAsHost(){var s;return this.privIsConnected&&((s=this.privParticipants.me)==null?void 0:s.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),this.privToken=s}createMeetingAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startMeetingAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(s,c,u){r.Contracts.throwIfNullOrUndefined(s,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(s),c,u)}joinMeetingAsync(s,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,s,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(s,c){t.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),s,c)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(s,c){t.marshalPromiseToCallbacks(this.endMeetingImplAsync(),s,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(s,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(s,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(s,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&s.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(s),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof s=="string"?l=s:s.hasOwnProperty("id")?l=s.id:s.hasOwnProperty("userId")&&(l=s.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockMeetingAsync(s,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(s,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),s.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(s,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(s){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await s.enforceAudioGating(),this.privTranscriberRecognizer=s,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const s=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:s,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(s){if(this.privParticipants.addOrUpdateParticipant(s)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[s],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(s){this.privParticipants.deleteParticipant(s.id);const c=this.meetingInfo;return c.participants=[s],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(s){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}s&&this.dispose()}handleCallback(s,c){if(s){try{s()}catch(u){c&&c(u)}s=void 0}}handleError(s,c){if(c)if(s instanceof Error){const u=s;c(u.name+": "+u.message)}else c(s)}toParticipants(s){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return s?c:c.filter(u=>u.isHost===!1)}toParticipant(s){return new n.Participant(s.id,s.avatar,s.displayName,s.isHost,s.isMuted,s.isUsingTts,s.preferredLanguage,s.voice)}getMuteAllCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMuteCommand(s,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getEjectCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getChangeNicknameCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(s,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:s,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMessageCommand(s){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(s,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:s,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return Yr.MeetingImpl=o,Yr}var Eo={},um;function AO(){if(um)return Eo;um=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.MeetingTranscriptionCanceledEventArgs=void 0;const e=fa();class t extends e.CancellationEventArgsBase{}return Eo.MeetingTranscriptionCanceledEventArgs=t,Eo}var wo={},lm;function bO(){if(lm)return wo;lm=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.MeetingTranscriber=void 0;const e=O(),t=z(),r=j,n=_(),i=Gh();let o=class{constructor(s){this.privAudioConfig=s,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}joinMeetingAsync(s,c,u){const l=s;r.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(s.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),t.marshalPromiseToCallbacks(l.connectTranscriberRecognizer(this.privRecognizer),c,u)}startTranscribingAsync(s,c){this.privRecognizer.startContinuousRecognitionAsync(s,c)}stopTranscribingAsync(s,c){this.privRecognizer.stopContinuousRecognitionAsync(s,c)}leaveMeetingAsync(s,c){this.privRecognizer.disconnectCallbacks(),t.marshalPromiseToCallbacks((async()=>{})(),s,c)}close(s,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),s,c)}async dispose(s){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),s&&(this.privDisposedRecognizer=!0))}};return wo.MeetingTranscriber=o,wo}var To={},pm;function kO(){if(pm)return To;pm=1,Object.defineProperty(To,"__esModule",{value:!0}),To.ConversationTranscriptionResult=void 0;const e=_();let t=class extends e.RecognitionResult{constructor(n,i,o,a,s,c,u,l,p,d,h){super(n,i,o,a,s,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return To.ConversationTranscriptionResult=t,To}var dm;function Gh(){return dm||(dm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=LR();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var r=Ku;Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=mO();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var i=yO();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var o=SO();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return o.ConversationTranslationCanceledEventArgs}});var a=CO();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var s=PO();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return s.ConversationTranslationResult}});var c=wO();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var u=TO();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var l=IO();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return l.User}});var p=FR;Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=_O();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=AO();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var f=bO();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return f.MeetingTranscriber}});var g=kO();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return g.ConversationTranscriptionResult}})}(hp)),hp}var Zr={},hm;function Qh(){if(hm)return Zr;hm=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.SynthesisRequest=Zr.Synthesizer=void 0;const e=O(),t=z(),r=j,n=_();let i=class $R{constructor(s){const c=s;r.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(s){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),l=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),p=$R.XMLEncode(s);return this.autoDetectSourceLanguage?u="en-US":l=l||c[u],l&&(p=`<voice name='${l}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${p}</speak>`,p}async dispose(s){this.privDisposed||(s&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const s=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(s.text,s.isSSML,s.requestId,s.cb,s.err,s.dataStream)}}createSynthesizerConfig(s){return new e.SynthesizerConfig(s,this.privProperties)}implCommonSynthesizeSetup(){let s=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(s=s+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const l=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(s,c,u)))),p=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new e.CognitiveSubscriptionKeyAuthentication(p):new e.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,l),this.privRestAdapter=this.createRestSynthesisAdapter(d,l)}static XMLEncode(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Zr.Synthesizer=i;class o{constructor(s,c,u,l,p,d){this.requestId=s,this.text=c,this.isSSML=u,this.cb=l,this.err=p,this.dataStream=d}}return Zr.SynthesisRequest=o,Zr}var Io={},fm;function OO(){if(fm)return Io;fm=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.SpeechSynthesizer=void 0;const e=O(),t=z(),r=ha,n=qr,i=Ae,o=j,a=_(),s=Qh();let c=class qR extends a.Synthesizer{constructor(l,p){super(l),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(l,p,d){const h=l;return p.properties.mergeTo(h.properties),new qR(l,d)}speakTextAsync(l,p,d,h){this.speakImpl(l,!1,p,d,h)}speakSsmlAsync(l,p,d,h){this.speakImpl(l,!0,p,d,h)}async getVoicesAsync(l=""){return this.getVoices(l)}close(l,p){o.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),l,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(l,p,d){return new e.SpeechSynthesisAdapter(l,p,d,this,this.audioConfig)}createRestSynthesisAdapter(l,p){return new e.SynthesisRestAdapter(p,l)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(l,p,d,h,f){try{o.Contracts.throwIfDisposed(this.privDisposed);const g=t.createNoDashGuid();let y;f instanceof a.PushAudioOutputStreamCallback?y=new i.PushAudioOutputStreamImpl(f):f instanceof a.PullAudioOutputStream?y=f:f!==void 0?y=new r.AudioFileWriter(f):y=void 0,this.synthesisRequestQueue.enqueue(new s.SynthesisRequest(g,l,p,v=>{if(this.privSynthesizing=!1,d)try{d(v)}catch(m){h&&h(m)}d=void 0,this.adapterSpeak().catch(()=>{})},v=>{h&&h(v)},y)),this.adapterSpeak().catch(()=>{})}catch(g){if(h)if(g instanceof Error){const y=g;h(y.name+": "+y.message)}else h(g);this.dispose(!0).catch(()=>{})}}async getVoices(l){const p=t.createNoDashGuid(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return l&&l.length>0&&(h=h.filter(f=>!!f.Locale&&f.Locale.toLowerCase()===l.toLowerCase())),new a.SynthesisVoicesResult(p,h,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return Io.SpeechSynthesizer=c,Io}var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.SynthesisResult=void 0;class MO{constructor(t,r,n,i){this.privResultId=t,this.privReason=r,this.privErrorDetails=n,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}Ju.SynthesisResult=MO;var _o={},vm;function DO(){if(vm)return _o;vm=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.SpeechSynthesisResult=void 0;const e=_();let t=class extends e.SynthesisResult{constructor(n,i,o,a,s,c){super(n,i,a,s),this.privAudioData=o,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return _o.SpeechSynthesisResult=t,_o}var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.SpeechSynthesisEventArgs=void 0;class NO{constructor(t){this.privResult=t}get result(){return this.privResult}}Gu.SpeechSynthesisEventArgs=NO;var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.SpeechSynthesisWordBoundaryEventArgs=void 0;class xO{constructor(t,r,n,i,o,a){this.privAudioOffset=t,this.privDuration=r,this.privText=n,this.privWordLength=i,this.privTextOffset=o,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}Qu.SpeechSynthesisWordBoundaryEventArgs=xO;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.SpeechSynthesisBookmarkEventArgs=void 0;class zO{constructor(t,r){this.privAudioOffset=t,this.privText=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}Xu.SpeechSynthesisBookmarkEventArgs=zO;var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.SpeechSynthesisVisemeEventArgs=void 0;class LO{constructor(t,r,n){this.privAudioOffset=t,this.privVisemeId=r,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}Yu.SpeechSynthesisVisemeEventArgs=LO;var UR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={}))})(UR);var Ao={},gm;function jO(){if(gm)return Ao;gm=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.SynthesisVoicesResult=void 0;const e=_();let t=class extends e.SynthesisResult{constructor(n,i,o){if(Array.isArray(i)){super(n,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new e.VoiceInfo(a))}else super(n,e.ResultReason.Canceled,o||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return Ao.SynthesisVoicesResult=t,Ao}var WR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0;var t;(function(o){o[o.Unknown=0]="Unknown",o[o.Female=1]="Female",o[o.Male=2]="Male",o[o.Neutral=3]="Neutral"})(t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}));var r;(function(o){o[o.OnlineNeural=1]="OnlineNeural",o[o.OnlineStandard=2]="OnlineStandard",o[o.OfflineNeural=3]="OfflineNeural",o[o.OfflineStandard=4]="OfflineStandard"})(r=e.SynthesisVoiceType||(e.SynthesisVoiceType={}));const n={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female};class i{constructor(a){if(this.privStyleList=[],a){if(this.privName=a.Name,this.privLocale=a.Locale,this.privShortName=a.ShortName,this.privLocaleName=a.LocaleName,this.privDisplayName=a.DisplayName,this.privLocalName=a.LocalName,this.privVoiceType=a.VoiceType.endsWith("Standard")?r.OnlineStandard:r.OnlineNeural,this.privGender=n[a.Gender]||t.Unknown,a.StyleList&&Array.isArray(a.StyleList))for(const s of a.StyleList)this.privStyleList.push(s);this.privSampleRateHertz=a.SampleRateHertz,this.privStatus=a.Status,a.ExtendedPropertyMap&&(this.privExtendedPropertyMap=a.ExtendedPropertyMap),this.privWordsPerMinute=a.WordsPerMinute,Array.isArray(a.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...a.SecondaryLocaleList]),Array.isArray(a.RolePlayList)&&(this.privRolePlayList=[...a.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}e.VoiceInfo=i})(WR);var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.SpeakerAudioDestination=void 0;const en=z(),BO=Ae,ft=$r,FO=60*30,mm={[ft.AudioFormatTag.PCM]:"audio/wav",[ft.AudioFormatTag.MuLaw]:"audio/x-wav",[ft.AudioFormatTag.MP3]:"audio/mpeg",[ft.AudioFormatTag.OGG_OPUS]:"audio/ogg",[ft.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[ft.AudioFormatTag.ALaw]:"audio/x-wav",[ft.AudioFormatTag.FLAC]:"audio/flac"};class $O{constructor(t){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=t||en.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(t,r,n){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(t),this.updateSourceBuffer().then(()=>{r&&r()},i=>{n&&n(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(t),this.privBytesReceived+=t.byteLength)}close(t,r){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{t&&t()},n=>{r&&r(n)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===ft.AudioFormatTag.PCM||this.privFormat.formatTag===ft.AudioFormatTag.MuLaw||this.privFormat.formatTag===ft.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(()=>{n=this.privFormat.addHeader(n);const i=new Blob([n],{type:mm[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{t&&t()},o=>{r&&r(o)})},i=>{r&&r(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(t){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=t;const r=mm[this.privFormat.formatTag];r===void 0?console.warn(`Unknown mimeType for format ${ft.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(r)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=FO,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(r),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(n=>{en.Events.instance.onEvent(new en.BackgroundEvent(n))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(n=>{en.Events.instance.onEvent(new en.BackgroundEvent(n))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(n=>{en.Events.instance.onEvent(new en.BackgroundEvent(n))})):(console.warn(`Format ${ft.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new BO.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var t;return((t=this.privAudio)==null?void 0:t.volume)??-1}set volume(t){this.privAudio&&(this.privAudio.volume=t)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(t,r){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{t&&t()},n=>{r&&r(n)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch{this.privAudioBuffer.unshift(t),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}Zu.SpeakerAudioDestination=$O;var bo={},ym;function qO(){if(ym)return bo;ym=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.ConversationTranscriptionCanceledEventArgs=void 0;const e=fa();let t=class extends e.CancellationEventArgsBase{};return bo.ConversationTranscriptionCanceledEventArgs=t,bo}var ko={},Sm;function UO(){if(Sm)return ko;Sm=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.MeetingTranscriptionCanceledEventArgs=void 0;const e=fa();let t=class extends e.CancellationEventArgsBase{};return ko.MeetingTranscriptionCanceledEventArgs=t,ko}var HR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))})(HR);var VR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))})(VR);var Oo={},Cm;function WO(){if(Cm)return Oo;Cm=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.PronunciationAssessmentConfig=void 0;const e=j,t=_();let r=class KR{constructor(i,o=t.PronunciationAssessmentGradingSystem.FivePoint,a=t.PronunciationAssessmentGranularity.Phoneme,s=!1){e.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[o]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(s))}static fromJSON(i){e.Contracts.throwIfNullOrUndefined(i,"json");const o=new KR("");return o.privProperties=new t.PropertyCollection,o.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,i),o}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const o=i.internalData;o.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,o.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,o.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){e.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){e.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const o=i?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,o)}get enableMiscue(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),o=JSON.parse(i),a=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);a&&(o.referenceText=a);const s=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);s&&(o.gradingSystem=s);const c=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);c&&(o.granularity=c),this.privPhonemeAlphabet&&(o.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(o.nbestPhonemeCount=this.privNBestPhonemeCount),o.enableProsodyAssessment=this.privEnableProsodyAssessment,o.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(o.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(o))}};return Oo.PronunciationAssessmentConfig=r,Oo}var tn={},Pm;function HO(){if(Pm)return tn;Pm=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.PronunciationAssessmentResult=tn.ContentAssessmentResult=void 0;const e=j,t=_();class r{constructor(o){this.privPronJson=o}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}tn.ContentAssessmentResult=r;let n=class JR{constructor(o){const a=JSON.parse(o);e.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(o){e.Contracts.throwIfNullOrUndefined(o,"result");const a=o.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(a,"json"),new JR(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.AccuracyScore}get pronunciationScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.PronScore}get completenessScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.CompletenessScore}get fluencyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.FluencyScore}get prosodyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new r(this.detailResult)}};return tn.PronunciationAssessmentResult=n,tn}var Mo={},Rm;function VO(){if(Rm)return Mo;Rm=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.AvatarConfig=void 0;const e=j,t=_();let r=class{constructor(i,o,a){this.privCustomized=!1,e.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=o,a===void 0&&(a=new t.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}};return Mo.AvatarConfig=r,Mo}var GR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"}(e.AvatarEventTypes||(e.AvatarEventTypes={}));class t{constructor(n,i){this.privOffset=n,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}e.AvatarEventArgs=t})(GR);var Do={},No={},Em;function QR(){if(Em)return No;Em=1,Object.defineProperty(No,"__esModule",{value:!0}),No.SpeechSynthesisConnectionFactory=void 0;const e=Te(),t=_(),r=Dt(),n=O(),i=we,o=Mt;let a=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(c,u,l){let p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),h=r.ConnectionFactoryBase.getHostSuffix(d),f=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=f===void 0?"tts":"voice",y=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+g+".speech"+h),v={},m={};u.token!==void 0&&u.token!==""&&(m[u.headerName]=u.token),m[i.HeaderNames.ConnectionId]=l,f!==void 0&&f!==""&&(!p||p.search(o.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(v[o.QueryParameterNames.CustomVoiceDeploymentId]=f),c.avatarEnabled&&(!p||p.search(o.QueryParameterNames.EnableAvatar)===-1)&&(v[o.QueryParameterNames.EnableAvatar]="true"),p||(p=y+this.synthesisUri),c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const S=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(p,v,m,new n.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(c.parameters),S,l)}};return No.SpeechSynthesisConnectionFactory=a,No}var wm;function KO(){if(wm)return Do;wm=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.AvatarSynthesizer=void 0;const e=QR(),t=O(),r=z(),n=qr,i=_(),o=j,a=Qh();let s=class extends i.Synthesizer{constructor(u,l){super(u),o.Contracts.throwIfNullOrUndefined(l,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=l,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){o.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,o.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const l=new r.Deferred;u.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,r.EventType.Debug)),u.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),l.resolve())},u.onicecandidate=g=>{g.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+g.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),l.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),l.resolve())},2e3);const p=await u.createOffer();await u.setLocalDescription(p),await l.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const d=await this.speak("",!1);if(d.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),f=new RTCSessionDescription(JSON.parse(h));return await u.setRemoteDescription(f),new i.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(u){const l=await this.speak(u,!1);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async speakSsmlAsync(u){const l=await this.speak(u,!0);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return o.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,l,p){return new t.AvatarSynthesisAdapter(u,l,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,l){}createSynthesizerConfig(u){const l=super.createSynthesizerConfig(u);return l.avatarEnabled=!0,l}async speak(u,l){const p=r.createNoDashGuid(),d=new r.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,u,l,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return Do.AvatarSynthesizer=s,Do}var ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.AvatarVideoFormat=ii.Coordinate=void 0;class JO{constructor(t,r){this.x=t,this.y=r}}ii.Coordinate=JO;class GO{constructor(t="H264",r=2e6,n=1920,i=1080){this.codec=t,this.bitrate=r,this.width=n,this.height=i}setCropRange(t,r){this.cropRange={bottomRight:r,topLeft:t}}}ii.AvatarVideoFormat=GO;var xo={},Tm;function QO(){if(Tm)return xo;Tm=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.AvatarWebRTCConnectionResult=void 0;const e=_();let t=class extends e.SynthesisResult{constructor(n,i,o,a,s){super(i,o,a,s),this.privSDPAnswer=n}get SDPAnswer(){return this.privSDPAnswer}};return xo.AvatarWebRTCConnectionResult=t,xo}var zo={},Im;function XO(){if(Im)return zo;Im=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.Diagnostics=void 0;const e=Te(),t=z();let r=class{static SetLoggingLevel(i){this.privListener=new e.ConsoleLoggingListener(i),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}};return zo.Diagnostics=r,r.privListener=void 0,zo}var _m;function _(){return _m||(_m=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=fR();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var r=$r;Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=uR();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var i=Ae;Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var o=vR;Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return o.CancellationReason}});var a=Ou;Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var s=Mu;Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return s.PushAudioOutputStreamCallback}});var c=Du;Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var u=Nu;Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var l=Ik();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var p=gR;Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=_k();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=xu;Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var f=bk();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return f.SpeechRecognitionResult}});var g=kk();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return g.IntentRecognitionResult}});var y=ni;Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var v=Ok();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return v.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return v.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return v.MeetingTranscriptionEventArgs}});var m=Mk();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return m.SpeechRecognitionCanceledEventArgs}});var S=Dk();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return S.TranslationRecognitionEventArgs}});var P=Nk();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return P.TranslationSynthesisEventArgs}});var R=SR();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return R.TranslationRecognitionResult}});var w=zu;Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return w.TranslationSynthesisResult}});var I=CR;Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return I.ResultReason}});var E=zk();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return E.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return E.SpeechConfigImpl}});var N=Lk();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return N.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return N.SpeechTranslationConfigImpl}});var D=RR();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return D.PropertyCollection}});var G=Lu;Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return G.PropertyId}});var L=jk();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return L.Recognizer}});var Y=Bk();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return Y.SpeechRecognizer}});var M=Fk();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return M.IntentRecognizer}});var ne=TR;Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return ne.VoiceProfileType}});var ie=$k();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return ie.TranslationRecognizer}});var Ne=qk();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return Ne.Translations}});var b=bR;Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return b.NoMatchReason}});var x=Uk();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return x.NoMatchDetails}});var F=ju;Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return F.TranslationRecognitionCanceledEventArgs}});var Z=Hk();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Z.IntentRecognitionCanceledEventArgs}});var ee=va;Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return ee.CancellationDetailsBase}});var Et=Kk();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return Et.CancellationDetails}});var lt=MR;Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return lt.CancellationErrorCode}});var gi=Jk();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return gi.ConnectionEventArgs}});var Ut=Gk();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return Ut.ServiceEventArgs}});var _n=_R();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return _n.Connection}});var lE=Bu;Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return lE.PhraseListGrammar}});var pE=Hh();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return pE.DialogServiceConfig}});var dE=Qk();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return dE.BotFrameworkConfig}});var hE=Xk();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return hE.CustomCommandsConfig}});var fE=Zk();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return fE.DialogServiceConnector}});var vE=Fu;Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return vE.ActivityReceivedEventArgs}});var gE=$u;Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return gE.TurnStatusReceivedEventArgs}});var mE=DR;Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return mE.ServicePropertyChannel}});var yE=NR;Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return yE.ProfanityOption}});var SE=nO();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return SE.BaseAudioPlayer}});var CE=Uu;Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return CE.ConnectionMessageEventArgs}});var PE=IR();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return PE.ConnectionMessage}});var RE=Wu;Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return RE.VoiceProfile}});var pf=sO();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return pf.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return pf.VoiceProfileEnrollmentCancellationDetails}});var df=aO();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return df.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return df.VoiceProfileCancellationDetails}});var EE=cO();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return EE.VoiceProfilePhraseResult}});var wE=uO();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return wE.VoiceProfileClient}});var TE=lO();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return TE.SpeakerRecognizer}});var IE=pO();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return IE.SpeakerIdentificationModel}});var _E=dO();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return _E.SpeakerVerificationModel}});var AE=hO();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return AE.AutoDetectSourceLanguageConfig}});var bE=Hu;Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return bE.AutoDetectSourceLanguageResult}});var kE=Vu;Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return kE.SourceLanguageConfig}});var Sl=vO();Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Sl.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Sl.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Sl.SpeakerRecognitionCancellationDetails}});var Qe=Gh();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return Qe.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Qe.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Qe.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Qe.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Qe.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return Qe.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return Qe.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return Qe.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Qe.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return Qe.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return Qe.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return Qe.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return Qe.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return Qe.User}});var OE=Qh();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return OE.Synthesizer}});var ME=$h;Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return ME.SpeechSynthesisOutputFormat}});var DE=OO();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return DE.SpeechSynthesizer}});var NE=Ju;Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return NE.SynthesisResult}});var xE=DO();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return xE.SpeechSynthesisResult}});var zE=Gu;Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return zE.SpeechSynthesisEventArgs}});var LE=Qu;Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return LE.SpeechSynthesisWordBoundaryEventArgs}});var jE=Xu;Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return jE.SpeechSynthesisBookmarkEventArgs}});var BE=Yu;Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return BE.SpeechSynthesisVisemeEventArgs}});var FE=UR;Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return FE.SpeechSynthesisBoundaryType}});var $E=jO();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return $E.SynthesisVoicesResult}});var qE=WR;Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return qE.VoiceInfo}});var UE=Zu;Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return UE.SpeakerAudioDestination}});var WE=qO();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return WE.ConversationTranscriptionCanceledEventArgs}});var HE=UO();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return HE.MeetingTranscriptionCanceledEventArgs}});var VE=HR;Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return VE.PronunciationAssessmentGradingSystem}});var KE=VR;Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return KE.PronunciationAssessmentGranularity}});var JE=WO();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return JE.PronunciationAssessmentConfig}});var GE=HO();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return GE.PronunciationAssessmentResult}});var QE=Kh;Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return QE.LanguageIdMode}});var XE=VO();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return XE.AvatarConfig}});var YE=GR;Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return YE.AvatarEventArgs}});var ZE=KO();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return ZE.AvatarSynthesizer}});var hf=ii;Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return hf.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return hf.Coordinate}});var ew=QO();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return ew.AvatarWebRTCConnectionResult}});var tw=XO();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return tw.Diagnostics}});var rw=Bh;Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return rw.LogLevel}})}(lp)),lp}var Am;function YO(){if(Am)return Ni;Am=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.ProxyInfo=void 0;const e=_();let t=class XR{constructor(n,i,o,a){this.privProxyHostName=n,this.privProxyPort=i,this.privProxyUserName=o,this.privProxyPassword=a}static fromParameters(n){return new XR(n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(n){return this.fromParameters(n.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return Ni.ProxyInfo=t,Ni}var YR={};const ZO=new Set(["json","buffer","string"]);var eM=e=>(...t)=>{const r=new Set;let n,i,o,a="";return t.forEach(s=>{if(typeof s=="string")if(s.toUpperCase()===s)if(n){const c=`Can't set method to ${s}, already set to ${n}.`;throw new Error(c)}else n=s;else if(s.startsWith("http:")||s.startsWith("https:"))a=s;else if(ZO.has(s))i=s;else throw new Error(`Unknown encoding, ${s}`);else if(typeof s=="number")r.add(s);else if(typeof s=="object")if(Array.isArray(s)||s instanceof Set)s.forEach(c=>r.add(c));else{if(o)throw new Error("Cannot set headers twice.");o=s}else throw new Error(`Unknown type: ${typeof s}`)}),n||(n="GET"),r.size===0&&r.add(200),e(r,n,i,o,a)};const tM=eM;class Xh extends Error{constructor(t,...r){super(...r),Error.captureStackTrace&&Error.captureStackTrace(this,Xh),this.name="StatusError",this.message=t.statusMessage,this.statusCode=t.status,this.res=t,this.json=t.json.bind(t),this.text=t.text.bind(t),this.arrayBuffer=t.arrayBuffer.bind(t);let n;Object.defineProperty(this,"responseBody",{get:()=>(n||(n=this.arrayBuffer()),n)}),this.headers={};for(const[o,a]of t.headers.entries())this.headers[o.toLowerCase()]=a}}const rM=(e,t,r,n,i)=>async(o,a,s={})=>{o=i+(o||"");let c=new URL(o);if(n||(n={}),c.username&&(n.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),n["Content-Type"]="application/json";else throw new Error("Unknown body type.");s=new Headers({...n||{},...s});const u=await fetch(c,{method:t,headers:s,body:a});if(u.statusCode=u.status,!e.has(u.status))throw new Xh(u);return r==="json"?u.json():r==="buffer"?u.arrayBuffer():r==="string"?u.text():u};var nM=tM(rM);(function(e){var t=H&&H.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const r=t(nM),n=z();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=e.RestRequestType||(e.RestRequestType={}));class o{constructor(s){if(!s)throw new n.ArgumentNullError("configParams");this.privHeaders=s.headers,this.privIgnoreCache=s.ignoreCache}static extractHeaderValue(s,c){let u="";try{const l=c.trim().split(/[\r\n]+/),p={};l.forEach(d=>{const h=d.split(": "),f=h.shift().toLowerCase(),g=h.join(": ");p[f]=g}),u=p[s.toLowerCase()]}catch{}return u}set options(s){this.privHeaders=s.headers,this.privIgnoreCache=s.ignoreCache}setHeaders(s,c){this.privHeaders[s]=c}request(s,c,u={},l=null){const p=new n.Deferred,d=s===i.File?"POST":s,h=(g,y={})=>{const v=g;return{data:JSON.stringify(y),headers:JSON.stringify(g.headers),json:y,ok:g.statusCode>=200&&g.statusCode<300,status:g.statusCode,statusText:y.error?y.error.message:v.statusText?v.statusText:v.statusMessage}},f=g=>{const y=r.default(c,d,this.privHeaders,200,201,202,204,400,401,402,403,404),v=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;y(v,g).then(async m=>{if(s===i.Delete||m.statusCode===204)p.resolve(h(m));else try{const S=await m.json();p.resolve(h(m,S))}catch{p.resolve(h(m))}}).catch(m=>{p.reject(m)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),s===i.Post&&l&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),f(l),p.promise}queryParams(s={}){return Object.keys(s).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(s[c])).join("&")}}e.RestMessageAdapter=o})(YR);var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.RestConfigBase=void 0;class Or{static get requestOptions(){return Or.privDefaultRequestOptions}static get configParams(){return Or.privDefaultParams}static get restErrors(){return Or.privRestErrors}}ma.RestConfigBase=Or;Or.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};Or.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};Or.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var bm;function Te(){return bm||(bm=1,function(e){var t=H&&H.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),r=H&&H.__exportStar||function(n,i){for(var o in n)o!=="default"&&!i.hasOwnProperty(o)&&t(i,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(_u,e),r(aR,e),r(ek(),e),r(tk(),e),r(Au,e),r(bu,e),r(da,e),r(ku,e),r(YO(),e),r(YR,e),r(ma,e)}(ap)),ap}var km;function iM(){if(km)return Oi;km=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.IntentConnectionFactory=void 0;const e=Te(),t=_(),r=Dt(),n=O(),i=we;let o=class extends r.ConnectionFactoryBase{create(s,c,u){let l=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const f=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),g=r.ConnectionFactoryBase.getHostSuffix(f);l=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+f+".sr.speech"+g)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(s,p,l);const d={};c.token!==void 0&&c.token!==""&&(d[c.headerName]=c.token),d[i.HeaderNames.ConnectionId]=u,s.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,l);const h=s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(l,p,d,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(s),h,u)}getSpeechRegionFromIntentRegion(s){switch(s){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return s}}};return Oi.IntentConnectionFactory=o,Oi}var rn={},Om;function oM(){if(Om)return rn;Om=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.VoiceProfileConnectionFactory=rn.SpeakerRecognitionConnectionFactory=void 0;const e=Te(),t=_(),r=Dt(),n=O(),i=we;class o extends r.ConnectionFactoryBase{create(u,l,p,d){let h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),m=r.ConnectionFactoryBase.getHostSuffix(v),S=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${v}.spr-frontend.speech${m}`),P=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${S}/speaker/ws/${this.scenarioToPath(P)}/${p}`}const f={format:"simple",language:u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,f,h);const g={};l.token!==void 0&&l.token!==""&&(g[l.headerName]=l.token),g[i.HeaderNames.ConnectionId]=d,g[i.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const y=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(h,f,g,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),y,d)}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends o{create(u,l,p){return super.create(u,l,"recognition",p)}};rn.SpeakerRecognitionConnectionFactory=a;class s extends o{create(u,l,p){return super.create(u,l,"profile",p)}}return rn.VoiceProfileConnectionFactory=s,rn}var el={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=z();class r extends t.PlatformEvent{constructor(l,p,d,h=t.EventType.Info){super(l,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}e.SpeechRecognitionEvent=r;class n extends r{constructor(l,p,d,h){super("RecognitionTriggeredEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.RecognitionTriggeredEvent=n;class i extends r{constructor(l,p,d,h){super("ListeningStartedEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.ListeningStartedEvent=i;class o extends r{constructor(l,p,d){super("ConnectingToServiceEvent",l,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}e.ConnectingToServiceEvent=o;class a extends r{constructor(l,p,d,h,f){super("RecognitionStartedEvent",l,f),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}e.RecognitionStartedEvent=a;var s;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(s=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}));class c extends r{constructor(l,p,d,h,f,g,y,v){super("RecognitionEndedEvent",l,f,y===s.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=y,this.privError=v,this.privServiceTag=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}e.RecognitionEndedEvent=c})(el);var Lo={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.SpeechConnectionMessage=void 0;const vp=z(),Kt=we;class Yh extends vp.ConnectionMessage{constructor(t,r,n,i,o,a,s,c){if(!r)throw new vp.ArgumentNullError("path");if(!n)throw new vp.ArgumentNullError("requestId");const u={};if(u[Kt.HeaderNames.Path]=r,u[Kt.HeaderNames.RequestId]=n,u[Kt.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(u[Kt.HeaderNames.ContentType]=i),a&&(u[Kt.HeaderNames.RequestStreamId]=a),s)for(const l in s)l&&(u[l]=s[l]);c?super(t,o,u,c):super(t,o,u),this.privPath=r,this.privRequestId=n,this.privContentType=i,this.privStreamId=a,this.privAdditionalHeaders=s}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(t){let r=null,n=null,i=null,o=null;const a={};if(t.headers)for(const s in t.headers)s&&(s.toLowerCase()===Kt.HeaderNames.Path.toLowerCase()?r=t.headers[s]:s.toLowerCase()===Kt.HeaderNames.RequestId.toLowerCase()?n=t.headers[s]:s.toLowerCase()===Kt.HeaderNames.ContentType.toLowerCase()?i=t.headers[s]:s.toLowerCase()===Kt.HeaderNames.RequestStreamId.toLowerCase()?o=t.headers[s]:a[s]=t.headers[s]);return new Yh(t.messageType,r,n,i,t.body,o,a,t.id)}}ur.SpeechConnectionMessage=Yh;var Mm;function sM(){if(Mm)return Lo;Mm=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.ServiceRecognizerBase=void 0;const e=Te(),t=z(),r=_(),n=O(),i=ur;let o=class Ss{constructor(s,c,u,l,p){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!s)throw new t.ArgumentNullError("authentication");if(!c)throw new t.ArgumentNullError("connectionFactory");if(!u)throw new t.ArgumentNullError("audioSource");if(!l)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=l.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=s,this.privConnectionFactory=c,this.privAudioSource=u,this.privRecognizerConfig=l,this.privIsDisposed=!1,this.privRecognizer=p,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=t.Timeout.setTimeout:typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const f=h;(f.statusCode===1003||f.statusCode===1007||f.statusCode===1002||f.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,f.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${f.reason} websocket error code: ${f.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=t.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const s=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(s!==void 0){const c=s.split(","),u=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),l=u!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:l},output:{interimResults:{mode:"Always"}},targetLanguages:c}),u!==void 0){const p={};for(const d of c)p[d]=u;this.privSpeechContext.setSection("synthesis",{defaultVoices:p})}}}setSpeechSegmentationTimeoutJson(){const s=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(s!==void 0){const c=this.recognitionMode===n.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===n.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",u=parseInt(s,10),l=this.privSpeechContext.getSection("phraseDetection");l.mode=c,l[c]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:u}},this.privSpeechContext.setSection("phraseDetection",l)}}setLanguageIdJson(){const s=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const u=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let l;this.privRecognizerConfig.languageIdMode==="Continuous"?l="DetectContinuous":l="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:u,mode:l,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const p=this.privRecognizerConfig.sourceLanguageModels;p!==void 0&&(s.customModels=p,s.onInterim={action:"None"},s.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(s.onInterim={action:"Translate"},s.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",s)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(s){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,s)}set voiceProfileType(s){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,s)}set authentication(s){this.privAuthentication=s}isDisposed(){return this.privIsDisposed}async dispose(s){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(s)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(s,c,u){if(this.recognizeOverride!==void 0){await this.recognizeOverride(s,c,u);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=s,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=c,this.privErrorCallback=u,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const l=this.connectImpl();let p;try{const f=await this.audioSource.attach(this.privRequestSession.audioNodeId),g=await this.audioSource.format,y=await this.audioSource.deviceInfo;this.privIsLiveAudio=y.type&&y.type===n.type.Microphones,p=new e.ReplayableAudioNode(f,g.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:y}}catch(f){throw await this.privRequestSession.onStopRecognizing(),f}try{await l}catch(f){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,f);return}const d=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(p).catch(async f=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,f)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(s,c){this.connectImpl().then(()=>{try{s&&s()}catch(u){c&&c(u)}},u=>{try{c&&c(u)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(s){}async sendNetworkMessage(s,c){const u=typeof c=="string"?t.MessageType.Text:t.MessageType.Binary,l=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(u,s,this.privRequestSession.requestId,l,c))}set activityTemplate(s){this.privActivityTemplate=s}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(s){this.privExpectContentAssessmentResponse=s}async sendTelemetryData(){const s=this.privRequestSession.getTelemetry();if(Ss.telemetryDataEnabled!==!0||this.privIsDisposed||s===null)return;if(Ss.telemetryData)try{Ss.telemetryData(s)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",s))}async cancelRecognitionLocal(s,c,u){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s,c,u))}async receiveMessage(){try{if(this.privIsDisposed)return;let s=await this.fetchConnection();const c=await s.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!c)return this.receiveMessage();this.privServiceHasSentMessage=!0;const u=i.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const l=n.SpeechDetected.fromJSON(u.textBody),p=new r.RecognitionEventArgs(l.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p);break;case"speech.enddetected":let d;u.textBody.length>0?d=u.textBody:d="{ Offset: 0 }";const h=n.SpeechDetected.fromJSON(d),f=new r.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,f);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const g=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,g);return}else s=await this.fetchConnection(),await this.sendPrePayloadJSON(s);break;default:await this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const c=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(c)}sendSpeechContext(s,c){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const u=this.speechContext.toJSON();if(c&&this.privRequestSession.onSpeechContext(),u)return s.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",u))}noOp(){}async sendPrePayloadJSON(s,c=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(s);await this.sendSpeechContext(s,c),await this.sendWaveHeader(s)}async sendWaveHeader(s){const c=await this.audioSource.format;return s.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",c.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(s=>s.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(s,c,u){if(c.onSpeechContext(),Ss.telemetryDataEnabled!==!0){const p={context:{system:JSON.parse(u).context.system}};u=JSON.stringify(p)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const l=JSON.parse(u);l.context.DisableReferenceChannel="True",l.context.MicSpec="1_0_0",u=JSON.stringify(l)}if(u)return s.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.config",c.requestId,"application/json",u))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(s=>s.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(s){const c=await this.audioSource.format;this.privAverageBytesPerMs=c.avgBytesPerSec/1e3;let u=Date.now();const l=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),p=c.avgBytesPerSec/1e3*parseInt(l,10),d=this.privRequestSession.recogNumber,h=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d){const f=await this.fetchConnection(),g=await s.read();if(this.privRequestSession.isSpeechEnded)return;let y,v;if(!g||g.isEnd?(y=null,v=0):(y=g.buffer,this.privRequestSession.onAudioSent(y.byteLength),p>=this.privRequestSession.bytesSent?v=0:v=Math.max(0,u-Date.now())),v!==0&&await this.delay(v),y!==null&&(u=Date.now()+y.byteLength*1e3/(c.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d)if(f.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,y)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),g!=null&&g.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return h()}};return h()}async retryableConnect(){let s=!1;this.privAuthFetchEventId=t.createNoDashGuid();const c=this.privRequestSession.sessionId;this.privConnectionId=c!==void 0?c:t.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let u=0,l="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const d=await(s?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const h=this.privConnectionFactory.create(this.privRecognizerConfig,d,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(h.events),h.events.attach(g=>{this.connectionEvents.onEvent(g)});const f=await h.open();if(f.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(f.statusCode),Promise.resolve(h);f.statusCode===1006&&(s=!0),u=f.statusCode,l=f.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(u,l),Promise.reject(`Unable to contact server. StatusCode: ${u}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${l}`)}delay(s){return new Promise(c=>this.privSetTimeout(c,s))}writeBufferToConsole(s){let c="Buffer Size: ";if(s===null)c+="null";else{const u=new Uint8Array(s);c+=`${s.byteLength}\r
`;for(let l=0;l<s.byteLength;l++)c+=u[l].toString(16).padStart(2,"0")+" ",(l+1)%16===0&&(console.info(c),c="")}console.info(c)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const s=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(s):(await this.sendSpeechServiceConfig(s,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(s,!1),s)}};return Lo.ServiceRecognizerBase=o,o.telemetryDataEnabled=!0,Lo}var jo={},Dm;function aM(){if(Dm)return jo;Dm=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.ConversationServiceRecognizer=void 0;const e=_(),t=O();let r=class extends t.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,o,a){}handleRecognizingCallback(i,o,a){}async processSpeechMessages(i){let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),o=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),o=!0;break}return o}cancelRecognition(i,o,a,s,c){}async handleSpeechPhrase(i){const o=t.SimpleSpeechPhrase.fromJSON(i),a=t.EnumTranslation.implTranslateRecognitionResult(o.RecognitionStatus);let s;const c=new e.PropertyCollection;c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const u=o.Offset+this.privRequestSession.currentTurnAudioOffset;let l=u;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+o.Offset+o.Duration),e.ResultReason.Canceled===a){const p=t.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus),d=t.EnumTranslation.implTranslateCancelErrorCode(o.RecognitionStatus);await this.cancelRecognitionLocal(p,d,t.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&a===e.ResultReason.NoMatch&&o.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,o.DisplayText,o.Duration,u,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,i,c);else{const p=t.DetailedSpeechPhrase.fromJSON(i),d=p.Offset+this.privRequestSession.currentTurnAudioOffset,h=p.getJsonWithCorrectedOffsets(d);s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,p.Text,p.Duration,d,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,h,c),l=s.offset}this.handleRecognizedCallback(s,l,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const o=t.SpeechHypothesis.fromJSON(i),a=o.Offset+this.privRequestSession.currentTurnAudioOffset,s=new e.PropertyCollection;s.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const c=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,o.Text,o.Duration,a,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,i,s);this.privRequestSession.onHypothesis(a),this.handleRecognizingCallback(c,o.Duration,this.privRequestSession.sessionId)}};return jo.ConversationServiceRecognizer=r,jo}var gp={},Nm;function cM(){return Nm||(Nm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=e.RecognitionMode=void 0;const t=_(),r=O();var n;(function(o){o[o.Interactive=0]="Interactive",o[o.Conversation=1]="Conversation",o[o.Dictation=2]="Dictation"})(n=e.RecognitionMode||(e.RecognitionMode={})),function(o){o[o.Simple=0]="Simple",o[o.Detailed=1]="Detailed"}(e.SpeechResultFormat||(e.SpeechResultFormat={}));class i{constructor(a,s){this.privSpeechServiceConfig=a||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=s,this.privMaxRetryCount=parseInt(s.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=s.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===n.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const a=[];let s=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const u=c+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),l=this.parameters.getProperty(u,void 0);l!==void 0?(a.push({language:c,endpoint:l}),s=!0):a.push({language:c,endpoint:""})}return s?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}e.RecognizerConfig=i}(gp)),gp}var ZR={};Object.defineProperty(ZR,"__esModule",{value:!0});var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.WebsocketMessageFormatter=void 0;const pt=z(),xm=`\r
`;class uM{toConnectionMessage(t){const r=new pt.Deferred;try{if(t.messageType===pt.MessageType.Text){const n=t.textContent;let i={},o=null;if(n){const a=n.split(`\r
\r
`);a&&a.length>0&&(i=this.parseHeaders(a[0]),a.length>1&&(o=a[1]))}r.resolve(new pt.ConnectionMessage(t.messageType,o,i,t.id))}else if(t.messageType===pt.MessageType.Binary){const n=t.binaryContent;let i={},o=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(n),s=a.getInt16(0);if(n.byteLength<s+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<s;u++)c+=String.fromCharCode(a.getInt8(u+2));i=this.parseHeaders(c),n.byteLength>s+2&&(o=n.slice(2+s)),r.resolve(new pt.ConnectionMessage(t.messageType,o,i,t.id))}}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(t){const r=new pt.Deferred;try{if(t.messageType===pt.MessageType.Text){const n=`${this.makeHeaders(t)}${xm}${t.textBody?t.textBody:""}`;r.resolve(new pt.RawWebsocketMessage(pt.MessageType.Text,n,t.id))}else if(t.messageType===pt.MessageType.Binary){const n=this.makeHeaders(t),i=t.binaryBody,o=this.stringToArrayBuffer(n),a=new Int8Array(o),s=a.byteLength,c=new Int8Array(2+s+(i?i.byteLength:0));if(c[0]=s>>8&255,c[1]=s&255,c.set(a,2),i){const l=new Int8Array(i);c.set(l,2+s)}const u=c.buffer;r.resolve(new pt.RawWebsocketMessage(pt.MessageType.Binary,u,t.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}makeHeaders(t){let r="";if(t.headers)for(const n in t.headers)n&&(r+=`${n}: ${t.headers[n]}${xm}`);return r}parseHeaders(t){const r={};if(t){const n=t.match(/[^\r\n]+/g);if(r){for(const i of n)if(i){const o=i.indexOf(":"),a=o>0?i.substr(0,o).trim().toLowerCase():i,s=o>0&&i.length>o+1?i.substr(o+1).trim():"";r[a]=s}}}return r}stringToArrayBuffer(t){const r=new ArrayBuffer(t.length),n=new DataView(r);for(let i=0;i<t.length;i++)n.setUint8(i,t.charCodeAt(i));return r}}tl.WebsocketMessageFormatter=uM;var Bo={},zm;function lM(){if(zm)return Bo;zm=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.SpeechConnectionFactory=void 0;const e=Te(),t=O(),r=_(),n=Dt(),i=O(),o=we,a=Mt;let s=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(u,l,p){let d=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),f=n.ConnectionFactoryBase.getHostSuffix(h),g=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),y={},v=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[a.QueryParameterNames.CustomSpeechDeploymentId]=v):m&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(y[a.QueryParameterNames.Language]=m),(!d||d.search(a.QueryParameterNames.Format)===-1)&&(y[a.QueryParameterNames.Format]=u.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(y[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,y,d),!d)switch(u.recognitionMode){case i.RecognitionMode.Conversation:u.parameters.getProperty(t.ForceDictationPropertyName,"false")==="true"?d=g+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${g}${this.universalUri}${u.recognitionEndpointVersion}`:d=g+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:d=g+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${g}${this.universalUri}${u.recognitionEndpointVersion}`:d=g+this.interactiveRelativeUri;break}const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[o.HeaderNames.ConnectionId]=p;const P=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",R=new e.WebsocketConnection(d,y,S,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),P,p),w=R.uri;return u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,w),R}};return Bo.SpeechConnectionFactory=s,Bo}var Fo={},Lm;function pM(){if(Lm)return Fo;Lm=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.ConversationTranscriberConnectionFactory=void 0;const e=Te(),t=_(),r=O(),n=Dt(),i=O(),o=we,a=Mt;let s=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(u,l,p){let d=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),f=n.ConnectionFactoryBase.getHostSuffix(h),g=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),y={},v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);v?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[a.QueryParameterNames.CustomSpeechDeploymentId]=v):m&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(y[a.QueryParameterNames.Language]=m),u.autoDetectSourceLanguages!==void 0&&(y[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,y,d),d||(d=`${g}${this.universalUri}`);const S={};l.token!==void 0&&l.token!==""&&(S[l.headerName]=l.token),S[o.HeaderNames.ConnectionId]=p;const P=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",R=new e.WebsocketConnection(d,y,S,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),P,p),w=R.uri;return u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,w),R}setV2UrlParams(u,l,p){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((f,g)=>{this.setUrlParameter(g,f,u,l,p)});const h=JSON.parse(u.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(f=>{l[f]=h[f]})}};return Fo.ConversationTranscriberConnectionFactory=s,Fo}var $o={},jm;function dM(){if(jm)return $o;jm=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.TranscriberConnectionFactory=void 0;const e=Te(),t=_(),r=Dt(),n=O(),i=we,o=Mt;let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,u,l){let p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),h=r.ConnectionFactoryBase.getHostSuffix(d),f="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,g=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,f),y={};this.setQueryParams(y,c,p),p||(p=g);const v={};u.token!==void 0&&u.token!==""&&(v[u.headerName]=u.token),v[i.HeaderNames.ConnectionId]=l,c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const m=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(p,y,v,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),m,l)}setQueryParams(c,u,l){const p=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(o.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[o.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(o.QueryParameterNames.Language in c)&&(c[o.QueryParameterNames.Language]=d);const h=u.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",f=u.parameters.getProperty(n.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(h||f)&&(c[o.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,c,l)}};return $o.TranscriberConnectionFactory=a,$o}var qo={},Bm;function hM(){if(Bm)return qo;Bm=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.TranslationConnectionFactory=void 0;const e=Te(),t=ga,r=_(),n=Dt(),i=O(),o=we,a=Mt;let s=class extends n.ConnectionFactoryBase{create(u,l,p){const d=this.getEndpointUrl(u),h={};u.autoDetectSourceLanguages!==void 0&&(h[a.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(h,u,d);const f={};l.token!==void 0&&l.token!==""&&(f[l.headerName]=l.token),f[o.HeaderNames.ConnectionId]=p,u.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,d);const g=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(d,h,f,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),g,p)}getEndpointUrl(u,l){const p=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),d=n.ConnectionFactoryBase.getHostSuffix(p);let h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h||(u.autoDetectSourceLanguages!==void 0?h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+"/speech/universal/v2":h=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"),l===!0?h:t.StringUtils.formatString(h,{region:p})}setQueryParams(u,l,p){u.from=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=l.recognitionMode===i.RecognitionMode.Interactive?"interactive":l.recognitionMode===i.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(l,u,p),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,l,u,p);const d=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(u.voice=d,u.features="texttospeech")}};return qo.TranslationConnectionFactory=s,qo}var Uo={},Fm;function fM(){if(Fm)return Uo;Fm=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.EnumTranslation=void 0;const e=_(),t=O();let r=class{static implTranslateRecognitionResult(i,o=!1){let a=e.ResultReason.Canceled;switch(i){case t.RecognitionStatus.Success:a=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:a=o?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:a=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:a=e.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let o=e.CancellationReason.EndOfStream;switch(i){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:o=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:o=e.CancellationReason.Error;break}return o}static implTranslateCancelErrorCode(i){let o=e.CancellationErrorCode.NoError;switch(i){case t.RecognitionStatus.Error:o=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:o=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:o=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:o=e.CancellationErrorCode.Forbidden;break;default:o=e.CancellationErrorCode.NoError;break}return o}static implTranslateErrorDetails(i){let o="The speech service encountered an internal error and could not continue.";switch(i){case e.CancellationErrorCode.Forbidden:o="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:o="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:o="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return o}};return Uo.EnumTranslation=r,Uo}var eE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"}(e.SynthesisStatus||(e.SynthesisStatus={})),function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"}(e.RecognitionStatus||(e.RecognitionStatus={}))})(eE);var Wo={},$m;function vM(){if($m)return Wo;$m=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.TranslationSynthesisEnd=void 0;const e=O();let t=class tE{constructor(n){this.privSynthesisEnd=JSON.parse(n),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(n){return new tE(n)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Wo.TranslationSynthesisEnd=t,Wo}var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.TranslationHypothesis=void 0;const gM=j,mM=wu;class xc{constructor(t){this.privTranslationHypothesis=t,this.privTranslationHypothesis.Translation.TranslationStatus=mM.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(t){return new xc(JSON.parse(t))}static fromTranslationResponse(t){gM.Contracts.throwIfNullOrUndefined(t,"translationHypothesis");const r=t.SpeechHypothesis;return t.SpeechHypothesis=void 0,r.Translation=t,new xc(r)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var t;return(t=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:t.Language}}rl.TranslationHypothesis=xc;var Ho={},qm;function yM(){if(qm)return Ho;qm=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.TranslationPhrase=void 0;const e=j,t=O(),r=wu;let n=class kd{constructor(o){this.privTranslationPhrase=o,this.privTranslationPhrase.RecognitionStatus=t.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(o){return new kd(JSON.parse(o))}static fromTranslationResponse(o){e.Contracts.throwIfNullOrUndefined(o,"translationResponse");const a=o.SpeechPhrase;return o.SpeechPhrase=void 0,a.Translation=o,a.Text=a.DisplayText,new kd(a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Language}get Confidence(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return Ho.TranslationPhrase=n,Ho}var Vo={},Um;function SM(){if(Um)return Vo;Um=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.TranslationServiceRecognizer=void 0;const e=z(),t=_(),r=O();let n=class extends r.ConversationServiceRecognizer{constructor(o,a,s,c,u){super(o,a,s,c,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(l=>{l.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(o){const a=new t.PropertyCollection;let s=await this.processSpeechMessages(o);if(s)return!0;const c=async l=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),l.RecognitionStatus===r.RecognitionStatus.Success){const p=this.fireEventForResult(l,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=r.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),d=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,l.Text,l.Duration,this.privRequestSession.currentTurnAudioOffset+l.Offset,l.Language,l.Confidence,void 0,o.textBody,a);if(p===t.ResultReason.Canceled){const h=r.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),f=r.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,f,r.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&p===t.ResultReason.NoMatch&&l.RecognitionStatus!==r.RecognitionStatus.InitialSilenceTimeout)){const h=new t.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0}},u=(l,p)=>{const d=this.fireEventForResult(l,p);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}s=!0};switch(o.messageType===e.MessageType.Text&&a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"translation.hypothesis":u(r.TranslationHypothesis.fromJSON(o.textBody),a);break;case"translation.response":const l=JSON.parse(o.textBody);if(l.SpeechPhrase)await c(r.TranslationPhrase.fromTranslationResponse(l));else{const d=JSON.parse(o.textBody);d.SpeechHypothesis&&u(r.TranslationHypothesis.fromTranslationResponse(d),a)}break;case"translation.phrase":await c(r.TranslationPhrase.fromJSON(o.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(o.binaryBody,this.privRequestSession.sessionId),s=!0;break;case"audio.end":case"translation.synthesis.end":const p=r.TranslationSynthesisEnd.fromJSON(o.textBody);switch(p.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),h=new t.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,p.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}s=!0;break}return s}cancelRecognition(o,a,s,c,u){const l=new t.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const p=new t.TranslationRecognitionCanceledEventArgs(o,s,u,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.TranslationRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(o,a,s){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,s);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(o,a,s){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,s);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(o,a){let s;if(o.Translation.Translations!==void 0){s=new t.Translations;for(const f of o.Translation.Translations)s.set(f.Language,f.Text||f.DisplayText)}let c,u;o instanceof r.TranslationPhrase?(o.Translation&&o.Translation.TranslationStatus===e.TranslationStatus.Success?c=t.ResultReason.TranslatedSpeech:c=t.ResultReason.RecognizedSpeech,u=o.Confidence):c=t.ResultReason.TranslatingSpeech;const l=o.Language,p=o.Offset+this.privRequestSession.currentTurnAudioOffset,d=new t.TranslationRecognitionResult(s,this.privRequestSession.requestId,c,o.Text,o.Duration,p,l,u,o.Translation.FailureReason,JSON.stringify(o),a);return new t.TranslationRecognitionEventArgs(d,p,this.privRequestSession.sessionId)}sendSynthesisAudio(o,a){const s=o===void 0?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,c=new t.TranslationSynthesisResult(s,o),u=new t.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return Vo.TranslationServiceRecognizer=n,Vo}var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.SpeechDetected=void 0;class Zh{constructor(t){this.privSpeechStartDetected=JSON.parse(t)}static fromJSON(t){return new Zh(t)}get Offset(){return this.privSpeechStartDetected.Offset}}nl.SpeechDetected=Zh;var il={};Object.defineProperty(il,"__esModule",{value:!0});il.SpeechHypothesis=void 0;class ef{constructor(t){this.privSpeechHypothesis=JSON.parse(t)}static fromJSON(t){return new ef(t)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}il.SpeechHypothesis=ef;var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.SpeechKeyword=void 0;class tf{constructor(t){this.privSpeechKeyword=JSON.parse(t)}static fromJSON(t){return new tf(t)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}ol.SpeechKeyword=tf;var Ko={},Wm;function CM(){if(Wm)return Ko;Wm=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.SpeechServiceRecognizer=void 0;const e=_(),t=O();let r=class extends t.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(i){let o;const a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new e.SpeechRecognitionEventArgs(o,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}s=!0;break;case"speech.phrase":const p=t.SimpleSpeechPhrase.fromJSON(i.textBody),d=t.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),e.ResultReason.Canceled===d){const h=t.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=t.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,t.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&d===e.ResultReason.NoMatch&&p.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,i.textBody,a);else{const f=t.DetailedSpeechPhrase.fromJSON(i.textBody),g=f.Offset+this.privRequestSession.currentTurnAudioOffset,y=f.getJsonWithCorrectedOffsets(g);o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===t.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,g,f.Language,f.LanguageDetectionConfidence,void 0,void 0,y,a)}const h=new e.SpeechRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0;break}return s}cancelRecognition(i,o,a,s,c){const u=new e.PropertyCollection;if(u.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[s]),this.privSpeechRecognizer.canceled){const l=new e.SpeechRecognitionCanceledEventArgs(a,c,s,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new e.SpeechRecognitionResult(o,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return Ko.SpeechServiceRecognizer=r,Ko}var Jo={},Hm;function PM(){if(Hm)return Jo;Hm=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.ConversationTranscriptionServiceRecognizer=void 0;const e=_(),t=O();let r=class extends t.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.privConversationTranscriber=c,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const i=this.privSpeechContext.getSection("phraseDetection");i.mode="Conversation";const o={};o.mode="Anonymous",o.audioSessionId=this.privDiarizationSessionId,o.audioOffsetMs=0,i.speakerDiarization=o,this.privSpeechContext.setSection("phraseDetection",i)}}async processTypeSpecificMessages(i){let o;const a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new e.ConversationTranscriptionEventArgs(o,c.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch{}s=!0;break;case"speech.phrase":const p=t.SimpleSpeechPhrase.fromJSON(i.textBody),d=t.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),e.ResultReason.Canceled===d){const h=t.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=t.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,t.EnumTranslation.implTranslateErrorDetails(f))}else if(!(this.privRequestSession.isSpeechEnded&&d===e.ResultReason.NoMatch&&p.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,i.textBody,a);else{const f=t.DetailedSpeechPhrase.fromJSON(i.textBody),g=f.Offset+this.privRequestSession.currentTurnAudioOffset,y=f.getJsonWithCorrectedOffsets(g);o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===t.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,g,f.Language,f.LanguageDetectionConfidence,p.SpeakerId,void 0,y,a)}const h=new e.ConversationTranscriptionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,h)}catch{}}s=!0;break}return s}cancelRecognition(i,o,a,s,c){if(new e.PropertyCollection().setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[s]),this.privConversationTranscriber.canceled){const l=new e.ConversationTranscriptionCanceledEventArgs(a,c,s,void 0,i);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,l)}catch{}}}};return Jo.ConversationTranscriptionServiceRecognizer=r,Jo}var Go={},Vm;function RM(){if(Vm)return Go;Vm=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.TranscriptionServiceRecognizer=void 0;const e=z(),t=_(),r=O(),n=ur;let i=class extends r.ConversationServiceRecognizer{constructor(a,s,c,u,l){super(a,s,c,u,l),this.privTranscriberRecognizer=l,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,s){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,s))}}async sendMeetingSpeechEventAsync(a,s){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,s))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,s,c){try{const u=new t.SpeechRecognitionEventArgs(a,s,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,s,c){try{const u=new t.SpeechRecognitionEventArgs(a,s,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,s,c,u,l){const p=new t.PropertyCollection;if(p.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new t.MeetingTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new t.ConversationTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new t.SpeechRecognitionResult(s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const s=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(s,"start");await this.sendSpeechEvent(a,c)}else{const s=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(s,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,s){const c=JSON.stringify(s);if(c)return a.send(new n.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,s){const c={id:"meeting",name:s,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,s){const c={id:"meeting",name:s,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return Go.TranscriptionServiceRecognizer=i,Go}var Qo={},Km;function EM(){if(Km)return Qo;Km=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.DetailedSpeechPhrase=void 0;const e=O();let t=class rE{constructor(n){this.privDetailedSpeechPhrase=JSON.parse(n),this.privDetailedSpeechPhrase.RecognitionStatus=e.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new rE(n)}getJsonWithCorrectedOffsets(n){if(this.privDetailedSpeechPhrase.NBest){let i;for(const o of this.privDetailedSpeechPhrase.NBest)if(o.Words&&o.Words[0]){i=o.Words[0].Offset;break}if(i&&i<n){const o=n-i;for(const a of this.privDetailedSpeechPhrase.NBest){if(a.Words)for(const s of a.Words)s.Offset+=o;if(a.DisplayWords)for(const s of a.DisplayWords)s.Offset+=o}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return Qo.DetailedSpeechPhrase=t,Qo}var Xo={},Jm;function wM(){if(Jm)return Xo;Jm=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.SimpleSpeechPhrase=void 0;const e=O();let t=class nE{constructor(n){this.privSimpleSpeechPhrase=JSON.parse(n),this.privSimpleSpeechPhrase.RecognitionStatus=e.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(n){return new nE(n)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return Xo.SimpleSpeechPhrase=t,Xo}var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.AddedLmIntent=void 0;class TM{constructor(t,r){this.modelImpl=t,this.intentName=r}}sl.AddedLmIntent=TM;var Yo={},Gm;function IM(){if(Gm)return Yo;Gm=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.IntentServiceRecognizer=void 0;const e=z(),t=_(),r=O();let n=class extends r.ServiceRecognizerBase{constructor(o,a,s,c,u){super(o,a,s,c,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1}setIntents(o,a){this.privAddedLmIntents=o,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(o){let a,s,c=!1;const u=new t.PropertyCollection;switch(o.messageType===e.MessageType.Text&&u.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speech.hypothesis":const p=r.SpeechHypothesis.fromJSON(o.textBody);if(a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,o.textBody,u),this.privRequestSession.onHypothesis(a.offset),s=new t.IntentRecognitionEventArgs(a,p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,s)}catch{}c=!0;break;case"speech.phrase":const d=r.SimpleSpeechPhrase.fromJSON(o.textBody);a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,o.textBody,u),s=new t.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||t.ResultReason.NoMatch===s.result.reason?(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),h()):this.privPendingIntentArgs=s,c=!0;break;case"response":if(s=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,s===void 0){if(o.textBody==="")return;s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const f=r.IntentResponse.fromJSON(o.textBody);if(f!==null&&f.topScoringIntent&&f.topScoringIntent.intent){let g=this.privAddedLmIntents[f.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(g=this.privUmbrellaIntent),g){const y=g===void 0||g.intentName===void 0?f.topScoringIntent.intent:g.intentName;let v=s.result.reason;y!==void 0&&(v=t.ResultReason.RecognizedIntent);const m=s.result.properties!==void 0?s.result.properties:new t.PropertyCollection;m.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,o.textBody),s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(y,s.result.resultId,v,s.result.text,s.result.duration,s.result.offset,void 0,void 0,s.result.errorDetails,s.result.json,m),s.offset,s.sessionId)}}if(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(s.result)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,a,s,c,u){const l=new t.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const p=new t.IntentRecognitionCanceledEventArgs(s,u,c,void 0,void 0,o);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.IntentRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return Yo.IntentServiceRecognizer=n,Yo}var al={};Object.defineProperty(al,"__esModule",{value:!0});al.IntentResponse=void 0;class rf{constructor(t){t===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(t)}static fromJSON(t){return new rf(t)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}al.IntentResponse=rf;var iE={};Object.defineProperty(iE,"__esModule",{value:!0});var cl={},ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.ServiceTelemetryListener=void 0;const Jt=z(),Qm=el;class _M{constructor(t,r,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=t,this.privAudioSourceId=r,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(t){t>0&&this.privPhraseLatencies.push(Date.now()-t)}hypothesisReceived(t){t>0&&this.privHypothesisLatencies.push(Date.now()-t)}onEvent(t){this.privIsDisposed||(t instanceof Qm.RecognitionTriggeredEvent&&t.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:t.eventTime,Name:"ListeningTrigger",Start:t.eventTime}),t instanceof Jt.AudioStreamNodeAttachingEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof Jt.AudioStreamNodeAttachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof Jt.AudioSourceErrorEvent&&t.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Jt.AudioStreamNodeErrorEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Jt.AudioStreamNodeDetachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Qm.ConnectingToServiceEvent&&t.requestId===this.privRequestId&&(this.privConnectionId=t.sessionId),t instanceof Jt.ConnectionStartEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionStartTime=t.eventTime),t instanceof Jt.ConnectionEstablishedEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof Jt.ConnectionEstablishErrorEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Error:this.getConnectionError(t.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof Jt.ConnectionMessageReceivedEvent&&t.connectionId===this.privConnectionId&&t.message&&t.message.headers&&t.message.headers.path&&(this.privReceivedMessages[t.message.headers.path]||(this.privReceivedMessages[t.message.headers.path]=new Array),this.privReceivedMessages[t.message.headers.path].length<50&&this.privReceivedMessages[t.message.headers.path].push(t.networkReceivedTime)))}getTelemetry(){const t=new Array;this.privListeningTriggerMetric&&t.push(this.privListeningTriggerMetric),this.privMicMetric&&t.push(this.privMicMetric),this.privConnectionEstablishMetric&&t.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&t.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&t.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const r={Metrics:t,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(r);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(t){switch(t){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+t.toString()}}}ul.ServiceTelemetryListener=_M;Object.defineProperty(cl,"__esModule",{value:!0});cl.RequestSession=void 0;const kn=z(),qa=el,AM=ul;class bM{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=t,this.privRequestId=kn.createNoDashGuid(),this.privAudioNodeId=kn.createNoDashGuid(),this.privTurnDeferral=new kn.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(t){this.privServiceTelemetryListener&&this.privDetachables.push(t.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new AM.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new qa.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(t,r){this.privAudioNode=t,this.privIsAudioNodeDetached=!1,r?await this.onComplete():this.onEvent(new qa.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(t,r){this.privAuthFetchEventId=t,this.privSessionId=r,this.onEvent(new qa.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(t){t&&await this.onComplete()}async onConnectionEstablishCompleted(t,r){if(t===200){this.onEvent(new qa.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else t===403&&await this.onComplete()}async onServiceTurnEndResponse(t){this.privTurnDeferral.resolve(),!t||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=kn.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new kn.Deferred}onHypothesis(t){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(t)))}onPhraseRecognized(t){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(t)),this.onServiceRecognized(t)}onServiceRecognized(t){this.privLastRecoOffset=t,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(t),this.privConnectionAttempts=0}onAudioSent(t){this.privBytesSent+=t,this.privRecognitionBytesSent+=t}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(t){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(t),kn.Events.instance.onEvent(t)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}cl.RequestSession=bM;var ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.SpeechContext=void 0;class kM{constructor(t){this.privContext={},this.privDynamicGrammar=t}getSection(t){return this.privContext[t]||{}}setSection(t,r){this.privContext[t]=r}setPronunciationAssessmentParams(t,r,n=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(t),n&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),r&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:r},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(t){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=t}toJSON(){const t=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",t),JSON.stringify(this.privContext)}}ll.SpeechContext=kM;var pl={};Object.defineProperty(pl,"__esModule",{value:!0});pl.DynamicGrammarBuilder=void 0;class OM{addPhrase(t){this.privPhrases||(this.privPhrases=[]),t instanceof Array?this.privPhrases=this.privPhrases.concat(t):this.privPhrases.push(t)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(t){this.privGrammars||(this.privGrammars=[]),t instanceof Array?this.privGrammars=this.privGrammars.concat(t):this.privGrammars.push(t)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const t={};if(t.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const r=[];this.privPhrases.forEach(n=>{r.push({Text:n})}),t.Groups=[{Type:"Generic",Items:r}]}return t}}pl.DynamicGrammarBuilder=OM;var oE={};Object.defineProperty(oE,"__esModule",{value:!0});var Zo={},dl={},hl={},nf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(n){this.privActivityResponse=JSON.parse(n)}static fromJSON(n){return new t(n)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}e.ActivityPayloadResponse=t,function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}(e.MessageDataStreamType||(e.MessageDataStreamType={}))})(nf);Object.defineProperty(hl,"__esModule",{value:!0});hl.DialogServiceTurnState=void 0;const MM=qr,DM=Ae,NM=nf;class xM{constructor(t,r){this.privRequestId=r,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=t,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(t,r){return t.messageDataStreamType===NM.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=DM.AudioOutputStream.createPullStream(),this.privAudioStream.format=r!==void 0?r:MM.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}hl.DialogServiceTurnState=xM;Object.defineProperty(dl,"__esModule",{value:!0});dl.DialogServiceTurnStateManager=void 0;const Xm=ke,zM=hl;class LM{constructor(){this.privTurnMap=new Map}StartTurn(t){if(this.privTurnMap.has(t))throw new Xm.InvalidOperationError("Service error: There is already a turn with id:"+t);const r=new zM.DialogServiceTurnState(this,t);return this.privTurnMap.set(t,r),this.privTurnMap.get(t)}GetTurn(t){return this.privTurnMap.get(t)}CompleteTurn(t){if(!this.privTurnMap.has(t))throw new Xm.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+t);const r=this.privTurnMap.get(t);return r.complete(),this.privTurnMap.delete(t),r}}dl.DialogServiceTurnStateManager=LM;var Ym;function jM(){if(Ym)return Zo;Ym=1,Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.DialogServiceAdapter=void 0;const e=Te(),t=Rn,r=z(),n=qr,i=_(),o=dl,a=O(),s=nf,c=ur;let u=class extends a.ServiceRecognizerBase{constructor(p,d,h,f,g){super(p,d,h,f,g),this.privEvents=new r.EventSource,this.privDialogServiceConnector=g,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new o.DialogServiceTurnStateManager,this.recognizeOverride=(y,v,m)=>this.listenOnce(y,v,m),this.postConnectImplOverride=y=>this.dialogConnectImpl(y),this.configConnectionOverride=y=>this.configConnection(y),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=h,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(y=>{y.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(p){const d=r.createGuid(),h=r.createNoDashGuid(),f={context:{interactionId:d},messagePayload:JSON.parse(p),version:.5},g=JSON.stringify(f);await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent",h,"application/json",g))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(p){const d=new i.PropertyCollection;p.messageType===r.MessageType.Text&&d.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,p.textBody);let h,f;switch(p.path.toLowerCase()){case"speech.phrase":const y=a.SimpleSpeechPhrase.fromJSON(p.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+y.Offset+y.Duration),y.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&y.RecognitionStatus!==a.RecognitionStatus.Error){const w=this.fireEventForResult(y,d);if(this.privLastResult=w.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,w)}catch{}}f=!0;break;case"speech.hypothesis":const v=a.SpeechHypothesis.fromJSON(p.textBody),m=v.Offset+this.privRequestSession.currentTurnAudioOffset;h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,v.Text,v.Duration,m,v.Language,v.LanguageDetectionConfidence,void 0,void 0,p.textBody,d),this.privRequestSession.onHypothesis(m);const S=new i.SpeechRecognitionEventArgs(h,v.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,S)}catch{}f=!0;break;case"speech.keyword":const P=a.SpeechKeyword.fromJSON(p.textBody);h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,P.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,P.Text,P.Duration,P.Offset,void 0,void 0,void 0,void 0,p.textBody,d),P.Status!=="Accepted"&&(this.privLastResult=h);const R=new i.SpeechRecognitionEventArgs(h,h.duration,h.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,R)}catch{}f=!0;break;case"audio":{const w=p.requestId.toUpperCase(),I=this.privTurnStateManager.GetTurn(w);try{p.binaryBody?I.audioStream.write(p.binaryBody):I.endAudioStream()}catch{}}f=!0;break;case"response":this.handleResponseMessage(p),f=!0;break}const g=new r.Deferred;return g.resolve(f),g.promise}async cancelRecognition(p,d,h,f,g){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const y=new i.PropertyCollection;y.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[f]);const v=new i.SpeechRecognitionCanceledEventArgs(h,g,f,void 0,p);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,v)}catch{}if(this.privSuccessCallback){const m=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,g,void 0,y);try{this.privSuccessCallback(m),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(p,d,h){this.privRecognizerConfig.recognitionMode=p,this.privSuccessCallback=d,this.privErrorCallback=h,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const f=this.connectImpl(),g=this.sendPreAudioMessages(),y=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),v=await this.privDialogAudioSource.format,m=await this.privDialogAudioSource.deviceInfo,S=new e.ReplayableAudioNode(y,v.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(S,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:m};try{await f,await g}catch(w){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,w),Promise.resolve()}const P=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,P),this.sendAudio(S).then(()=>{},async w=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,w)})}dialogConnectImpl(p){return this.privConnectionLoop=this.startMessageLoop(),p}receiveDialogMessageOverride(){const p=new r.Deferred,d=async()=>{try{const h=this.isDisposed(),f=!this.isDisposed()&&this.terminateMessageLoop;if(h||f){p.resolve(void 0);return}const y=await(await this.fetchConnection()).read();if(!y)return d();const v=c.SpeechConnectionMessage.fromConnectionMessage(y);switch(v.path.toLowerCase()){case"turn.start":{const E=v.requestId.toUpperCase(),N=this.privRequestSession.requestId.toUpperCase();E!==N?this.privTurnStateManager.StartTurn(E):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const S=a.SpeechDetected.fromJSON(v.textBody),P=new i.RecognitionEventArgs(S.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,P);break;case"speech.enddetected":let R;v.textBody.length>0?R=v.textBody:R="{ Offset: 0 }";const w=a.SpeechDetected.fromJSON(R);this.privRequestSession.onServiceRecognized(w.Offset+this.privRequestSession.currentTurnAudioOffset);const I=new i.RecognitionEventArgs(w.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,I);break;case"turn.end":{const E=v.requestId.toUpperCase(),N=this.privRequestSession.requestId.toUpperCase();if(E!==N)this.privTurnStateManager.CompleteTurn(E);else{const D=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,D),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(G){this.privErrorCallback&&this.privErrorCallback(G)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(v)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(v.path.toLowerCase(),v.textBody))}catch{}}return d()}catch{this.terminateMessageLoop=!0,p.resolve()}};return d().catch(h=>{r.Events.instance.onEvent(new r.BackgroundEvent(h))}),p.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(p){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,p)}return Promise.resolve()}async configConnection(p){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(p,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(p),p)}async sendPreAudioMessages(){const p=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(p,!0),await this.sendAgentContext(p),await this.sendWaveHeader(p)}sendAgentConfig(p){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const h=this.agentConfig.get();h.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(h)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const d=this.agentConfig.toJsonString();return this.agentConfigSent=!0,p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",d))}}sendAgentContext(p){const d=r.createGuid(),h=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),g=JSON.stringify({channelData:"",context:{interactionId:d},messagePayload:typeof h===void 0?void 0:h,version:.5});return p.send(new c.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",g))}fireEventForResult(p,d){const h=a.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),f=p.Offset+this.privRequestSession.currentTurnAudioOffset,g=new i.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,f,p.Language,p.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(p),d);return new i.SpeechRecognitionEventArgs(g,f,this.privRequestSession.sessionId)}handleResponseMessage(p){const d=JSON.parse(p.textBody);switch(d.messageType.toLowerCase()){case"message":const h=p.requestId.toUpperCase(),f=s.ActivityPayloadResponse.fromJSON(p.textBody),g=this.privTurnStateManager.GetTurn(h);if(f.conversationId){const m=this.agentConfig.get();m.botInfo.conversationId=f.conversationId,this.agentConfig.set(m)}const y=g.processActivityPayload(f,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),v=new i.ActivityReceivedEventArgs(f.messagePayload,y);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,v)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(p.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${d.messageType}. Ignoring.`));break}}onEvent(p){this.privEvents.onEvent(p),r.Events.instance.onEvent(p)}addKeywordContextData(){const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(p===void 0)return;const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),f=p.split(";"),g=d===void 0?[]:d.split(";"),y=h===void 0?[]:h.split(";"),v=[];for(let m=0;m<f.length;m++){const S={};S.text=f[m],m<g.length&&(S.offset=Number(g[m])),m<y.length&&(S.duration=Number(y[m])),v.push(S)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:v,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return Zo.DialogServiceAdapter=u,Zo}var fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.AgentConfig=void 0;class BM{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(t){this.iPrivConfig=t}}fl.AgentConfig=BM;var mp={},es={},vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.ConversationConnectionConfig=void 0;const FM=ma;class qe extends FM.RestConfigBase{static get host(){return qe.privHost}static get apiVersion(){return qe.privApiVersion}static get clientAppId(){return qe.privClientAppId}static get defaultLanguageCode(){return qe.privDefaultLanguageCode}static get restPath(){return qe.privRestPath}static get webSocketPath(){return qe.privWebSocketPath}static get transcriptionEventKeys(){return qe.privTranscriptionEventKeys}}vi.ConversationConnectionConfig=qe;qe.privHost="dev.microsofttranslator.com";qe.privRestPath="/capito/room";qe.privApiVersion="2.0";qe.privDefaultLanguageCode="en-US";qe.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";qe.privWebSocketPath="/capito/translate";qe.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var Zm;function $M(){if(Zm)return es;Zm=1,Object.defineProperty(es,"__esModule",{value:!0}),es.ConversationManager=void 0;const e=Te(),t=j,r=_(),n=vi;let i=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(a,s,c,u){try{t.Contracts.throwIfNullOrUndefined(a,"args");const l=a.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),d=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),f=a.getProperty(r.PropertyId.SpeechServiceConnection_Key),g=a.getProperty(r.PropertyId.SpeechServiceConnection_Region),y=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(l,"languageCode"),t.Contracts.throwIfNullOrWhitespace(p,"nickname"),t.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const v={};v[this.privRequestParams.apiVersion]=this.privApiVersion,v[this.privRequestParams.languageCode]=l,v[this.privRequestParams.nickname]=p;const m={};h&&(m[this.privRequestParams.correlationId]=h),m[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,s!==void 0?v[this.privRequestParams.roomId]=s:(t.Contracts.throwIfNullOrUndefined(g,this.privErrors.authInvalidSubscriptionRegion),m[this.privRequestParams.subscriptionRegion]=g,f?m[this.privRequestParams.subscriptionKey]=f:y?m[this.privRequestParams.authorization]=`Bearer ${y}`:t.Contracts.throwIfNullOrUndefined(f,this.privErrors.authInvalidSubscriptionKey));const S={};S.headers=m,this.privRestAdapter.options=S;const P=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,P,v,null).then(R=>{const w=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,R.headers);if(!R.ok){if(u){let E=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",R.status.toString()),N;try{N=JSON.parse(R.data),E+=` [${N.error.code}: ${N.error.message}]`}catch{E+=` [${R.data}]`}w&&(E+=` ${w}`),u(E)}return}const I=JSON.parse(R.data);if(I&&(I.requestId=w),c){try{c(I)}catch(E){u&&u(E)}c=void 0}}).catch(()=>{})}catch(l){if(u)if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}}leave(a,s){return new Promise((c,u)=>{try{t.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","token"));const l=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=s;const h={};p&&(h[this.privRequestParams.correlationId]=p);const f={};f.headers=h,this.privRestAdapter.options=f;const g=`https://${l}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,g,d,null).then(y=>{y.ok,c()}).catch(()=>{})}catch(l){if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}})}};return es.ConversationManager=i,es}var nn={},ts={},vl={},ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.ConversationConnectionMessage=void 0;const qM=z();class UM extends qM.ConnectionMessage{constructor(t,r,n,i){super(t,r,n,i);const o=JSON.parse(this.textBody);o.type!==void 0&&(this.privConversationMessageType=o.type)}get conversationMessageType(){return this.privConversationMessageType}}ya.ConversationConnectionMessage=UM;Object.defineProperty(vl,"__esModule",{value:!0});vl.ConversationWebsocketMessageFormatter=void 0;const on=z(),ey=ya;class WM{toConnectionMessage(t){const r=new on.Deferred;try{if(t.messageType===on.MessageType.Text){const n=new ey.ConversationConnectionMessage(t.messageType,t.textContent,{},t.id);r.resolve(n)}else t.messageType===on.MessageType.Binary&&r.resolve(new ey.ConversationConnectionMessage(t.messageType,t.binaryContent,void 0,t.id))}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(t){const r=new on.Deferred;try{if(t.messageType===on.MessageType.Text){const n=`${t.textBody?t.textBody:""}`;r.resolve(new on.RawWebsocketMessage(on.MessageType.Text,n,t.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}}vl.ConversationWebsocketMessageFormatter=WM;var ty;function HM(){if(ty)return ts;ty=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.ConversationConnectionFactory=void 0;const e=Te(),t=z(),r=j,n=_(),i=Dt(),o=vi,a=vl;let s=class extends i.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,o.ConversationConnectionConfig.host),h=u.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,t.createGuid()),f=`wss://${d}${o.ConversationConnectionConfig.webSocketPath}`,g=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(g,"token");const y={};y[o.ConversationConnectionConfig.configParams.apiVersion]=o.ConversationConnectionConfig.apiVersion,y[o.ConversationConnectionConfig.configParams.token]=g,y[o.ConversationConnectionConfig.configParams.correlationId]=h;const v=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(f,y,{},new a.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),v,p)}};return ts.ConversationConnectionFactory=s,ts}var rs={},gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.ConversationRequestSession=void 0;const yp=z();class VM{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=t,this.privRequestId=yp.createNoDashGuid(),this.privRequestCompletionDeferral=new yp.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(t,r){this.privSessionId=r}onAuthCompleted(t){t&&this.onComplete()}onConnectionEstablishCompleted(t){t!==200&&t===403&&this.onComplete()}onServiceTurnEndResponse(t){t?this.privRequestId=yp.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach()}}onComplete(){}}gl.ConversationRequestSession=VM;var He={},ry;function sE(){if(ry)return He;ry=1,Object.defineProperty(He,"__esModule",{value:!0}),He.ConversationReceivedTranslationEventArgs=He.ParticipantsListEventArgs=He.ParticipantAttributeEventArgs=He.ParticipantEventArgs=He.LockRoomEventArgs=He.MuteAllEventArgs=void 0;const e=_();class t extends e.SessionEventArgs{constructor(c,u){super(u),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}He.MuteAllEventArgs=t;class r extends e.SessionEventArgs{constructor(c,u){super(u),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}He.LockRoomEventArgs=r;class n extends e.SessionEventArgs{constructor(c,u){super(u),this.privParticipant=c}get participant(){return this.privParticipant}}He.ParticipantEventArgs=n;class i extends e.SessionEventArgs{constructor(c,u,l,p){super(p),this.privKey=u,this.privValue=l,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}He.ParticipantAttributeEventArgs=i;class o extends e.SessionEventArgs{constructor(c,u,l,p,d,h,f,g,y){super(y),this.privRoomId=c,this.privSessionToken=u,this.privTranslateTo=l,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=f,this.privParticipants=g}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}He.ParticipantsListEventArgs=o;class a{constructor(c,u,l){this.privPayload=u,this.privCommand=c,this.privSessionId=l}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return He.ConversationReceivedTranslationEventArgs=a,He}var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.ConversationTranslatorCommandTypes=rr.ConversationTranslatorMessageTypes=rr.InternalParticipants=void 0;class KM{constructor(t=[],r){this.participants=t,this.meId=r}addOrUpdateParticipant(t){if(t===void 0)return;const r=this.getParticipantIndex(t.id);return r>-1?this.participants.splice(r,1,t):this.participants.push(t),this.getParticipant(t.id)}getParticipantIndex(t){return this.participants.findIndex(r=>r.id===t)}getParticipant(t){return this.participants.find(r=>r.id===t)}deleteParticipant(t){this.participants=this.participants.filter(r=>r.id!==t)}get host(){return this.participants.find(t=>t.isHost===!0)}get me(){return this.getParticipant(this.meId)}}rr.InternalParticipants=KM;rr.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};rr.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var aE={},ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.CommandResponsePayload=void 0;const JM=e=>JSON.parse(e);class of{constructor(t){this.privCommandResponse=JM(t)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(t){return new of(t)}}ml.CommandResponsePayload=of;var oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.ParticipantPayloadResponse=oi.ParticipantsListPayloadResponse=void 0;const GM=e=>JSON.parse(e),QM=e=>JSON.parse(e);class sf{constructor(t){this.privParticipantsPayloadResponse=GM(t)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(t){return new sf(t)}}oi.ParticipantsListPayloadResponse=sf;class af{constructor(t){this.privParticipantPayloadResponse=QM(t)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(t){return new af(t)}}oi.ParticipantPayloadResponse=af;var si={};Object.defineProperty(si,"__esModule",{value:!0});si.TextResponsePayload=si.SpeechResponsePayload=void 0;const XM=e=>JSON.parse(e),YM=e=>JSON.parse(e);class cf{constructor(t){this.privSpeechResponse=XM(t)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(t){return new cf(t)}}si.SpeechResponsePayload=cf;class uf{constructor(t){this.privTextResponse=YM(t)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(t){return new uf(t)}}si.TextResponsePayload=uf;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ml;Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var r=oi;Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=si;Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})})(aE);var ny;function ZM(){if(ny)return rs;ny=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.ConversationServiceAdapter=void 0;const e=z(),t=_(),r=O(),n=ya,i=gl,o=sE(),a=rr,s=aE;let c=class extends r.ServiceRecognizerBase{constructor(l,p,d,h,f){super(l,p,d,h,f),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=f,this.privConversationAuthentication=l,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=g=>this.conversationConnectImpl(g),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession(e.createNoDashGuid()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(l){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(l),await super.dispose(l)}async sendMessage(l){return(await this.fetchConnection()).send(new n.ConversationConnectionMessage(e.MessageType.Text,l))}async sendMessageAsync(l){await(await this.fetchConnection()).send(new n.ConversationConnectionMessage(e.MessageType.Text,l))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(l,p,d,h,f){this.terminateMessageLoop=!0;const g=new t.ConversationTranslationCanceledEventArgs(d,f,h,void 0,l);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,g)}catch{}}async conversationConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const l=new e.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return l.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,f=d.conversationMessageType.toLowerCase();let g=!1;try{switch(f){case"info":case"participant_command":case"command":const y=s.CommandResponsePayload.fromJSON(d.textBody);switch(y.command.toLowerCase()){case"participantlist":const w=s.ParticipantsListPayloadResponse.fromJSON(d.textBody),I=w.participants.map(Y=>({avatar:Y.avatar,displayName:Y.nickname,id:Y.participantId,isHost:Y.ishost,isMuted:Y.ismuted,isUsingTts:Y.usetts,preferredLanguage:Y.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new o.ParticipantsListEventArgs(w.roomid,w.token,w.translateTo,w.profanityFilter,w.roomProfanityFilter,w.roomLocked,w.muteAll,I,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,y.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,y.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setMute,y.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new o.MuteAllEventArgs(y.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(y.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,y.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new o.LockRoomEventArgs(y.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.changeNickname,y.value,h));break;case"joinsession":const E=s.ParticipantPayloadResponse.fromJSON(d.textBody),N={avatar:E.avatar,displayName:E.nickname,id:E.participantId,isHost:E.ishost,isMuted:E.ismuted,isUsingTts:E.usetts,preferredLanguage:E.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(N,h));break;case"leavesession":const D={id:y.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(D,h));break;case"disconnectsession":const G={id:y.participantId};break;case"token":const L=new r.CognitiveTokenAuthentication(()=>{const Y=y.token;return Promise.resolve(Y)},()=>{const Y=y.token;return Promise.resolve(Y)});this.authentication=L,this.privConversationServiceConnector.onToken(L);break;default:break}break;case"partial":case"final":const v=s.SpeechResponsePayload.fromJSON(d.textBody),m=f==="final"?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,S=new t.ConversationTranslationResult(v.participantId,this.getTranslations(v.translations),v.language,v.id,m,v.recognition,void 0,void 0,d.textBody,void 0);v.isFinal?((S.text!==void 0&&S.text.length>0||v.id===this.privLastPartialUtteranceId)&&(g=!0),g&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,S,h))):S.text!==void 0&&(this.privLastPartialUtteranceId=v.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,S,h)));break;case"translated_message":const P=s.TextResponsePayload.fromJSON(d.textBody),R=new t.ConversationTranslationResult(P.participantId,this.getTranslations(P.translations),P.language,void 0,void 0,P.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,R,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return l.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const l=this.receiveConversationMessageOverride();try{return await l}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(l=>l.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(l=>l),this.privConnectionConfigPromise)}getTranslations(l){let p;if(l!==void 0){p=new t.Translations;for(const d of l)p.set(d.lang,d.translation)}return p}};return rs.ConversationServiceAdapter=c,rs}var iy;function eD(){if(iy)return nn;iy=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ConversationTranslatorRecognizer=nn.ConversationRecognizerFactory=void 0;const e=O(),t=z(),r=j,n=_(),i=HM(),o=ZM();class a{static fromConfig(u,l,p){return new s(u,l,p)}}nn.ConversationRecognizerFactory=a;let s=class extends n.Recognizer{constructor(u,l,p){const d=l;r.Contracts.throwIfNull(d,"speechConfig");const h=u;r.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new i.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this),this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},p=>{l&&l(p)})}catch(p){if(l)if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p);this.dispose(!0).catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})}}sendRequest(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{t.Events.instance.onEvent(new t.BackgroundEvent(h))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new e.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,p,d){const h=p;return new o.ConversationServiceAdapter(u,l,h,d,this)}sendMessage(u,l,p){const d=this.privReco;((f,g,y)=>{f!==void 0?f.then(()=>{try{g&&g()}catch(v){y&&y(`'Unhandled error on promise callback: ${v}'`)}},v=>{try{y&&y(v)}catch{}}):y&&y("Null promise")})(d.sendMessageAsync(u),l,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return nn.ConversationTranslatorRecognizer=s,nn}var ns={},oy;function tD(){if(oy)return ns;oy=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.TranscriberRecognizer=void 0;const e=z(),t=j,r=_(),n=O();let i=class extends r.Recognizer{constructor(a,s){const c=a;t.Contracts.throwIfNull(c,"speechTranslationConfig");const u=s;t.Contracts.throwIfNull(u,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(s,c.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){t.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){t.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,s){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(n.RecognitionMode.Conversation),a,s)}stopContinuousRecognitionAsync(a,s){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,s)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(a,s){const c=this.privReco;t.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendSpeechEventAsync(a,s)}async pushMeetingEvent(a,s){const c=this.privReco;t.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendMeetingSpeechEventAsync(a,s)}async enforceAudioGating(){const c=(await this.audioConfig.format).channels;if(c===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(c!==8)throw new Error(`Unsupported audio configuration: Detected ${c}-channel audio`)}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(s,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(s,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(s,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(s,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(s,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new n.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,s,c,u){const l=c;return new n.TranscriptionServiceRecognizer(a,s,l,u,this)}};return ns.TranscriberRecognizer=i,ns}var sy;function rD(){return sy||(sy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=$M();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var r=vi;Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=eD();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var i=tD();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var o=sE();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return o.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return o.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return o.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return o.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return o.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return o.ParticipantsListEventArgs}});var a=rr;Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(mp)),mp}var lf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"}(e.MetadataType||(e.MetadataType={}));class t{constructor(n){this.privSynthesisAudioMetadata=JSON.parse(n)}static fromJSON(n){return new t(n)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=t})(lf);var is={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.SynthesisStartedEvent=jt.ConnectingToSynthesisServiceEvent=jt.SynthesisTriggeredEvent=jt.SpeechSynthesisEvent=void 0;const ay=z();class yl extends ay.PlatformEvent{constructor(t,r,n=ay.EventType.Info){super(t,n),this.privRequestId=r}get requestId(){return this.privRequestId}}jt.SpeechSynthesisEvent=yl;class nD extends yl{constructor(t,r,n){super("SynthesisTriggeredEvent",t),this.privSessionAudioDestinationId=r,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}jt.SynthesisTriggeredEvent=nD;class iD extends yl{constructor(t,r){super("ConnectingToSynthesisServiceEvent",t),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}jt.ConnectingToSynthesisServiceEvent=iD;class oD extends yl{constructor(t,r){super("SynthesisStartedEvent",t),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}jt.SynthesisStartedEvent=oD;var cy;function sD(){if(cy)return is;cy=1,Object.defineProperty(is,"__esModule",{value:!0}),is.SynthesisTurn=void 0;const e=z(),t=Ae,r=_(),n=lf,i=jt;let o=class Od{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=e.createNoDashGuid(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(s){this.privStreamId=s}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(s){this.privAudioOutputFormat=s}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const s=new r.PropertyCollection;return s.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),s}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const s=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(s),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(s,c,u,l){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=s,this.privRawText=c,this.privIsSSML=u,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",l!==void 0&&(this.privTurnAudioDestination=l,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,l===void 0?void 0:l.id()))}onPreConnectionStart(s){this.privAuthFetchEventId=s,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(s){s&&this.onComplete()}onConnectionEstablishCompleted(s){if(s===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else s===403&&this.onComplete()}onServiceResponseMessage(s){const c=JSON.parse(s);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(s){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const c=JSON.parse(s);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(s){this.isSynthesizing&&(this.privAudioOutputStream.write(s),this.privBytesReceived+=s.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(s))}onTextBoundaryEvent(s){this.updateTextOffset(s.Data.text.Text,s.Type)}onVisemeMetadataReceived(s){s.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=s.Data.AnimationChunk)}onSessionEnd(s){this.privAudioDuration=s.Data.Offset}async constructSynthesisResult(){const s=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,s,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const s=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",s}onEvent(s){e.Events.instance.onEvent(s)}static isXmlTag(s){return s.length>=2&&s[0]==="<"&&s[s.length-1]===">"}updateTextOffset(s,c){c===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(s,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+s.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Od.isXmlTag(s)&&this.updateTextOffset(s,c))):(this.privSentenceOffset=this.privRawText.indexOf(s,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+s.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Od.isXmlTag(s)&&this.updateTextOffset(s,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(s){return this.privRawText.indexOf("<",s+1)>this.privRawText.indexOf(">",s+1)}};return is.SynthesisTurn=o,is}var os={},uy;function aD(){if(uy)return os;uy=1,Object.defineProperty(os,"__esModule",{value:!0}),os.SynthesisAdapterBase=void 0;const e=z(),t=_(),r=O(),n=ur;let i=class{constructor(a,s,c,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new e.ArgumentNullError("authentication");if(!s)throw new e.ArgumentNullError("connectionFactory");if(!c)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=s,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(l=>{if(l.name==="ConnectionClosedEvent"){const p=l;p.statusCode!==1e3&&this.cancelSynthesisLocal(t.CancellationReason.Error,p.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,s){const c=typeof s=="string"?e.MessageType.Text:e.MessageType.Binary,u=typeof s=="string"?"application/json":"";return(await this.fetchConnection()).send(new n.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,u,s))}async Speak(a,s,c,u,l,p){let d;if(s?d=a:d=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(d,c,u,l);this.privSuccessCallback=u,this.privErrorCallback=l,this.privSynthesisTurn.startNewSynthesis(c,a,s,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new n.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,s,c,u){const l=new t.PropertyCollection;l.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]);const p=new t.SpeechSynthesisResult(a,t.ResultReason.Canceled,void 0,u,l);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,s,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,s,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const s=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!s)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=n.SpeechConnectionMessage.fromConnectionMessage(s);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const u=r.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const p of u)switch(p.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new t.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case r.MetadataType.Bookmark:const h=new t.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const f=new t.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(f)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let l;try{l=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(l)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(l);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const s=this.synthesisContext.toJSON();if(s)return a.send(new n.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",s))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=e.createNoDashGuid(),this.privConnectionId=e.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const s=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=s.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);u.events.attach(p=>{this.connectionEvents.onEvent(p)});const l=await u.open();return l.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.resolve(u)):l.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${l.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${l.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,s){if(s)return a.send(new n.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",s))}sendSsmlMessage(a,s,c){return a.send(new n.SpeechConnectionMessage(e.MessageType.Text,"ssml",c,"application/ssml+xml",s))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return os.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,os}var ss={},ly;function cD(){if(ly)return ss;ly=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.AvatarSynthesisAdapter=void 0;const e=_(),t=O();let r=class extends t.SynthesisAdapterBase{constructor(i,o,a,s,c){super(i,o,a,void 0),this.privAvatarSynthesizer=s,this.privSynthesizer=s,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,o,a,s,c,u,l,p,d,h,f,g,y,v,m,S;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)==null?void 0:i.bitrate,codec:(o=this.privAvatarConfig.videoFormat)==null?void 0:o.codec,crop:{bottomRight:{x:(c=(s=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:s.bottomRight)==null?void 0:c.x,y:(p=(l=(u=this.privAvatarConfig.videoFormat)==null?void 0:u.cropRange)==null?void 0:l.bottomRight)==null?void 0:p.y},topLeft:{x:(f=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:f.x,y:(v=(y=(g=this.privAvatarConfig.videoFormat)==null?void 0:g.cropRange)==null?void 0:y.topLeft)==null?void 0:v.y}},resolution:{height:(m=this.privAvatarConfig.videoFormat)==null?void 0:m.height,width:(S=this.privAvatarConfig.videoFormat)==null?void 0:S.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const o=new e.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,o)}catch{}}}};return ss.AvatarSynthesisAdapter=r,ss}var as={},py;function uD(){if(py)return as;py=1,Object.defineProperty(as,"__esModule",{value:!0}),as.SpeechSynthesisAdapter=void 0;const e=_(),t=O();let r=class extends t.SynthesisAdapterBase{constructor(i,o,a,s,c){super(i,o,a,c),this.privSpeechSynthesizer=s,this.privSynthesizer=s}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const o=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(i,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,o)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const o=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,o));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const o=new e.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,o)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return as.SpeechSynthesisAdapter=r,as}var cs={},dy;function lD(){if(dy)return cs;dy=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.SynthesisRestAdapter=void 0;const e=Te(),t=_(),r=Dt(),n=we;let i=class{constructor(a,s){let c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const l=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),p=r.ConnectionFactoryBase.getHostSuffix(l);c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${l}.tts.speech${p}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const u=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(u),this.privAuthentication=s}getVoicesList(a){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(s=>(this.privRestAdapter.setHeaders(s.headerName,s.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}};return cs.SynthesisRestAdapter=i,cs}var Sp={},hy;function pD(){return hy||(hy=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=O();var r;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(r=e.SynthesisServiceType||(e.SynthesisServiceType={}));class n{constructor(o,a){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=o||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(o){this.privSynthesisServiceType=o}set synthesisVideoSection(o){this.privSpeechServiceConfig.Context.synthesis={video:o}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}e.SynthesizerConfig=n}(Sp)),Sp}var us={},fy;function dD(){if(fy)return us;fy=1,Object.defineProperty(us,"__esModule",{value:!0}),us.SynthesisContext=void 0;const e=_();let t=class{constructor(){this.privContext={}}setSection(n,i){this.privContext[n]=i}set audioOutputFormat(n){this.privAudioOutputFormat=n}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(n){const i=this.buildSynthesisContext(n);this.setSection("synthesis",i)}buildSynthesisContext(n){return{audio:{metadataOptions:{bookmarkEnabled:!!(n!=null&&n.bookmarkReached),punctuationBoundaryEnabled:n==null?void 0:n.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(n!=null&&n.wordBoundary)),sentenceBoundaryEnabled:n==null?void 0:n.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(n!=null&&n.visemeReceived),wordBoundaryEnabled:n==null?void 0:n.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(n!=null&&n.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:n==null?void 0:n.autoDetectSourceLanguage}}}};return us.SynthesisContext=t,us}var ls={},vy;function hD(){if(vy)return ls;vy=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.SpeakerRecognitionConfig=void 0;const e=O();let t=class{constructor(n,i){this.privContext=n||new e.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return ls.SpeakerRecognitionConfig=t,ls}var ps={},gy;function fD(){if(gy)return ps;gy=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.SpeakerServiceRecognizer=void 0;const e=Te(),t=z(),r=_(),n=O(),i=ur;let o=class extends n.ServiceRecognizerBase{constructor(s,c,u,l,p){super(s,c,u,l,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=u,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(s){let c=!1;const u=new r.PropertyCollection;switch(s.messageType===t.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speaker.response":const p=JSON.parse(s.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new r.SpeakerRecognitionResult(p,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,p.status.reason):d=new r.SpeakerRecognitionResult(p,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,c,u,l,p){if(new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]),this.privResultDeferral){const h=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},r.ResultReason.Canceled,l,p);try{this.privResultDeferral.resolve(h)}catch(f){this.privResultDeferral.reject(f)}}}async recognizeSpeakerOnce(s){this.privSpeakerModel=s,this.voiceProfileType=s.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(s)),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new e.ReplayableAudioNode(l,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await c,await u}catch(y){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,y)}const f=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,f),this.receiveMessage(),this.sendAudio(h).then(()=>{},y=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,y)}),this.privResultDeferral.promise}async sendPreAudioMessages(s){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,s)}async sendSpeakerRecognition(s,c){const u=JSON.stringify(c);return s.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(s){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:s.profileIds,scenario:s.scenario}}};return ps.SpeakerServiceRecognizer=o,ps}var ds={},my;function vD(){if(my)return ds;my=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.VoiceServiceRecognizer=void 0;const e=Te(),t=z(),r=_(),n=O(),i=ur;let o=class extends n.ServiceRecognizerBase{constructor(s,c,u,l,p){super(s,c,u,l,p),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(s){this.privSpeakerAudioSource=s}processTypeSpecificMessages(s){let c=!1;const u=new r.PropertyCollection;switch(s.messageType===t.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(s.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,s.requestId);break;case"delete":case"reset":this.handleResultResponse(p,s.requestId);break;case"fetch":const g=JSON.parse(s.textBody);this.handleFetchResponse(g,s.requestId);break}c=!0;break;case"speaker.phrases":const d=JSON.parse(s.textBody);this.handlePhrasesResponse(d,s.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(s.textBody),f=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(s.requestId)&&this.privDeferralMap.complete(s.requestId,f),this.privRequestSession.onSpeechEnded(),c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,c,u,l,p){new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]);const h=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,p,p);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(s,c){this.voiceProfileType=s.toString();const u=this.connectImpl();try{const l=new t.Deferred;return await u,await this.sendCreateProfile(l,s,c),this.receiveMessage(),l.promise}catch(l){throw l}}async resetProfile(s){return this.voiceProfileType=s.profileType.toString(),this.sendCommonRequest("reset",s.profileType,s)}async deleteProfile(s){return this.voiceProfileType=s.profileType.toString(),this.sendCommonRequest("delete",s.profileType,s)}async retrieveEnrollmentResult(s){return this.voiceProfileType=s.profileType.toString(),this.privExpectedProfileId=s.profileId,this.sendCommonRequest("fetch",s.profileType,s)}async getAllProfiles(s){return this.voiceProfileType=s.toString(),this.sendCommonRequest("fetch",s)}async getActivationPhrases(s,c){this.voiceProfileType=s.toString();const u=this.connectImpl();try{const l=new t.Deferred;return await u,await this.sendPhrasesRequest(l,s,c),this.receiveMessage(),l.promise}catch(l){throw l}}async enrollProfile(s){this.voiceProfileType=s.profileType.toString();const c=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),l=this.sendPreAudioMessages(s,c),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,f=new e.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(f,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await u,await l}catch(v){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,v)}const g=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,g),this.receiveMessage(),this.sendAudio(f).then(()=>{},v=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,v)}),c.promise}async sendPreAudioMessages(s,c){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(s.profileType),s)}async sendPhrasesRequest(s,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,s);const p=this.scenarioFrom(c),d={locale:u,scenario:p};return l.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(s,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,s);const p=c===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:u,number:"1",scenario:p};return l.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(s,c,u=void 0){const l=this.connectImpl();try{const p=new t.Deferred;this.privRequestSession.onSpeechContext(),await l;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,s,this.scenarioFrom(c),u),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(s,c,u,l){const p={scenario:u};return l?p.profileIds=[l.profileId]:p.maxPageSize=-1,s.send(new i.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(s){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:s.profileIds,scenario:s.scenario}}handlePhrasesResponse(s,c){if(this.privDeferralMap.getId(c))if(s.status.statusCode.toLowerCase()!=="success"){const u=r.ResultReason.Canceled,l=new r.VoiceProfilePhraseResult(u,s.status.statusCode,s.passPhraseType,[]);this.privDeferralMap.complete(c,l)}else if(s.phrases&&s.phrases.length>0){const u=r.ResultReason.EnrollingVoiceProfile,l=new r.VoiceProfilePhraseResult(u,s.status.statusCode,s.passPhraseType,s.phrases);this.privDeferralMap.complete(c,l)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(s,c){if(s.profiles&&s.profiles.length>0)if(this.privDeferralMap.getId(c)){const u=s.profiles.map(l=>l.profileId);this.privDeferralMap.complete(c,u)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(s,c){if(this.privDeferralMap.getId(c)){const u=s.operation.toLowerCase()==="delete"?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,l=s.status.statusCode.toLowerCase()==="success"?u:r.ResultReason.Canceled,p=new r.VoiceProfileResult(l,`statusCode: ${s.status.statusCode}, errorDetails: ${s.status.reason}`);this.privDeferralMap.complete(c,p)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(s,c){if(this.privDeferralMap.getId(c)&&s.profiles[0]){if(this.privExpectedProfileId&&s.profiles.length===1&&s.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=s.profiles[0],l=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),s.status.reason);this.privDeferralMap.complete(c,l)}else if(s.profiles.length>0){const u=s.profiles,l=[];for(const p of u)l.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),s.status.reason));this.privDeferralMap.complete(c,l)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(s){switch(s.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(s){return s===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":s===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return ds.VoiceServiceRecognizer=o,ds}var cE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0;class t{constructor(s){this.context=s}serialize(){return JSON.stringify(this,(s,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const u={};for(const l in c)Object.hasOwnProperty.call(c,l)&&(u[l&&l.charAt(0).toLowerCase()+l.substring(1)]=c[l]);return u}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(s){this.recognition=s.toLowerCase()}}e.SpeechServiceConfig=t;class r{constructor(s){this.system=new n,this.os=s}}e.Context=r;class n{constructor(){const s="1.35.0";this.name="SpeechSDK",this.version=s,this.build="JavaScript",this.lang="JavaScript"}}e.System=n;class i{constructor(s,c,u){this.platform=s,this.name=c,this.version=u}}e.OS=i;class o{constructor(s,c,u){this.manufacturer=s,this.model=c,this.version=u}}e.Device=o,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(e.connectivity||(e.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(e.type||(e.type={}))})(cE);var yy;function O(){return yy||(yy=1,function(e){var t=H&&H.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),r=H&&H.__exportStar||function(o,a){for(var s in o)s!=="default"&&!a.hasOwnProperty(s)&&t(a,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=void 0,r(ou,e),r(Iu,e),r(fi,e),r(oR,e),r(sR,e),r(iM(),e),r(oM(),e),r(el,e),r(sM(),e),r(aM(),e),r(cM(),e),r(ZR,e),r(tl,e),r(lM(),e),r(pM(),e),r(dM(),e),r(hM(),e),r(QR(),e),r(fM(),e),r(eE,e),r(vM(),e),r(rl,e),r(yM(),e),r(SM(),e),r(nl,e),r(il,e),r(ol,e),r(CM(),e),r(PM(),e),r(RM(),e),r(EM(),e),r(wM(),e),r(sl,e),r(IM(),e),r(al,e),r(iE,e),r(cl,e),r(ll,e),r(pl,e),r(oE,e),r(jM(),e),r(fl,e),r(rD(),e),r(lf,e),r(sD(),e),r(aD(),e);var n=cD();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var i=uD();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),r(lD(),e),r(pD(),e),r(dD(),e),r(hD(),e),r(fD(),e),r(vD(),e),r(cE,e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(Zl)),Zl}(function(e){var t=H&&H.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),r=H&&H.__exportStar||function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&t(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0});const n=O();new n.AgentConfig,r(_(),e)})(ys);const cn=class cn{constructor(t,r){Ur(this,"speechToken");Ur(this,"speechRegion");Ur(this,"onRecognizing",()=>{});Ur(this,"onRecognitionDone",()=>{});Ur(this,"speechRecognizer");this.speechToken=t,this.speechRegion=r}static getInstance(t,r){return cn.instance||(cn.instance=new cn(t,r)),cn.instance}startRecognition(t,r){this.onRecognizing=t,this.onRecognitionDone=r;const n=ys.SpeechConfig.fromAuthorizationToken(this.speechToken,this.speechRegion);n.speechRecognitionLanguage="fr-FR",this.recognizeFromMicrophone(n)}stopRecognition(){var t;(t=this.speechRecognizer)==null||t.stopContinuousRecognitionAsync()}recognizeFromMicrophone(t){const r=ys.AudioConfig.fromDefaultMicrophoneInput();this.speechRecognizer=new ys.SpeechRecognizer(t,r);const n=ys.PhraseListGrammar.fromRecognizer(this.speechRecognizer);n.addPhrase("Skyincap"),n.addPhrase("Skyconseil"),n.addPhrase("Guidor"),n.addPhrase("Vercel"),n.addPhrase("Bitbucket"),n.addPhrase("Jira"),n.addPhrase("Vitest"),n.addPhrase("Sharik"),n.addPhrase("Playwright"),n.addPhrase("la doc"),this.speechRecognizer.recognizing=(i,o)=>{const a=o.result.text;this.onRecognizing(a)},this.speechRecognizer.recognized=(i,o)=>{const a=o.result.text;this.onRecognitionDone(a)},this.speechRecognizer.startContinuousRecognitionAsync()}};Ur(cn,"instance");let Md=cn;const gD=tP("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Dd=C.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},o)=>{const a=n?Js:"button";return W.jsx(a,{className:jr(gD({variant:t,size:r,className:e})),ref:o,...i})});Dd.displayName="Button";/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),uE=(e,t)=>{const r=C.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:c,...u},l)=>C.createElement("svg",{ref:l,...mD,width:i,height:i,stroke:n,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${yD(e)}`,s].join(" "),...u},[...t.map(([p,d])=>C.createElement(p,d)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=uE("Speech",[["path",{d:"M8.8 20v-4.1l1.9.2a2.3 2.3 0 0 0 2.164-2.1V8.3A5.37 5.37 0 0 0 2 8.25c0 2.8.656 3.054 1 4.55a5.77 5.77 0 0 1 .029 2.758L2 20",key:"11atix"}],["path",{d:"M19.8 17.8a7.5 7.5 0 0 0 .003-10.603",key:"yol142"}],["path",{d:"M17 15a3.5 3.5 0 0 0-.025-4.975",key:"ssbmkc"}]]);/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=uE("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);function PD(){const{navigateTo:e}=C.useContext(Ah),[t,r]=C.useState(""),[n,i]=C.useState(!1),[o,a]=C.useState(null),s=C.useRef(null);C.useEffect(()=>{var y;const g=(y=Zt.fromCookie("accessToken"))==null?void 0:y.toString();g?a(Md.getInstance(g,"francecentral")):e(ht.Home)},[e]),C.useEffect(()=>{const g=()=>{document.visibilityState==="hidden"&&f()};return document.addEventListener("visibilitychange",g),()=>{document.removeEventListener("visibilitychange",g)}}),C.useEffect(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[t]);let c=0,u=0;const l=["","",""];function p(){i(!0),r("Listening..."),o==null||o.startRecognition(d,h)}function d(g){g.length>0&&(l[c%3]=g,r(l[u%3]+`
`+l[(u+1)%3]+`
`+l[(u+2)%3]))}function h(g){g.length>0&&(l[c%3]=g,r(l[u%3]+`
`+l[(u+1)%3]+`
`+l[(u+2)%3]),c++,c>2&&u++)}function f(){i(!1),o==null||o.stopRecognition()}return W.jsx(W.Fragment,{children:W.jsxs("div",{className:"fixed bottom-0 inset-x-0 flex flex-col h-full w-full",children:[W.jsx("div",{ref:s,className:"flex-grow m-auto w-full p-2 text-3xl text-left leading-snug max-w-6xl overflow-auto",children:t}),W.jsx("div",{className:"flex items-center justify-center py-4 border-t-2 border-gray-500",children:n?W.jsxs(Dd,{onClick:f,children:[W.jsx(CD,{className:"mr-2 h-4 w-4"})," Stop"]}):W.jsxs(Dd,{onClick:p,children:[W.jsx(SD,{className:"mr-2 h-4 w-4"})," Start"]})})]})})}function RD(){const{toast:e}=hP(),[t,r]=C.useState(ht.Home);C.useEffect(()=>{if(t!==ht.Home)return;const o=Zt.fromCookie("accessToken"),a=Zt.fromCookie("refreshToken");o&&!o.isExpired?i(ht.Speech):a&&!a.isExpired?zP.refreshToken(a).then(s=>{new Zt(s.accessToken).storeInCookie("accessToken"),new Zt(s.refreshToken).storeInCookie("refreshToken"),i(ht.Speech)}).catch(s=>{var l;const c=(l=s.response)==null?void 0:l.data,u=Td.getErrorMessage(c);n(u),i(ht.Login)}):i(ht.Login)},[t]);const n=o=>{e({variant:"destructive",description:o,duration:5e3})},i=o=>{r(o)};return W.jsx(DT,{defaultTheme:"system",storageKey:"vite-ui-theme",children:W.jsxs(Ah.Provider,{value:{displayToast:n,navigateTo:i},children:[t==ht.Login&&W.jsx(q_,{}),t==ht.Speech&&W.jsx(PD,{}),t==ht.Home&&W.jsx("div",{className:"absolute inset-0 grid place-content-center",children:W.jsx(LP,{})}),W.jsx(vI,{})]})})}Cp.createRoot(document.getElementById("root")).render(W.jsx(mI,{clientId:"798545760720-dunacdvavoftqbj6sb81d20857sbncil.apps.googleusercontent.com",children:W.jsx(RD,{})}));
